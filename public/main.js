"use strict";(self.webpackChunkPixCreator=self.webpackChunkPixCreator||[]).push([[179],{6217:(rn,Ke,j)=>{j.d(Ke,{nm:()=>Zr});var S=j(2122);j(4650),j(259);var pt=j(5861),nt=j(9681),yt=j(4859),bt=j(2090),dt=j(1877);const H=new Map,Be={activated:!1,tokenObservers:[]},zt={initialized:!1,enabled:!1};function It(Ee){return H.get(Ee)||Object.assign({},Be)}function xt(){return zt}const Ve="https://content-firebaseappcheck.googleapis.com/v1",Ge="exchangeDebugToken",at={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class St{constructor(Me,Pe,$e,ct,Lt){if(this.operation=Me,this.retryPolicy=Pe,this.getWaitDuration=$e,this.lowerBound=ct,this.upperBound=Lt,this.pending=null,this.nextErrorWaitInterval=ct,ct>Lt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Me){var Pe=this;return(0,pt.Z)(function*(){Pe.stop();try{Pe.pending=new bt.BH,yield function Nt(Ee){return new Promise(Me=>{setTimeout(Me,Ee)})}(Pe.getNextRun(Me)),Pe.pending.resolve(),yield Pe.pending.promise,Pe.pending=new bt.BH,yield Pe.operation(),Pe.pending.resolve(),yield Pe.pending.promise,Pe.process(!0).catch(()=>{})}catch($e){Pe.retryPolicy($e)?Pe.process(!1).catch(()=>{}):Pe.stop()}})()}getNextRun(Me){if(Me)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Pe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Pe}}}const kt=new bt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function rr(Ee,Me){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,pt.Z)(function*({url:Ee,body:Me},Pe){const $e={"Content-Type":"application/json"},ct=Pe.getImmediate({optional:!0});if(ct){const Pi=yield ct.getHeartbeatsHeader();Pi&&($e["X-Firebase-Client"]=Pi)}const Lt={method:"POST",body:JSON.stringify(Me),headers:$e};let In,mn;try{In=yield fetch(Ee,Lt)}catch(Pi){throw kt.create("fetch-network-error",{originalErrorMessage:Pi?.message})}if(200!==In.status)throw kt.create("fetch-status-error",{httpStatus:In.status});try{mn=yield In.json()}catch(Pi){throw kt.create("fetch-parse-error",{originalErrorMessage:Pi?.message})}const _r=mn.ttl.match(/^([\d.]+)(s)$/);if(!_r||!_r[2]||isNaN(Number(_r[1])))throw kt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${mn.ttl}`});const ni=1e3*Number(_r[1]),di=Date.now();return{token:mn.token,expireTimeMillis:di+ni,issuedAtTimeMillis:di}})).apply(this,arguments)}const On="firebase-app-check-database",cr=1,lr="firebase-app-check-store";let Jn=null;function Gr(Ee,Me){return gn.apply(this,arguments)}function gn(){return(gn=(0,pt.Z)(function*(Ee,Me){const $e=(yield function _t(){return Jn||(Jn=new Promise((Ee,Me)=>{try{const Pe=indexedDB.open(On,cr);Pe.onsuccess=$e=>{Ee($e.target.result)},Pe.onerror=$e=>{var ct;Me(kt.create("storage-open",{originalErrorMessage:null===(ct=$e.target.error)||void 0===ct?void 0:ct.message}))},Pe.onupgradeneeded=$e=>{0===$e.oldVersion&&$e.target.result.createObjectStore(lr,{keyPath:"compositeKey"})}}catch(Pe){Me(kt.create("storage-open",{originalErrorMessage:Pe?.message}))}}),Jn)}()).transaction(lr,"readwrite"),Lt=$e.objectStore(lr).put({compositeKey:Ee,value:Me});return new Promise((In,mn)=>{Lt.onsuccess=_r=>{In()},$e.onerror=_r=>{var ni;mn(kt.create("storage-set",{originalErrorMessage:null===(ni=_r.target.error)||void 0===ni?void 0:ni.message}))}})})).apply(this,arguments)}const pr=new dt.Yd("@firebase/app-check");function vr(Ee,Me){return(0,bt.hl)()?function Jr(Ee,Me){return Gr(function ir(Ee){return`${Ee.options.appId}-${Ee.name}`}(Ee),Me)}(Ee,Me).catch(Pe=>{pr.warn(`Failed to write token to IndexedDB. Error: ${Pe}`)}):Promise.resolve()}function bn(){return Or.apply(this,arguments)}function Or(){return(Or=(0,pt.Z)(function*(){const Ee=xt();if(Ee.enabled&&Ee.token)return Ee.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ht={error:"UNKNOWN_ERROR"};function mt(Ee){return bt.US.encodeString(JSON.stringify(Ee),!1)}function Ne(Ee){return le.apply(this,arguments)}function le(){return(le=(0,pt.Z)(function*(Ee,Me=!1){const Pe=Ee.app;!function Ft(Ee){if(!It(Ee).activated)throw kt.create("use-before-activation",{appName:Ee.name})}(Pe);const $e=It(Pe);let Lt,ct=$e.token;if(ct&&!He(ct)&&($e.token=void 0,ct=void 0),!ct){const _r=yield $e.cachedTokenPromise;_r&&(He(_r)?ct=_r:yield vr(Pe,void 0))}if(!Me&&ct&&He(ct))return{token:ct.token};let mn,In=!1;if(function mi(){return xt().enabled}()){$e.exchangeTokenPromise||($e.exchangeTokenPromise=rr(function br(Ee,Me){const{projectId:Pe,appId:$e,apiKey:ct}=Ee.options;return{url:`${Ve}/projects/${Pe}/apps/${$e}:${Ge}?key=${ct}`,body:{debug_token:Me}}}(Pe,yield bn()),Ee.heartbeatServiceProvider).finally(()=>{$e.exchangeTokenPromise=void 0}),In=!0);const _r=yield $e.exchangeTokenPromise;return yield vr(Pe,_r),$e.token=_r,{token:_r.token}}try{$e.exchangeTokenPromise||($e.exchangeTokenPromise=$e.provider.getToken().finally(()=>{$e.exchangeTokenPromise=void 0}),In=!0),ct=yield It(Pe).exchangeTokenPromise}catch(_r){"appCheck/throttled"===_r.code?pr.warn(_r.message):pr.error(_r),Lt=_r}return ct?Lt?mn=He(ct)?{token:ct.token,internalError:Lt}:Te(Lt):(mn={token:ct.token},$e.token=ct,yield vr(Pe,ct)):mn=Te(Lt),In&&function ge(Ee,Me){const Pe=It(Ee).tokenObservers;for(const $e of Pe)try{"EXTERNAL"===$e.type&&null!=Me.error?$e.error(Me.error):$e.next(Me)}catch{}}(Pe,mn),mn})).apply(this,arguments)}function Oe(Ee,Me){const Pe=It(Ee),$e=Pe.tokenObservers.filter(ct=>ct.next!==Me);0===$e.length&&Pe.tokenRefresher&&Pe.tokenRefresher.isRunning()&&Pe.tokenRefresher.stop(),Pe.tokenObservers=$e}function ne(Ee){const{app:Me}=Ee,Pe=It(Me);let $e=Pe.tokenRefresher;$e||($e=function ie(Ee){const{app:Me}=Ee;return new St((0,pt.Z)(function*(){let $e;if($e=It(Me).token?yield Ne(Ee,!0):yield Ne(Ee),$e.error)throw $e.error;if($e.internalError)throw $e.internalError}),()=>!0,()=>{const Pe=It(Me);if(Pe.token){let $e=Pe.token.issuedAtTimeMillis+.5*(Pe.token.expireTimeMillis-Pe.token.issuedAtTimeMillis)+3e5;return $e=Math.min($e,Pe.token.expireTimeMillis-3e5),Math.max(0,$e-Date.now())}return 0},at.RETRIAL_MIN_WAIT,at.RETRIAL_MAX_WAIT)}(Ee),Pe.tokenRefresher=$e),!$e.isRunning()&&Pe.isTokenAutoRefreshEnabled&&$e.start()}function He(Ee){return Ee.expireTimeMillis-Date.now()>0}function Te(Ee){return{token:mt(Ht),error:Ee}}class jt{constructor(Me,Pe){this.app=Me,this.heartbeatServiceProvider=Pe}_delete(){const{tokenObservers:Me}=It(this.app);for(const Pe of Me)Oe(this.app,Pe.next);return Promise.resolve()}}const Hn="app-check-internal";!function ur(){(0,nt._registerComponent)(new yt.wA("app-check",Ee=>function yn(Ee,Me){return new jt(Ee,Me)}(Ee.getProvider("app").getImmediate(),Ee.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ee,Me,Pe)=>{Ee.getProvider(Hn).initialize()})),(0,nt._registerComponent)(new yt.wA(Hn,Ee=>function pn(Ee){return{getToken:Me=>Ne(Ee,Me),addTokenListener:Me=>function pe(Ee,Me,Pe,$e){const{app:ct}=Ee,Lt=It(ct);if(Lt.tokenObservers=[...Lt.tokenObservers,{next:Pe,error:$e,type:Me}],Lt.token&&He(Lt.token)){const mn=Lt.token;Promise.resolve().then(()=>{Pe({token:mn.token}),ne(Ee)}).catch(()=>{})}Lt.cachedTokenPromise.then(()=>ne(Ee))}(Ee,"INTERNAL",Me),removeTokenListener:Me=>Oe(Ee.app,Me)}}(Ee.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,nt.registerVersion)("@firebase/app-check","0.6.3")}();class Zr{constructor(){return(0,S.vb)("app-check")}}typeof window<"u"&&window},1205:(rn,Ke,j)=>{j.d(Ke,{zQ:()=>Ve,rT:()=>zt,f7:()=>Zt,L6:()=>H,_Q:()=>Be,lh:()=>It,Qv:()=>dt,nw:()=>xt});var S=j(4650),B=j(7579),K=j(9646),Ce=j(9751),we=j(8996),Ie=j(6451),te=j(5363),Re=j(3900),ke=j(4004),de=j(6063);class me extends B.x{constructor(Ge=1/0,at=1/0,et=de.l){super(),this._bufferSize=Ge,this._windowTime=at,this._timestampProvider=et,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=at===1/0,this._bufferSize=Math.max(1,Ge),this._windowTime=Math.max(1,at)}next(Ge){const{isStopped:at,_buffer:et,_infiniteTimeWindow:St,_timestampProvider:Nt,_windowTime:_n}=this;at||(et.push(Ge),!St&&et.push(Nt.now()+_n)),this._trimBuffer(),super.next(Ge)}_subscribe(Ge){this._throwIfClosed(),this._trimBuffer();const at=this._innerSubscribe(Ge),{_infiniteTimeWindow:et,_buffer:St}=this,Nt=St.slice();for(let _n=0;_n<Nt.length&&!Ge.closed;_n+=et?1:2)Ge.next(Nt[_n]);return this._checkFinalizedStatuses(Ge),at}_trimBuffer(){const{_bufferSize:Ge,_timestampProvider:at,_buffer:et,_infiniteTimeWindow:St}=this,Nt=(St?1:2)*Ge;if(Ge<1/0&&Nt<et.length&&et.splice(0,et.length-Nt),!St){const _n=at.now();let kt=0;for(let Kt=1;Kt<et.length&&et[Kt]<=_n;Kt+=2)kt=Kt;kt&&et.splice(0,kt+1)}}}var Se=j(3099);function Tt(Ue,Ge,at){let et,St=!1;return Ue&&"object"==typeof Ue?({bufferSize:et=1/0,windowTime:Ge=1/0,refCount:St=!1,scheduler:at}=Ue):et=Ue??1/0,(0,Se.B)({connector:()=>new me(et,Ge,at),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:St})}var Fe=j(590),Pt=j(576);function Xt(Ue,Ge){return(0,Pt.m)(Ge)?(0,Re.w)(()=>Ue,Ge):(0,Re.w)(()=>Ue)}var Je=j(9468),ut=j(9300),ft=j(2122),Et=j(2011),pt=j(6895),nt=j(6217);j(9260);const dt=new S.OlP("angularfire2.auth.use-emulator"),H=new S.OlP("angularfire2.auth.settings"),Be=new S.OlP("angularfire2.auth.tenant-id"),zt=new S.OlP("angularfire2.auth.langugage-code"),It=new S.OlP("angularfire2.auth.use-device-language"),Zt=new S.OlP("angularfire.auth.persistence"),xt=(Ue,Ge,at,et,St,Nt,_n,kt)=>(0,Et.cc)(`${Ue.name}.auth`,"AngularFireAuth",Ue.name,()=>{const Kt=Ge.runOutsideAngular(()=>Ue.auth());if(at&&Kt.useEmulator(...at),et&&(Kt.tenantId=et),Kt.languageCode=St,Nt&&Kt.useDeviceLanguage(),_n)for(const[Ft,$t]of Object.entries(_n))Kt.settings[Ft]=$t;return kt&&Kt.setPersistence(kt),Kt},[at,et,St,Nt,_n,kt]);let Ve=(()=>{class Ue{constructor(at,et,St,Nt,_n,kt,Kt,Ft,$t,Tn,rr,Gn){const Nn=new B.x,kr=(0,K.of)(void 0).pipe((0,te.Q)(_n.outsideAngular),(0,Re.w)(()=>Nt.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,407)))),(0,ke.U)(()=>(0,Et.on)(at,Nt,et)),(0,ke.U)(br=>xt(br,Nt,kt,Ft,$t,Tn,Kt,rr)),Tt({bufferSize:1,refCount:!1}));if((0,pt.PM)(St))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,K.of)(null);else{kr.pipe((0,Fe.P)()).subscribe();const On=kr.pipe((0,Re.w)(gt=>gt.getRedirectResult().then(Jn=>Jn,()=>null)),ft.iC,Tt({bufferSize:1,refCount:!1})),cr=kr.pipe((0,Re.w)(gt=>new Ce.y(Jn=>({unsubscribe:Nt.runOutsideAngular(()=>gt.onAuthStateChanged(_t=>Jn.next(_t),_t=>Jn.error(_t),()=>Jn.complete()))})))),lr=kr.pipe((0,Re.w)(gt=>new Ce.y(Jn=>({unsubscribe:Nt.runOutsideAngular(()=>gt.onIdTokenChanged(_t=>Jn.next(_t),_t=>Jn.error(_t),()=>Jn.complete()))}))));this.authState=On.pipe(Xt(cr),(0,Je.R)(_n.outsideAngular),(0,te.Q)(_n.insideAngular)),this.user=On.pipe(Xt(lr),(0,Je.R)(_n.outsideAngular),(0,te.Q)(_n.insideAngular)),this.idToken=this.user.pipe((0,Re.w)(gt=>gt?(0,we.D)(gt.getIdToken()):(0,K.of)(null))),this.idTokenResult=this.user.pipe((0,Re.w)(gt=>gt?(0,we.D)(gt.getIdTokenResult()):(0,K.of)(null))),this.credential=(0,Ie.T)(On,Nn,this.authState.pipe((0,ut.h)(gt=>!gt))).pipe((0,ke.U)(gt=>gt?.user?gt:null),(0,Je.R)(_n.outsideAngular),(0,te.Q)(_n.insideAngular))}return(0,Et.pX)(this,kr,Nt,{spy:{apply:(br,On,cr)=>{(br.startsWith("signIn")||br.startsWith("createUser"))&&cr.then(lr=>Nn.next(lr))}}})}}return Ue.\u0275fac=function(at){return new(at||Ue)(S.LFG(Et.Dh),S.LFG(Et.xv,8),S.LFG(S.Lbi),S.LFG(S.R0b),S.LFG(ft.HU),S.LFG(dt,8),S.LFG(H,8),S.LFG(Be,8),S.LFG(zt,8),S.LFG(It,8),S.LFG(Zt,8),S.LFG(nt.nm,8))},Ue.\u0275prov=S.Yz7({token:Ue,factory:Ue.\u0275fac,providedIn:"any"}),Ue})()},5197:(rn,Ke,j)=>{j.d(Ke,{KQ:()=>Z4,JS:()=>K4});var S=j(4650),B=j(4986),K=j(9751),Ce=j(9646),we=j(6451),Ie=j(4004),te=j(3099),Re=j(3900),ke=j(5026),de=j(1884),me=j(4482),Se=j(5403),Tt=j(8421),Fe=j(4671),Pt=j(5032),Xt=j(7669),ft=j(2122),Et=j(2011),nt=(j(407),j(3942)),yt=j(4859),bt=j(5861),dt=j(9681),H=j(2090),Be=j(1877);const zt="@firebase/database";let Zt="";function xt(h){Zt=h}class Ve{constructor(l){this.domStorage_=l,this.prefix_="firebase:"}set(l,u){null==u?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),(0,H.Wl)(u))}get(l){const u=this.domStorage_.getItem(this.prefixedName_(l));return null==u?null:(0,H.cI)(u)}remove(l){this.domStorage_.removeItem(this.prefixedName_(l))}prefixedName_(l){return this.prefix_+l}toString(){return this.domStorage_.toString()}}class Qe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(l,u){null==u?delete this.cache_[l]:this.cache_[l]=u}get(l){return(0,H.r3)(this.cache_,l)?this.cache_[l]:null}remove(l){delete this.cache_[l]}}const Ue=function(h){try{if(typeof window<"u"&&typeof window[h]<"u"){const l=window[h];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new Ve(l)}}catch{}return new Qe},Ge=Ue("localStorage"),at=Ue("sessionStorage"),et=new Be.Yd("@firebase/database"),St=function(){let h=1;return function(){return h++}}(),Nt=function(h){const l=(0,H.dS)(h),u=new H.gQ;u.update(l);const m=u.digest();return H.US.encodeByteArray(m)},_n=function(...h){let l="";for(let u=0;u<h.length;u++){const m=h[u];Array.isArray(m)||m&&"object"==typeof m&&"number"==typeof m.length?l+=_n.apply(null,m):l+="object"==typeof m?(0,H.Wl)(m):m,l+=" "}return l};let kt=null,Kt=!0;const Ft=function(h,l){(0,H.hu)(!l||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(et.logLevel=Be.in.VERBOSE,kt=et.log.bind(et),l&&at.set("logging_enabled",!0)):"function"==typeof h?kt=h:(kt=null,at.remove("logging_enabled"))},$t=function(...h){if(!0===Kt&&(Kt=!1,null===kt&&!0===at.get("logging_enabled")&&Ft(!0)),kt){const l=_n.apply(null,h);kt(l)}},Tn=function(h){return function(...l){$t(h,...l)}},rr=function(...h){const l="FIREBASE INTERNAL ERROR: "+_n(...h);et.error(l)},Gn=function(...h){const l=`FIREBASE FATAL ERROR: ${_n(...h)}`;throw et.error(l),new Error(l)},Nn=function(...h){const l="FIREBASE WARNING: "+_n(...h);et.warn(l)},br=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},cr="[MIN_NAME]",lr="[MAX_NAME]",gt=function(h,l){if(h===l)return 0;if(h===cr||l===lr)return-1;if(l===cr||h===lr)return 1;{const u=Bn(h),m=Bn(l);return null!==u?null!==m?u-m==0?h.length-l.length:u-m:-1:null!==m?1:h<l?-1:1}},Jn=function(h,l){return h===l?0:h<l?-1:1},_t=function(h,l){if(l&&h in l)return l[h];throw new Error("Missing required key ("+h+") in object: "+(0,H.Wl)(l))},vn=function(h){if("object"!=typeof h||null===h)return(0,H.Wl)(h);const l=[];for(const m in h)l.push(m);l.sort();let u="{";for(let m=0;m<l.length;m++)0!==m&&(u+=","),u+=(0,H.Wl)(l[m]),u+=":",u+=vn(h[l[m]]);return u+="}",u},Jr=function(h,l){const u=h.length;if(u<=l)return[h];const m=[];for(let b=0;b<u;b+=l)m.push(h.substring(b,b+l>u?u:b+l));return m};function An(h,l){for(const u in h)h.hasOwnProperty(u)&&l(u,h[u])}const un=function(h){(0,H.hu)(!br(h),"Invalid JSON number");const m=1023;let b,z,V,Q,ce;0===h?(z=0,V=0,b=1/h==-1/0?1:0):(b=h<0,(h=Math.abs(h))>=Math.pow(2,1-m)?(Q=Math.min(Math.floor(Math.log(h)/Math.LN2),m),z=Q+m,V=Math.round(h*Math.pow(2,52-Q)-Math.pow(2,52))):(z=0,V=Math.round(h/Math.pow(2,-1074))));const ve=[];for(ce=52;ce;ce-=1)ve.push(V%2?1:0),V=Math.floor(V/2);for(ce=11;ce;ce-=1)ve.push(z%2?1:0),z=Math.floor(z/2);ve.push(b?1:0),ve.reverse();const rt=ve.join("");let ot="";for(ce=0;ce<64;ce+=8){let Mt=parseInt(rt.substr(ce,8),2).toString(16);1===Mt.length&&(Mt="0"+Mt),ot+=Mt}return ot.toLowerCase()},Gt=new RegExp("^-?(0*)\\d{1,10}$"),Bn=function(h){if(Gt.test(h)){const l=Number(h);if(l>=-2147483648&&l<=2147483647)return l}return null},Mn=function(h){try{h()}catch(l){setTimeout(()=>{throw Nn("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},vr=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ai=function(h,l){const u=setTimeout(h,l);return"number"==typeof u&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(u):"object"==typeof u&&u.unref&&u.unref(),u};class er{constructor(l,u){this.appName_=l,this.appCheckProvider=u,this.appCheck=u?.getImmediate({optional:!0}),this.appCheck||u?.get().then(m=>this.appCheck=m)}getToken(l){return this.appCheck?this.appCheck.getToken(l):new Promise((u,m)=>{setTimeout(()=>{this.appCheck?this.getToken(l).then(u,m):u(null)},0)})}addTokenChangeListener(l){var u;null===(u=this.appCheckProvider)||void 0===u||u.get().then(m=>m.addTokenListener(l))}notifyForInvalidToken(){Nn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class mi{constructor(l,u,m){this.appName_=l,this.firebaseOptions_=u,this.authProvider_=m,this.auth_=null,this.auth_=m.getImmediate({optional:!0}),this.auth_||m.onInit(b=>this.auth_=b)}getToken(l){return this.auth_?this.auth_.getToken(l).catch(u=>u&&"auth/token-not-initialized"===u.code?($t("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(u)):new Promise((u,m)=>{setTimeout(()=>{this.auth_?this.getToken(l).then(u,m):u(null)},0)})}addTokenChangeListener(l){this.auth_?this.auth_.addAuthTokenListener(l):this.authProvider_.get().then(u=>u.addAuthTokenListener(l))}removeTokenChangeListener(l){this.authProvider_.get().then(u=>u.removeAuthTokenListener(l))}notifyForInvalidToken(){let l='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';l+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Nn(l)}}let bn=(()=>{class h{constructor(u){this.accessToken=u}getToken(u){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(u){u(this.accessToken)}removeTokenChangeListener(u){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const le=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ie="websocket",ge="long_polling";class He{constructor(l,u,m,b,z=!1,V="",Q=!1,ce=!1){this.secure=u,this.namespace=m,this.webSocketOnly=b,this.nodeAdmin=z,this.persistenceKey=V,this.includeNamespaceInQueryParams=Q,this.isUsingEmulator=ce,this._host=l.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ge.get("host:"+l)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&Ge.set("host:"+this._host,this.internalHost))}toString(){let l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function jt(h,l,u){let m;if((0,H.hu)("string"==typeof l,"typeof type must == string"),(0,H.hu)("object"==typeof u,"typeof params must == object"),l===ie)m=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(l!==ge)throw new Error("Unknown connection type: "+l);m=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function Te(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(u.ns=h.namespace);const b=[];return An(u,(z,V)=>{b.push(z+"="+V)}),m+b.join("&")}class yn{constructor(){this.counters_={}}incrementCounter(l,u=1){(0,H.r3)(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=u}get(){return(0,H.p$)(this.counters_)}}const pn={},Dn={};function Ot(h){const l=h.toString();return pn[l]||(pn[l]=new yn),pn[l]}class De{constructor(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(l,u){this.closeAfterResponse=l,this.onClose=u,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(l,u){for(this.pendingResponses[l]=u;this.pendingResponses[this.currentResponseNum];){const m=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let b=0;b<m.length;++b)m[b]&&Mn(()=>{this.onMessage_(m[b])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Mr{constructor(l,u,m,b,z,V,Q){this.connId=l,this.repoInfo=u,this.applicationId=m,this.appCheckToken=b,this.authToken=z,this.transportSessionId=V,this.lastSessionId=Q,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Tn(l),this.stats_=Ot(u),this.urlFn=ce=>(this.appCheckToken&&(ce.ac=this.appCheckToken),jt(u,ge,ce))}open(l,u){this.curSegmentNum=0,this.onDisconnect_=u,this.myPacketOrderer=new De(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,H.Yr)()||"complete"===document.readyState)h();else{let l=!1;const u=function(){document.body?l||(l=!0,h()):setTimeout(u,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",u,!1),window.addEventListener("load",u,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&u()}),window.attachEvent("onload",u))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ei((...z)=>{const[V,Q,ce,ve,rt]=z;if(this.incrementIncomingBytes_(z),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===V)this.id=Q,this.password=ce;else{if("close"!==V)throw new Error("Unrecognized command received: "+V);Q?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(Q,()=>{this.onClosed_()})):this.onClosed_()}},(...z)=>{const[V,Q]=z;this.incrementIncomingBytes_(z),this.myPacketOrderer.handleResponse(V,Q)},()=>{this.onClosed_()},this.urlFn);const m={start:"t"};m.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(m.cb=this.scriptTagHolder.uniqueCallbackIdentifier),m.v="5",this.transportSessionId&&(m.s=this.transportSessionId),this.lastSessionId&&(m.ls=this.lastSessionId),this.applicationId&&(m.p=this.applicationId),this.appCheckToken&&(m.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&le.test(location.hostname)&&(m.r="f");const b=this.urlFn(m);this.log_("Connecting via long-poll to "+b),this.scriptTagHolder.addTag(b,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Mr.forceAllow_=!0}static forceDisallow(){Mr.forceDisallow_=!0}static isAvailable(){return!((0,H.Yr)()||!Mr.forceAllow_&&(Mr.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(l){const u=(0,H.Wl)(l);this.bytesSent+=u.length,this.stats_.incrementCounter("bytes_sent",u.length);const m=(0,H.h$)(u),b=Jr(m,1840);for(let z=0;z<b.length;z++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,b.length,b[z]),this.curSegmentNum++}addDisconnectPingFrame(l,u){if((0,H.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const m={dframe:"t"};m.id=l,m.pw=u,this.myDisconnFrame.src=this.urlFn(m),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(l){const u=(0,H.Wl)(l).length;this.bytesReceived+=u,this.stats_.incrementCounter("bytes_received",u)}}class ei{constructor(l,u,m,b){if(this.onDisconnect=m,this.urlFn=b,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,H.Yr)())this.commandCB=l,this.onMessageCB=u;else{this.uniqueCallbackIdentifier=St(),window["pLPCommand"+this.uniqueCallbackIdentifier]=l,window["pRTLPCB"+this.uniqueCallbackIdentifier]=u,this.myIFrame=ei.createIFrame_();let z="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(z='<script>document.domain="'+document.domain+'";<\/script>');const V="<html><body>"+z+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(V),this.myIFrame.doc.close()}catch(Q){$t("frame writing exception"),Q.stack&&$t(Q.stack),$t(Q)}}}static createIFrame_(){const l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||$t("No IE domain setting required")}catch{const m=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+m+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const l=this.onDisconnect;l&&(this.onDisconnect=null,l())}startLongPoll(l,u){for(this.myID=l,this.myPW=u,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;let u=this.urlFn(l),m="",b=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+m.length<=1870;){const V=this.pendingSegs.shift();m=m+"&seg"+b+"="+V.seg+"&ts"+b+"="+V.ts+"&d"+b+"="+V.d,b++}return u+=m,this.addLongPollTag_(u,this.currentSerial),!0}return!1}enqueueSegment(l,u,m){this.pendingSegs.push({seg:l,ts:u,d:m}),this.alive&&this.newRequest_()}addLongPollTag_(l,u){this.outstandingRequests.add(u);const m=()=>{this.outstandingRequests.delete(u),this.newRequest_()},b=setTimeout(m,Math.floor(25e3));this.addTag(l,()=>{clearTimeout(b),m()})}addTag(l,u){(0,H.Yr)()?this.doNodeLongPoll(l,u):setTimeout(()=>{try{if(!this.sendNewPolls)return;const m=this.myIFrame.doc.createElement("script");m.type="text/javascript",m.async=!0,m.src=l,m.onload=m.onreadystatechange=function(){const b=m.readyState;(!b||"loaded"===b||"complete"===b)&&(m.onload=m.onreadystatechange=null,m.parentNode&&m.parentNode.removeChild(m),u())},m.onerror=()=>{$t("Long-poll script failed to load: "+l),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(m)}catch{}},Math.floor(1))}}let Hn=null;typeof MozWebSocket<"u"?Hn=MozWebSocket:typeof WebSocket<"u"&&(Hn=WebSocket);let ur=(()=>{class h{constructor(u,m,b,z,V,Q,ce){this.connId=u,this.applicationId=b,this.appCheckToken=z,this.authToken=V,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Tn(this.connId),this.stats_=Ot(m),this.connURL=h.connectionURL_(m,Q,ce,z,b),this.nodeAdmin=m.nodeAdmin}static connectionURL_(u,m,b,z,V){const Q={v:"5"};return!(0,H.Yr)()&&typeof location<"u"&&location.hostname&&le.test(location.hostname)&&(Q.r="f"),m&&(Q.s=m),b&&(Q.ls=b),z&&(Q.ac=z),V&&(Q.p=V),jt(u,ie,Q)}open(u,m){this.onDisconnect=m,this.onMessage=u,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ge.set("previous_websocket_failure",!0);try{let b;if((0,H.Yr)()){b={headers:{"User-Agent":`Firebase/5/${Zt}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(b.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(b.headers["X-Firebase-AppCheck"]=this.appCheckToken);const V=process.env,Q=0===this.connURL.indexOf("wss://")?V.HTTPS_PROXY||V.https_proxy:V.HTTP_PROXY||V.http_proxy;Q&&(b.proxy={origin:Q})}this.mySock=new Hn(this.connURL,[],b)}catch(b){this.log_("Error instantiating WebSocket.");const z=b.message||b.data;return z&&this.log_(z),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=b=>{this.handleIncomingFrame(b)},this.mySock.onerror=b=>{this.log_("WebSocket error.  Closing connection.");const z=b.message||b.data;z&&this.log_(z),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let u=!1;if(typeof navigator<"u"&&navigator.userAgent){const b=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);b&&b.length>1&&parseFloat(b[1])<4.4&&(u=!0)}return!u&&null!==Hn&&!h.forceDisallow_}static previouslyFailed(){return Ge.isInMemoryStorage||!0===Ge.get("previous_websocket_failure")}markConnectionHealthy(){Ge.remove("previous_websocket_failure")}appendFrame_(u){if(this.frames.push(u),this.frames.length===this.totalFrames){const m=this.frames.join("");this.frames=null;const b=(0,H.cI)(m);this.onMessage(b)}}handleNewFrameCount_(u){this.totalFrames=u,this.frames=[]}extractFrameCount_(u){if((0,H.hu)(null===this.frames,"We already have a frame buffer"),u.length<=6){const m=Number(u);if(!isNaN(m))return this.handleNewFrameCount_(m),null}return this.handleNewFrameCount_(1),u}handleIncomingFrame(u){if(null===this.mySock)return;const m=u.data;if(this.bytesReceived+=m.length,this.stats_.incrementCounter("bytes_received",m.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(m);else{const b=this.extractFrameCount_(m);null!==b&&this.appendFrame_(b)}}send(u){this.resetKeepAlive();const m=(0,H.Wl)(u);this.bytesSent+=m.length,this.stats_.incrementCounter("bytes_sent",m.length);const b=Jr(m,16384);b.length>1&&this.sendString_(String(b.length));for(let z=0;z<b.length;z++)this.sendString_(b[z])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(u){try{this.mySock.send(u)}catch(m){this.log_("Exception thrown from WebSocket.send():",m.message||m.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})(),Ur=(()=>{class h{constructor(u){this.initTransports_(u)}static get ALL_TRANSPORTS(){return[Mr,ur]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(u){const m=ur&&ur.isAvailable();let b=m&&!ur.previouslyFailed();if(u.webSocketOnly&&(m||Nn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),b=!0),b)this.transports_=[ur];else{const z=this.transports_=[];for(const V of h.ALL_TRANSPORTS)V&&V.isAvailable()&&z.push(V);h.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return h.globalTransportInitialized_=!1,h})();class s1{constructor(l,u,m,b,z,V,Q,ce,ve,rt){this.id=l,this.repoInfo_=u,this.applicationId_=m,this.appCheckToken_=b,this.authToken_=z,this.onMessage_=V,this.onReady_=Q,this.onDisconnect_=ce,this.onKill_=ve,this.lastSessionId=rt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Tn("c:"+this.id+":"),this.transportManager_=new Ur(u),this.log_("Connection created"),this.start_()}start_(){const l=this.transportManager_.initialTransport();this.conn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const u=this.connReceiver_(this.conn_),m=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(u,m)},Math.floor(0));const b=l.healthyTimeout||0;b>0&&(this.healthyTimeout_=ai(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(b)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(l){return u=>{l===this.conn_?this.onConnectionLost_(u):l===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(l){return u=>{2!==this.state_&&(l===this.rx_?this.onPrimaryMessageReceived_(u):l===this.secondaryConn_?this.onSecondaryMessageReceived_(u):this.log_("message on old connection"))}}sendRequest(l){this.sendData_({t:"d",d:l})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(l){if("t"in l){const u=l.t;"a"===u?this.upgradeIfSecondaryHealthy_():"r"===u?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===u&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(l){const u=_t("t",l),m=_t("d",l);if("c"===u)this.onSecondaryControl_(m);else{if("d"!==u)throw new Error("Unknown protocol layer: "+u);this.pendingDataMessages.push(m)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(l){const u=_t("t",l),m=_t("d",l);"c"===u?this.onControl_(m):"d"===u&&this.onDataMessage_(m)}onDataMessage_(l){this.onPrimaryResponse_(),this.onMessage_(l)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(l){const u=_t("t",l);if("d"in l){const m=l.d;if("h"===u){const b=Object.assign({},m);this.repoInfo_.isUsingEmulator&&(b.h=this.repoInfo_.host),this.onHandshake_(b)}else if("n"===u){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let b=0;b<this.pendingDataMessages.length;++b)this.onDataMessage_(this.pendingDataMessages[b]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===u?this.onConnectionShutdown_(m):"r"===u?this.onReset_(m):"e"===u?rr("Server Error: "+m):"o"===u?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rr("Unknown control packet command: "+u)}}onHandshake_(l){const u=l.ts,m=l.v,b=l.h;this.sessionId=l.s,this.repoInfo_.host=b,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,u),"5"!==m&&Nn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)}startUpgrade_(l){this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const u=this.connReceiver_(this.secondaryConn_),m=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(u,m),ai(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.host=l,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(l,u){this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(u,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ai(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()}onConnectionLost_(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ge.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class C1{put(l,u,m,b){}merge(l,u,m,b){}refreshAuthToken(l){}refreshAppCheckToken(l){}onDisconnectPut(l,u,m){}onDisconnectMerge(l,u,m){}onDisconnectCancel(l,u){}reportStats(l){}}class Ti{constructor(l){this.allowedEvents_=l,this.listeners_={},(0,H.hu)(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}trigger(l,...u){if(Array.isArray(this.listeners_[l])){const m=[...this.listeners_[l]];for(let b=0;b<m.length;b++)m[b].callback.apply(m[b].context,u)}}on(l,u,m){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:u,context:m});const b=this.getInitialEvent(l);b&&u.apply(m,b)}off(l,u,m){this.validateEventType_(l);const b=this.listeners_[l]||[];for(let z=0;z<b.length;z++)if(b[z].callback===u&&(!m||m===b[z].context))return void b.splice(z,1)}validateEventType_(l){(0,H.hu)(this.allowedEvents_.find(u=>u===l),"Unknown event: "+l)}}class Ee extends Ti{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,H.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ee}getInitialEvent(l){return(0,H.hu)("online"===l,"Unknown event type: "+l),[this.online_]}currentlyOnline(){return this.online_}}const Me=32,Pe=768;class $e{constructor(l,u){if(void 0===u){this.pieces_=l.split("/");let m=0;for(let b=0;b<this.pieces_.length;b++)this.pieces_[b].length>0&&(this.pieces_[m]=this.pieces_[b],m++);this.pieces_.length=m,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=u}toString(){let l="";for(let u=this.pieceNum_;u<this.pieces_.length;u++)""!==this.pieces_[u]&&(l+="/"+this.pieces_[u]);return l||"/"}}function ct(){return new $e("")}function Lt(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function In(h){return h.pieces_.length-h.pieceNum_}function mn(h){let l=h.pieceNum_;return l<h.pieces_.length&&l++,new $e(h.pieces_,l)}function _r(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function di(h,l=0){return h.pieces_.slice(h.pieceNum_+l)}function Pi(h){if(h.pieceNum_>=h.pieces_.length)return null;const l=[];for(let u=h.pieceNum_;u<h.pieces_.length-1;u++)l.push(h.pieces_[u]);return new $e(l,0)}function fr(h,l){const u=[];for(let m=h.pieceNum_;m<h.pieces_.length;m++)u.push(h.pieces_[m]);if(l instanceof $e)for(let m=l.pieceNum_;m<l.pieces_.length;m++)u.push(l.pieces_[m]);else{const m=l.split("/");for(let b=0;b<m.length;b++)m[b].length>0&&u.push(m[b])}return new $e(u,0)}function jn(h){return h.pieceNum_>=h.pieces_.length}function Br(h,l){const u=Lt(h),m=Lt(l);if(null===u)return l;if(u===m)return Br(mn(h),mn(l));throw new Error("INTERNAL ERROR: innerPath ("+l+") is not within outerPath ("+h+")")}function Co(h,l){const u=di(h,0),m=di(l,0);for(let b=0;b<u.length&&b<m.length;b++){const z=gt(u[b],m[b]);if(0!==z)return z}return u.length===m.length?0:u.length<m.length?-1:1}function ws(h,l){if(In(h)!==In(l))return!1;for(let u=h.pieceNum_,m=l.pieceNum_;u<=h.pieces_.length;u++,m++)if(h.pieces_[u]!==l.pieces_[m])return!1;return!0}function o1(h,l){let u=h.pieceNum_,m=l.pieceNum_;if(In(h)>In(l))return!1;for(;u<h.pieces_.length;){if(h.pieces_[u]!==l.pieces_[m])return!1;++u,++m}return!0}class q1{constructor(l,u){this.errorPrefix_=u,this.parts_=di(l,0),this.byteLength_=Math.max(1,this.parts_.length);for(let m=0;m<this.parts_.length;m++)this.byteLength_+=(0,H.ug)(this.parts_[m]);Hs(this)}}function Hs(h){if(h.byteLength_>Pe)throw new Error(h.errorPrefix_+"has a key path longer than "+Pe+" bytes ("+h.byteLength_+").");if(h.parts_.length>Me)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Me+") or object contains a cycle "+Es(h))}function Es(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class Is extends Ti{constructor(){let l,u;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(u="visibilitychange",l="hidden"):typeof document.mozHidden<"u"?(u="mozvisibilitychange",l="mozHidden"):typeof document.msHidden<"u"?(u="msvisibilitychange",l="msHidden"):typeof document.webkitHidden<"u"&&(u="webkitvisibilitychange",l="webkitHidden")),this.visible_=!0,u&&document.addEventListener(u,()=>{const m=!document[l];m!==this.visible_&&(this.visible_=m,this.trigger("visible",m))},!1)}static getInstance(){return new Is}getInitialEvent(l){return(0,H.hu)("visible"===l,"Unknown event type: "+l),[this.visible_]}}const Fs=1e3;let x1,$r=(()=>{class h extends C1{constructor(u,m,b,z,V,Q,ce,ve){if(super(),this.repoInfo_=u,this.applicationId_=m,this.onDataUpdate_=b,this.onConnectStatus_=z,this.onServerInfoUpdate_=V,this.authTokenProvider_=Q,this.appCheckTokenProvider_=ce,this.authOverride_=ve,this.id=h.nextPersistentConnectionId_++,this.log_=Tn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fs,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ve&&!(0,H.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Is.getInstance().on("visible",this.onVisible_,this),-1===u.host.indexOf("fblocal")&&Ee.getInstance().on("online",this.onOnline_,this)}sendRequest(u,m,b){const z=++this.requestNumber_,V={r:z,a:u,b:m};this.log_((0,H.Wl)(V)),(0,H.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(V),b&&(this.requestCBHash_[z]=b)}get(u){this.initConnection_();const m=new H.BH,z={action:"g",request:{p:u._path.toString(),q:u._queryObject},onComplete:Q=>{const ce=Q.d;"ok"===Q.s?m.resolve(ce):m.reject(ce)}};return this.outstandingGets_.push(z),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),m.promise}listen(u,m,b,z){this.initConnection_();const V=u._queryIdentifier,Q=u._path.toString();this.log_("Listen called for "+Q+" "+V),this.listens.has(Q)||this.listens.set(Q,new Map),(0,H.hu)(u._queryParams.isDefault()||!u._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,H.hu)(!this.listens.get(Q).has(V),"listen() called twice for same path/queryId.");const ce={onComplete:z,hashFn:m,query:u,tag:b};this.listens.get(Q).set(V,ce),this.connected_&&this.sendListen_(ce)}sendGet_(u){const m=this.outstandingGets_[u];this.sendRequest("g",m.request,b=>{delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),m.onComplete&&m.onComplete(b)})}sendListen_(u){const m=u.query,b=m._path.toString(),z=m._queryIdentifier;this.log_("Listen on "+b+" for "+z);const V={p:b};u.tag&&(V.q=m._queryObject,V.t=u.tag),V.h=u.hashFn(),this.sendRequest("q",V,ce=>{const ve=ce.d,rt=ce.s;h.warnOnListenWarnings_(ve,m),(this.listens.get(b)&&this.listens.get(b).get(z))===u&&(this.log_("listen response",ce),"ok"!==rt&&this.removeListen_(b,z),u.onComplete&&u.onComplete(rt,ve))})}static warnOnListenWarnings_(u,m){if(u&&"object"==typeof u&&(0,H.r3)(u,"w")){const b=(0,H.DV)(u,"w");if(Array.isArray(b)&&~b.indexOf("no_index")){const z='".indexOn": "'+m._queryParams.getIndex().toString()+'"',V=m._path.toString();Nn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${z} at ${V} to your security rules for better performance.`)}}}refreshAuthToken(u){this.authToken_=u,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(u)}reduceReconnectDelayIfAdminCredential_(u){(u&&40===u.length||(0,H.GJ)(u))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(u){this.appCheckToken_=u,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const u=this.authToken_,m=(0,H.w9)(u)?"auth":"gauth",b={cred:u};null===this.authOverride_?b.noauth=!0:"object"==typeof this.authOverride_&&(b.authvar=this.authOverride_),this.sendRequest(m,b,z=>{const V=z.s,Q=z.d||"error";this.authToken_===u&&("ok"===V?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(V,Q))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},u=>{const m=u.s,b=u.d||"error";"ok"===m?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(m,b)})}unlisten(u,m){const b=u._path.toString(),z=u._queryIdentifier;this.log_("Unlisten called for "+b+" "+z),(0,H.hu)(u._queryParams.isDefault()||!u._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(b,z)&&this.connected_&&this.sendUnlisten_(b,z,u._queryObject,m)}sendUnlisten_(u,m,b,z){this.log_("Unlisten on "+u+" for "+m);const V={p:u};z&&(V.q=b,V.t=z),this.sendRequest("n",V)}onDisconnectPut(u,m,b){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",u,m,b):this.onDisconnectRequestQueue_.push({pathString:u,action:"o",data:m,onComplete:b})}onDisconnectMerge(u,m,b){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",u,m,b):this.onDisconnectRequestQueue_.push({pathString:u,action:"om",data:m,onComplete:b})}onDisconnectCancel(u,m){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",u,null,m):this.onDisconnectRequestQueue_.push({pathString:u,action:"oc",data:null,onComplete:m})}sendOnDisconnect_(u,m,b,z){const V={p:m,d:b};this.log_("onDisconnect "+u,V),this.sendRequest(u,V,Q=>{z&&setTimeout(()=>{z(Q.s,Q.d)},Math.floor(0))})}put(u,m,b,z){this.putInternal("p",u,m,b,z)}merge(u,m,b,z){this.putInternal("m",u,m,b,z)}putInternal(u,m,b,z,V){this.initConnection_();const Q={p:m,d:b};void 0!==V&&(Q.h=V),this.outstandingPuts_.push({action:u,request:Q,onComplete:z}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+m)}sendPut_(u){const m=this.outstandingPuts_[u].action,b=this.outstandingPuts_[u].request,z=this.outstandingPuts_[u].onComplete;this.outstandingPuts_[u].queued=this.connected_,this.sendRequest(m,b,V=>{this.log_(m+" response",V),delete this.outstandingPuts_[u],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),z&&z(V.s,V.d)})}reportStats(u){if(this.connected_){const m={c:u};this.log_("reportStats",m),this.sendRequest("s",m,b=>{"ok"!==b.s&&this.log_("reportStats","Error sending stats: "+b.d)})}}onDataMessage_(u){if("r"in u){this.log_("from server: "+(0,H.Wl)(u));const m=u.r,b=this.requestCBHash_[m];b&&(delete this.requestCBHash_[m],b(u.b))}else{if("error"in u)throw"A server-side error has occurred: "+u.error;"a"in u&&this.onDataPush_(u.a,u.b)}}onDataPush_(u,m){this.log_("handleServerMessage",u,m),"d"===u?this.onDataUpdate_(m.p,m.d,!1,m.t):"m"===u?this.onDataUpdate_(m.p,m.d,!0,m.t):"c"===u?this.onListenRevoked_(m.p,m.q):"ac"===u?this.onAuthRevoked_(m.s,m.d):"apc"===u?this.onAppCheckRevoked_(m.s,m.d):"sd"===u?this.onSecurityDebugPacket_(m):rr("Unrecognized action received from server: "+(0,H.Wl)(u)+"\nAre you using the latest client?")}onReady_(u,m){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(u),this.lastSessionId=m,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(u){(0,H.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(u))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(u){u&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fs,this.realtime_||this.scheduleConnect_(0)),this.visible_=u}onOnline_(u){u?(this.log_("Browser went online."),this.reconnectDelay_=Fs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Fs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const u=(new Date).getTime()-this.lastConnectionAttemptTime_;let m=Math.max(0,this.reconnectDelay_-u);m=Math.random()*m,this.log_("Trying to reconnect in "+m+"ms"),this.scheduleConnect_(m),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var u=this;return(0,bt.Z)(function*(){if(u.shouldReconnect_()){u.log_("Making a connection attempt"),u.lastConnectionAttemptTime_=(new Date).getTime(),u.lastConnectionEstablishedTime_=null;const m=u.onDataMessage_.bind(u),b=u.onReady_.bind(u),z=u.onRealtimeDisconnect_.bind(u),V=u.id+":"+h.nextConnectionId_++,Q=u.lastSessionId;let ce=!1,ve=null;const rt=function(){ve?ve.close():(ce=!0,z())};u.realtime_={close:rt,sendRequest:function(dn){(0,H.hu)(ve,"sendRequest call when we're not connected not allowed."),ve.sendRequest(dn)}};const Mt=u.forceTokenRefresh_;u.forceTokenRefresh_=!1;try{const[dn,xn]=yield Promise.all([u.authTokenProvider_.getToken(Mt),u.appCheckTokenProvider_.getToken(Mt)]);ce?$t("getToken() completed but was canceled"):($t("getToken() completed. Creating connection."),u.authToken_=dn&&dn.accessToken,u.appCheckToken_=xn&&xn.token,ve=new s1(V,u.repoInfo_,u.applicationId_,u.appCheckToken_,u.authToken_,m,b,z,oi=>{Nn(oi+" ("+u.repoInfo_.toString()+")"),u.interrupt("server_kill")},Q))}catch(dn){u.log_("Failed to get token: "+dn),ce||(u.repoInfo_.nodeAdmin&&Nn(dn),rt())}}})()}interrupt(u){$t("Interrupting connection for reason: "+u),this.interruptReasons_[u]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(u){$t("Resuming connection for reason: "+u),delete this.interruptReasons_[u],(0,H.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Fs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(u){const m=u-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:m})}cancelSentTransactions_(){for(let u=0;u<this.outstandingPuts_.length;u++){const m=this.outstandingPuts_[u];m&&"h"in m.request&&m.queued&&(m.onComplete&&m.onComplete("disconnect"),delete this.outstandingPuts_[u],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(u,m){let b;b=m?m.map(V=>vn(V)).join("$"):"default";const z=this.removeListen_(u,b);z&&z.onComplete&&z.onComplete("permission_denied")}removeListen_(u,m){const b=new $e(u).toString();let z;if(this.listens.has(b)){const V=this.listens.get(b);z=V.get(m),V.delete(m),0===V.size&&this.listens.delete(b)}else z=void 0;return z}onAuthRevoked_(u,m){$t("Auth token revoked: "+u+"/"+m),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===u||"permission_denied"===u)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(u,m){$t("App check token revoked: "+u+"/"+m),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===u||"permission_denied"===u)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(u){this.securityDebugCallback_?this.securityDebugCallback_(u):"msg"in u&&console.log("FIREBASE: "+u.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const u of this.listens.values())for(const m of u.values())this.sendListen_(m);for(let u=0;u<this.outstandingPuts_.length;u++)this.outstandingPuts_[u]&&this.sendPut_(u);for(;this.onDisconnectRequestQueue_.length;){const u=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(u.action,u.pathString,u.data,u.onComplete)}for(let u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}sendConnectStats_(){const u={};let m="js";(0,H.Yr)()&&(m=this.repoInfo_.nodeAdmin?"admin_node":"node"),u["sdk."+m+"."+Zt.replace(/\./g,"-")]=1,(0,H.uI)()?u["framework.cordova"]=1:(0,H.b$)()&&(u["framework.reactnative"]=1),this.reportStats(u)}shouldReconnect_(){const u=Ee.getInstance().currentlyOnline();return(0,H.xb)(this.interruptReasons_)&&u}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class qn{constructor(l,u){this.name=l,this.node=u}static Wrap(l,u){return new qn(l,u)}}class cs{getCompare(){return this.compare.bind(this)}indexedValueChanged(l,u){const m=new qn(cr,l),b=new qn(cr,u);return 0!==this.compare(m,b)}minPost(){return qn.MIN}}class ls extends cs{static get __EMPTY_NODE(){return x1}static set __EMPTY_NODE(l){x1=l}compare(l,u){return gt(l.name,u.name)}isDefinedOn(l){throw(0,H.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(l,u){return!1}minPost(){return qn.MIN}maxPost(){return new qn(lr,x1)}makePost(l,u){return(0,H.hu)("string"==typeof l,"KeyIndex indexValue must always be a string."),new qn(l,x1)}toString(){return".key"}}const ui=new ls;class h1{constructor(l,u,m,b,z=null){this.isReverse_=b,this.resultGenerator_=z,this.nodeStack_=[];let V=1;for(;!l.isEmpty();)if(V=u?m(l.key,u):1,b&&(V*=-1),V<0)l=this.isReverse_?l.left:l.right;else{if(0===V){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}getNext(){if(0===this.nodeStack_.length)return null;let u,l=this.nodeStack_.pop();if(u=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return u}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}}}let Y1,_i=(()=>{class h{constructor(u,m,b,z,V){this.key=u,this.value=m,this.color=b??h.RED,this.left=z??ki.EMPTY_NODE,this.right=V??ki.EMPTY_NODE}copy(u,m,b,z,V){return new h(u??this.key,m??this.value,b??this.color,z??this.left,V??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(u){return this.left.inorderTraversal(u)||!!u(this.key,this.value)||this.right.inorderTraversal(u)}reverseTraversal(u){return this.right.reverseTraversal(u)||u(this.key,this.value)||this.left.reverseTraversal(u)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(u,m,b){let z=this;const V=b(u,z.key);return z=V<0?z.copy(null,null,null,z.left.insert(u,m,b),null):0===V?z.copy(null,m,null,null,null):z.copy(null,null,null,null,z.right.insert(u,m,b)),z.fixUp_()}removeMin_(){if(this.left.isEmpty())return ki.EMPTY_NODE;let u=this;return!u.left.isRed_()&&!u.left.left.isRed_()&&(u=u.moveRedLeft_()),u=u.copy(null,null,null,u.left.removeMin_(),null),u.fixUp_()}remove(u,m){let b,z;if(b=this,m(u,b.key)<0)!b.left.isEmpty()&&!b.left.isRed_()&&!b.left.left.isRed_()&&(b=b.moveRedLeft_()),b=b.copy(null,null,null,b.left.remove(u,m),null);else{if(b.left.isRed_()&&(b=b.rotateRight_()),!b.right.isEmpty()&&!b.right.isRed_()&&!b.right.left.isRed_()&&(b=b.moveRedRight_()),0===m(u,b.key)){if(b.right.isEmpty())return ki.EMPTY_NODE;z=b.right.min_(),b=b.copy(z.key,z.value,null,null,b.right.removeMin_())}b=b.copy(null,null,null,null,b.right.remove(u,m))}return b.fixUp_()}isRed_(){return this.color}fixUp_(){let u=this;return u.right.isRed_()&&!u.left.isRed_()&&(u=u.rotateLeft_()),u.left.isRed_()&&u.left.left.isRed_()&&(u=u.rotateRight_()),u.left.isRed_()&&u.right.isRed_()&&(u=u.colorFlip_()),u}moveRedLeft_(){let u=this.colorFlip_();return u.right.left.isRed_()&&(u=u.copy(null,null,null,null,u.right.rotateRight_()),u=u.rotateLeft_(),u=u.colorFlip_()),u}moveRedRight_(){let u=this.colorFlip_();return u.left.left.isRed_()&&(u=u.rotateRight_(),u=u.colorFlip_()),u}rotateLeft_(){const u=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,u,null)}rotateRight_(){const u=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,u)}colorFlip_(){const u=this.left.copy(null,null,!this.left.color,null,null),m=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,u,m)}checkMaxDepth_(){const u=this.check_();return Math.pow(2,u)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const u=this.left.check_();if(u!==this.right.check_())throw new Error("Black depths differ");return u+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class ki{constructor(l,u=ki.EMPTY_NODE){this.comparator_=l,this.root_=u}insert(l,u){return new ki(this.comparator_,this.root_.insert(l,u,this.comparator_).copy(null,null,_i.BLACK,null,null))}remove(l){return new ki(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,_i.BLACK,null,null))}get(l){let u,m=this.root_;for(;!m.isEmpty();){if(u=this.comparator_(l,m.key),0===u)return m.value;u<0?m=m.left:u>0&&(m=m.right)}return null}getPredecessorKey(l){let u,m=this.root_,b=null;for(;!m.isEmpty();){if(u=this.comparator_(l,m.key),0===u){if(m.left.isEmpty())return b?b.key:null;for(m=m.left;!m.right.isEmpty();)m=m.right;return m.key}u<0?m=m.left:u>0&&(b=m,m=m.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(l){return this.root_.inorderTraversal(l)}reverseTraversal(l){return this.root_.reverseTraversal(l)}getIterator(l){return new h1(this.root_,null,this.comparator_,!1,l)}getIteratorFrom(l,u){return new h1(this.root_,l,this.comparator_,!1,u)}getReverseIteratorFrom(l,u){return new h1(this.root_,l,this.comparator_,!0,u)}getReverseIterator(l){return new h1(this.root_,null,this.comparator_,!0,l)}}function w1(h,l){return gt(h.name,l.name)}function N1(h,l){return gt(h,l)}ki.EMPTY_NODE=new class us{copy(l,u,m,b,z){return this}insert(l,u,m){return new _i(l,u,null)}remove(l,u){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const hs=function(h){return"number"==typeof h?"number:"+un(h):"string:"+h},Q1=function(h){if(h.isLeafNode()){const l=h.val();(0,H.hu)("string"==typeof l||"number"==typeof l||"object"==typeof l&&(0,H.r3)(l,".sv"),"Priority must be a string or number.")}else(0,H.hu)(h===Y1||h.isEmpty(),"priority of unexpected type.");(0,H.hu)(h===Y1||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let a1,no,Er,Cr=(()=>{class h{constructor(u,m=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=u,this.priorityNode_=m,this.lazyHash_=null,(0,H.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Q1(this.priorityNode_)}static set __childrenNodeConstructor(u){a1=u}static get __childrenNodeConstructor(){return a1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(u){return new h(this.value_,u)}getImmediateChild(u){return".priority"===u?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(u){return jn(u)?this:".priority"===Lt(u)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(u,m){return null}updateImmediateChild(u,m){return".priority"===u?this.updatePriority(m):m.isEmpty()&&".priority"!==u?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(u,m).updatePriority(this.priorityNode_)}updateChild(u,m){const b=Lt(u);return null===b?m:m.isEmpty()&&".priority"!==b?this:((0,H.hu)(".priority"!==b||1===In(u),".priority must be the last token in a path"),this.updateImmediateChild(b,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(mn(u),m)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(u,m){return!1}val(u){return u&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let u="";this.priorityNode_.isEmpty()||(u+="priority:"+hs(this.priorityNode_.val())+":");const m=typeof this.value_;u+=m+":",u+="number"===m?un(this.value_):this.value_,this.lazyHash_=Nt(u)}return this.lazyHash_}getValue(){return this.value_}compareTo(u){return u===h.__childrenNodeConstructor.EMPTY_NODE?1:u instanceof h.__childrenNodeConstructor?-1:((0,H.hu)(u.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(u))}compareToLeafNode_(u){const m=typeof u.value_,b=typeof this.value_,z=h.VALUE_TYPE_ORDER.indexOf(m),V=h.VALUE_TYPE_ORDER.indexOf(b);return(0,H.hu)(z>=0,"Unknown leaf type: "+m),(0,H.hu)(V>=0,"Unknown leaf type: "+b),z===V?"object"===b?0:this.value_<u.value_?-1:this.value_===u.value_?0:1:V-z}withIndex(){return this}isIndexed(){return!0}equals(u){return u===this||!!u.isLeafNode()&&(this.value_===u.value_&&this.priorityNode_.equals(u.priorityNode_))}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const zr=new class pi extends cs{compare(l,u){const m=l.node.getPriority(),b=u.node.getPriority(),z=m.compareTo(b);return 0===z?gt(l.name,u.name):z}isDefinedOn(l){return!l.getPriority().isEmpty()}indexedValueChanged(l,u){return!l.getPriority().equals(u.getPriority())}minPost(){return qn.MIN}maxPost(){return new qn(lr,new Cr("[PRIORITY-POST]",Er))}makePost(l,u){const m=no(l);return new qn(u,new Cr("[PRIORITY-POST]",m))}toString(){return".priority"}},bs=Math.log(2);class L1{constructor(l){this.count=parseInt(Math.log(l+1)/bs,10),this.current_=this.count-1;const b=(z=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=l+1&b}nextBitIsOne(){const l=!(this.bits_&1<<this.current_);return this.current_--,l}}const Ci=function(h,l,u,m){h.sort(l);const b=function(ce,ve){const rt=ve-ce;let ot,Mt;if(0===rt)return null;if(1===rt)return ot=h[ce],Mt=u?u(ot):ot,new _i(Mt,ot.node,_i.BLACK,null,null);{const dn=parseInt(rt/2,10)+ce,xn=b(ce,dn),oi=b(dn+1,ve);return ot=h[dn],Mt=u?u(ot):ot,new _i(Mt,ot.node,_i.BLACK,xn,oi)}},Q=function(ce){let ve=null,rt=null,ot=h.length;const Mt=function(xn,oi){const rs=ot-xn,z2=ot;ot-=xn;const y2=b(rs+1,z2),G2=h[rs],Ra=u?u(G2):G2;dn(new _i(Ra,G2.node,oi,null,y2))},dn=function(xn){ve?(ve.left=xn,ve=xn):(rt=xn,ve=xn)};for(let xn=0;xn<ce.count;++xn){const oi=ce.nextBitIsOne(),rs=Math.pow(2,ce.count-(xn+1));oi?Mt(rs,_i.BLACK):(Mt(rs,_i.BLACK),Mt(rs,_i.RED))}return rt}(new L1(h.length));return new ki(m||l,Q)};let Bs;const $i={};class Ai{constructor(l,u){this.indexes_=l,this.indexSet_=u}static get Default(){return(0,H.hu)($i&&zr,"ChildrenNode.ts has not been loaded"),Bs=Bs||new Ai({".priority":$i},{".priority":zr}),Bs}get(l){const u=(0,H.DV)(this.indexes_,l);if(!u)throw new Error("No index defined for "+l);return u instanceof ki?u:null}hasIndex(l){return(0,H.r3)(this.indexSet_,l.toString())}addIndex(l,u){(0,H.hu)(l!==ui,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const m=[];let b=!1;const z=u.getIterator(qn.Wrap);let Q,V=z.getNext();for(;V;)b=b||l.isDefinedOn(V.node),m.push(V),V=z.getNext();Q=b?Ci(m,l.getCompare()):$i;const ce=l.toString(),ve=Object.assign({},this.indexSet_);ve[ce]=l;const rt=Object.assign({},this.indexes_);return rt[ce]=Q,new Ai(rt,ve)}addToIndexes(l,u){const m=(0,H.UI)(this.indexes_,(b,z)=>{const V=(0,H.DV)(this.indexSet_,z);if((0,H.hu)(V,"Missing index implementation for "+z),b===$i){if(V.isDefinedOn(l.node)){const Q=[],ce=u.getIterator(qn.Wrap);let ve=ce.getNext();for(;ve;)ve.name!==l.name&&Q.push(ve),ve=ce.getNext();return Q.push(l),Ci(Q,V.getCompare())}return $i}{const Q=u.get(l.name);let ce=b;return Q&&(ce=ce.remove(new qn(l.name,Q))),ce.insert(l,l.node)}});return new Ai(m,this.indexSet_)}removeFromIndexes(l,u){const m=(0,H.UI)(this.indexes_,b=>{if(b===$i)return b;{const z=u.get(l.name);return z?b.remove(new qn(l.name,z)):b}});return new Ai(m,this.indexSet_)}}let Oi,Rn=(()=>{class h{constructor(u,m,b){this.children_=u,this.priorityNode_=m,this.indexMap_=b,this.lazyHash_=null,this.priorityNode_&&Q1(this.priorityNode_),this.children_.isEmpty()&&(0,H.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Oi||(Oi=new h(new ki(N1),null,Ai.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Oi}updatePriority(u){return this.children_.isEmpty()?this:new h(this.children_,u,this.indexMap_)}getImmediateChild(u){if(".priority"===u)return this.getPriority();{const m=this.children_.get(u);return null===m?Oi:m}}getChild(u){const m=Lt(u);return null===m?this:this.getImmediateChild(m).getChild(mn(u))}hasChild(u){return null!==this.children_.get(u)}updateImmediateChild(u,m){if((0,H.hu)(m,"We should always be passing snapshot nodes"),".priority"===u)return this.updatePriority(m);{const b=new qn(u,m);let z,V;m.isEmpty()?(z=this.children_.remove(u),V=this.indexMap_.removeFromIndexes(b,this.children_)):(z=this.children_.insert(u,m),V=this.indexMap_.addToIndexes(b,this.children_));const Q=z.isEmpty()?Oi:this.priorityNode_;return new h(z,Q,V)}}updateChild(u,m){const b=Lt(u);if(null===b)return m;{(0,H.hu)(".priority"!==Lt(u)||1===In(u),".priority must be the last token in a path");const z=this.getImmediateChild(b).updateChild(mn(u),m);return this.updateImmediateChild(b,z)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(u){if(this.isEmpty())return null;const m={};let b=0,z=0,V=!0;if(this.forEachChild(zr,(Q,ce)=>{m[Q]=ce.val(u),b++,V&&h.INTEGER_REGEXP_.test(Q)?z=Math.max(z,Number(Q)):V=!1}),!u&&V&&z<2*b){const Q=[];for(const ce in m)Q[ce]=m[ce];return Q}return u&&!this.getPriority().isEmpty()&&(m[".priority"]=this.getPriority().val()),m}hash(){if(null===this.lazyHash_){let u="";this.getPriority().isEmpty()||(u+="priority:"+hs(this.getPriority().val())+":"),this.forEachChild(zr,(m,b)=>{const z=b.hash();""!==z&&(u+=":"+m+":"+z)}),this.lazyHash_=""===u?"":Nt(u)}return this.lazyHash_}getPredecessorChildName(u,m,b){const z=this.resolveIndex_(b);if(z){const V=z.getPredecessorKey(new qn(u,m));return V?V.name:null}return this.children_.getPredecessorKey(u)}getFirstChildName(u){const m=this.resolveIndex_(u);if(m){const b=m.minKey();return b&&b.name}return this.children_.minKey()}getFirstChild(u){const m=this.getFirstChildName(u);return m?new qn(m,this.children_.get(m)):null}getLastChildName(u){const m=this.resolveIndex_(u);if(m){const b=m.maxKey();return b&&b.name}return this.children_.maxKey()}getLastChild(u){const m=this.getLastChildName(u);return m?new qn(m,this.children_.get(m)):null}forEachChild(u,m){const b=this.resolveIndex_(u);return b?b.inorderTraversal(z=>m(z.name,z.node)):this.children_.inorderTraversal(m)}getIterator(u){return this.getIteratorFrom(u.minPost(),u)}getIteratorFrom(u,m){const b=this.resolveIndex_(m);if(b)return b.getIteratorFrom(u,z=>z);{const z=this.children_.getIteratorFrom(u.name,qn.Wrap);let V=z.peek();for(;null!=V&&m.compare(V,u)<0;)z.getNext(),V=z.peek();return z}}getReverseIterator(u){return this.getReverseIteratorFrom(u.maxPost(),u)}getReverseIteratorFrom(u,m){const b=this.resolveIndex_(m);if(b)return b.getReverseIteratorFrom(u,z=>z);{const z=this.children_.getReverseIteratorFrom(u.name,qn.Wrap);let V=z.peek();for(;null!=V&&m.compare(V,u)>0;)z.getNext(),V=z.peek();return z}}compareTo(u){return this.isEmpty()?u.isEmpty()?0:-1:u.isLeafNode()||u.isEmpty()?1:u===sn?-1:0}withIndex(u){if(u===ui||this.indexMap_.hasIndex(u))return this;{const m=this.indexMap_.addIndex(u,this.children_);return new h(this.children_,this.priorityNode_,m)}}isIndexed(u){return u===ui||this.indexMap_.hasIndex(u)}equals(u){if(u===this)return!0;if(u.isLeafNode())return!1;{const m=u;if(this.getPriority().equals(m.getPriority())){if(this.children_.count()===m.children_.count()){const b=this.getIterator(zr),z=m.getIterator(zr);let V=b.getNext(),Q=z.getNext();for(;V&&Q;){if(V.name!==Q.name||!V.node.equals(Q.node))return!1;V=b.getNext(),Q=z.getNext()}return null===V&&null===Q}return!1}return!1}}resolveIndex_(u){return u===ui?null:this.indexMap_.get(u.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const sn=new class ro extends Rn{constructor(){super(new ki(N1),Rn.EMPTY_NODE,Ai.Default)}compareTo(l){return l===this?0:1}equals(l){return l===this}getPriority(){return this}getImmediateChild(l){return Rn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(qn,{MIN:{value:new qn(cr,Rn.EMPTY_NODE)},MAX:{value:new qn(lr,sn)}}),ls.__EMPTY_NODE=Rn.EMPTY_NODE,Cr.__childrenNodeConstructor=Rn,function wo(h){Y1=h}(sn),function ji(h){Er=h}(sn);const fs=!0;function sr(h,l=null){if(null===h)return Rn.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(l=h[".priority"]),(0,H.hu)(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new Cr(h,sr(l));if(h instanceof Array||!fs){let u=Rn.EMPTY_NODE;return An(h,(m,b)=>{if((0,H.r3)(h,m)&&"."!==m.substring(0,1)){const z=sr(b);(z.isLeafNode()||!z.isEmpty())&&(u=u.updateImmediateChild(m,z))}}),u.updatePriority(sr(l))}{const u=[];let m=!1;if(An(h,(V,Q)=>{if("."!==V.substring(0,1)){const ce=sr(Q);ce.isEmpty()||(m=m||!ce.getPriority().isEmpty(),u.push(new qn(V,ce)))}}),0===u.length)return Rn.EMPTY_NODE;const z=Ci(u,w1,V=>V.name,N1);if(m){const V=Ci(u,zr.getCompare());return new Rn(z,sr(l),new Ai({".priority":V},{".priority":zr}))}return new Rn(z,sr(l),Ai.Default)}}!function Yi(h){no=h}(sr);class F1 extends cs{constructor(l){super(),this.indexPath_=l,(0,H.hu)(!jn(l)&&".priority"!==Lt(l),"Can't create PathIndex with empty path or .priority key")}extractChild(l){return l.getChild(this.indexPath_)}isDefinedOn(l){return!l.getChild(this.indexPath_).isEmpty()}compare(l,u){const m=this.extractChild(l.node),b=this.extractChild(u.node),z=m.compareTo(b);return 0===z?gt(l.name,u.name):z}makePost(l,u){const m=sr(l),b=Rn.EMPTY_NODE.updateChild(this.indexPath_,m);return new qn(u,b)}maxPost(){const l=Rn.EMPTY_NODE.updateChild(this.indexPath_,sn);return new qn(lr,l)}toString(){return di(this.indexPath_,0).join("/")}}const io=new class js extends cs{compare(l,u){const m=l.node.compareTo(u.node);return 0===m?gt(l.name,u.name):m}isDefinedOn(l){return!0}indexedValueChanged(l,u){return!l.equals(u)}minPost(){return qn.MIN}maxPost(){return qn.MAX}makePost(l,u){const m=sr(l);return new qn(u,m)}toString(){return".value"}};function Eo(h){return{type:"value",snapshotNode:h}}function $s(h,l){return{type:"child_added",snapshotNode:l,childName:h}}function X1(h,l){return{type:"child_removed",snapshotNode:l,childName:h}}function it(h,l,u){return{type:"child_changed",snapshotNode:l,childName:h,oldSnap:u}}class Wi{constructor(l){this.index_=l}updateChild(l,u,m,b,z,V){(0,H.hu)(l.isIndexed(this.index_),"A node must be indexed if only a child is updated");const Q=l.getImmediateChild(u);return Q.getChild(b).equals(m.getChild(b))&&Q.isEmpty()===m.isEmpty()||(null!=V&&(m.isEmpty()?l.hasChild(u)?V.trackChildChange(X1(u,Q)):(0,H.hu)(l.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):Q.isEmpty()?V.trackChildChange($s(u,m)):V.trackChildChange(it(u,m,Q))),l.isLeafNode()&&m.isEmpty())?l:l.updateImmediateChild(u,m).withIndex(this.index_)}updateFullNode(l,u,m){return null!=m&&(l.isLeafNode()||l.forEachChild(zr,(b,z)=>{u.hasChild(b)||m.trackChildChange(X1(b,z))}),u.isLeafNode()||u.forEachChild(zr,(b,z)=>{if(l.hasChild(b)){const V=l.getImmediateChild(b);V.equals(z)||m.trackChildChange(it(b,z,V))}else m.trackChildChange($s(b,z))})),u.withIndex(this.index_)}updatePriority(l,u){return l.isEmpty()?Rn.EMPTY_NODE:l.updatePriority(u)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class U1{constructor(l){this.indexedFilter_=new Wi(l.getIndex()),this.index_=l.getIndex(),this.startPost_=U1.getStartPost_(l),this.endPost_=U1.getEndPost_(l),this.startIsInclusive_=!l.startAfterSet_,this.endIsInclusive_=!l.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(l){const u=this.startIsInclusive_?this.index_.compare(this.getStartPost(),l)<=0:this.index_.compare(this.getStartPost(),l)<0,m=this.endIsInclusive_?this.index_.compare(l,this.getEndPost())<=0:this.index_.compare(l,this.getEndPost())<0;return u&&m}updateChild(l,u,m,b,z,V){return this.matches(new qn(u,m))||(m=Rn.EMPTY_NODE),this.indexedFilter_.updateChild(l,u,m,b,z,V)}updateFullNode(l,u,m){u.isLeafNode()&&(u=Rn.EMPTY_NODE);let b=u.withIndex(this.index_);b=b.updatePriority(Rn.EMPTY_NODE);const z=this;return u.forEachChild(zr,(V,Q)=>{z.matches(new qn(V,Q))||(b=b.updateImmediateChild(V,Rn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(l,b,m)}updatePriority(l,u){return l}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(l){if(l.hasStart()){const u=l.getIndexStartName();return l.getIndex().makePost(l.getIndexStartValue(),u)}return l.getIndex().minPost()}static getEndPost_(l){if(l.hasEnd()){const u=l.getIndexEndName();return l.getIndex().makePost(l.getIndexEndValue(),u)}return l.getIndex().maxPost()}}class Qi{constructor(l){this.withinDirectionalStart=u=>this.reverse_?this.withinEndPost(u):this.withinStartPost(u),this.withinDirectionalEnd=u=>this.reverse_?this.withinStartPost(u):this.withinEndPost(u),this.withinStartPost=u=>{const m=this.index_.compare(this.rangedFilter_.getStartPost(),u);return this.startIsInclusive_?m<=0:m<0},this.withinEndPost=u=>{const m=this.index_.compare(u,this.rangedFilter_.getEndPost());return this.endIsInclusive_?m<=0:m<0},this.rangedFilter_=new U1(l),this.index_=l.getIndex(),this.limit_=l.getLimit(),this.reverse_=!l.isViewFromLeft(),this.startIsInclusive_=!l.startAfterSet_,this.endIsInclusive_=!l.endBeforeSet_}updateChild(l,u,m,b,z,V){return this.rangedFilter_.matches(new qn(u,m))||(m=Rn.EMPTY_NODE),l.getImmediateChild(u).equals(m)?l:l.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(l,u,m,b,z,V):this.fullLimitUpdateChild_(l,u,m,z,V)}updateFullNode(l,u,m){let b;if(u.isLeafNode()||u.isEmpty())b=Rn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<u.numChildren()&&u.isIndexed(this.index_)){let z;b=Rn.EMPTY_NODE.withIndex(this.index_),z=this.reverse_?u.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let V=0;for(;z.hasNext()&&V<this.limit_;){const Q=z.getNext();if(this.withinDirectionalStart(Q)){if(!this.withinDirectionalEnd(Q))break;b=b.updateImmediateChild(Q.name,Q.node),V++}}}else{let z;b=u.withIndex(this.index_),b=b.updatePriority(Rn.EMPTY_NODE),z=this.reverse_?b.getReverseIterator(this.index_):b.getIterator(this.index_);let V=0;for(;z.hasNext();){const Q=z.getNext();V<this.limit_&&this.withinDirectionalStart(Q)&&this.withinDirectionalEnd(Q)?V++:b=b.updateImmediateChild(Q.name,Rn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(l,b,m)}updatePriority(l,u){return l}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(l,u,m,b,z){let V;if(this.reverse_){const ot=this.index_.getCompare();V=(Mt,dn)=>ot(dn,Mt)}else V=this.index_.getCompare();const Q=l;(0,H.hu)(Q.numChildren()===this.limit_,"");const ce=new qn(u,m),ve=this.reverse_?Q.getFirstChild(this.index_):Q.getLastChild(this.index_),rt=this.rangedFilter_.matches(ce);if(Q.hasChild(u)){const ot=Q.getImmediateChild(u);let Mt=b.getChildAfterChild(this.index_,ve,this.reverse_);for(;null!=Mt&&(Mt.name===u||Q.hasChild(Mt.name));)Mt=b.getChildAfterChild(this.index_,Mt,this.reverse_);const dn=null==Mt?1:V(Mt,ce);if(rt&&!m.isEmpty()&&dn>=0)return z?.trackChildChange(it(u,m,ot)),Q.updateImmediateChild(u,m);{z?.trackChildChange(X1(u,ot));const oi=Q.updateImmediateChild(u,Rn.EMPTY_NODE);return null!=Mt&&this.rangedFilter_.matches(Mt)?(z?.trackChildChange($s(Mt.name,Mt.node)),oi.updateImmediateChild(Mt.name,Mt.node)):oi}}return m.isEmpty()?l:rt&&V(ve,ce)>=0?(null!=z&&(z.trackChildChange(X1(ve.name,ve.node)),z.trackChildChange($s(u,m))),Q.updateImmediateChild(u,m).updateImmediateChild(ve.name,Rn.EMPTY_NODE)):l}}class Ms{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,H.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===zr}copy(){const l=new Ms;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.startAfterSet_=this.startAfterSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.endBeforeSet_=this.endBeforeSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l}}function Ws(h,l,u){const m=h.copy();return m.startSet_=!0,void 0===l&&(l=null),m.indexStartValue_=l,null!=u?(m.startNameSet_=!0,m.indexStartName_=u):(m.startNameSet_=!1,m.indexStartName_=""),m}function ee(h,l,u){const m=h.copy();return m.endSet_=!0,void 0===l&&(l=null),m.indexEndValue_=l,void 0!==u?(m.endNameSet_=!0,m.indexEndName_=u):(m.endNameSet_=!1,m.indexEndName_=""),m}function ae(h,l){const u=h.copy();return u.index_=l,u}function Ae(h){const l={};if(h.isDefault())return l;let u;if(h.index_===zr?u="$priority":h.index_===io?u="$value":h.index_===ui?u="$key":((0,H.hu)(h.index_ instanceof F1,"Unrecognized index type!"),u=h.index_.toString()),l.orderBy=(0,H.Wl)(u),h.startSet_){const m=h.startAfterSet_?"startAfter":"startAt";l[m]=(0,H.Wl)(h.indexStartValue_),h.startNameSet_&&(l[m]+=","+(0,H.Wl)(h.indexStartName_))}if(h.endSet_){const m=h.endBeforeSet_?"endBefore":"endAt";l[m]=(0,H.Wl)(h.indexEndValue_),h.endNameSet_&&(l[m]+=","+(0,H.Wl)(h.indexEndName_))}return h.limitSet_&&(h.isViewFromLeft()?l.limitToFirst=h.limit_:l.limitToLast=h.limit_),l}function tt(h){const l={};if(h.startSet_&&(l.sp=h.indexStartValue_,h.startNameSet_&&(l.sn=h.indexStartName_),l.sin=!h.startAfterSet_),h.endSet_&&(l.ep=h.indexEndValue_,h.endNameSet_&&(l.en=h.indexEndName_),l.ein=!h.endBeforeSet_),h.limitSet_){l.l=h.limit_;let u=h.viewFrom_;""===u&&(u=h.isViewFromLeft()?"l":"r"),l.vf=u}return h.index_!==zr&&(l.i=h.index_.toString()),l}class ht extends C1{constructor(l,u,m,b){super(),this.repoInfo_=l,this.onDataUpdate_=u,this.authTokenProvider_=m,this.appCheckTokenProvider_=b,this.log_=Tn("p:rest:"),this.listens_={}}reportStats(l){throw new Error("Method not implemented.")}static getListenId_(l,u){return void 0!==u?"tag$"+u:((0,H.hu)(l._queryParams.isDefault(),"should have a tag if it's not a default query."),l._path.toString())}listen(l,u,m,b){const z=l._path.toString();this.log_("Listen called for "+z+" "+l._queryIdentifier);const V=ht.getListenId_(l,m),Q={};this.listens_[V]=Q;const ce=Ae(l._queryParams);this.restRequest_(z+".json",ce,(ve,rt)=>{let ot=rt;if(404===ve&&(ot=null,ve=null),null===ve&&this.onDataUpdate_(z,ot,!1,m),(0,H.DV)(this.listens_,V)===Q){let Mt;Mt=ve?401===ve?"permission_denied":"rest_error:"+ve:"ok",b(Mt,null)}})}unlisten(l,u){const m=ht.getListenId_(l,u);delete this.listens_[m]}get(l){const u=Ae(l._queryParams),m=l._path.toString(),b=new H.BH;return this.restRequest_(m+".json",u,(z,V)=>{let Q=V;404===z&&(Q=null,z=null),null===z?(this.onDataUpdate_(m,Q,!1,null),b.resolve(Q)):b.reject(new Error(Q))}),b.promise}refreshAuthToken(l){}restRequest_(l,u={},m){return u.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([b,z])=>{b&&b.accessToken&&(u.auth=b.accessToken),z&&z.token&&(u.ac=z.token);const V=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+l+"?ns="+this.repoInfo_.namespace+(0,H.xO)(u);this.log_("Sending REST request for "+V);const Q=new XMLHttpRequest;Q.onreadystatechange=()=>{if(m&&4===Q.readyState){this.log_("REST Response for "+V+" received. status:",Q.status,"response:",Q.responseText);let ce=null;if(Q.status>=200&&Q.status<300){try{ce=(0,H.cI)(Q.responseText)}catch{Nn("Failed to parse JSON response for "+V+": "+Q.responseText)}m(null,ce)}else 401!==Q.status&&404!==Q.status&&Nn("Got unsuccessful REST response for "+V+" Status: "+Q.status),m(Q.status);m=null}},Q.open("GET",V,!0),Q.send()})}}class st{constructor(){this.rootNode_=Rn.EMPTY_NODE}getNode(l){return this.rootNode_.getChild(l)}updateSnapshot(l,u){this.rootNode_=this.rootNode_.updateChild(l,u)}}function qt(){return{value:null,children:new Map}}function Pn(h,l,u){if(jn(l))h.value=u,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(l,u);else{const m=Lt(l);h.children.has(m)||h.children.set(m,qt()),Pn(h.children.get(m),l=mn(l),u)}}function Yn(h,l){if(jn(l))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const u=h.value;return h.value=null,u.forEachChild(zr,(m,b)=>{Pn(h,new $e(m),b)}),Yn(h,l)}}if(h.children.size>0){const u=Lt(l);return l=mn(l),h.children.has(u)&&Yn(h.children.get(u),l)&&h.children.delete(u),0===h.children.size}return!0}function nr(h,l,u){null!==h.value?u(l,h.value):function Tr(h,l){h.children.forEach((u,m)=>{l(m,u)})}(h,(m,b)=>{nr(b,new $e(l.toString()+"/"+m),u)})}class ri{constructor(l){this.collection_=l,this.last_=null}get(){const l=this.collection_.get(),u=Object.assign({},l);return this.last_&&An(this.last_,(m,b)=>{u[m]=u[m]-b}),this.last_=l,u}}class Gi{constructor(l,u){this.server_=u,this.statsToReport_={},this.statsListener_=new ri(l);const m=1e4+2e4*Math.random();ai(this.reportStats_.bind(this),Math.floor(m))}reportStats_(){const l=this.statsListener_.get(),u={};let m=!1;An(l,(b,z)=>{z>0&&(0,H.r3)(this.statsToReport_,b)&&(u[b]=z,m=!0)}),m&&this.server_.reportStats(u),ai(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Kr=(()=>{return(h=Kr||(Kr={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Kr;var h})();function Gs(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class c1{constructor(l,u,m){this.path=l,this.affectedTree=u,this.revert=m,this.type=Kr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(l){if(jn(this.path)){if(null!=this.affectedTree.value)return(0,H.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const u=this.affectedTree.subtree(new $e(l));return new c1(ct(),u,this.revert)}}return(0,H.hu)(Lt(this.path)===l,"operationForChild called for unrelated child."),new c1(mn(this.path),this.affectedTree,this.revert)}}class Ss{constructor(l,u){this.source=l,this.path=u,this.type=Kr.LISTEN_COMPLETE}operationForChild(l){return jn(this.path)?new Ss(this.source,ct()):new Ss(this.source,mn(this.path))}}class so{constructor(l,u,m){this.source=l,this.path=u,this.snap=m,this.type=Kr.OVERWRITE}operationForChild(l){return jn(this.path)?new so(this.source,ct(),this.snap.getImmediateChild(l)):new so(this.source,mn(this.path),this.snap)}}class Ds{constructor(l,u,m){this.source=l,this.path=u,this.children=m,this.type=Kr.MERGE}operationForChild(l){if(jn(this.path)){const u=this.children.subtree(new $e(l));return u.isEmpty()?null:u.value?new so(this.source,ct(),u.value):new Ds(this.source,ct(),u)}return(0,H.hu)(Lt(this.path)===l,"Can't get a merge for a child not on the path of the operation"),new Ds(this.source,mn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class qr{constructor(l,u,m){this.node_=l,this.fullyInitialized_=u,this.filtered_=m}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(l){if(jn(l))return this.isFullyInitialized()&&!this.filtered_;const u=Lt(l);return this.isCompleteForChild(u)}isCompleteForChild(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)}getNode(){return this.node_}}class Zs{constructor(l){this.query_=l,this.index_=this.query_._queryParams.getIndex()}}function Hi(h,l,u,m,b,z){const V=m.filter(Q=>Q.type===u);V.sort((Q,ce)=>function Fi(h,l,u){if(null==l.childName||null==u.childName)throw(0,H.g5)("Should only compare child_ events.");const m=new qn(l.childName,l.snapshotNode),b=new qn(u.childName,u.snapshotNode);return h.index_.compare(m,b)}(h,Q,ce)),V.forEach(Q=>{const ce=function Ko(h,l,u){return"value"===l.type||"child_removed"===l.type||(l.prevName=u.getPredecessorChildName(l.childName,l.snapshotNode,h.index_)),l}(h,Q,z);b.forEach(ve=>{ve.respondsTo(Q.type)&&l.push(ve.createEvent(ce,h.query_))})})}function Ks(h,l){return{eventCache:h,serverCache:l}}function qs(h,l,u,m){return Ks(new qr(l,u,m),h.serverCache)}function zo(h,l,u,m){return Ks(h.eventCache,new qr(l,u,m))}function ds(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function f1(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let Ro;class U{constructor(l,u=(()=>(Ro||(Ro=new ki(Jn)),Ro))()){this.value=l,this.children=u}static fromObject(l){let u=new U(null);return An(l,(m,b)=>{u=u.set(new $e(m),b)}),u}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(l,u){if(null!=this.value&&u(this.value))return{path:ct(),value:this.value};if(jn(l))return null;{const m=Lt(l),b=this.children.get(m);if(null!==b){const z=b.findRootMostMatchingPathAndValue(mn(l),u);return null!=z?{path:fr(new $e(m),z.path),value:z.value}:null}return null}}findRootMostValueAndPath(l){return this.findRootMostMatchingPathAndValue(l,()=>!0)}subtree(l){if(jn(l))return this;{const u=Lt(l),m=this.children.get(u);return null!==m?m.subtree(mn(l)):new U(null)}}set(l,u){if(jn(l))return new U(u,this.children);{const m=Lt(l),z=(this.children.get(m)||new U(null)).set(mn(l),u),V=this.children.insert(m,z);return new U(this.value,V)}}remove(l){if(jn(l))return this.children.isEmpty()?new U(null):new U(null,this.children);{const u=Lt(l),m=this.children.get(u);if(m){const b=m.remove(mn(l));let z;return z=b.isEmpty()?this.children.remove(u):this.children.insert(u,b),null===this.value&&z.isEmpty()?new U(null):new U(this.value,z)}return this}}get(l){if(jn(l))return this.value;{const u=Lt(l),m=this.children.get(u);return m?m.get(mn(l)):null}}setTree(l,u){if(jn(l))return u;{const m=Lt(l),z=(this.children.get(m)||new U(null)).setTree(mn(l),u);let V;return V=z.isEmpty()?this.children.remove(m):this.children.insert(m,z),new U(this.value,V)}}fold(l){return this.fold_(ct(),l)}fold_(l,u){const m={};return this.children.inorderTraversal((b,z)=>{m[b]=z.fold_(fr(l,b),u)}),u(l,this.value,m)}findOnPath(l,u){return this.findOnPath_(l,ct(),u)}findOnPath_(l,u,m){const b=!!this.value&&m(u,this.value);if(b)return b;if(jn(l))return null;{const z=Lt(l),V=this.children.get(z);return V?V.findOnPath_(mn(l),fr(u,z),m):null}}foreachOnPath(l,u){return this.foreachOnPath_(l,ct(),u)}foreachOnPath_(l,u,m){if(jn(l))return this;{this.value&&m(u,this.value);const b=Lt(l),z=this.children.get(b);return z?z.foreachOnPath_(mn(l),fr(u,b),m):new U(null)}}foreach(l){this.foreach_(ct(),l)}foreach_(l,u){this.children.inorderTraversal((m,b)=>{b.foreach_(fr(l,m),u)}),this.value&&u(l,this.value)}foreachChild(l){this.children.inorderTraversal((u,m)=>{m.value&&l(u,m.value)})}}class P{constructor(l){this.writeTree_=l}static empty(){return new P(new U(null))}}function Y(h,l,u){if(jn(l))return new P(new U(u));{const m=h.writeTree_.findRootMostValueAndPath(l);if(null!=m){const b=m.path;let z=m.value;const V=Br(b,l);return z=z.updateChild(V,u),new P(h.writeTree_.set(b,z))}{const b=new U(u),z=h.writeTree_.setTree(l,b);return new P(z)}}}function fe(h,l,u){let m=h;return An(u,(b,z)=>{m=Y(m,fr(l,b),z)}),m}function We(h,l){if(jn(l))return P.empty();{const u=h.writeTree_.setTree(l,new U(null));return new P(u)}}function vt(h,l){return null!=ln(h,l)}function ln(h,l){const u=h.writeTree_.findRootMostValueAndPath(l);return null!=u?h.writeTree_.get(u.path).getChild(Br(u.path,l)):null}function dr(h){const l=[],u=h.writeTree_.value;return null!=u?u.isLeafNode()||u.forEachChild(zr,(m,b)=>{l.push(new qn(m,b))}):h.writeTree_.children.inorderTraversal((m,b)=>{null!=b.value&&l.push(new qn(m,b.value))}),l}function or(h,l){if(jn(l))return h;{const u=ln(h,l);return new P(null!=u?new U(u):h.writeTree_.subtree(l))}}function xr(h){return h.writeTree_.isEmpty()}function Zn(h,l){return Yr(ct(),h.writeTree_,l)}function Yr(h,l,u){if(null!=l.value)return u.updateChild(h,l.value);{let m=null;return l.children.inorderTraversal((b,z)=>{".priority"===b?((0,H.hu)(null!==z.value,"Priority writes must always be leaf nodes"),m=z.value):u=Yr(fr(h,b),z,u)}),!u.getChild(h).isEmpty()&&null!==m&&(u=u.updateChild(fr(h,".priority"),m)),u}}function Fn(h,l){return ko(l,h)}function xi(h,l){if(h.snap)return o1(h.path,l);for(const u in h.children)if(h.children.hasOwnProperty(u)&&o1(fr(h.path,u),l))return!0;return!1}function Io(h){return h.visible}function ms(h,l,u){let m=P.empty();for(let b=0;b<h.length;++b){const z=h[b];if(l(z)){const V=z.path;let Q;if(z.snap)o1(u,V)?(Q=Br(u,V),m=Y(m,Q,z.snap)):o1(V,u)&&(Q=Br(V,u),m=Y(m,ct(),z.snap.getChild(Q)));else{if(!z.children)throw(0,H.g5)("WriteRecord should have .snap or .children");if(o1(u,V))Q=Br(u,V),m=fe(m,Q,z.children);else if(o1(V,u))if(Q=Br(V,u),jn(Q))m=fe(m,ct(),z.children);else{const ce=(0,H.DV)(z.children,Lt(Q));if(ce){const ve=ce.getChild(mn(Q));m=Y(m,ct(),ve)}}}}}return m}function bo(h,l,u,m,b){if(m||b){const z=or(h.visibleWrites,l);return!b&&xr(z)?u:b||null!=u||vt(z,ct())?Zn(ms(h.allWrites,function(ve){return(ve.visible||b)&&(!m||!~m.indexOf(ve.writeId))&&(o1(ve.path,l)||o1(l,ve.path))},l),u||Rn.EMPTY_NODE):null}{const z=ln(h.visibleWrites,l);if(null!=z)return z;{const V=or(h.visibleWrites,l);return xr(V)?u:null!=u||vt(V,ct())?Zn(V,u||Rn.EMPTY_NODE):null}}}function Ys(h,l,u,m){return bo(h.writeTree,h.treePath,l,u,m)}function Po(h,l){return function w2(h,l,u){let m=Rn.EMPTY_NODE;const b=ln(h.visibleWrites,l);if(b)return b.isLeafNode()||b.forEachChild(zr,(z,V)=>{m=m.updateImmediateChild(z,V)}),m;if(u){const z=or(h.visibleWrites,l);return u.forEachChild(zr,(V,Q)=>{const ce=Zn(or(z,new $e(V)),Q);m=m.updateImmediateChild(V,ce)}),dr(z).forEach(V=>{m=m.updateImmediateChild(V.name,V.node)}),m}return dr(or(h.visibleWrites,l)).forEach(V=>{m=m.updateImmediateChild(V.name,V.node)}),m}(h.writeTree,h.treePath,l)}function ao(h,l,u,m){return function Mo(h,l,u,m,b){(0,H.hu)(m||b,"Either existingEventSnap or existingServerSnap must exist");const z=fr(l,u);if(vt(h.visibleWrites,z))return null;{const V=or(h.visibleWrites,z);return xr(V)?b.getChild(u):Zn(V,b.getChild(u))}}(h.writeTree,h.treePath,l,u,m)}function ii(h,l){return function P2(h,l){return ln(h.visibleWrites,l)}(h.writeTree,fr(h.treePath,l))}function gs(h,l,u){return function qo(h,l,u,m){const b=fr(l,u),z=ln(h.visibleWrites,b);return null!=z?z:m.isCompleteForChild(u)?Zn(or(h.visibleWrites,b),m.getNode().getImmediateChild(u)):null}(h.writeTree,h.treePath,l,u)}function u2(h,l){return ko(fr(h.treePath,l),h.writeTree)}function ko(h,l){return{treePath:h,writeTree:l}}class Rt{constructor(){this.changeMap=new Map}trackChildChange(l){const u=l.type,m=l.childName;(0,H.hu)("child_added"===u||"child_changed"===u||"child_removed"===u,"Only child changes supported for tracking"),(0,H.hu)(".priority"!==m,"Only non-priority child changes can be tracked.");const b=this.changeMap.get(m);if(b){const z=b.type;if("child_added"===u&&"child_removed"===z)this.changeMap.set(m,it(m,l.snapshotNode,b.snapshotNode));else if("child_removed"===u&&"child_added"===z)this.changeMap.delete(m);else if("child_removed"===u&&"child_changed"===z)this.changeMap.set(m,X1(m,b.oldSnap));else if("child_changed"===u&&"child_added"===z)this.changeMap.set(m,$s(m,l.snapshotNode));else{if("child_changed"!==u||"child_changed"!==z)throw(0,H.g5)("Illegal combination of changes: "+l+" occurred after "+b);this.changeMap.set(m,it(m,l.snapshotNode,b.oldSnap))}}else this.changeMap.set(m,l)}getChanges(){return Array.from(this.changeMap.values())}}const I1=new class Ui{getCompleteChild(l){return null}getChildAfterChild(l,u,m){return null}};class Oo{constructor(l,u,m=null){this.writes_=l,this.viewCache_=u,this.optCompleteServerCache_=m}getCompleteChild(l){const u=this.viewCache_.eventCache;if(u.isCompleteForChild(l))return u.getNode().getImmediateChild(l);{const m=null!=this.optCompleteServerCache_?new qr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gs(this.writes_,l,m)}}getChildAfterChild(l,u,m){const b=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:f1(this.viewCache_),z=function Ts(h,l,u,m,b,z){return function E2(h,l,u,m,b,z,V){let Q;const ce=or(h.visibleWrites,l),ve=ln(ce,ct());if(null!=ve)Q=ve;else{if(null==u)return[];Q=Zn(ce,u)}if(Q=Q.withIndex(V),Q.isEmpty()||Q.isLeafNode())return[];{const rt=[],ot=V.getCompare(),Mt=z?Q.getReverseIteratorFrom(m,V):Q.getIteratorFrom(m,V);let dn=Mt.getNext();for(;dn&&rt.length<b;)0!==ot(dn,m)&&rt.push(dn),dn=Mt.getNext();return rt}}(h.writeTree,h.treePath,l,u,m,b,z)}(this.writes_,b,u,1,m,l);return 0===z.length?null:z[0]}}function Ye(h,l,u,m,b,z){const V=l.eventCache;if(null!=ii(m,u))return l;{let Q,ce;if(jn(u))if((0,H.hu)(l.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),l.serverCache.isFiltered()){const ve=f1(l),ot=Po(m,ve instanceof Rn?ve:Rn.EMPTY_NODE);Q=h.filter.updateFullNode(l.eventCache.getNode(),ot,z)}else{const ve=Ys(m,f1(l));Q=h.filter.updateFullNode(l.eventCache.getNode(),ve,z)}else{const ve=Lt(u);if(".priority"===ve){(0,H.hu)(1===In(u),"Can't have a priority with additional path components");const rt=V.getNode();ce=l.serverCache.getNode();const ot=ao(m,u,rt,ce);Q=null!=ot?h.filter.updatePriority(rt,ot):V.getNode()}else{const rt=mn(u);let ot;if(V.isCompleteForChild(ve)){ce=l.serverCache.getNode();const Mt=ao(m,u,V.getNode(),ce);ot=null!=Mt?V.getNode().getImmediateChild(ve).updateChild(rt,Mt):V.getNode().getImmediateChild(ve)}else ot=gs(m,ve,l.serverCache);Q=null!=ot?h.filter.updateChild(V.getNode(),ve,ot,rt,b,z):V.getNode()}}return qs(l,Q,V.isFullyInitialized()||jn(u),h.filter.filtersNodes())}}function wt(h,l,u,m,b,z,V,Q){const ce=l.serverCache;let ve;const rt=V?h.filter:h.filter.getIndexedFilter();if(jn(u))ve=rt.updateFullNode(ce.getNode(),m,null);else if(rt.filtersNodes()&&!ce.isFiltered()){const dn=ce.getNode().updateChild(u,m);ve=rt.updateFullNode(ce.getNode(),dn,null)}else{const dn=Lt(u);if(!ce.isCompleteForPath(u)&&In(u)>1)return l;const xn=mn(u),rs=ce.getNode().getImmediateChild(dn).updateChild(xn,m);ve=".priority"===dn?rt.updatePriority(ce.getNode(),rs):rt.updateChild(ce.getNode(),dn,rs,xn,I1,null)}const ot=zo(l,ve,ce.isFullyInitialized()||jn(u),rt.filtersNodes());return Ye(h,ot,u,b,new Oo(b,ot,z),Q)}function t1(h,l,u,m,b,z,V){const Q=l.eventCache;let ce,ve;const rt=new Oo(b,l,z);if(jn(u))ve=h.filter.updateFullNode(l.eventCache.getNode(),m,V),ce=qs(l,ve,!0,h.filter.filtersNodes());else{const ot=Lt(u);if(".priority"===ot)ve=h.filter.updatePriority(l.eventCache.getNode(),m),ce=qs(l,ve,Q.isFullyInitialized(),Q.isFiltered());else{const Mt=mn(u),dn=Q.getNode().getImmediateChild(ot);let xn;if(jn(Mt))xn=m;else{const oi=rt.getCompleteChild(ot);xn=null!=oi?".priority"===_r(Mt)&&oi.getChild(Pi(Mt)).isEmpty()?oi:oi.updateChild(Mt,m):Rn.EMPTY_NODE}ce=dn.equals(xn)?l:qs(l,h.filter.updateChild(Q.getNode(),ot,xn,Mt,rt,V),Q.isFullyInitialized(),h.filter.filtersNodes())}}return ce}function k2(h,l){return h.eventCache.isCompleteForChild(l)}function X2(h,l,u){return u.foreach((m,b)=>{l=l.updateChild(m,b)}),l}function Yo(h,l,u,m,b,z,V,Q){if(l.serverCache.getNode().isEmpty()&&!l.serverCache.isFullyInitialized())return l;let ve,ce=l;ve=jn(u)?m:new U(null).setTree(u,m);const rt=l.serverCache.getNode();return ve.children.inorderTraversal((ot,Mt)=>{if(rt.hasChild(ot)){const xn=X2(0,l.serverCache.getNode().getImmediateChild(ot),Mt);ce=wt(h,ce,new $e(ot),xn,b,z,V,Q)}}),ve.children.inorderTraversal((ot,Mt)=>{const dn=!l.serverCache.isCompleteForChild(ot)&&null===Mt.value;if(!rt.hasChild(ot)&&!dn){const oi=X2(0,l.serverCache.getNode().getImmediateChild(ot),Mt);ce=wt(h,ce,new $e(ot),oi,b,z,V,Q)}}),ce}class I2{constructor(l,u){this.query_=l,this.eventRegistrations_=[];const m=this.query_._queryParams,b=new Wi(m.getIndex()),z=function z1(h){return h.loadsAllData()?new Wi(h.getIndex()):h.hasLimit()?new Qi(h):new U1(h)}(m);this.processor_=function an(h){return{filter:h}}(z);const V=u.serverCache,Q=u.eventCache,ce=b.updateFullNode(Rn.EMPTY_NODE,V.getNode(),null),ve=z.updateFullNode(Rn.EMPTY_NODE,Q.getNode(),null),rt=new qr(ce,V.isFullyInitialized(),b.filtersNodes()),ot=new qr(ve,Q.isFullyInitialized(),z.filtersNodes());this.viewCache_=Ks(ot,rt),this.eventGenerator_=new Zs(this.query_)}get query(){return this.query_}}function Ho(h,l){const u=f1(h.viewCache_);return u&&(h.query._queryParams.loadsAllData()||!jn(l)&&!u.getImmediateChild(Lt(l)).isEmpty())?u.getChild(l):null}function Qn(h){return 0===h.eventRegistrations_.length}function Qr(h,l,u){const m=[];if(u){(0,H.hu)(null==l,"A cancel should cancel all event registrations.");const b=h.query._path;h.eventRegistrations_.forEach(z=>{const V=z.createCancelEvent(u,b);V&&m.push(V)})}if(l){let b=[];for(let z=0;z<h.eventRegistrations_.length;++z){const V=h.eventRegistrations_[z];if(V.matches(l)){if(l.hasAnyCallback()){b=b.concat(h.eventRegistrations_.slice(z+1));break}}else b.push(V)}h.eventRegistrations_=b}else h.eventRegistrations_=[];return m}function Vr(h,l,u,m){l.type===Kr.MERGE&&null!==l.source.queryId&&((0,H.hu)(f1(h.viewCache_),"We should always have a full cache before handling merges"),(0,H.hu)(ds(h.viewCache_),"Missing event cache, even though we have a server cache"));const b=h.viewCache_,z=function Q2(h,l,u,m,b){const z=new Rt;let V,Q;if(u.type===Kr.OVERWRITE){const ve=u;ve.source.fromUser?V=t1(h,l,ve.path,ve.snap,m,b,z):((0,H.hu)(ve.source.fromServer,"Unknown source."),Q=ve.source.tagged||l.serverCache.isFiltered()&&!jn(ve.path),V=wt(h,l,ve.path,ve.snap,m,b,Q,z))}else if(u.type===Kr.MERGE){const ve=u;ve.source.fromUser?V=function P1(h,l,u,m,b,z,V){let Q=l;return m.foreach((ce,ve)=>{const rt=fr(u,ce);k2(l,Lt(rt))&&(Q=t1(h,Q,rt,ve,b,z,V))}),m.foreach((ce,ve)=>{const rt=fr(u,ce);k2(l,Lt(rt))||(Q=t1(h,Q,rt,ve,b,z,V))}),Q}(h,l,ve.path,ve.children,m,b,z):((0,H.hu)(ve.source.fromServer,"Unknown source."),Q=ve.source.tagged||l.serverCache.isFiltered(),V=Yo(h,l,ve.path,ve.children,m,b,Q,z))}else if(u.type===Kr.ACK_USER_WRITE){const ve=u;V=ve.revert?function Qo(h,l,u,m,b,z){let V;if(null!=ii(m,u))return l;{const Q=new Oo(m,l,b),ce=l.eventCache.getNode();let ve;if(jn(u)||".priority"===Lt(u)){let rt;if(l.serverCache.isFullyInitialized())rt=Ys(m,f1(l));else{const ot=l.serverCache.getNode();(0,H.hu)(ot instanceof Rn,"serverChildren would be complete if leaf node"),rt=Po(m,ot)}ve=h.filter.updateFullNode(ce,rt,z)}else{const rt=Lt(u);let ot=gs(m,rt,l.serverCache);null==ot&&l.serverCache.isCompleteForChild(rt)&&(ot=ce.getImmediateChild(rt)),ve=null!=ot?h.filter.updateChild(ce,rt,ot,mn(u),Q,z):l.eventCache.getNode().hasChild(rt)?h.filter.updateChild(ce,rt,Rn.EMPTY_NODE,mn(u),Q,z):ce,ve.isEmpty()&&l.serverCache.isFullyInitialized()&&(V=Ys(m,f1(l)),V.isLeafNode()&&(ve=h.filter.updateFullNode(ve,V,z)))}return V=l.serverCache.isFullyInitialized()||null!=ii(m,ct()),qs(l,ve,V,h.filter.filtersNodes())}}(h,l,ve.path,m,b,z):function J2(h,l,u,m,b,z,V){if(null!=ii(b,u))return l;const Q=l.serverCache.isFiltered(),ce=l.serverCache;if(null!=m.value){if(jn(u)&&ce.isFullyInitialized()||ce.isCompleteForPath(u))return wt(h,l,u,ce.getNode().getChild(u),b,z,Q,V);if(jn(u)){let ve=new U(null);return ce.getNode().forEachChild(ui,(rt,ot)=>{ve=ve.set(new $e(rt),ot)}),Yo(h,l,u,ve,b,z,Q,V)}return l}{let ve=new U(null);return m.foreach((rt,ot)=>{const Mt=fr(u,rt);ce.isCompleteForPath(Mt)&&(ve=ve.set(rt,ce.getNode().getChild(Mt)))}),Yo(h,l,u,ve,b,z,Q,V)}}(h,l,ve.path,ve.affectedTree,m,b,z)}else{if(u.type!==Kr.LISTEN_COMPLETE)throw(0,H.g5)("Unknown operation type: "+u.type);V=function Vo(h,l,u,m,b){const z=l.serverCache;return Ye(h,zo(l,z.getNode(),z.isFullyInitialized()||jn(u),z.isFiltered()),u,m,I1,b)}(h,l,u.path,m,z)}const ce=z.getChanges();return function Yt(h,l,u){const m=l.eventCache;if(m.isFullyInitialized()){const b=m.getNode().isLeafNode()||m.getNode().isEmpty(),z=ds(h);(u.length>0||!h.eventCache.isFullyInitialized()||b&&!m.getNode().equals(z)||!m.getNode().getPriority().equals(z.getPriority()))&&u.push(Eo(ds(l)))}}(l,V,ce),{viewCache:V,changes:ce}}(h.processor_,b,l,u,m);return function fn(h,l){(0,H.hu)(l.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,H.hu)(l.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,z.viewCache),(0,H.hu)(z.viewCache.serverCache.isFullyInitialized()||!b.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=z.viewCache,Fo(h,z.changes,z.viewCache.eventCache.getNode(),null)}function Fo(h,l,u,m){return function Wr(h,l,u,m){const b=[],z=[];return l.forEach(V=>{"child_changed"===V.type&&h.index_.indexedValueChanged(V.oldSnap,V.snapshotNode)&&z.push(function hr(h,l){return{type:"child_moved",snapshotNode:l,childName:h}}(V.childName,V.snapshotNode))}),Hi(h,b,"child_removed",l,m,u),Hi(h,b,"child_added",l,m,u),Hi(h,b,"child_moved",z,m,u),Hi(h,b,"child_changed",l,m,u),Hi(h,b,"value",l,m,u),b}(h.eventGenerator_,l,u,m?[m]:h.eventRegistrations_)}let ar,lo;class b2{constructor(){this.views=new Map}}function Xo(h,l,u,m){const b=l.source.queryId;if(null!==b){const z=h.views.get(b);return(0,H.hu)(null!=z,"SyncTree gave us an op for an invalid query."),Vr(z,l,u,m)}{let z=[];for(const V of h.views.values())z=z.concat(Vr(V,l,u,m));return z}}function As(h,l,u,m,b){const V=h.views.get(l._queryIdentifier);if(!V){let Q=Ys(u,b?m:null),ce=!1;Q?ce=!0:m instanceof Rn?(Q=Po(u,m),ce=!1):(Q=Rn.EMPTY_NODE,ce=!1);const ve=Ks(new qr(Q,ce,!1),new qr(m,b,!1));return new I2(l,ve)}return V}function f2(h){const l=[];for(const u of h.views.values())u.query._queryParams.loadsAllData()||l.push(u);return l}function J1(h,l){let u=null;for(const m of h.views.values())u=u||Ho(m,l);return u}function b1(h,l){return l._queryParams.loadsAllData()?co(h):h.views.get(l._queryIdentifier)}function vs(h,l){return null!=b1(h,l)}function Ni(h){return null!=co(h)}function co(h){for(const l of h.views.values())if(l.query._queryParams.loadsAllData())return l;return null}let S2=1;class Xe{constructor(l){this.listenProvider_=l,this.syncPointTree_=new U(null),this.pendingWriteTree_=function d1(){return{visibleWrites:P.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function n1(h,l,u,m,b){return function Ei(h,l,u,m,b){(0,H.hu)(m>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===b&&(b=!0),h.allWrites.push({path:l,snap:u,writeId:m,visible:b}),b&&(h.visibleWrites=Y(h.visibleWrites,l,u)),h.lastWriteId=m}(h.pendingWriteTree_,l,u,m,b),b?N(h,new so({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,u)):[]}function p1(h,l,u=!1){const m=function e1(h,l){for(let u=0;u<h.allWrites.length;u++){const m=h.allWrites[u];if(m.writeId===l)return m}return null}(h.pendingWriteTree_,l);if(function R1(h,l){const u=h.allWrites.findIndex(Q=>Q.writeId===l);(0,H.hu)(u>=0,"removeWrite called with nonexistent writeId.");const m=h.allWrites[u];h.allWrites.splice(u,1);let b=m.visible,z=!1,V=h.allWrites.length-1;for(;b&&V>=0;){const Q=h.allWrites[V];Q.visible&&(V>=u&&xi(Q,m.path)?b=!1:o1(m.path,Q.path)&&(z=!0)),V--}return!!b&&(z?(function oo(h){h.visibleWrites=ms(h.allWrites,Io,ct()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(m.snap?h.visibleWrites=We(h.visibleWrites,m.path):An(m.children,ce=>{h.visibleWrites=We(h.visibleWrites,fr(m.path,ce))}),!0))}(h.pendingWriteTree_,l)){let z=new U(null);return null!=m.snap?z=z.set(ct(),!0):An(m.children,V=>{z=z.set(new $e(V),!0)}),N(h,new c1(m.path,z,u))}return[]}function ys(h,l,u){return N(h,new so({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,u))}function Bo(h,l,u,m,b=!1){const z=l._path,V=h.syncPointTree_.get(z);let Q=[];if(V&&("default"===l._queryIdentifier||vs(V,l))){const ce=function Uo(h,l,u,m){const b=l._queryIdentifier,z=[];let V=[];const Q=Ni(h);if("default"===b)for(const[ce,ve]of h.views.entries())V=V.concat(Qr(ve,u,m)),Qn(ve)&&(h.views.delete(ce),ve.query._queryParams.loadsAllData()||z.push(ve.query));else{const ce=h.views.get(b);ce&&(V=V.concat(Qr(ce,u,m)),Qn(ce)&&(h.views.delete(b),ce.query._queryParams.loadsAllData()||z.push(ce.query)))}return Q&&!Ni(h)&&z.push(new(function nn(){return(0,H.hu)(ar,"Reference.ts has not been loaded"),ar}())(l._repo,l._path)),{removed:z,events:V}}(V,l,u,m);(function h2(h){return 0===h.views.size})(V)&&(h.syncPointTree_=h.syncPointTree_.remove(z));const ve=ce.removed;if(Q=ce.events,!b){const rt=-1!==ve.findIndex(Mt=>Mt._queryParams.loadsAllData()),ot=h.syncPointTree_.findOnPath(z,(Mt,dn)=>Ni(dn));if(rt&&!ot){const Mt=h.syncPointTree_.subtree(z);if(!Mt.isEmpty()){const dn=function Qt(h){return h.fold((l,u,m)=>{if(u&&Ni(u))return[co(u)];{let b=[];return u&&(b=f2(u)),An(m,(z,V)=>{b=b.concat(V)}),b}})}(Mt);for(let xn=0;xn<dn.length;++xn){const oi=dn[xn],rs=oi.query,z2=M(h,oi);h.listenProvider_.startListening(on(rs),k(h,rs),z2.hashFn,z2.onComplete)}}}!ot&&ve.length>0&&!m&&(rt?h.listenProvider_.stopListening(on(l),null):ve.forEach(Mt=>{const dn=h.queryToTagMap.get(q(Mt));h.listenProvider_.stopListening(on(Mt),dn)}))}!function Bt(h,l){for(let u=0;u<l.length;++u){const m=l[u];if(!m._queryParams.loadsAllData()){const b=q(m),z=h.queryToTagMap.get(b);h.queryToTagMap.delete(b),h.tagToQueryMap.delete(z)}}}(h,ve)}return Q}function xs(h,l,u,m){const b=he(h,m);if(null!=b){const z=_e(b),V=z.path,Q=z.queryId,ce=Br(V,l);return je(h,V,new so(Gs(Q),ce,u))}return[]}function I(h,l,u,m=!1){const b=l._path;let z=null,V=!1;h.syncPointTree_.foreachOnPath(b,(Mt,dn)=>{const xn=Br(Mt,b);z=z||J1(dn,xn),V=V||Ni(dn)});let ce,Q=h.syncPointTree_.get(b);Q?(V=V||Ni(Q),z=z||J1(Q,ct())):(Q=new b2,h.syncPointTree_=h.syncPointTree_.set(b,Q)),null!=z?ce=!0:(ce=!1,z=Rn.EMPTY_NODE,h.syncPointTree_.subtree(b).foreachChild((dn,xn)=>{const oi=J1(xn,ct());oi&&(z=z.updateImmediateChild(dn,oi))}));const ve=vs(Q,l);if(!ve&&!l._queryParams.loadsAllData()){const Mt=q(l);(0,H.hu)(!h.queryToTagMap.has(Mt),"View does not exist, but we have a tag");const dn=function kn(){return S2++}();h.queryToTagMap.set(Mt,dn),h.tagToQueryMap.set(dn,Mt)}let ot=function si(h,l,u,m,b,z){const V=As(h,l,m,b,z);return h.views.has(l._queryIdentifier)||h.views.set(l._queryIdentifier,V),function l1(h,l){h.eventRegistrations_.push(l)}(V,u),function Ln(h,l){const u=h.viewCache_.eventCache,m=[];return u.getNode().isLeafNode()||u.getNode().forEachChild(zr,(z,V)=>{m.push($s(z,V))}),u.isFullyInitialized()&&m.push(Eo(u.getNode())),Fo(h,m,u.getNode(),l)}(V,u)}(Q,l,u,Fn(h.pendingWriteTree_,b),z,ce);if(!ve&&!V&&!m){const Mt=b1(Q,l);ot=ot.concat(function Sn(h,l,u){const m=l._path,b=k(h,l),z=M(h,u),V=h.listenProvider_.startListening(on(l),b,z.hashFn,z.onComplete),Q=h.syncPointTree_.subtree(m);if(b)(0,H.hu)(!Ni(Q.value),"If we're adding a query, it shouldn't be shadowed");else{const ce=Q.fold((ve,rt,ot)=>{if(!jn(ve)&&rt&&Ni(rt))return[co(rt).query];{let Mt=[];return rt&&(Mt=Mt.concat(f2(rt).map(dn=>dn.query))),An(ot,(dn,xn)=>{Mt=Mt.concat(xn)}),Mt}});for(let ve=0;ve<ce.length;++ve){const rt=ce[ve];h.listenProvider_.stopListening(on(rt),k(h,rt))}}return V}(h,l,Mt))}return ot}function D(h,l,u){const b=h.pendingWriteTree_,z=h.syncPointTree_.findOnPath(l,(V,Q)=>{const ve=J1(Q,Br(V,l));if(ve)return ve});return bo(b,l,z,u,!0)}function N(h,l){return O(l,h.syncPointTree_,null,Fn(h.pendingWriteTree_,ct()))}function O(h,l,u,m){if(jn(h.path))return _(h,l,u,m);{const b=l.get(ct());null==u&&null!=b&&(u=J1(b,ct()));let z=[];const V=Lt(h.path),Q=h.operationForChild(V),ce=l.children.get(V);if(ce&&Q){const ve=u?u.getImmediateChild(V):null,rt=u2(m,V);z=z.concat(O(Q,ce,ve,rt))}return b&&(z=z.concat(Xo(b,h,m,u))),z}}function _(h,l,u,m){const b=l.get(ct());null==u&&null!=b&&(u=J1(b,ct()));let z=[];return l.children.inorderTraversal((V,Q)=>{const ce=u?u.getImmediateChild(V):null,ve=u2(m,V),rt=h.operationForChild(V);rt&&(z=z.concat(_(rt,Q,ce,ve)))}),b&&(z=z.concat(Xo(b,h,m,u))),z}function M(h,l){const u=l.query,m=k(h,u);return{hashFn:()=>(function wc(h){return h.viewCache_.serverCache.getNode()}(l)||Rn.EMPTY_NODE).hash(),onComplete:b=>{if("ok"===b)return m?function j1(h,l,u){const m=he(h,u);if(m){const b=_e(m),z=b.path,V=b.queryId,Q=Br(z,l);return je(h,z,new Ss(Gs(V),Q))}return[]}(h,u._path,m):function Ea(h,l){return N(h,new Ss({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l))}(h,u._path);{const z=function hn(h,l){let u="Unknown Error";"too_big"===h?u="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?u="Client doesn't have permission to access the desired data.":"unavailable"===h&&(u="The service is unavailable");const m=new Error(h+" at "+l._path.toString()+": "+u);return m.code=h.toUpperCase(),m}(b,u);return Bo(h,u,null,z)}}}}function k(h,l){const u=q(l);return h.queryToTagMap.get(u)}function q(h){return h._path.toString()+"$"+h._queryIdentifier}function he(h,l){return h.tagToQueryMap.get(l)}function _e(h){const l=h.indexOf("$");return(0,H.hu)(-1!==l&&l<h.length-1,"Bad queryKey."),{queryId:h.substr(l+1),path:new $e(h.substr(0,l))}}function je(h,l,u){const m=h.syncPointTree_.get(l);return(0,H.hu)(m,"Missing sync point for query tag that we're tracking"),Xo(m,u,Fn(h.pendingWriteTree_,l),null)}function on(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function M2(){return(0,H.hu)(lo,"Reference.ts has not been loaded"),lo}())(h._repo,h._path):h}class $1{constructor(l){this.node_=l}getImmediateChild(l){const u=this.node_.getImmediateChild(l);return new $1(u)}node(){return this.node_}}class hi{constructor(l,u){this.syncTree_=l,this.path_=u}getImmediateChild(l){const u=fr(this.path_,l);return new hi(this.syncTree_,u)}node(){return D(this.syncTree_,this.path_)}}const Ns=function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h},D2=function(h,l,u){return h&&"object"==typeof h?((0,H.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?ho(h[".sv"],l,u):"object"==typeof h[".sv"]?m1(h[".sv"],l):void(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},ho=function(h,l,u){if("timestamp"===h)return u.timestamp;(0,H.hu)(!1,"Unexpected server value: "+h)},m1=function(h,l,u){h.hasOwnProperty("increment")||(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const m=h.increment;"number"!=typeof m&&(0,H.hu)(!1,"Unexpected increment value: "+m);const b=l.node();if((0,H.hu)(null!==b&&typeof b<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!b.isLeafNode())return m;const V=b.getValue();return"number"!=typeof V?m:V+m},Ls=function(h,l,u,m){return Ba(l,new hi(u,h),m)},es=function(h,l,u){return Ba(h,new $1(l),u)};function Ba(h,l,u){const m=h.getPriority().val(),b=D2(m,l.getImmediateChild(".priority"),u);let z;if(h.isLeafNode()){const V=h,Q=D2(V.getValue(),l,u);return Q!==V.getValue()||b!==V.getPriority().val()?new Cr(Q,sr(b)):h}{const V=h;return z=V,b!==V.getPriority().val()&&(z=z.updatePriority(new Cr(b))),V.forEachChild(zr,(Q,ce)=>{const ve=Ba(ce,l.getImmediateChild(Q),u);ve!==ce&&(z=z.updateImmediateChild(Q,ve))}),z}}class O2{constructor(l="",u=null,m={children:{},childCount:0}){this.name=l,this.parent=u,this.node=m}}function ea(h,l){let u=l instanceof $e?l:new $e(l),m=h,b=Lt(u);for(;null!==b;){const z=(0,H.DV)(m.node.children,b)||{children:{},childCount:0};m=new O2(b,m,z),u=mn(u),b=Lt(u)}return m}function fo(h){return h.node.value}function Ia(h,l){h.node.value=l,Ga(h)}function ja(h){return h.node.childCount>0}function $a(h,l){An(h.node.children,(u,m)=>{l(new O2(u,h,m))})}function d2(h,l,u,m){u&&!m&&l(h),$a(h,b=>{d2(b,l,!0,m)}),u&&m&&l(h)}function Wa(h){return new $e(null===h.parent?h.name:Wa(h.parent)+"/"+h.name)}function Ga(h){null!==h.parent&&function M0(h,l,u){const m=function Xc(h){return void 0===fo(h)&&!ja(h)}(u),b=(0,H.r3)(h.node.children,l);m&&b?(delete h.node.children[l],h.node.childCount--,Ga(h)):!m&&!b&&(h.node.children[l]=u.node,h.node.childCount++,Ga(h))}(h.parent,h.name,h)}const g6=/[\[\].#$\/\u0000-\u001F\u007F]/,v6=/[\[\].#$\u0000-\u001F\u007F]/,T2=10485760,Ic=function(h){return"string"==typeof h&&0!==h.length&&!g6.test(h)},Za=function(h){return"string"==typeof h&&0!==h.length&&!v6.test(h)},yr=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!br(h)||h&&"object"==typeof h&&(0,H.r3)(h,".sv")},Sr=function(h,l,u,m){m&&void 0===l||Jo((0,H.gK)(h,"value"),l,u)},Jo=function(h,l,u){const m=u instanceof $e?new q1(u,h):u;if(void 0===l)throw new Error(h+"contains undefined "+Es(m));if("function"==typeof l)throw new Error(h+"contains a function "+Es(m)+" with contents = "+l.toString());if(br(l))throw new Error(h+"contains "+l.toString()+" "+Es(m));if("string"==typeof l&&l.length>T2/3&&(0,H.ug)(l)>T2)throw new Error(h+"contains a string greater than "+T2+" utf8 bytes "+Es(m)+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){let b=!1,z=!1;if(An(l,(V,Q)=>{if(".value"===V)b=!0;else if(".priority"!==V&&".sv"!==V&&(z=!0,!Ic(V)))throw new Error(h+" contains an invalid key ("+V+") "+Es(m)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function A1(h,l){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(l),h.byteLength_+=(0,H.ug)(l),Hs(h)})(m,V),Jo(h,Q,m),function eo(h){const l=h.parts_.pop();h.byteLength_-=(0,H.ug)(l),h.parts_.length>0&&(h.byteLength_-=1)}(m)}),b&&z)throw new Error(h+' contains ".value" child '+Es(m)+" in addition to actual children.")}},po=function(h,l,u,m){if(m&&void 0===l)return;const b=(0,H.gK)(h,"values");if(!l||"object"!=typeof l||Array.isArray(l))throw new Error(b+" must be an object containing the children to replace.");const z=[];An(l,(V,Q)=>{const ce=new $e(V);if(Jo(b,Q,fr(u,ce)),".priority"===_r(ce)&&!yr(Q))throw new Error(b+"contains an invalid value for '"+ce.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");z.push(ce)}),function(h,l){let u,m;for(u=0;u<l.length;u++){m=l[u];const z=di(m);for(let V=0;V<z.length;V++)if((".priority"!==z[V]||V!==z.length-1)&&!Ic(z[V]))throw new Error(h+"contains an invalid key ("+z[V]+") in path "+m.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}l.sort(Co);let b=null;for(u=0;u<l.length;u++){if(m=l[u],null!==b&&o1(b,m))throw new Error(h+"contains a path "+b.toString()+" that is ancestor of another path "+m.toString());b=m}}(b,z)},Mc=function(h,l,u){if(!u||void 0!==l){if(br(l))throw new Error((0,H.gK)(h,"priority")+"is "+l.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!yr(l))throw new Error((0,H.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ta=function(h,l,u,m){if(!(m&&void 0===u||Ic(u)))throw new Error((0,H.gK)(h,l)+'was an invalid key = "'+u+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ba=function(h,l,u,m){if(!(m&&void 0===u||Za(u)))throw new Error((0,H.gK)(h,l)+'was an invalid path = "'+u+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},e4=function(h,l,u,m){u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),ba(h,l,u,m)},_s=function(h,l){if(".info"===Lt(l))throw new Error(h+" failed = Can't modify data under /.info/")},k4=function(h,l){const u=l.path.toString();if("string"!=typeof l.repoInfo.host||0===l.repoInfo.host.length||!Ic(l.repoInfo.namespace)&&"localhost"!==l.repoInfo.host.split(":")[0]||0!==u.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),Za(h)}(u))throw new Error((0,H.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class t4{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sc(h,l){let u=null;for(let m=0;m<l.length;m++){const b=l[m],z=b.getPath();null!==u&&!ws(z,u.path)&&(h.eventLists_.push(u),u=null),null===u&&(u={events:[],path:z}),u.events.push(b)}u&&h.eventLists_.push(u)}function Ka(h,l,u){Sc(h,u),qa(h,m=>ws(m,l))}function Do(h,l,u){Sc(h,u),qa(h,m=>o1(m,l)||o1(l,m))}function qa(h,l){h.recursionDepth_++;let u=!0;for(let m=0;m<h.eventLists_.length;m++){const b=h.eventLists_[m];b&&(l(b.path)?(mo(h.eventLists_[m]),h.eventLists_[m]=null):u=!1)}u&&(h.eventLists_=[]),h.recursionDepth_--}function mo(h){for(let l=0;l<h.events.length;l++){const u=h.events[l];if(null!==u){h.events[l]=null;const m=u.getEventRunner();kt&&$t("event: "+u.toString()),Mn(m)}}}const Ya="repo_interrupt",V2=25;class n4{constructor(l,u,m,b){this.repoInfo_=l,this.forceRestClient_=u,this.authTokenProvider_=m,this.appCheckProvider_=b,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new t4,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qt(),this.transactionQueueTree_=new O2,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function A2(h){const u=h.infoData_.getNode(new $e(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+u}function g1(h){return Ns({timestamp:A2(h)})}function fi(h,l,u,m,b){h.dataUpdateCount++;const z=new $e(l);u=h.interceptServerDataCallback_?h.interceptServerDataCallback_(l,u):u;let V=[];if(b)if(m){const ce=(0,H.UI)(u,ve=>sr(ve));V=function Qc(h,l,u,m){const b=he(h,m);if(b){const z=_e(b),V=z.path,Q=z.queryId,ce=Br(V,l),ve=U.fromObject(u);return je(h,V,new Ds(Gs(Q),ce,ve))}return[]}(h.serverSyncTree_,z,ce,b)}else{const ce=sr(u);V=xs(h.serverSyncTree_,z,ce,b)}else if(m){const ce=(0,H.UI)(u,ve=>sr(ve));V=function So(h,l,u){const m=U.fromObject(u);return N(h,new Ds({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,m))}(h.serverSyncTree_,z,ce)}else{const ce=sr(u);V=ys(h.serverSyncTree_,z,ce)}let Q=z;V.length>0&&(Q=k1(h,z)),Do(h.eventQueue_,Q,V)}function Dc(h,l){Qs(h,"connected",l),!1===l&&function i4(h){jo(h,"onDisconnectEvents");const l=g1(h),u=qt();nr(h.onDisconnect_,ct(),(b,z)=>{const V=Ls(b,z,h.serverSyncTree_,l);Pn(u,b,V)});let m=[];nr(u,ct(),(b,z)=>{m=m.concat(ys(h.serverSyncTree_,b,z));const V=n2(h,b);k1(h,V)}),h.onDisconnect_=qt(),Do(h.eventQueue_,ct(),m)}(h)}function Qs(h,l,u){const m=new $e("/.info/"+l),b=sr(u);h.infoData_.updateSnapshot(m,b);const z=ys(h.infoSyncTree_,m,b);Do(h.eventQueue_,m,z)}function Li(h){return h.nextWriteId_++}function bi(h,l,u,m,b){jo(h,"set",{path:l.toString(),value:u,priority:m});const z=g1(h),V=sr(u,m),Q=D(h.serverSyncTree_,l),ce=es(V,Q,z),ve=Li(h),rt=n1(h.serverSyncTree_,l,ce,ve,!0);Sc(h.eventQueue_,rt),h.server_.put(l.toString(),V.val(!0),(Mt,dn)=>{const xn="ok"===Mt;xn||Nn("set at "+l+" failed: "+Mt);const oi=p1(h.serverSyncTree_,ve,!xn);Do(h.eventQueue_,l,oi),vo(0,b,Mt,dn)});const ot=n2(h,l);k1(h,ot),Do(h.eventQueue_,ot,[])}function e2(h,l,u){h.server_.onDisconnectCancel(l.toString(),(m,b)=>{"ok"===m&&Yn(h.onDisconnect_,l),vo(0,u,m,b)})}function H2(h,l,u,m){const b=sr(u);h.server_.onDisconnectPut(l.toString(),b.val(!0),(z,V)=>{"ok"===z&&Pn(h.onDisconnect_,l,b),vo(0,m,z,V)})}function Ac(h,l,u){let m;m=".info"===Lt(l._path)?Bo(h.infoSyncTree_,l,u):Bo(h.serverSyncTree_,l,u),Ka(h.eventQueue_,l._path,m)}function go(h){h.persistentConnection_&&h.persistentConnection_.interrupt(Ya)}function jo(h,...l){let u="";h.persistentConnection_&&(u=h.persistentConnection_.id+":"),$t(u,...l)}function vo(h,l,u,m){l&&Mn(()=>{if("ok"===u)l(null);else{const b=(u||"error").toUpperCase();let z=b;m&&(z+=": "+m);const V=new Error(z);V.code=b,l(V)}})}function ra(h,l,u){return D(h.serverSyncTree_,l,u)||Rn.EMPTY_NODE}function ia(h,l=h.transactionQueueTree_){if(l||Ma(h,l),fo(l)){const u=F2(h,l);(0,H.hu)(u.length>0,"Sending zero length transaction queue"),u.every(b=>0===b.status)&&function t2(h,l,u){const m=u.map(ve=>ve.currentWriteId),b=ra(h,l,m);let z=b;const V=b.hash();for(let ve=0;ve<u.length;ve++){const rt=u[ve];(0,H.hu)(0===rt.status,"tryToSendTransactionQueue_: items in queue should all be run."),rt.status=1,rt.retryCount++;const ot=Br(l,rt.path);z=z.updateChild(ot,rt.currentOutputSnapshotRaw)}const Q=z.val(!0),ce=l;h.server_.put(ce.toString(),Q,ve=>{jo(h,"transaction put response",{path:ce.toString(),status:ve});let rt=[];if("ok"===ve){const ot=[];for(let Mt=0;Mt<u.length;Mt++)u[Mt].status=2,rt=rt.concat(p1(h.serverSyncTree_,u[Mt].currentWriteId)),u[Mt].onComplete&&ot.push(()=>u[Mt].onComplete(null,!0,u[Mt].currentOutputSnapshotResolved)),u[Mt].unwatcher();Ma(h,ea(h.transactionQueueTree_,l)),ia(h,h.transactionQueueTree_),Do(h.eventQueue_,l,rt);for(let Mt=0;Mt<ot.length;Mt++)Mn(ot[Mt])}else{if("datastale"===ve)for(let ot=0;ot<u.length;ot++)u[ot].status=3===u[ot].status?4:0;else{Nn("transaction at "+ce.toString()+" failed: "+ve);for(let ot=0;ot<u.length;ot++)u[ot].status=4,u[ot].abortReason=ve}k1(h,l)}},V)}(h,Wa(l),u)}else ja(l)&&$a(l,u=>{ia(h,u)})}function k1(h,l){const u=sa(h,l),m=Wa(u);return function s4(h,l,u){if(0===l.length)return;const m=[];let b=[];const V=l.filter(Q=>0===Q.status).map(Q=>Q.currentWriteId);for(let Q=0;Q<l.length;Q++){const ce=l[Q],ve=Br(u,ce.path);let ot,rt=!1;if((0,H.hu)(null!==ve,"rerunTransactionsUnderNode_: relativePath should not be null."),4===ce.status)rt=!0,ot=ce.abortReason,b=b.concat(p1(h.serverSyncTree_,ce.currentWriteId,!0));else if(0===ce.status)if(ce.retryCount>=V2)rt=!0,ot="maxretry",b=b.concat(p1(h.serverSyncTree_,ce.currentWriteId,!0));else{const Mt=ra(h,ce.path,V);ce.currentInputSnapshot=Mt;const dn=l[Q].update(Mt.val());if(void 0!==dn){Jo("transaction failed: Data returned ",dn,ce.path);let xn=sr(dn);"object"==typeof dn&&null!=dn&&(0,H.r3)(dn,".priority")||(xn=xn.updatePriority(Mt.getPriority()));const rs=ce.currentWriteId,z2=g1(h),y2=es(xn,Mt,z2);ce.currentOutputSnapshotRaw=xn,ce.currentOutputSnapshotResolved=y2,ce.currentWriteId=Li(h),V.splice(V.indexOf(rs),1),b=b.concat(n1(h.serverSyncTree_,ce.path,y2,ce.currentWriteId,ce.applyLocally)),b=b.concat(p1(h.serverSyncTree_,rs,!0))}else rt=!0,ot="nodata",b=b.concat(p1(h.serverSyncTree_,ce.currentWriteId,!0))}Do(h.eventQueue_,u,b),b=[],rt&&(l[Q].status=2,setTimeout(l[Q].unwatcher,Math.floor(0)),l[Q].onComplete&&m.push("nodata"===ot?()=>l[Q].onComplete(null,!1,l[Q].currentInputSnapshot):()=>l[Q].onComplete(new Error(ot),!1,null)))}Ma(h,h.transactionQueueTree_);for(let Q=0;Q<m.length;Q++)Mn(m[Q]);ia(h,h.transactionQueueTree_)}(h,F2(h,u),m),m}function sa(h,l){let u,m=h.transactionQueueTree_;for(u=Lt(l);null!==u&&void 0===fo(m);)m=ea(m,u),u=Lt(l=mn(l));return m}function F2(h,l){const u=[];return o4(h,l,u),u.sort((m,b)=>m.order-b.order),u}function o4(h,l,u){const m=fo(l);if(m)for(let b=0;b<m.length;b++)u.push(m[b]);$a(l,b=>{o4(h,b,u)})}function Ma(h,l){const u=fo(l);if(u){let m=0;for(let b=0;b<u.length;b++)2!==u[b].status&&(u[m]=u[b],m++);u.length=m,Ia(l,u.length>0?u:void 0)}$a(l,m=>{Ma(h,m)})}function n2(h,l){const u=Wa(sa(h,l)),m=ea(h.transactionQueueTree_,l);return function Ec(h,l,u){let m=u?h:h.parent;for(;null!==m;){if(l(m))return!0;m=m.parent}}(m,b=>{Sa(h,b)}),Sa(h,m),d2(m,b=>{Sa(h,b)}),u}function Sa(h,l){const u=fo(l);if(u){const m=[];let b=[],z=-1;for(let V=0;V<u.length;V++)3===u[V].status||(1===u[V].status?((0,H.hu)(z===V-1,"All SENT items should be at beginning of queue."),z=V,u[V].status=3,u[V].abortReason="set"):((0,H.hu)(0===u[V].status,"Unexpected transaction status in abort"),u[V].unwatcher(),b=b.concat(p1(h.serverSyncTree_,u[V].currentWriteId,!0)),u[V].onComplete&&m.push(u[V].onComplete.bind(null,new Error("set"),!1,null))));-1===z?Ia(l,void 0):u.length=z+1,Do(h.eventQueue_,Wa(l),b);for(let V=0;V<m.length;V++)Mn(m[V])}}const Xa=function(h,l){const u=H4(h),m=u.namespace;return"firebase.com"===u.domain&&Gn(u.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!m||"undefined"===m)&&"localhost"!==u.domain&&Gn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),u.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Nn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new He(u.host,u.secure,m,"ws"===u.scheme||"wss"===u.scheme,l,"",m!==u.subdomain),path:new $e(u.pathString)}},H4=function(h){let l="",u="",m="",b="",z="",V=!0,Q="https",ce=443;if("string"==typeof h){let ve=h.indexOf("//");ve>=0&&(Q=h.substring(0,ve-1),h=h.substring(ve+2));let rt=h.indexOf("/");-1===rt&&(rt=h.length);let ot=h.indexOf("?");-1===ot&&(ot=h.length),l=h.substring(0,Math.min(rt,ot)),rt<ot&&(b=function a4(h){let l="";const u=h.split("/");for(let m=0;m<u.length;m++)if(u[m].length>0){let b=u[m];try{b=decodeURIComponent(b.replace(/\+/g," "))}catch{}l+="/"+b}return l}(h.substring(rt,ot)));const Mt=function c4(h){const l={};"?"===h.charAt(0)&&(h=h.substring(1));for(const u of h.split("&")){if(0===u.length)continue;const m=u.split("=");2===m.length?l[decodeURIComponent(m[0])]=decodeURIComponent(m[1]):Nn(`Invalid query segment '${u}' in query '${h}'`)}return l}(h.substring(Math.min(h.length,ot)));ve=l.indexOf(":"),ve>=0?(V="https"===Q||"wss"===Q,ce=parseInt(l.substring(ve+1),10)):ve=l.length;const dn=l.slice(0,ve);if("localhost"===dn.toLowerCase())u="localhost";else if(dn.split(".").length<=2)u=dn;else{const xn=l.indexOf(".");m=l.substring(0,xn).toLowerCase(),u=l.substring(xn+1),z=m}"ns"in Mt&&(z=Mt.ns)}return{host:l,port:ce,domain:u,subdomain:m,secure:V,scheme:Q,pathString:b,namespace:z}},Nc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ja=function(){let h=0;const l=[];return function(u){const m=u===h;let b;h=u;const z=new Array(8);for(b=7;b>=0;b--)z[b]=Nc.charAt(u%64),u=Math.floor(u/64);(0,H.hu)(0===u,"Cannot push at time == 0");let V=z.join("");if(m){for(b=11;b>=0&&63===l[b];b--)l[b]=0;l[b]++}else for(b=0;b<12;b++)l[b]=Math.floor(64*Math.random());for(b=0;b<12;b++)V+=Nc.charAt(l[b]);return(0,H.hu)(20===V.length,"nextPushId: Length should be 20."),V}}();class U2{constructor(l,u,m,b){this.eventType=l,this.eventRegistration=u,this.snapshot=m,this.prevName=b}getPath(){const l=this.snapshot.ref;return"value"===this.eventType?l._path:l.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,H.Wl)(this.snapshot.exportVal())}}class oa{constructor(l,u,m){this.eventRegistration=l,this.error=u,this.path=m}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ec{constructor(l,u){this.snapshotCallback=l,this.cancelCallback=u}onValue(l,u){this.snapshotCallback.call(null,l,u)}onCancel(l){return(0,H.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,l)}get hasCancelCallback(){return!!this.cancelCallback}matches(l){return this.snapshotCallback===l.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===l.snapshotCallback.userCallback&&this.snapshotCallback.context===l.snapshotCallback.context}}class B2{constructor(l,u){this._repo=l,this._path=u}cancel(){const l=new H.BH;return e2(this._repo,this._path,l.wrapCallback(()=>{})),l.promise}remove(){_s("OnDisconnect.remove",this._path);const l=new H.BH;return H2(this._repo,this._path,null,l.wrapCallback(()=>{})),l.promise}set(l){_s("OnDisconnect.set",this._path),Sr("OnDisconnect.set",l,this._path,!1);const u=new H.BH;return H2(this._repo,this._path,l,u.wrapCallback(()=>{})),u.promise}setWithPriority(l,u){_s("OnDisconnect.setWithPriority",this._path),Sr("OnDisconnect.setWithPriority",l,this._path,!1),Mc("OnDisconnect.setWithPriority",u,!1);const m=new H.BH;return function Tc(h,l,u,m,b){const z=sr(u,m);h.server_.onDisconnectPut(l.toString(),z.val(!0),(V,Q)=>{"ok"===V&&Pn(h.onDisconnect_,l,z),vo(0,b,V,Q)})}(this._repo,this._path,l,u,m.wrapCallback(()=>{})),m.promise}update(l){_s("OnDisconnect.update",this._path),po("OnDisconnect.update",l,this._path,!1);const u=new H.BH;return function p2(h,l,u,m){if((0,H.xb)(u))return $t("onDisconnect().update() called with empty data.  Don't do anything."),void vo(0,m,"ok",void 0);h.server_.onDisconnectMerge(l.toString(),u,(b,z)=>{"ok"===b&&An(u,(V,Q)=>{const ce=sr(Q);Pn(h.onDisconnect_,fr(l,V),ce)}),vo(0,m,b,z)})}(this._repo,this._path,l,u.wrapCallback(()=>{})),u.promise}}class W1{constructor(l,u,m,b){this._repo=l,this._path=u,this._queryParams=m,this._orderByCalled=b}get key(){return jn(this._path)?null:_r(this._path)}get ref(){return new G1(this._repo,this._path)}get _queryIdentifier(){const l=tt(this._queryParams),u=vn(l);return"{}"===u?"default":u}get _queryObject(){return tt(this._queryParams)}isEqual(l){if(!((l=(0,H.m9)(l))instanceof W1))return!1;const u=this._repo===l._repo,m=ws(this._path,l._path);return u&&m&&this._queryIdentifier===l._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ni(h){let l="";for(let u=h.pieceNum_;u<h.pieces_.length;u++)""!==h.pieces_[u]&&(l+="/"+encodeURIComponent(String(h.pieces_[u])));return l||"/"}(this._path)}}function j2(h,l){if(!0===h._orderByCalled)throw new Error(l+": You can't combine multiple orderBy calls.")}function yo(h){let l=null,u=null;if(h.hasStart()&&(l=h.getIndexStartValue()),h.hasEnd()&&(u=h.getIndexEndValue()),h.getIndex()===ui){const m="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",b="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==cr)throw new Error(m);if("string"!=typeof l)throw new Error(b)}if(h.hasEnd()){if(h.getIndexEndName()!==lr)throw new Error(m);if("string"!=typeof u)throw new Error(b)}}else if(h.getIndex()===zr){if(null!=l&&!yr(l)||null!=u&&!yr(u))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,H.hu)(h.getIndex()instanceof F1||h.getIndex()===io,"unknown index type."),null!=l&&"object"==typeof l||null!=u&&"object"==typeof u)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Da(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class G1 extends W1{constructor(l,u){super(l,u,new Ms,!1)}get parent(){const l=Pi(this._path);return null===l?null:new G1(this._repo,l)}get root(){let l=this;for(;null!==l.parent;)l=l.parent;return l}}class r2{constructor(l,u,m){this._node=l,this.ref=u,this._index=m}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(l){const u=new $e(l),m=m2(this.ref,l);return new r2(this._node.getChild(u),m,zr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(l){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(m,b)=>l(new r2(b,m2(this.ref,m),zr)))}hasChild(l){const u=new $e(l);return!this._node.getChild(u).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function aa(h,l){return(h=(0,H.m9)(h))._checkNotDeleted("ref"),void 0!==l?m2(h._root,l):h._root}function $2(h,l){(h=(0,H.m9)(h))._checkNotDeleted("refFromURL");const u=Xa(l,h._repo.repoInfo_.nodeAdmin);k4("refFromURL",u);const m=u.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&m.host!==h._repo.repoInfo_.host&&Gn("refFromURL: Host name does not match the current database: (found "+m.host+" but expected "+h._repo.repoInfo_.host+")"),aa(h,u.path.toString())}function m2(h,l){return null===Lt((h=(0,H.m9)(h))._path)?e4("child","path",l,!1):ba("child","path",l,!1),new G1(h._repo,fr(h._path,l))}function $o(h,l){h=(0,H.m9)(h),_s("set",h._path),Sr("set",l,h._path,!1);const u=new H.BH;return bi(h._repo,h._path,l,null,u.wrapCallback(()=>{})),u.promise}function ca(h,l){po("update",l,h._path,!1);const u=new H.BH;return function r4(h,l,u,m){jo(h,"update",{path:l.toString(),value:u});let b=!0;const z=g1(h),V={};if(An(u,(Q,ce)=>{b=!1,V[Q]=Ls(fr(l,Q),sr(ce),h.serverSyncTree_,z)}),b)$t("update() called with empty data.  Don't do anything."),vo(0,m,"ok",void 0);else{const Q=Li(h),ce=function B1(h,l,u,m){!function ps(h,l,u,m){(0,H.hu)(m>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:l,children:u,writeId:m,visible:!0}),h.visibleWrites=fe(h.visibleWrites,l,u),h.lastWriteId=m}(h.pendingWriteTree_,l,u,m);const b=U.fromObject(u);return N(h,new Ds({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,b))}(h.serverSyncTree_,l,V,Q);Sc(h.eventQueue_,ce),h.server_.merge(l.toString(),u,(ve,rt)=>{const ot="ok"===ve;ot||Nn("update at "+l+" failed: "+ve);const Mt=p1(h.serverSyncTree_,Q,!ot),dn=Mt.length>0?k1(h,l):l;Do(h.eventQueue_,dn,Mt),vo(0,m,ve,rt)}),An(u,ve=>{const rt=n2(h,fr(l,ve));k1(h,rt)}),Do(h.eventQueue_,l,[])}}(h._repo,h._path,l,u.wrapCallback(()=>{})),u.promise}function Lc(h){h=(0,H.m9)(h);const l=new ec(()=>{}),u=new Ta(l);return function O4(h,l,u){const m=function C(h,l){const u=l._path;let m=null;h.syncPointTree_.foreachOnPath(u,(ve,rt)=>{const ot=Br(ve,u);m=m||J1(rt,ot)});let b=h.syncPointTree_.get(u);b?m=m||J1(b,ct()):(b=new b2,h.syncPointTree_=h.syncPointTree_.set(u,b));const z=null!=m,V=z?new qr(m,!0,!1):null;return function wa(h){return ds(h.viewCache_)}(As(b,l,Fn(h.pendingWriteTree_,l._path),z?V.getNode():Rn.EMPTY_NODE,z))}(h.serverSyncTree_,l);return null!=m?Promise.resolve(m):h.server_.get(l).then(b=>{const z=sr(b).withIndex(l._queryParams.getIndex());let V;if(I(h.serverSyncTree_,l,u,!0),l._queryParams.loadsAllData())V=ys(h.serverSyncTree_,l._path,z);else{const Q=k(h.serverSyncTree_,l);V=xs(h.serverSyncTree_,l._path,z,Q)}return Do(h.eventQueue_,l._path,V),Bo(h.serverSyncTree_,l,u,null,!0),z},b=>(jo(h,"get for query "+(0,H.Wl)(l)+" failed: "+b),Promise.reject(new Error(b))))}(h._repo,h,u).then(m=>new r2(m,new G1(h._repo,h._path),h._queryParams.getIndex()))}class Ta{constructor(l){this.callbackContext=l}respondsTo(l){return"value"===l}createEvent(l,u){const m=u._queryParams.getIndex();return new U2("value",this,new r2(l.snapshotNode,new G1(u._repo,u._path),m))}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,null)}createCancelEvent(l,u){return this.callbackContext.hasCancelCallback?new oa(this,l,u):null}matches(l){return l instanceof Ta&&(!l.callbackContext||!this.callbackContext||l.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class g2{constructor(l,u){this.eventType=l,this.callbackContext=u}respondsTo(l){let u="children_added"===l?"child_added":l;return u="children_removed"===u?"child_removed":u,this.eventType===u}createCancelEvent(l,u){return this.callbackContext.hasCancelCallback?new oa(this,l,u):null}createEvent(l,u){(0,H.hu)(null!=l.childName,"Child events should have a childName.");const m=m2(new G1(u._repo,u._path),l.childName),b=u._queryParams.getIndex();return new U2(l.type,this,new r2(l.snapshotNode,m,b),l.prevName)}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,l.prevName)}matches(l){return l instanceof g2&&this.eventType===l.eventType&&(!this.callbackContext||!l.callbackContext||this.callbackContext.matches(l.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function To(h,l,u,m,b){let z;if("object"==typeof m&&(z=void 0,b=m),"function"==typeof m&&(z=m),b&&b.onlyOnce){const ce=u,ve=(rt,ot)=>{Ac(h._repo,h,Q),ce(rt,ot)};ve.userCallback=u.userCallback,ve.context=u.context,u=ve}const V=new ec(u,z||void 0),Q="value"===l?new Ta(V):new g2(l,V);return function V4(h,l,u){let m;m=".info"===Lt(l._path)?I(h.infoSyncTree_,l,u):I(h.serverSyncTree_,l,u),Ka(h.eventQueue_,l._path,m)}(h._repo,h,Q),()=>Ac(h._repo,h,Q)}function Wo(h,l,u,m){return To(h,"value",l,u,m)}function ic(h,l,u,m){return To(h,"child_added",l,u,m)}function Aa(h,l,u,m){return To(h,"child_changed",l,u,m)}function x2(h,l,u,m){return To(h,"child_moved",l,u,m)}function N2(h,l,u,m){return To(h,"child_removed",l,u,m)}function l4(h,l,u){let m=null;const b=u?new ec(u):null;"value"===l?m=new Ta(b):l&&(m=new g2(l,b)),Ac(h._repo,h,m)}class mr{}class Hr extends mr{constructor(l,u){super(),this._value=l,this._key=u}_apply(l){Sr("endAt",this._value,l._path,!0);const u=ee(l._queryParams,this._value,this._key);if(Da(u),yo(u),l._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new W1(l._repo,l._path,u,l._orderByCalled)}}class Rc extends mr{constructor(l,u){super(),this._value=l,this._key=u}_apply(l){Sr("endBefore",this._value,l._path,!1);const u=function oe(h,l,u){let m;return m=ee(h,l,h.index_===ui||u?u:cr),m.endBeforeSet_=!0,m}(l._queryParams,this._value,this._key);if(Da(u),yo(u),l._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new W1(l._repo,l._path,u,l._orderByCalled)}}class la extends mr{constructor(l,u){super(),this._value=l,this._key=u}_apply(l){Sr("startAt",this._value,l._path,!0);const u=Ws(l._queryParams,this._value,this._key);if(Da(u),yo(u),l._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new W1(l._repo,l._path,u,l._orderByCalled)}}class sc extends mr{constructor(l,u){super(),this._value=l,this._key=u}_apply(l){Sr("startAfter",this._value,l._path,!1);const u=function W(h,l,u){let m;return m=Ws(h,l,h.index_===ui||u?u:lr),m.startAfterSet_=!0,m}(l._queryParams,this._value,this._key);if(Da(u),yo(u),l._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new W1(l._repo,l._path,u,l._orderByCalled)}}class oc extends mr{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new W1(l._repo,l._path,function Xi(h,l){const u=h.copy();return u.limitSet_=!0,u.limit_=l,u.viewFrom_="l",u}(l._queryParams,this._limit),l._orderByCalled)}}class W2 extends mr{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new W1(l._repo,l._path,function Zo(h,l){const u=h.copy();return u.limitSet_=!0,u.limit_=l,u.viewFrom_="r",u}(l._queryParams,this._limit),l._orderByCalled)}}class y6 extends mr{constructor(l){super(),this._path=l}_apply(l){j2(l,"orderByChild");const u=new $e(this._path);if(jn(u))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const m=new F1(u),b=ae(l._queryParams,m);return yo(b),new W1(l._repo,l._path,b,!0)}}class d extends mr{_apply(l){j2(l,"orderByKey");const u=ae(l._queryParams,ui);return yo(u),new W1(l._repo,l._path,u,!0)}}class T extends mr{_apply(l){j2(l,"orderByPriority");const u=ae(l._queryParams,zr);return yo(u),new W1(l._repo,l._path,u,!0)}}class J extends mr{_apply(l){j2(l,"orderByValue");const u=ae(l._queryParams,io);return yo(u),new W1(l._repo,l._path,u,!0)}}class lt extends mr{constructor(l,u){super(),this._value=l,this._key=u}_apply(l){if(Sr("equalTo",this._value,l._path,!1),l._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(l._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Hr(this._value,this._key)._apply(new la(this._value,this._key)._apply(l))}}function cn(h,...l){let u=(0,H.m9)(h);for(const m of l)u=m._apply(u);return u}(function Ii(h){(0,H.hu)(!ar,"__referenceConstructor has already been defined"),ar=h})(G1),function uo(h){(0,H.hu)(!lo,"__referenceConstructor has already been defined"),lo=h}(G1);const Kn="FIREBASE_DATABASE_EMULATOR_HOST",zn={};let M1=!1;function cc(h,l,u,m,b){let z=m||h.options.databaseURL;void 0===z&&(h.options.projectId||Gn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$t("Using default host for project ",h.options.projectId),z=`${h.options.projectId}-default-rtdb.firebaseio.com`);let ce,ve,V=Xa(z,b),Q=V.repoInfo;typeof process<"u"&&process.env&&(ve=process.env[Kn]),ve?(ce=!0,z=`http://${ve}?ns=${Q.namespace}`,V=Xa(z,b),Q=V.repoInfo):ce=!V.repoInfo.secure;const rt=b&&ce?new bn(bn.OWNER):new mi(h.name,h.options,l);k4("Invalid Firebase Database URL",V),jn(V.path)||Gn("Database URL must point to the root of a Firebase Database (not including a child path).");const ot=function Na(h,l,u,m){let b=zn[l.name];b||(b={},zn[l.name]=b);let z=b[h.toURLString()];return z&&Gn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),z=new n4(h,M1,u,m),b[h.toURLString()]=z,z}(Q,h,rt,new er(h.name,u));return new ua(ot,h)}class ua{constructor(l,u){this._repoInternal=l,this.app=u,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Rr(h,l,u){if(h.stats_=Ot(h.repoInfo_),h.forceRestClient_||vr())h.server_=new ht(h.repoInfo_,(m,b,z,V)=>{fi(h,m,b,z,V)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>Dc(h,!0),0);else{if(typeof u<"u"&&null!==u){if("object"!=typeof u)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,H.Wl)(u)}catch(m){throw new Error("Invalid authOverride provided: "+m)}}h.persistentConnection_=new $r(h.repoInfo_,l,(m,b,z,V)=>{fi(h,m,b,z,V)},m=>{Dc(h,m)},m=>{!function na(h,l){An(l,(u,m)=>{Qs(h,u,m)})}(h,m)},h.authTokenProvider_,h.appCheckProvider_,u),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(m=>{h.server_.refreshAuthToken(m)}),h.appCheckProvider_.addTokenChangeListener(m=>{h.server_.refreshAppCheckToken(m.token)}),h.statsReporter_=function $n(h,l){const u=h.toString();return Dn[u]||(Dn[u]=l()),Dn[u]}(h.repoInfo_,()=>new Gi(h.stats_,h.server_)),h.infoData_=new st,h.infoSyncTree_=new Xe({startListening:(m,b,z,V)=>{let Q=[];const ce=h.infoData_.getNode(m._path);return ce.isEmpty()||(Q=ys(h.infoSyncTree_,m._path,ce),setTimeout(()=>{V("ok")},0)),Q},stopListening:()=>{}}),Qs(h,"connected",!1),h.serverSyncTree_=new Xe({startListening:(m,b,z,V)=>(h.server_.listen(m,z,b,(Q,ce)=>{const ve=V(Q,ce);Do(h.eventQueue_,m._path,ve)}),[]),stopListening:(m,b)=>{h.server_.unlisten(m,b)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new G1(this._repo,ct())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function F4(h,l){const u=zn[l];(!u||u[h.key]!==h)&&Gn(`Database ${l}(${h.repoInfo_}) has already been deleted.`),go(h),delete u[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(l){null===this._rootInternal&&Gn("Cannot call "+l+" on a deleted database.")}}function lc(){Ur.IS_TRANSPORT_INITIALIZED&&Nn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function u1(){lc(),Mr.forceDisallow()}function uc(){lc(),ur.forceDisallow(),Mr.forceAllow()}function Pc(h,l){Ft(h,l)}const Ol={".sv":"timestamp"};class Vl{constructor(l,u){this.committed=l,this.snapshot=u}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}$r.prototype.simpleListen=function(h,l){this.sendRequest("q",{p:h},l)},$r.prototype.echo=function(h,l){this.sendRequest("echo",{d:h},l)},function B4(h){xt(dt.SDK_VERSION),(0,dt._registerComponent)(new yt.wA("database",(l,{instanceIdentifier:u})=>cc(l.getProvider("app").getImmediate(),l.getProvider("auth-internal"),l.getProvider("app-check-internal"),u),"PUBLIC").setMultipleInstances(!0)),(0,dt.registerVersion)(zt,"0.14.3",h),(0,dt.registerVersion)(zt,"0.14.3","esm2017")}();const u4=new Be.Yd("@firebase/database-compat"),E6=function(h){u4.warn("FIREBASE WARNING: "+h)};class Fl{constructor(l){this._delegate=l}cancel(l){(0,H.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,H.Wj)("OnDisconnect.cancel","onComplete",l,!0);const u=this._delegate.cancel();return l&&u.then(()=>l(null),m=>l(m)),u}remove(l){(0,H.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,H.Wj)("OnDisconnect.remove","onComplete",l,!0);const u=this._delegate.remove();return l&&u.then(()=>l(null),m=>l(m)),u}set(l,u){(0,H.Dv)("OnDisconnect.set",1,2,arguments.length),(0,H.Wj)("OnDisconnect.set","onComplete",u,!0);const m=this._delegate.set(l);return u&&m.then(()=>u(null),b=>u(b)),m}setWithPriority(l,u,m){(0,H.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,H.Wj)("OnDisconnect.setWithPriority","onComplete",m,!0);const b=this._delegate.setWithPriority(l,u);return m&&b.then(()=>m(null),z=>m(z)),b}update(l,u){if((0,H.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(l)){const b={};for(let z=0;z<l.length;++z)b[""+z]=l[z];l=b,E6("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,H.Wj)("OnDisconnect.update","onComplete",u,!0);const m=this._delegate.update(l);return u&&m.then(()=>u(null),b=>u(b)),m}}class b6{constructor(l,u){this.committed=l,this.snapshot=u}toJSON(){return(0,H.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class fa{constructor(l,u){this._database=l,this._delegate=u}val(){return(0,H.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,H.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,H.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,H.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(l){return(0,H.Dv)("DataSnapshot.child",0,1,arguments.length),l=String(l),ba("DataSnapshot.child","path",l,!1),new fa(this._database,this._delegate.child(l))}hasChild(l){return(0,H.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ba("DataSnapshot.hasChild","path",l,!1),this._delegate.hasChild(l)}getPriority(){return(0,H.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(l){return(0,H.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,H.Wj)("DataSnapshot.forEach","action",l,!1),this._delegate.forEach(u=>l(new fa(this._database,u)))}hasChildren(){return(0,H.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,H.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,H.Dv)("DataSnapshot.ref",0,0,arguments.length),new Rs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class O1{constructor(l,u){this.database=l,this._delegate=u}on(l,u,m,b){var z;(0,H.Dv)("Query.on",2,4,arguments.length),(0,H.Wj)("Query.on","callback",u,!1);const V=O1.getCancelAndContextArgs_("Query.on",m,b),Q=(ve,rt)=>{u.call(V.context,new fa(this.database,ve),rt)};Q.userCallback=u,Q.context=V.context;const ce=null===(z=V.cancel)||void 0===z?void 0:z.bind(V.context);switch(l){case"value":return Wo(this._delegate,Q,ce),u;case"child_added":return ic(this._delegate,Q,ce),u;case"child_removed":return N2(this._delegate,Q,ce),u;case"child_changed":return Aa(this._delegate,Q,ce),u;case"child_moved":return x2(this._delegate,Q,ce),u;default:throw new Error((0,H.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(l,u,m){if((0,H.Dv)("Query.off",0,3,arguments.length),function(h,l,u){if(void 0!==l)switch(l){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,H.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,l),(0,H.Wj)("Query.off","callback",u,!0),(0,H.lb)("Query.off","context",m,!0),u){const b=()=>{};b.userCallback=u,b.context=m,l4(this._delegate,l,b)}else l4(this._delegate,l)}get(){return Lc(this._delegate).then(l=>new fa(this.database,l))}once(l,u,m,b){(0,H.Dv)("Query.once",1,4,arguments.length),(0,H.Wj)("Query.once","callback",u,!0);const z=O1.getCancelAndContextArgs_("Query.once",m,b),V=new H.BH,Q=(ve,rt)=>{const ot=new fa(this.database,ve);u&&u.call(z.context,ot,rt),V.resolve(ot)};Q.userCallback=u,Q.context=z.context;const ce=ve=>{z.cancel&&z.cancel.call(z.context,ve),V.reject(ve)};switch(l){case"value":Wo(this._delegate,Q,ce,{onlyOnce:!0});break;case"child_added":ic(this._delegate,Q,ce,{onlyOnce:!0});break;case"child_removed":N2(this._delegate,Q,ce,{onlyOnce:!0});break;case"child_changed":Aa(this._delegate,Q,ce,{onlyOnce:!0});break;case"child_moved":x2(this._delegate,Q,ce,{onlyOnce:!0});break;default:throw new Error((0,H.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return V.promise}limitToFirst(l){return(0,H.Dv)("Query.limitToFirst",1,1,arguments.length),new O1(this.database,cn(this._delegate,function s2(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oc(h)}(l)))}limitToLast(l){return(0,H.Dv)("Query.limitToLast",1,1,arguments.length),new O1(this.database,cn(this._delegate,function ac(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new W2(h)}(l)))}orderByChild(l){return(0,H.Dv)("Query.orderByChild",1,1,arguments.length),new O1(this.database,cn(this._delegate,function w(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ba("orderByChild","path",h,!1),new y6(h)}(l)))}orderByKey(){return(0,H.Dv)("Query.orderByKey",0,0,arguments.length),new O1(this.database,cn(this._delegate,function v(){return new d}()))}orderByPriority(){return(0,H.Dv)("Query.orderByPriority",0,0,arguments.length),new O1(this.database,cn(this._delegate,function G(){return new T}()))}orderByValue(){return(0,H.Dv)("Query.orderByValue",0,0,arguments.length),new O1(this.database,cn(this._delegate,function Le(){return new J}()))}startAt(l=null,u){return(0,H.Dv)("Query.startAt",0,2,arguments.length),new O1(this.database,cn(this._delegate,function ns(h=null,l){return ta("startAt","key",l,!0),new la(h,l)}(l,u)))}startAfter(l=null,u){return(0,H.Dv)("Query.startAfter",0,2,arguments.length),new O1(this.database,cn(this._delegate,function xa(h,l){return ta("startAfter","key",l,!0),new sc(h,l)}(l,u)))}endAt(l=null,u){return(0,H.Dv)("Query.endAt",0,2,arguments.length),new O1(this.database,cn(this._delegate,function zc(h,l){return ta("endAt","key",l,!0),new Hr(h,l)}(l,u)))}endBefore(l=null,u){return(0,H.Dv)("Query.endBefore",0,2,arguments.length),new O1(this.database,cn(this._delegate,function zs(h,l){return ta("endBefore","key",l,!0),new Rc(h,l)}(l,u)))}equalTo(l,u){return(0,H.Dv)("Query.equalTo",1,2,arguments.length),new O1(this.database,cn(this._delegate,function Wt(h,l){return ta("equalTo","key",l,!0),new lt(h,l)}(l,u)))}toString(){return(0,H.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,H.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(l){if((0,H.Dv)("Query.isEqual",1,1,arguments.length),!(l instanceof O1))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(l._delegate)}static getCancelAndContextArgs_(l,u,m){const b={cancel:void 0,context:void 0};if(u&&m)b.cancel=u,(0,H.Wj)(l,"cancel",b.cancel,!0),b.context=m,(0,H.lb)(l,"context",b.context,!0);else if(u)if("object"==typeof u&&null!==u)b.context=u;else{if("function"!=typeof u)throw new Error((0,H.gK)(l,"cancelOrContext")+" must either be a cancel callback or a context object.");b.cancel=u}return b}get ref(){return new Rs(this.database,new G1(this._delegate._repo,this._delegate._path))}}class Rs extends O1{constructor(l,u){super(l,new W1(u._repo,u._path,new Ms,!1)),this.database=l,this._delegate=u}getKey(){return(0,H.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(l){return(0,H.Dv)("Reference.child",1,1,arguments.length),"number"==typeof l&&(l=String(l)),new Rs(this.database,m2(this._delegate,l))}getParent(){(0,H.Dv)("Reference.parent",0,0,arguments.length);const l=this._delegate.parent;return l?new Rs(this.database,l):null}getRoot(){return(0,H.Dv)("Reference.root",0,0,arguments.length),new Rs(this.database,this._delegate.root)}set(l,u){(0,H.Dv)("Reference.set",1,2,arguments.length),(0,H.Wj)("Reference.set","onComplete",u,!0);const m=$o(this._delegate,l);return u&&m.then(()=>u(null),b=>u(b)),m}update(l,u){if((0,H.Dv)("Reference.update",1,2,arguments.length),Array.isArray(l)){const b={};for(let z=0;z<l.length;++z)b[""+z]=l[z];l=b,E6("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_s("Reference.update",this._delegate._path),(0,H.Wj)("Reference.update","onComplete",u,!0);const m=ca(this._delegate,l);return u&&m.then(()=>u(null),b=>u(b)),m}setWithPriority(l,u,m){(0,H.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,H.Wj)("Reference.setWithPriority","onComplete",m,!0);const b=function rc(h,l,u){if(_s("setWithPriority",h._path),Sr("setWithPriority",l,h._path,!1),Mc("setWithPriority",u,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";const m=new H.BH;return bi(h._repo,h._path,l,u,m.wrapCallback(()=>{})),m.promise}(this._delegate,l,u);return m&&b.then(()=>m(null),z=>m(z)),b}remove(l){(0,H.Dv)("Reference.remove",0,1,arguments.length),(0,H.Wj)("Reference.remove","onComplete",l,!0);const u=function ts(h){return _s("remove",h._path),$o(h,null)}(this._delegate);return l&&u.then(()=>l(null),m=>l(m)),u}transaction(l,u,m){(0,H.Dv)("Reference.transaction",1,3,arguments.length),(0,H.Wj)("Reference.transaction","transactionUpdate",l,!1),(0,H.Wj)("Reference.transaction","onComplete",u,!0),function(h,l,u,m){if(void 0!==u&&"boolean"!=typeof u)throw new Error((0,H.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,m);const b=function Hl(h,l,u){var m;if(h=(0,H.m9)(h),_s("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";const b=null===(m=u?.applyLocally)||void 0===m||m,z=new H.BH,Q=Wo(h,()=>{});return function Qa(h,l,u,m,b,z){jo(h,"transaction on "+l);const V={path:l,update:u,onComplete:m,status:null,order:St(),applyLocally:z,retryCount:0,unwatcher:b,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},Q=ra(h,l,void 0);V.currentInputSnapshot=Q;const ce=V.update(Q.val());if(void 0===ce)V.unwatcher(),V.currentOutputSnapshotRaw=null,V.currentOutputSnapshotResolved=null,V.onComplete&&V.onComplete(null,!1,V.currentInputSnapshot);else{Jo("transaction failed: Data returned ",ce,V.path),V.status=0;const ve=ea(h.transactionQueueTree_,l),rt=fo(ve)||[];let ot;rt.push(V),Ia(ve,rt),"object"==typeof ce&&null!==ce&&(0,H.r3)(ce,".priority")?(ot=(0,H.DV)(ce,".priority"),(0,H.hu)(yr(ot),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):ot=(D(h.serverSyncTree_,l)||Rn.EMPTY_NODE).getPriority().val();const Mt=g1(h),dn=sr(ce,ot),xn=es(dn,Q,Mt);V.currentOutputSnapshotRaw=dn,V.currentOutputSnapshotResolved=xn,V.currentWriteId=Li(h);const oi=n1(h.serverSyncTree_,l,xn,V.currentWriteId,V.applyLocally);Do(h.eventQueue_,l,oi),ia(h,h.transactionQueueTree_)}}(h._repo,h._path,l,(ce,ve,rt)=>{let ot=null;ce?z.reject(ce):(ot=new r2(rt,new G1(h._repo,h._path),zr),z.resolve(new Vl(ve,ot)))},Q,b),z.promise}(this._delegate,l,{applyLocally:m}).then(z=>new b6(z.committed,new fa(this.database,z.snapshot)));return u&&b.then(z=>u(null,z.committed,z.snapshot),z=>u(z,!1,null)),b}setPriority(l,u){(0,H.Dv)("Reference.setPriority",1,2,arguments.length),(0,H.Wj)("Reference.setPriority","onComplete",u,!0);const m=function nc(h,l){h=(0,H.m9)(h),_s("setPriority",h._path),Mc("setPriority",l,!1);const u=new H.BH;return bi(h._repo,fr(h._path,".priority"),l,null,u.wrapCallback(()=>{})),u.promise}(this._delegate,l);return u&&m.then(()=>u(null),b=>u(b)),m}push(l,u){(0,H.Dv)("Reference.push",0,2,arguments.length),(0,H.Wj)("Reference.push","onComplete",u,!0);const m=function Zi(h,l){h=(0,H.m9)(h),_s("push",h._path),Sr("push",l,h._path,!0);const u=A2(h._repo),m=Ja(u),b=m2(h,m),z=m2(h,m);let V;return V=null!=l?$o(z,l).then(()=>z):Promise.resolve(z),b.then=V.then.bind(V),b.catch=V.then.bind(V,void 0),b}(this._delegate,l),b=m.then(V=>new Rs(this.database,V));u&&b.then(()=>u(null),V=>u(V));const z=new Rs(this.database,m);return z.then=b.then.bind(b),z.catch=b.catch.bind(b,void 0),z}onDisconnect(){return _s("Reference.onDisconnect",this._delegate._path),new Fl(new B2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class kc{constructor(l,u){this._delegate=l,this.app=u,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:u1,forceLongPolling:uc}}useEmulator(l,u,m={}){!function La(h,l,u,m={}){(h=(0,H.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&Gn("Cannot call useEmulator() after instance has already been initialized.");const b=h._repoInternal;let z;if(b.repoInfo_.nodeAdmin)m.mockUserToken&&Gn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),z=new bn(bn.OWNER);else if(m.mockUserToken){const V="string"==typeof m.mockUserToken?m.mockUserToken:(0,H.Sg)(m.mockUserToken,h.app.options.projectId);z=new bn(V)}!function o2(h,l,u,m){h.repoInfo_=new He(`${l}:${u}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams,!0),m&&(h.authTokenProvider_=m)}(b,l,u,z)}(this._delegate,l,u,m)}ref(l){if((0,H.Dv)("database.ref",0,1,arguments.length),l instanceof Rs){const u=$2(this._delegate,l.toString());return new Rs(this,u)}{const u=aa(this._delegate,l);return new Rs(this,u)}}refFromURL(l){(0,H.Dv)("database.refFromURL",1,1,arguments.length);const m=$2(this._delegate,l);return new Rs(this,m)}goOffline(){return(0,H.Dv)("database.goOffline",0,0,arguments.length),function L2(h){(h=(0,H.m9)(h))._checkNotDeleted("goOffline"),go(h._repo)}(this._delegate)}goOnline(){return(0,H.Dv)("database.goOnline",0,0,arguments.length),function ha(h){(h=(0,H.m9)(h))._checkNotDeleted("goOnline"),function xc(h){h.persistentConnection_&&h.persistentConnection_.resume(Ya)}(h._repo)}(this._delegate)}}kc.ServerValue={TIMESTAMP:function _6(){return Ol}(),increment:h=>function S0(h){return{".sv":{increment:h}}}(h)};var M6=Object.freeze({__proto__:null,initStandalone:function Ul({app:h,url:l,version:u,customAuthImpl:m,namespace:b,nodeAdmin:z=!1}){xt(u);const V=new yt.zt("auth-internal",new yt.H0("database-standalone"));return V.setComponent(new yt.wA("auth-internal",()=>m,"PRIVATE")),{instance:new kc(cc(h,V,void 0,l,z),h),namespace:b}}});const Go=kc.ServerValue;!function Au(h){h.INTERNAL.registerComponent(new yt.wA("database-compat",(l,{instanceIdentifier:u})=>{const m=l.getProvider("app-compat").getImmediate(),b=l.getProvider("database").getImmediate({identifier:u});return new kc(b,m)},"PUBLIC").setServiceProps({Reference:Rs,Query:O1,Database:kc,DataSnapshot:fa,enableLogging:Pc,INTERNAL:M6,ServerValue:Go}).setMultipleInstances(!0)),h.registerVersion("@firebase/database-compat","0.3.3")}(nt.Z);var a2=j(1205),v2=j(6217),S6=j(9260);function D0(h){return null==h}function T0(h){return"function"==typeof h.set}function T6(h,l){return T0(l)?l:h.ref(l)}function A6(h,l){if(function h4(h){return"string"==typeof h}(h))return l.stringCase();if(T0(h))return l.firebaseCase();if(function D6(h){return"function"==typeof h.exportVal}(h))return l.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof h)}function hc(h,l,u="on",m=B.z){return new K.y(b=>{let z=null;return z=h[u](l,(V,Q)=>{m.schedule(()=>{b.next({snapshot:V,prevKey:Q})}),"once"===u&&m.schedule(()=>b.complete())},V=>{m.schedule(()=>b.error(V))}),"on"===u?{unsubscribe(){null!=z&&h.off(l,z)}}:{unsubscribe(){}}}).pipe((0,Ie.U)(b=>{const{snapshot:z,prevKey:V}=b;let Q=null;return z.exists()&&(Q=z.key),{type:l,payload:z,prevKey:V,key:Q}}),(0,te.B)())}function W4(h,l){const u=h.length;for(let m=0;m<u;m++)if(h[m].payload.key===l)return m;return-1}function x6(h,l){const{payload:u,prevKey:m,key:b}=l,z=W4(h,b),V=function Bl(h,l){if(D0(l))return 0;{const u=W4(h,l);return-1===u?h.length:u+1}}(h,m);switch(l.type){case"value":if(l.payload&&l.payload.exists()){let Q=null;l.payload.forEach(ce=>{const ve={payload:ce,type:"value",prevKey:Q,key:ce.key};return Q=ce.key,h=[...h,ve],!1})}return h;case"child_added":if(z>-1){const Q=h[z-1];(Q&&Q.key||null)!==m&&(h=h.filter(ce=>ce.payload.key!==u.key)).splice(V,0,l)}else{if(null==m)return[l,...h];(h=h.slice()).splice(V,0,l)}return h;case"child_removed":return h.filter(Q=>Q.payload.key!==u.key);case"child_changed":return h.map(Q=>Q.payload.key===b?l:Q);case"child_moved":if(z>-1){const Q=h.splice(z,1)[0];return(h=h.slice()).splice(V,0,Q),h}return h;default:return h}}function N6(h){return(D0(h)||0===h.length)&&(h=["child_added","child_removed","child_changed","child_moved"]),h}function L6(h,l,u){return function xu(h,l,u){return hc(h,"value","once",u).pipe((0,Re.w)(m=>{const b=[(0,Ce.of)(m)];return l.forEach(z=>b.push(hc(h,z,"on",u))),(0,we.T)(...b).pipe((0,ke.R)(x6,[]))}),(0,de.x)())}(h,l=N6(l),u)}function za(h,l,u){const m=(l=N6(l)).map(b=>hc(h,b,"on",u));return(0,we.T)(...m)}function R6(h,l){return function(m,b){return A6(m,{stringCase:()=>h.child(m)[l](b),firebaseCase:()=>m[l](b),snapshotCase:()=>m.ref[l](b)})}}function P6(h){return function(u){return u?A6(u,{stringCase:()=>h.child(u).remove(),firebaseCase:()=>u.remove(),snapshotCase:()=>u.ref.remove()}):h.remove()}}function da(h,l){return function(){return hc(h,"value","on",l)}}const d4=new S.OlP("angularfire2.realtimeDatabaseURL"),Ps=new S.OlP("angularfire2.database.use-emulator");let Z4=(()=>{class h{constructor(u,m,b,z,V,Q,ce,ve,rt,ot,Mt,dn,xn,oi,rs){this.schedulers=Q;const z2=ce,y2=(0,Et.on)(u,V,m);ve&&(0,a2.nw)(y2,V,rt,Mt,dn,xn,ot,oi),this.database=(0,Et.cc)(`${y2.name}.database.${b}`,"AngularFireDatabase",y2.name,()=>{const G2=V.runOutsideAngular(()=>y2.database(b||void 0));return z2&&G2.useEmulator(...z2),G2},[z2])}list(u,m){const b=this.schedulers.ngZone.runOutsideAngular(()=>T6(this.database,u));let z=b;return m&&(z=m(b)),function f4(h,l){const u=l.schedulers.outsideAngular,m=l.schedulers.ngZone.run(()=>h.ref);return{query:h,update:R6(m,"update"),set:R6(m,"set"),push:b=>m.push(b),remove:P6(m),snapshotChanges:b=>L6(h,b,u).pipe(ft.iC),stateChanges:b=>za(h,b,u).pipe(ft.iC),auditTrail:b=>function jl(h,l,u){return function G4(h,l,u){return function z6(h,l){return hc(h,"value","on",l).pipe((0,Ie.U)(u=>{let m;return u.payload.forEach(b=>(m=b.key,!1)),{data:u,lastKeyToLoad:m}}))}(h,u).pipe(function Je(...h){const l=(0,Xt.jO)(h);return(0,me.e)((u,m)=>{const b=h.length,z=new Array(b);let V=h.map(()=>!1),Q=!1;for(let ce=0;ce<b;ce++)(0,Tt.Xf)(h[ce]).subscribe((0,Se.x)(m,ve=>{z[ce]=ve,!Q&&!V[ce]&&(V[ce]=!0,(Q=V.every(Fe.y))&&(V=null))},Pt.Z));u.subscribe((0,Se.x)(m,ce=>{if(Q){const ve=[ce,...z];m.next(l?l(...ve):ve)}}))})}(l),(0,Ie.U)(([b,z])=>{const V=b.lastKeyToLoad,Q=z.map(ce=>ce.key);return{actions:z,lastKeyToLoad:V,loadedKeys:Q}}),function ut(h){return(0,me.e)((l,u)=>{let m=!1,b=0;l.subscribe((0,Se.x)(u,z=>(m||(m=!h(z,b++)))&&u.next(z)))})}(b=>-1===b.loadedKeys.indexOf(b.lastKeyToLoad)),(0,Ie.U)(b=>b.actions))}(h,za(h,l).pipe((0,ke.R)((b,z)=>[...b,z],[])),u)}(h,b,u).pipe(ft.iC),valueChanges:(b,z)=>L6(h,b,u).pipe((0,Ie.U)(Q=>Q.map(ce=>z&&z.idField?Object.assign(Object.assign({},ce.payload.val()),{[z.idField]:ce.key}):ce.payload.val())),ft.iC)}}(z,this)}object(u){return function A0(h,l){return{query:h,snapshotChanges:()=>da(h,l.schedulers.outsideAngular)().pipe(ft.iC),update:u=>h.ref.update(u),set:u=>h.ref.set(u),remove:()=>h.ref.remove(),valueChanges:()=>da(h,l.schedulers.outsideAngular)().pipe(ft.iC,(0,Ie.U)(m=>m.payload.exists()?m.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>T6(this.database,u)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return h.\u0275fac=function(u){return new(u||h)(S.LFG(Et.Dh),S.LFG(Et.xv,8),S.LFG(d4,8),S.LFG(S.Lbi),S.LFG(S.R0b),S.LFG(ft.HU),S.LFG(Ps,8),S.LFG(a2.zQ,8),S.LFG(a2.Qv,8),S.LFG(a2.L6,8),S.LFG(a2._Q,8),S.LFG(a2.rT,8),S.LFG(a2.lh,8),S.LFG(a2.f7,8),S.LFG(v2.nm,8))},h.\u0275prov=S.Yz7({token:h,factory:h.\u0275fac,providedIn:"any"}),h})(),K4=(()=>{class h{constructor(){S6.Z.registerVersion("angularfire",ft.q4.full,"rtdb-compat")}}return h.\u0275fac=function(u){return new(u||h)},h.\u0275mod=S.oAB({type:h}),h.\u0275inj=S.cJS({providers:[Z4]}),h})()},2011:(rn,Ke,j)=>{j.d(Ke,{Dh:()=>Re,GT:()=>Ie,cc:()=>Fe,hO:()=>Tt,on:()=>de,pX:()=>we,xv:()=>ke});var S=j(4650),B=j(9260),K=j(2122);rn=j.hmd(rn);const Ce=["ngOnDestroy"],we=(ut,ft,Et,pt={})=>new Proxy(ut,{get:(nt,yt)=>Et.runOutsideAngular(()=>{var bt;if(ut[yt])return!(null===(bt=pt?.spy)||void 0===bt)&&bt.get&&pt.spy.get(yt,ut[yt]),ut[yt];if(Ce.indexOf(yt)>-1)return()=>{};const dt=ft.toPromise().then(H=>{const Be=H&&H[yt];return"function"==typeof Be?Be.bind(H):Be&&Be.then?Be.then(zt=>Et.run(()=>zt)):Et.run(()=>Be)});return new Proxy(()=>{},{get:(H,Be)=>dt[Be],apply:(H,Be,zt)=>dt.then(It=>{var Zt;const xt=It&&It(...zt);return!(null===(Zt=pt?.spy)||void 0===Zt)&&Zt.apply&&pt.spy.apply(yt,zt,xt),xt})})})}),Ie=(ut,ft)=>{ft.forEach(Et=>{Object.getOwnPropertyNames(Et.prototype||Et).forEach(pt=>{Object.defineProperty(ut.prototype,pt,Object.getOwnPropertyDescriptor(Et.prototype||Et,pt))})})};class te{constructor(ft){return ft}}const Re=new S.OlP("angularfire2.app.options"),ke=new S.OlP("angularfire2.app.name");function de(ut,ft,Et){const nt="object"==typeof Et&&Et||{};nt.name=nt.name||"string"==typeof Et&&Et||"[DEFAULT]";const bt=B.Z.apps.filter(dt=>dt&&dt.name===nt.name)[0]||ft.runOutsideAngular(()=>B.Z.initializeApp(ut,nt));try{JSON.stringify(ut)!==JSON.stringify(bt.options)&&me("error",`${bt.name} Firebase App already initialized with different options${rn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new te(bt)}const me=(ut,...ft)=>{(0,S.X6Q)()&&typeof console<"u"&&console[ut](...ft)},Se={provide:te,useFactory:de,deps:[Re,S.R0b,[new S.FiY,ke]]};let Tt=(()=>{class ut{constructor(Et){B.Z.registerVersion("angularfire",K.q4.full,"core"),B.Z.registerVersion("angularfire",K.q4.full,"app-compat"),B.Z.registerVersion("angular",S.q4F.full,Et.toString())}static initializeApp(Et,pt){return{ngModule:ut,providers:[{provide:Re,useValue:Et},{provide:ke,useValue:pt}]}}}return ut.\u0275fac=function(Et){return new(Et||ut)(S.LFG(S.Lbi))},ut.\u0275mod=S.oAB({type:ut}),ut.\u0275inj=S.cJS({providers:[Se]}),ut})();function Fe(ut,ft,Et,pt,nt){const[,yt,bt]=globalThis.\u0275AngularfireInstanceCache.find(dt=>dt[0]===ut)||[];if(yt)return function Pt(ut,ft){try{return ut.toString()===ft.toString()}catch{return ut===ft}}(nt,bt)||(Je("error",`${ft} was already initialized on the ${Et} Firebase App with different settings.${Xt?" You may need to reload as Firebase is not HMR aware.":""}`),Je("warn",{is:nt,was:bt})),yt;{const dt=pt();return globalThis.\u0275AngularfireInstanceCache.push([ut,dt,nt]),dt}}const Xt=!!rn.hot,Je=(ut,...ft)=>{(0,S.X6Q)()&&typeof console<"u"&&console[ut](...ft)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(rn,Ke,j)=>{j.d(Ke,{q4:()=>f2,iC:()=>D,HU:()=>Ea,vb:()=>B1,JM:()=>n1});var S=j(4650),B=j(259),K=j(5861),Ce=j(9681),we=j(2090),Ie=j(4859),te=j(1877),Re=j(8766);const ke="@firebase/installations",de="0.6.3",me=1e4,Se=`w:${de}`,Tt="FIS_v2",Fe="https://firebaseinstallations.googleapis.com/v1",Pt=36e5,ft=new we.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Et(_){return _ instanceof we.ZR&&_.code.includes("request-failed")}function pt({projectId:_}){return`${Fe}/projects/${_}/installations`}function nt(_){return{token:_.token,requestStatus:2,expiresIn:It(_.expiresIn),creationTime:Date.now()}}function yt(_,M){return bt.apply(this,arguments)}function bt(){return(bt=(0,K.Z)(function*(_,M){const q=(yield M.json()).error;return ft.create("request-failed",{requestName:_,serverCode:q.code,serverMessage:q.message,serverStatus:q.status})})).apply(this,arguments)}function dt({apiKey:_}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":_})}function Be(_){return zt.apply(this,arguments)}function zt(){return(zt=(0,K.Z)(function*(_){const M=yield _();return M.status>=500&&M.status<600?_():M})).apply(this,arguments)}function It(_){return Number(_.replace("s","000"))}function Ve(){return(Ve=(0,K.Z)(function*({appConfig:_,heartbeatServiceProvider:M},{fid:k}){const q=pt(_),he=dt(_),_e=M.getImmediate({optional:!0});if(_e){const Bt=yield _e.getHeartbeatsHeader();Bt&&he.append("x-firebase-client",Bt)}const Qt={method:"POST",headers:he,body:JSON.stringify({fid:k,authVersion:Tt,appId:_.appId,sdkVersion:Se})},on=yield Be(()=>fetch(q,Qt));if(on.ok){const Bt=yield on.json();return{fid:Bt.fid||k,registrationStatus:2,refreshToken:Bt.refreshToken,authToken:nt(Bt.authToken)}}throw yield yt("Create Installation",on)})).apply(this,arguments)}function Qe(_){return new Promise(M=>{setTimeout(M,_)})}const Ge=/^[cdef][\w-]{21}$/,at="";function et(){try{const _=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(_),_[0]=112+_[0]%16;const k=function St(_){return function Ue(_){return btoa(String.fromCharCode(..._)).replace(/\+/g,"-").replace(/\//g,"_")}(_).substr(0,22)}(_);return Ge.test(k)?k:at}catch{return at}}function Nt(_){return`${_.appName}!${_.appId}`}const _n=new Map;function kt(_,M){const k=Nt(_);$t(k,M),function Tn(_,M){const k=function Gn(){return!rr&&"BroadcastChannel"in self&&(rr=new BroadcastChannel("[Firebase] FID Change"),rr.onmessage=_=>{$t(_.data.key,_.data.fid)}),rr}();k&&k.postMessage({key:_,fid:M}),function Nn(){0===_n.size&&rr&&(rr.close(),rr=null)}()}(k,M)}function $t(_,M){const k=_n.get(_);if(k)for(const q of k)q(M)}let rr=null;const kr="firebase-installations-database",br=1,On="firebase-installations-store";let cr=null;function lr(){return cr||(cr=(0,Re.X3)(kr,br,{upgrade:(_,M)=>{0===M&&_.createObjectStore(On)}})),cr}function gt(_,M){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,K.Z)(function*(_,M){const k=Nt(_),he=(yield lr()).transaction(On,"readwrite"),_e=he.objectStore(On),je=yield _e.get(k);return yield _e.put(M,k),yield he.done,(!je||je.fid!==M.fid)&&kt(_,M.fid),M})).apply(this,arguments)}function _t(_){return vn.apply(this,arguments)}function vn(){return(vn=(0,K.Z)(function*(_){const M=Nt(_),q=(yield lr()).transaction(On,"readwrite");yield q.objectStore(On).delete(M),yield q.done})).apply(this,arguments)}function Jr(_,M){return An.apply(this,arguments)}function An(){return(An=(0,K.Z)(function*(_,M){const k=Nt(_),he=(yield lr()).transaction(On,"readwrite"),_e=he.objectStore(On),je=yield _e.get(k),Qt=M(je);return void 0===Qt?yield _e.delete(k):yield _e.put(Qt,k),yield he.done,Qt&&(!je||je.fid!==Qt.fid)&&kt(_,Qt.fid),Qt})).apply(this,arguments)}function un(_){return Gr.apply(this,arguments)}function Gr(){return Gr=(0,K.Z)(function*(_){let M;const k=yield Jr(_.appConfig,q=>{const he=function gn(_){return vr(_||{fid:et(),registrationStatus:0})}(q),_e=function hn(_,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(ft.create("app-offline"))};const k={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},q=function Gt(_,M){return ir.apply(this,arguments)}(_,k);return{installationEntry:k,registrationPromise:q}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:pr(_)}:{installationEntry:M}}(_,he);return M=_e.registrationPromise,_e.installationEntry});return k.fid===at?{installationEntry:yield M}:{installationEntry:k,registrationPromise:M}}),Gr.apply(this,arguments)}function ir(){return ir=(0,K.Z)(function*(_,M){try{const k=yield function xt(_,M){return Ve.apply(this,arguments)}(_,M);return gt(_.appConfig,k)}catch(k){throw Et(k)&&409===k.customData.serverCode?yield _t(_.appConfig):yield gt(_.appConfig,{fid:M.fid,registrationStatus:0}),k}}),ir.apply(this,arguments)}function pr(_){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,K.Z)(function*(_){let M=yield Mn(_.appConfig);for(;1===M.registrationStatus;)yield Qe(100),M=yield Mn(_.appConfig);if(0===M.registrationStatus){const{installationEntry:k,registrationPromise:q}=yield un(_);return q||k}return M})).apply(this,arguments)}function Mn(_){return Jr(_,M=>{if(!M)throw ft.create("installation-not-found");return vr(M)})}function vr(_){return function ai(_){return 1===_.registrationStatus&&_.registrationTime+me<Date.now()}(_)?{fid:_.fid,registrationStatus:0}:_}function mi(){return(mi=(0,K.Z)(function*({appConfig:_,heartbeatServiceProvider:M},k){const q=function bn(_,{fid:M}){return`${pt(_)}/${M}/authTokens:generate`}(_,k),he=function H(_,{refreshToken:M}){const k=dt(_);return k.append("Authorization",function Zt(_){return`${Tt} ${_}`}(M)),k}(_,k),_e=M.getImmediate({optional:!0});if(_e){const Bt=yield _e.getHeartbeatsHeader();Bt&&he.append("x-firebase-client",Bt)}const Qt={method:"POST",headers:he,body:JSON.stringify({installation:{sdkVersion:Se,appId:_.appId}})},on=yield Be(()=>fetch(q,Qt));if(on.ok)return nt(yield on.json());throw yield yt("Generate Auth Token",on)})).apply(this,arguments)}function Or(_){return ci.apply(this,arguments)}function ci(){return ci=(0,K.Z)(function*(_,M=!1){let k;const q=yield Jr(_.appConfig,_e=>{if(!Oe(_e))throw ft.create("not-registered");const je=_e.authToken;if(!M&&function ne(_){return 2===_.requestStatus&&!function ie(_){const M=Date.now();return M<_.creationTime||_.creationTime+_.expiresIn<M+Pt}(_)}(je))return _e;if(1===je.requestStatus)return k=function Ht(_,M){return mt.apply(this,arguments)}(_,M),_e;{if(!navigator.onLine)throw ft.create("app-offline");const Qt=function ge(_){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},_),{authToken:M})}(_e);return k=function le(_,M){return pe.apply(this,arguments)}(_,Qt),Qt}});return k?yield k:q.authToken}),ci.apply(this,arguments)}function mt(){return(mt=(0,K.Z)(function*(_,M){let k=yield Ne(_.appConfig);for(;1===k.authToken.requestStatus;)yield Qe(100),k=yield Ne(_.appConfig);const q=k.authToken;return 0===q.requestStatus?Or(_,M):q})).apply(this,arguments)}function Ne(_){return Jr(_,M=>{if(!Oe(M))throw ft.create("not-registered");return function He(_){return 1===_.requestStatus&&_.requestTime+me<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function pe(){return pe=(0,K.Z)(function*(_,M){try{const k=yield function er(_,M){return mi.apply(this,arguments)}(_,M),q=Object.assign(Object.assign({},M),{authToken:k});return yield gt(_.appConfig,q),k}catch(k){if(!Et(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const q=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield gt(_.appConfig,q)}else yield _t(_.appConfig);throw k}}),pe.apply(this,arguments)}function Oe(_){return void 0!==_&&2===_.registrationStatus}function jt(){return(jt=(0,K.Z)(function*(_){const M=_,{installationEntry:k,registrationPromise:q}=yield un(M);return q?q.catch(console.error):Or(M).catch(console.error),k.fid})).apply(this,arguments)}function pn(){return pn=(0,K.Z)(function*(_,M=!1){const k=_;return yield function Dn(_){return Ot.apply(this,arguments)}(k),(yield Or(k,M)).token}),pn.apply(this,arguments)}function Ot(){return(Ot=(0,K.Z)(function*(_){const{registrationPromise:M}=yield un(_);M&&(yield M)})).apply(this,arguments)}function Dr(_){return ft.create("missing-app-config-values",{valueName:_})}const Fr="installations",wr=_=>{const M=_.getProvider("app").getImmediate(),k=function Vn(_){if(!_||!_.options)throw Dr("App Configuration");if(!_.name)throw Dr("App Name");const M=["projectId","apiKey","appId"];for(const k of M)if(!_.options[k])throw Dr(k);return{appName:_.name,projectId:_.options.projectId,apiKey:_.options.apiKey,appId:_.options.appId}}(M);return{app:M,appConfig:k,heartbeatServiceProvider:(0,Ce._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},Vs=_=>{const M=_.getProvider("app").getImmediate(),k=(0,Ce._getProvider)(M,Fr).getImmediate();return{getId:()=>function Te(_){return jt.apply(this,arguments)}(k),getToken:he=>function yn(_){return pn.apply(this,arguments)}(k,he)}};(function os(){(0,Ce._registerComponent)(new Ie.wA(Fr,wr,"PUBLIC")),(0,Ce._registerComponent)(new Ie.wA("installations-internal",Vs,"PRIVATE"))})(),(0,Ce.registerVersion)(ke,de),(0,Ce.registerVersion)(ke,de,"esm2017");const H1="@firebase/remote-config",Mr=new we.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class as{constructor(M,k,q,he){this.client=M,this.storage=k,this.storageCache=q,this.logger=he}isCachedDataFresh(M,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const q=Date.now()-k,he=q<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${q}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${he}.`),he}fetch(M){var k=this;return(0,K.Z)(function*(){const[q,he]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(he&&k.isCachedDataFresh(M.cacheMaxAgeMillis,q))return he;M.eTag=he&&he.eTag;const _e=yield k.client.fetch(M),je=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===_e.status&&je.push(k.storage.setLastSuccessfulFetchResponse(_e)),yield Promise.all(je),_e})()}}function s1(_=navigator){return _.languages&&_.languages[0]||_.language}class C1{constructor(M,k,q,he,_e,je){this.firebaseInstallations=M,this.sdkVersion=k,this.namespace=q,this.projectId=he,this.apiKey=_e,this.appId=je}fetch(M){var k=this;return(0,K.Z)(function*(){const[q,he]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),je=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Qt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},on={sdk_version:k.sdkVersion,app_instance_id:q,app_instance_id_token:he,app_id:k.appId,language_code:s1()},Bt={method:"POST",headers:Qt,body:JSON.stringify(on)},kn=fetch(je,Bt),Sn=new Promise((m1,Ls)=>{M.signal.addEventListener(()=>{const es=new Error("The operation was aborted.");es.name="AbortError",Ls(es)})});let $1;try{yield Promise.race([kn,Sn]),$1=yield kn}catch(m1){let Ls="fetch-client-network";throw"AbortError"===m1?.name&&(Ls="fetch-timeout"),Mr.create(Ls,{originalErrorMessage:m1?.message})}let hi=$1.status;const Ns=$1.headers.get("ETag")||void 0;let D2,ho;if(200===$1.status){let m1;try{m1=yield $1.json()}catch(Ls){throw Mr.create("fetch-client-parse",{originalErrorMessage:Ls?.message})}D2=m1.entries,ho=m1.state}if("INSTANCE_STATE_UNSPECIFIED"===ho?hi=500:"NO_CHANGE"===ho?hi=304:("NO_TEMPLATE"===ho||"EMPTY_CONFIG"===ho)&&(D2={}),304!==hi&&200!==hi)throw Mr.create("fetch-status",{httpStatus:hi});return{status:hi,eTag:Ns,config:D2}})()}}class Me{constructor(M,k){this.client=M,this.storage=k}fetch(M){var k=this;return(0,K.Z)(function*(){const q=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(M,q)})()}attemptFetch(M,{throttleEndTimeMillis:k,backoffCount:q}){var he=this;return(0,K.Z)(function*(){yield function Ti(_,M){return new Promise((k,q)=>{const he=Math.max(M-Date.now(),0),_e=setTimeout(k,he);_.addEventListener(()=>{clearTimeout(_e),q(Mr.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,k);try{const _e=yield he.client.fetch(M);return yield he.storage.deleteThrottleMetadata(),_e}catch(_e){if(!function Ee(_){if(!(_ instanceof we.ZR&&_.customData))return!1;const M=Number(_.customData.httpStatus);return 429===M||500===M||503===M||504===M}(_e))throw _e;const je={throttleEndTimeMillis:Date.now()+(0,we.$s)(q),backoffCount:q+1};return yield he.storage.setThrottleMetadata(je),he.attemptFetch(M,je)}})()}}class ct{constructor(M,k,q,he,_e){this.app=M,this._client=k,this._storageCache=q,this._storage=he,this._logger=_e,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Lt(_,M){const k=_.target.error||void 0;return Mr.create(M,{originalErrorMessage:k&&k?.message})}const In="app_namespace_store";class di{constructor(M,k,q,he=function ni(){return new Promise((_,M)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=q=>{M(Lt(q,"storage-open"))},k.onsuccess=q=>{_(q.target.result)},k.onupgradeneeded=q=>{0===q.oldVersion&&q.target.result.createObjectStore(In,{keyPath:"compositeKey"})}}catch(k){M(Mr.create("storage-open",{originalErrorMessage:k?.message}))}})}()){this.appId=M,this.appName=k,this.namespace=q,this.openDbPromise=he}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var k=this;return(0,K.Z)(function*(){const q=yield k.openDbPromise;return new Promise((he,_e)=>{const Qt=q.transaction([In],"readonly").objectStore(In),on=k.createCompositeKey(M);try{const Bt=Qt.get(on);Bt.onerror=kn=>{_e(Lt(kn,"storage-get"))},Bt.onsuccess=kn=>{const Sn=kn.target.result;he(Sn?Sn.value:void 0)}}catch(Bt){_e(Mr.create("storage-get",{originalErrorMessage:Bt?.message}))}})})()}set(M,k){var q=this;return(0,K.Z)(function*(){const he=yield q.openDbPromise;return new Promise((_e,je)=>{const on=he.transaction([In],"readwrite").objectStore(In),Bt=q.createCompositeKey(M);try{const kn=on.put({compositeKey:Bt,value:k});kn.onerror=Sn=>{je(Lt(Sn,"storage-set"))},kn.onsuccess=()=>{_e()}}catch(kn){je(Mr.create("storage-set",{originalErrorMessage:kn?.message}))}})})()}delete(M){var k=this;return(0,K.Z)(function*(){const q=yield k.openDbPromise;return new Promise((he,_e)=>{const Qt=q.transaction([In],"readwrite").objectStore(In),on=k.createCompositeKey(M);try{const Bt=Qt.delete(on);Bt.onerror=kn=>{_e(Lt(kn,"storage-delete"))},Bt.onsuccess=()=>{he()}}catch(Bt){_e(Mr.create("storage-delete",{originalErrorMessage:Bt?.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class Pi{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,K.Z)(function*(){const k=M.storage.getLastFetchStatus(),q=M.storage.getLastSuccessfulFetchTimestampMillis(),he=M.storage.getActiveConfig(),_e=yield k;_e&&(M.lastFetchStatus=_e);const je=yield q;je&&(M.lastSuccessfulFetchTimestampMillis=je);const Qt=yield he;Qt&&(M.activeConfig=Qt)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function Co(){return ws.apply(this,arguments)}function ws(){return(ws=(0,K.Z)(function*(){if(!(0,we.hl)())return!1;try{return yield(0,we.eu)()}catch{return!1}})).apply(this,arguments)}!function fr(){(0,Ce._registerComponent)(new Ie.wA("remote-config",function _(M,{instanceIdentifier:k}){const q=M.getProvider("app").getImmediate(),he=M.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Mr.create("registration-window");if(!(0,we.hl)())throw Mr.create("indexed-db-unavailable");const{projectId:_e,apiKey:je,appId:Qt}=q.options;if(!_e)throw Mr.create("registration-project-id");if(!je)throw Mr.create("registration-api-key");if(!Qt)throw Mr.create("registration-app-id");const on=new di(Qt,q.name,k=k||"firebase"),Bt=new Pi(on),kn=new te.Yd(H1);kn.logLevel=te.in.ERROR;const Sn=new C1(he,Ce.SDK_VERSION,k,_e,je,Qt),$1=new Me(Sn,on),hi=new as($1,on,Bt,kn),Ns=new ct(q,hi,Bt,on,kn);return function Lr(_){const M=(0,we.m9)(_);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(Ns),Ns},"PUBLIC").setMultipleInstances(!0)),(0,Ce.registerVersion)(H1,"0.4.3"),(0,Ce.registerVersion)(H1,"0.4.3","esm2017")}();const o1="/firebase-messaging-sw.js",q1="/firebase-cloud-messaging-push-scope",A1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",eo="https://fcmregistrations.googleapis.com/v1",Hs="google.c.a.c_id",Es="google.c.a.c_l",Is="google.c.a.ts",Fs="google.c.a.e";var vi=(()=>{return(_=vi||(vi={})).PUSH_RECEIVED="push-received",_.NOTIFICATION_CLICKED="notification-clicked",vi;var _})();function yi(_){const M=new Uint8Array(_);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Lo(_){const k=(_+"=".repeat((4-_.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),q=atob(k),he=new Uint8Array(q.length);for(let _e=0;_e<q.length;++_e)he[_e]=q.charCodeAt(_e);return he}const Us="fcm_token_details_db",to=5,$r="fcm_token_object_Store";function cs(){return cs=(0,K.Z)(function*(_){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(_e=>_e.name).includes(Us))return null;let M=null;return(yield(0,Re.X3)(Us,to,{upgrade:(q=(0,K.Z)(function*(he,_e,je,Qt){var on;if(_e<2||!he.objectStoreNames.contains($r))return;const Bt=Qt.objectStore($r),kn=yield Bt.index("fcmSenderId").get(_);if(yield Bt.clear(),kn)if(2===_e){const Sn=kn;if(!Sn.auth||!Sn.p256dh||!Sn.endpoint)return;M={token:Sn.fcmToken,createTime:null!==(on=Sn.createTime)&&void 0!==on?on:Date.now(),subscriptionOptions:{auth:Sn.auth,p256dh:Sn.p256dh,endpoint:Sn.endpoint,swScope:Sn.swScope,vapidKey:"string"==typeof Sn.vapidKey?Sn.vapidKey:yi(Sn.vapidKey)}}}else if(3===_e){const Sn=kn;M={token:Sn.fcmToken,createTime:Sn.createTime,subscriptionOptions:{auth:yi(Sn.auth),p256dh:yi(Sn.p256dh),endpoint:Sn.endpoint,swScope:Sn.swScope,vapidKey:yi(Sn.vapidKey)}}}else if(4===_e){const Sn=kn;M={token:Sn.fcmToken,createTime:Sn.createTime,subscriptionOptions:{auth:yi(Sn.auth),p256dh:yi(Sn.p256dh),endpoint:Sn.endpoint,swScope:Sn.swScope,vapidKey:yi(Sn.vapidKey)}}}}),function(_e,je,Qt,on){return q.apply(this,arguments)})})).close(),yield(0,Re.Lj)(Us),yield(0,Re.Lj)("fcm_vapid_details_db"),yield(0,Re.Lj)("undefined"),function x1(_){if(!_||!_.subscriptionOptions)return!1;const{subscriptionOptions:M}=_;return"number"==typeof _.createTime&&_.createTime>0&&"string"==typeof _.token&&_.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}(M)?M:null;var q}),cs.apply(this,arguments)}const ls="firebase-messaging-database",ui=1,h1="firebase-messaging-store";let _i=null;function us(){return _i||(_i=(0,Re.X3)(ls,ui,{upgrade:(_,M)=>{0===M&&_.createObjectStore(h1)}})),_i}function ki(_){return w1.apply(this,arguments)}function w1(){return w1=(0,K.Z)(function*(_){const M=Q1(_),q=yield(yield us()).transaction(h1).objectStore(h1).get(M);if(q)return q;{const he=yield function qn(_){return cs.apply(this,arguments)}(_.appConfig.senderId);if(he)return yield N1(_,he),he}}),w1.apply(this,arguments)}function N1(_,M){return Y1.apply(this,arguments)}function Y1(){return(Y1=(0,K.Z)(function*(_,M){const k=Q1(_),he=(yield us()).transaction(h1,"readwrite");return yield he.objectStore(h1).put(M,k),yield he.done,M})).apply(this,arguments)}function hs(){return(hs=(0,K.Z)(function*(_){const M=Q1(_),q=(yield us()).transaction(h1,"readwrite");yield q.objectStore(h1).delete(M),yield q.done})).apply(this,arguments)}function Q1({appConfig:_}){return _.appId}const Cr=new we.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function no(_,M){return Er.apply(this,arguments)}function Er(){return(Er=(0,K.Z)(function*(_,M){const k=yield L1(_),q=Bs(M),he={method:"POST",headers:k,body:JSON.stringify(q)};let _e;try{_e=yield(yield fetch(bs(_.appConfig),he)).json()}catch(je){throw Cr.create("token-subscribe-failed",{errorInfo:je?.toString()})}if(_e.error)throw Cr.create("token-subscribe-failed",{errorInfo:_e.error.message});if(!_e.token)throw Cr.create("token-subscribe-no-token");return _e.token})).apply(this,arguments)}function ji(){return(ji=(0,K.Z)(function*(_,M){const k=yield L1(_),q=Bs(M.subscriptionOptions),he={method:"PATCH",headers:k,body:JSON.stringify(q)};let _e;try{_e=yield(yield fetch(`${bs(_.appConfig)}/${M.token}`,he)).json()}catch(je){throw Cr.create("token-update-failed",{errorInfo:je?.toString()})}if(_e.error)throw Cr.create("token-update-failed",{errorInfo:_e.error.message});if(!_e.token)throw Cr.create("token-update-no-token");return _e.token})).apply(this,arguments)}function pi(_,M){return zr.apply(this,arguments)}function zr(){return(zr=(0,K.Z)(function*(_,M){const q={method:"DELETE",headers:yield L1(_)};try{const _e=yield(yield fetch(`${bs(_.appConfig)}/${M}`,q)).json();if(_e.error)throw Cr.create("token-unsubscribe-failed",{errorInfo:_e.error.message})}catch(he){throw Cr.create("token-unsubscribe-failed",{errorInfo:he?.toString()})}})).apply(this,arguments)}function bs({projectId:_}){return`${eo}/projects/${_}/registrations`}function L1(_){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,K.Z)(function*({appConfig:_,installations:M}){const k=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":_.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Bs({p256dh:_,auth:M,endpoint:k,vapidKey:q}){const he={web:{endpoint:k,auth:M,p256dh:_}};return q!==A1&&(he.web.applicationPubKey=q),he}const $i=6048e5;function Oi(){return Oi=(0,K.Z)(function*(_){const M=yield function js(_,M){return io.apply(this,arguments)}(_.swRegistration,_.vapidKey),k={vapidKey:_.vapidKey,swScope:_.swRegistration.scope,endpoint:M.endpoint,auth:yi(M.getKey("auth")),p256dh:yi(M.getKey("p256dh"))},q=yield ki(_.firebaseDependencies);if(q){if(function Eo(_,M){return M.vapidKey===_.vapidKey&&M.endpoint===_.endpoint&&M.auth===_.auth&&M.p256dh===_.p256dh}(q.subscriptionOptions,k))return Date.now()>=q.createTime+$i?function sn(_,M){return fs.apply(this,arguments)}(_,{token:q.token,createTime:Date.now(),subscriptionOptions:k}):q.token;try{yield pi(_.firebaseDependencies,q.token)}catch(he){console.warn(he)}return sr(_.firebaseDependencies,k)}return sr(_.firebaseDependencies,k)}),Oi.apply(this,arguments)}function ro(){return ro=(0,K.Z)(function*(_){const M=yield ki(_.firebaseDependencies);M&&(yield pi(_.firebaseDependencies,M.token),yield function wo(_){return hs.apply(this,arguments)}(_.firebaseDependencies));const k=yield _.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()}),ro.apply(this,arguments)}function fs(){return fs=(0,K.Z)(function*(_,M){try{const k=yield function Yi(_,M){return ji.apply(this,arguments)}(_.firebaseDependencies,M),q=Object.assign(Object.assign({},M),{token:k,createTime:Date.now()});return yield N1(_.firebaseDependencies,q),k}catch(k){throw yield function Rn(_){return ro.apply(this,arguments)}(_),k}}),fs.apply(this,arguments)}function sr(_,M){return F1.apply(this,arguments)}function F1(){return(F1=(0,K.Z)(function*(_,M){const q={token:yield no(_,M),createTime:Date.now(),subscriptionOptions:M};return yield N1(_,q),q.token})).apply(this,arguments)}function io(){return(io=(0,K.Z)(function*(_,M){return(yield _.pushManager.getSubscription())||_.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Lo(M)})})).apply(this,arguments)}function $s(_){const M={from:_.from,collapseKey:_.collapse_key,messageId:_.fcmMessageId};return function X1(_,M){if(!M.notification)return;_.notification={};const k=M.notification.title;k&&(_.notification.title=k);const q=M.notification.body;q&&(_.notification.body=q);const he=M.notification.image;he&&(_.notification.image=he);const _e=M.notification.icon;_e&&(_.notification.icon=_e)}(M,_),function it(_,M){M.data&&(_.data=M.data)}(M,_),function hr(_,M){var k,q,he,_e,je;if(!(M.fcmOptions||null!==(k=M.notification)&&void 0!==k&&k.click_action))return;_.fcmOptions={};const Qt=null!==(he=null===(q=M.fcmOptions)||void 0===q?void 0:q.link)&&void 0!==he?he:null===(_e=M.notification)||void 0===_e?void 0:_e.click_action;Qt&&(_.fcmOptions.link=Qt);const on=null===(je=M.fcmOptions)||void 0===je?void 0:je.analytics_label;on&&(_.fcmOptions.analyticsLabel=on)}(M,_),M}function U1(_,M){const k=[];for(let q=0;q<_.length;q++)k.push(_.charAt(q)),q<M.length&&k.push(M.charAt(q));return k.join("")}function Ms(_){return Cr.create("missing-app-config-values",{valueName:_})}U1("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),U1("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class z1{constructor(M,k,q){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const he=function Qi(_){if(!_||!_.options)throw Ms("App Configuration Object");if(!_.name)throw Ms("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:k}=_;for(const q of M)if(!k[q])throw Ms(q);return{appName:_.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:he,installations:k,analyticsProvider:q}}_delete(){return Promise.resolve()}}function Xi(_){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,K.Z)(function*(_){try{_.swRegistration=yield navigator.serviceWorker.register(o1,{scope:q1}),_.swRegistration.update().catch(()=>{})}catch(M){throw Cr.create("failed-service-worker-registration",{browserErrorMessage:M?.message})}})).apply(this,arguments)}function W(){return(W=(0,K.Z)(function*(_,M){if(!M&&!_.swRegistration&&(yield Xi(_)),M||!_.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw Cr.create("invalid-sw-registration");_.swRegistration=M}})).apply(this,arguments)}function oe(){return(oe=(0,K.Z)(function*(_,M){M?_.vapidKey=M:_.vapidKey||(_.vapidKey=A1)})).apply(this,arguments)}function Ae(){return Ae=(0,K.Z)(function*(_,M){if(!navigator)throw Cr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Cr.create("permission-blocked");return yield function ee(_,M){return oe.apply(this,arguments)}(_,M?.vapidKey),yield function Ws(_,M){return W.apply(this,arguments)}(_,M?.serviceWorkerRegistration),function Ai(_){return Oi.apply(this,arguments)}(_)}),Ae.apply(this,arguments)}function ht(){return(ht=(0,K.Z)(function*(_,M,k){const q=function st(_){switch(_){case vi.NOTIFICATION_CLICKED:return"notification_open";case vi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(M);(yield _.firebaseDependencies.analyticsProvider.get()).logEvent(q,{message_id:k[Hs],message_name:k[Es],message_time:k[Is],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Pn(){return Pn=(0,K.Z)(function*(_,M){const k=M.data;if(!k.isFirebaseMessaging)return;_.onMessageHandler&&k.messageType===vi.PUSH_RECEIVED&&("function"==typeof _.onMessageHandler?_.onMessageHandler($s(k)):_.onMessageHandler.next($s(k)));const q=k.data;(function Wi(_){return"object"==typeof _&&!!_&&Hs in _})(q)&&"1"===q[Fs]&&(yield function tt(_,M,k){return ht.apply(this,arguments)}(_,k.messageType,q))}),Pn.apply(this,arguments)}const Yn="@firebase/messaging",Tr=_=>{const M=new z1(_.getProvider("app").getImmediate(),_.getProvider("installations-internal").getImmediate(),_.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function qt(_,M){return Pn.apply(this,arguments)}(M,k)),M},ri=_=>{const M=_.getProvider("messaging").getImmediate();return{getToken:q=>function ae(_,M){return Ae.apply(this,arguments)}(M,q)}};function Ji(){return wi.apply(this,arguments)}function wi(){return(wi=(0,K.Z)(function*(){try{yield(0,we.eu)()}catch{return!1}return typeof window<"u"&&(0,we.hl)()&&(0,we.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Vi(){(0,Ce._registerComponent)(new Ie.wA("messaging",Tr,"PUBLIC")),(0,Ce._registerComponent)(new Ie.wA("messaging-internal",ri,"PRIVATE")),(0,Ce.registerVersion)(Yn,"0.12.3"),(0,Ce.registerVersion)(Yn,"0.12.3","esm2017")}();const Ds="analytics",qr="firebase_id",Zs="origin",Wr=6e4,Hi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ko="https://www.googletagmanager.com/gtag/js",Fi=new te.Yd("@firebase/analytics");function Ks(_){return Promise.all(_.map(M=>M.catch(k=>k)))}function f1(){return(f1=(0,K.Z)(function*(_,M,k,q,he,_e){const je=q[he];try{if(je)yield M[je];else{const on=(yield Ks(k)).find(Bt=>Bt.measurementId===he);on&&(yield M[on.appId])}}catch(Qt){Fi.error(Qt)}_("config",he,_e)})).apply(this,arguments)}function L(){return(L=(0,K.Z)(function*(_,M,k,q,he){try{let _e=[];if(he&&he.send_to){let je=he.send_to;Array.isArray(je)||(je=[je]);const Qt=yield Ks(k);for(const on of je){const Bt=Qt.find(Sn=>Sn.measurementId===on),kn=Bt&&M[Bt.appId];if(!kn){_e=[];break}_e.push(kn)}}0===_e.length&&(_e=Object.values(M)),yield Promise.all(_e),_("event",q,he||{})}catch(_e){Fi.error(_e)}})).apply(this,arguments)}const We=new we.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),vt=30,or=new class dr{constructor(M={},k=1e3){this.throttleMetadata=M,this.intervalMillis=k}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,k){this.throttleMetadata[M]=k}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function xr(_){return new Headers({Accept:"application/json","x-goog-api-key":_})}function Yr(){return(Yr=(0,K.Z)(function*(_){var M;const{appId:k,apiKey:q}=_,he={method:"GET",headers:xr(q)},_e=Hi.replace("{app-id}",k),je=yield fetch(_e,he);if(200!==je.status&&304!==je.status){let Qt="";try{const on=yield je.json();null!==(M=on.error)&&void 0!==M&&M.message&&(Qt=on.error.message)}catch{}throw We.create("config-fetch-failed",{httpStatus:je.status,responseMessage:Qt})}return je.json()})).apply(this,arguments)}function Ei(){return(Ei=(0,K.Z)(function*(_,M=or,k){const{appId:q,apiKey:he,measurementId:_e}=_.options;if(!q)throw We.create("no-app-id");if(!he){if(_e)return{measurementId:_e,appId:q};throw We.create("no-api-key")}const je=M.getThrottleMetadata(q)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qt=new oo;return setTimeout((0,K.Z)(function*(){Qt.abort()}),void 0!==k?k:Wr),ps({appId:q,apiKey:he,measurementId:_e},je,Qt,M)})).apply(this,arguments)}function ps(_,M,k){return e1.apply(this,arguments)}function e1(){return e1=(0,K.Z)(function*(_,{throttleEndTimeMillis:M,backoffCount:k},q,he=or){var _e;const{appId:je,measurementId:Qt}=_;try{yield function R1(_,M){return new Promise((k,q)=>{const he=Math.max(M-Date.now(),0),_e=setTimeout(k,he);_.addEventListener(()=>{clearTimeout(_e),q(We.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(q,M)}catch(on){if(Qt)return Fi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qt} provided in the "measurementId" field in the local Firebase config. [${on?.message}]`),{appId:je,measurementId:Qt};throw on}try{const on=yield function Zn(_){return Yr.apply(this,arguments)}(_);return he.deleteThrottleMetadata(je),on}catch(on){const Bt=on;if(!function xi(_){if(!(_ instanceof we.ZR&&_.customData))return!1;const M=Number(_.customData.httpStatus);return 429===M||500===M||503===M||504===M}(Bt)){if(he.deleteThrottleMetadata(je),Qt)return Fi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qt} provided in the "measurementId" field in the local Firebase config. [${Bt?.message}]`),{appId:je,measurementId:Qt};throw on}const kn=503===Number(null===(_e=Bt?.customData)||void 0===_e?void 0:_e.httpStatus)?(0,we.$s)(k,he.intervalMillis,vt):(0,we.$s)(k,he.intervalMillis),Sn={throttleEndTimeMillis:Date.now()+kn,backoffCount:k+1};return he.setThrottleMetadata(je,Sn),Fi.debug(`Calling attemptFetch again in ${kn} millis`),ps(_,Sn,q,he)}}),e1.apply(this,arguments)}class oo{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}let Io,ao;function bo(){return(bo=(0,K.Z)(function*(_,M,k,q,he){if(he&&he.global)_("event",k,q);else{const _e=yield M;_("event",k,Object.assign(Object.assign({},q),{send_to:_e}))}})).apply(this,arguments)}function u2(){return(u2=(0,K.Z)(function*(){if(!(0,we.hl)())return Fi.warn(We.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,we.eu)()}catch(_){return Fi.warn(We.create("indexeddb-unavailable",{errorInfo:_?.toString()}).message),!1}return!0})).apply(this,arguments)}function Rt(){return Rt=(0,K.Z)(function*(_,M,k,q,he,_e,je){var Qt;const on=function Fn(_){return Ei.apply(this,arguments)}(_);on.then(hi=>{k[hi.measurementId]=hi.appId,_.options.measurementId&&hi.measurementId!==_.options.measurementId&&Fi.warn(`The measurement ID in the local Firebase config (${_.options.measurementId}) does not match the measurement ID fetched from the server (${hi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(hi=>Fi.error(hi)),M.push(on);const Bt=function gs(){return u2.apply(this,arguments)}().then(hi=>{if(hi)return q.getId()}),[kn,Sn]=yield Promise.all([on,Bt]);(function Y(_){const M=window.document.getElementsByTagName("script");for(const k of Object.values(M))if(k.src&&k.src.includes(Ko)&&k.src.includes(_))return k;return null})(_e)||function qs(_,M){const k=document.createElement("script");k.src=`${Ko}?l=${_}&id=${M}`,k.async=!0,document.head.appendChild(k)}(_e,kn.measurementId),ao&&(he("consent","default",ao),function ii(_){ao=_}(void 0)),he("js",new Date);const $1=null!==(Qt=je?.config)&&void 0!==Qt?Qt:{};return $1[Zs]="firebase",$1.update=!0,null!=Sn&&($1[qr]=Sn),he("config",kn.measurementId,$1),Io&&(he("set",Io),function Ts(_){Io=_}(void 0)),kn.measurementId}),Rt.apply(this,arguments)}class Ui{constructor(M){this.app=M}_delete(){return delete I1[this.app.options.appId],Promise.resolve()}}let I1={},Oo=[];const an={};let Yt,Ye,fn="dataLayer",Q2="gtag",wt=!1;function P1(_,M,k){!function k2(){const _=[];if((0,we.ru)()&&_.push("This is a browser extension environment."),(0,we.zI)()||_.push("Cookies are not available."),_.length>0){const M=_.map((q,he)=>`(${he+1}) ${q}`).join(" "),k=We.create("invalid-analytics-context",{errorInfo:M});Fi.warn(k.message)}}();const q=_.options.appId;if(!q)throw We.create("no-app-id");if(!_.options.apiKey){if(!_.options.measurementId)throw We.create("no-api-key");Fi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${_.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=I1[q])throw We.create("already-exists",{id:q});if(!wt){!function zo(_){let M=[];Array.isArray(window[_])?M=window[_]:window[_]=M}(fn);const{wrappedGtag:_e,gtagCore:je}=function P(_,M,k,q,he){let _e=function(...je){window[q].push(arguments)};return window[he]&&"function"==typeof window[he]&&(_e=window[he]),window[he]=function U(_,M,k,q){function _e(){return _e=(0,K.Z)(function*(je,Qt,on){try{"event"===je?yield function Ro(_,M,k,q,he){return L.apply(this,arguments)}(_,M,k,Qt,on):"config"===je?yield function ds(_,M,k,q,he,_e){return f1.apply(this,arguments)}(_,M,k,q,Qt,on):"consent"===je?_("consent","update",on):_("set",Qt)}catch(Bt){Fi.error(Bt)}}),_e.apply(this,arguments)}return function he(je,Qt,on){return _e.apply(this,arguments)}}(_e,_,M,k),{gtagCore:_e,wrappedGtag:window[he]}}(I1,Oo,an,fn,Q2);Ye=_e,Yt=je,wt=!0}return I1[q]=function ko(_,M,k,q,he,_e,je){return Rt.apply(this,arguments)}(_,Oo,an,M,Yt,fn,k),new Ui(_)}function J2(){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,K.Z)(function*(){if((0,we.ru)()||!(0,we.zI)()||!(0,we.hl)())return!1;try{return yield(0,we.eu)()}catch{return!1}})).apply(this,arguments)}const Qr="@firebase/analytics";!function Ln(){(0,Ce._registerComponent)(new Ie.wA(Ds,(M,{options:k})=>P1(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,Ce._registerComponent)(new Ie.wA("analytics-internal",function _(M){try{const k=M.getProvider(Ds).getImmediate();return{logEvent:(q,he,_e)=>function Qn(_,M,k,q){_=(0,we.m9)(_),function ms(_,M,k,q,he){return bo.apply(this,arguments)}(Ye,I1[_.app.options.appId],M,k,q).catch(he=>Fi.error(he))}(k,q,he,_e)}}catch(k){throw We.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,Ce.registerVersion)(Qr,"0.9.3"),(0,Ce.registerVersion)(Qr,"0.9.3","esm2017")}();var Fo=j(4408),b2=j(7565);const nn=new class Ii extends b2.v{}(class ar extends Fo.o{constructor(M,k){super(M,k),this.scheduler=M,this.work=k}schedule(M,k=0){return k>0?super.schedule(M,k):(this.delay=k,this.state=M,this.scheduler.flush(this),this)}execute(M,k){return k>0||this.closed?super.execute(M,k):this._execute(M,k)}requestAsyncId(M,k,q=0){return null!=q&&q>0||null==q&&this.delay>0?super.requestAsyncId(M,k,q):(M.flush(this),0)}});var Xo=j(4986),As=j(8505),si=j(9468),Uo=j(5363);const f2=new S.GfV("7.5.0"),J1="__angularfire_symbol__analyticsIsSupportedValue",b1="__angularfire_symbol__analyticsIsSupported",vs="__angularfire_symbol__remoteConfigIsSupportedValue",Ni="__angularfire_symbol__remoteConfigIsSupported",co="__angularfire_symbol__messagingIsSupportedValue",lo="__angularfire_symbol__messagingIsSupported";function n1(_,M,k){if(M){if(1===M.length)return M[0];const _e=M.filter(je=>je.app===k);if(1===_e.length)return _e[0]}return k.container.getProvider(_).getImmediate({optional:!0})}globalThis[b1]||(globalThis[b1]=J2().then(_=>globalThis[J1]=_).catch(()=>globalThis[J1]=!1)),globalThis[lo]||(globalThis[lo]=Ji().then(_=>globalThis[co]=_).catch(()=>globalThis[co]=!1)),globalThis[Ni]||(globalThis[Ni]=Co().then(_=>globalThis[vs]=_).catch(()=>globalThis[vs]=!1));const B1=(_,M)=>{const k=M?[M]:(0,B.C6)(),q=[];return k.forEach(he=>{he.container.getProvider(_).instances.forEach(je=>{q.includes(je)||q.push(je)})}),q};function p1(){}class ys{constructor(M,k=nn){this.zone=M,this.delegate=k}now(){return this.delegate.now()}schedule(M,k,q){const he=this.zone;return this.delegate.schedule(function(je){he.runGuarded(()=>{M.apply(this,[je])})},k,q)}}class So{constructor(M){this.zone=M,this.task=null}call(M,k){const q=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",p1,{},p1,p1)),k.pipe((0,As.b)({next:q,complete:q,error:q})).subscribe(M).add(q)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ea=(()=>{class _{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new ys(Zone.current)),this.insideAngular=k.run(()=>new ys(Zone.current,Xo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return _.\u0275fac=function(k){return new(k||_)(S.LFG(S.R0b))},_.\u0275prov=S.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();function j1(){const _=globalThis.\u0275AngularFireScheduler;if(!_)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return _}function D(_){return j1(),function C(_){return function(k){return(k=k.lift(new So(_.ngZone))).pipe((0,si.R)(_.outsideAngular),(0,Uo.Q)(_.insideAngular))}}(j1())(_)}},2090:(rn,Ke,j)=>{j.d(Ke,{$s:()=>Ne,BH:()=>nt,DV:()=>On,Dv:()=>pr,G6:()=>Ue,GJ:()=>kr,L:()=>Re,LL:()=>_n,Pz:()=>pt,Sg:()=>yt,UG:()=>H,UI:()=>lr,US:()=>Ie,Wj:()=>vr,Wl:()=>$t,Yr:()=>Qe,ZB:()=>me,ZR:()=>Nt,aH:()=>Et,b$:()=>It,cI:()=>Ft,dS:()=>er,eu:()=>at,g5:()=>K,gK:()=>Bn,gQ:()=>un,h$:()=>te,hl:()=>Ge,hu:()=>B,jU:()=>Be,lb:()=>ai,m9:()=>Oe,ne:()=>Gr,p$:()=>de,pd:()=>An,r3:()=>br,ru:()=>zt,tV:()=>ke,uI:()=>dt,ug:()=>mi,vZ:()=>gt,w1:()=>xt,w9:()=>Nn,xO:()=>vn,xb:()=>cr,z$:()=>bt,zI:()=>et,zd:()=>Jr});const S={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},B=function(ne,ie){if(!ne)throw K(ie)},K=function(ne){return new Error("Firebase Database ("+S.SDK_VERSION+") INTERNAL ASSERT FAILED: "+ne)},Ce=function(ne){const ie=[];let ge=0;for(let He=0;He<ne.length;He++){let Te=ne.charCodeAt(He);Te<128?ie[ge++]=Te:Te<2048?(ie[ge++]=Te>>6|192,ie[ge++]=63&Te|128):55296==(64512&Te)&&He+1<ne.length&&56320==(64512&ne.charCodeAt(He+1))?(Te=65536+((1023&Te)<<10)+(1023&ne.charCodeAt(++He)),ie[ge++]=Te>>18|240,ie[ge++]=Te>>12&63|128,ie[ge++]=Te>>6&63|128,ie[ge++]=63&Te|128):(ie[ge++]=Te>>12|224,ie[ge++]=Te>>6&63|128,ie[ge++]=63&Te|128)}return ie},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ne,ie){if(!Array.isArray(ne))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ge=ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,He=[];for(let Te=0;Te<ne.length;Te+=3){const jt=ne[Te],yn=Te+1<ne.length,pn=yn?ne[Te+1]:0,Dn=Te+2<ne.length,Ot=Dn?ne[Te+2]:0;let be=(15&pn)<<2|Ot>>6,se=63&Ot;Dn||(se=64,yn||(be=64)),He.push(ge[jt>>2],ge[(3&jt)<<4|pn>>4],ge[be],ge[se])}return He.join("")},encodeString(ne,ie){return this.HAS_NATIVE_SUPPORT&&!ie?btoa(ne):this.encodeByteArray(Ce(ne),ie)},decodeString(ne,ie){return this.HAS_NATIVE_SUPPORT&&!ie?atob(ne):function(ne){const ie=[];let ge=0,He=0;for(;ge<ne.length;){const Te=ne[ge++];if(Te<128)ie[He++]=String.fromCharCode(Te);else if(Te>191&&Te<224){const jt=ne[ge++];ie[He++]=String.fromCharCode((31&Te)<<6|63&jt)}else if(Te>239&&Te<365){const Dn=((7&Te)<<18|(63&ne[ge++])<<12|(63&ne[ge++])<<6|63&ne[ge++])-65536;ie[He++]=String.fromCharCode(55296+(Dn>>10)),ie[He++]=String.fromCharCode(56320+(1023&Dn))}else{const jt=ne[ge++],yn=ne[ge++];ie[He++]=String.fromCharCode((15&Te)<<12|(63&jt)<<6|63&yn)}}return ie.join("")}(this.decodeStringToByteArray(ne,ie))},decodeStringToByteArray(ne,ie){this.init_();const ge=ie?this.charToByteMapWebSafe_:this.charToByteMap_,He=[];for(let Te=0;Te<ne.length;){const jt=ge[ne.charAt(Te++)],pn=Te<ne.length?ge[ne.charAt(Te)]:0;++Te;const Ot=Te<ne.length?ge[ne.charAt(Te)]:64;++Te;const De=Te<ne.length?ge[ne.charAt(Te)]:64;if(++Te,null==jt||null==pn||null==Ot||null==De)throw Error();He.push(jt<<2|pn>>4),64!==Ot&&(He.push(pn<<4&240|Ot>>2),64!==De&&He.push(Ot<<6&192|De))}return He},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ne=0;ne<this.ENCODED_VALS.length;ne++)this.byteToCharMap_[ne]=this.ENCODED_VALS.charAt(ne),this.charToByteMap_[this.byteToCharMap_[ne]]=ne,this.byteToCharMapWebSafe_[ne]=this.ENCODED_VALS_WEBSAFE.charAt(ne),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ne]]=ne,ne>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ne)]=ne,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ne)]=ne)}}},te=function(ne){const ie=Ce(ne);return Ie.encodeByteArray(ie,!0)},Re=function(ne){return te(ne).replace(/\./g,"")},ke=function(ne){try{return Ie.decodeString(ne,!0)}catch(ie){console.error("base64Decode failed: ",ie)}return null};function de(ne){return me(void 0,ne)}function me(ne,ie){if(!(ie instanceof Object))return ie;switch(ie.constructor){case Date:return new Date(ie.getTime());case Object:void 0===ne&&(ne={});break;case Array:ne=[];break;default:return ie}for(const ge in ie)!ie.hasOwnProperty(ge)||!Se(ge)||(ne[ge]=me(ne[ge],ie[ge]));return ne}function Se(ne){return"__proto__"!==ne}const Je=()=>{try{return function Tt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ne=process.env.__FIREBASE_DEFAULTS__;return ne?JSON.parse(ne):void 0})()||(()=>{if(typeof document>"u")return;let ne;try{ne=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ie=ne&&ke(ne[1]);return ie&&JSON.parse(ie)})()}catch(ne){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ne}`)}},Et=()=>{var ne;return null===(ne=Je())||void 0===ne?void 0:ne.config},pt=ne=>{var ie;return null===(ie=Je())||void 0===ie?void 0:ie[`_${ne}`]};class nt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ie,ge)=>{this.resolve=ie,this.reject=ge})}wrapCallback(ie){return(ge,He)=>{ge?this.reject(ge):this.resolve(He),"function"==typeof ie&&(this.promise.catch(()=>{}),1===ie.length?ie(ge):ie(ge,He))}}}function yt(ne,ie){if(ne.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const He=ie||"demo-project",Te=ne.iat||0,jt=ne.sub||ne.user_id;if(!jt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const yn=Object.assign({iss:`https://securetoken.google.com/${He}`,aud:He,iat:Te,exp:Te+3600,auth_time:Te,sub:jt,user_id:jt,firebase:{sign_in_provider:"custom",identities:{}}},ne);return[Re(JSON.stringify({alg:"none",type:"JWT"})),Re(JSON.stringify(yn)),""].join(".")}function bt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function dt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bt())}function H(){var ne;const ie=null===(ne=Je())||void 0===ne?void 0:ne.forceEnvironment;if("node"===ie)return!0;if("browser"===ie)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Be(){return"object"==typeof self&&self.self===self}function zt(){const ne="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ne&&void 0!==ne.id}function It(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xt(){const ne=bt();return ne.indexOf("MSIE ")>=0||ne.indexOf("Trident/")>=0}function Qe(){return!0===S.NODE_CLIENT||!0===S.NODE_ADMIN}function Ue(){return!H()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ge(){try{return"object"==typeof indexedDB}catch{return!1}}function at(){return new Promise((ne,ie)=>{try{let ge=!0;const He="validate-browser-context-for-indexeddb-analytics-module",Te=self.indexedDB.open(He);Te.onsuccess=()=>{Te.result.close(),ge||self.indexedDB.deleteDatabase(He),ne(!0)},Te.onupgradeneeded=()=>{ge=!1},Te.onerror=()=>{var jt;ie((null===(jt=Te.error)||void 0===jt?void 0:jt.message)||"")}}catch(ge){ie(ge)}})}function et(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Nt extends Error{constructor(ie,ge,He){super(ge),this.code=ie,this.customData=He,this.name="FirebaseError",Object.setPrototypeOf(this,Nt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_n.prototype.create)}}class _n{constructor(ie,ge,He){this.service=ie,this.serviceName=ge,this.errors=He}create(ie,...ge){const He=ge[0]||{},Te=`${this.service}/${ie}`,jt=this.errors[ie],yn=jt?function kt(ne,ie){return ne.replace(Kt,(ge,He)=>{const Te=ie[He];return null!=Te?String(Te):`<${He}?>`})}(jt,He):"Error";return new Nt(Te,`${this.serviceName}: ${yn} (${Te}).`,He)}}const Kt=/\{\$([^}]+)}/g;function Ft(ne){return JSON.parse(ne)}function $t(ne){return JSON.stringify(ne)}const Tn=function(ne){let ie={},ge={},He={},Te="";try{const jt=ne.split(".");ie=Ft(ke(jt[0])||""),ge=Ft(ke(jt[1])||""),Te=jt[2],He=ge.d||{},delete ge.d}catch{}return{header:ie,claims:ge,data:He,signature:Te}},Nn=function(ne){const ge=Tn(ne).claims;return!!ge&&"object"==typeof ge&&ge.hasOwnProperty("iat")},kr=function(ne){const ie=Tn(ne).claims;return"object"==typeof ie&&!0===ie.admin};function br(ne,ie){return Object.prototype.hasOwnProperty.call(ne,ie)}function On(ne,ie){if(Object.prototype.hasOwnProperty.call(ne,ie))return ne[ie]}function cr(ne){for(const ie in ne)if(Object.prototype.hasOwnProperty.call(ne,ie))return!1;return!0}function lr(ne,ie,ge){const He={};for(const Te in ne)Object.prototype.hasOwnProperty.call(ne,Te)&&(He[Te]=ie.call(ge,ne[Te],Te,ne));return He}function gt(ne,ie){if(ne===ie)return!0;const ge=Object.keys(ne),He=Object.keys(ie);for(const Te of ge){if(!He.includes(Te))return!1;const jt=ne[Te],yn=ie[Te];if(Jn(jt)&&Jn(yn)){if(!gt(jt,yn))return!1}else if(jt!==yn)return!1}for(const Te of He)if(!ge.includes(Te))return!1;return!0}function Jn(ne){return null!==ne&&"object"==typeof ne}function vn(ne){const ie=[];for(const[ge,He]of Object.entries(ne))Array.isArray(He)?He.forEach(Te=>{ie.push(encodeURIComponent(ge)+"="+encodeURIComponent(Te))}):ie.push(encodeURIComponent(ge)+"="+encodeURIComponent(He));return ie.length?"&"+ie.join("&"):""}function Jr(ne){const ie={};return ne.replace(/^\?/,"").split("&").forEach(He=>{if(He){const[Te,jt]=He.split("=");ie[decodeURIComponent(Te)]=decodeURIComponent(jt)}}),ie}function An(ne){const ie=ne.indexOf("?");if(!ie)return"";const ge=ne.indexOf("#",ie);return ne.substring(ie,ge>0?ge:void 0)}class un{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ie=1;ie<this.blockSize;++ie)this.pad_[ie]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ie,ge){ge||(ge=0);const He=this.W_;if("string"==typeof ie)for(let De=0;De<16;De++)He[De]=ie.charCodeAt(ge)<<24|ie.charCodeAt(ge+1)<<16|ie.charCodeAt(ge+2)<<8|ie.charCodeAt(ge+3),ge+=4;else for(let De=0;De<16;De++)He[De]=ie[ge]<<24|ie[ge+1]<<16|ie[ge+2]<<8|ie[ge+3],ge+=4;for(let De=16;De<80;De++){const be=He[De-3]^He[De-8]^He[De-14]^He[De-16];He[De]=4294967295&(be<<1|be>>>31)}let Ot,$n,Te=this.chain_[0],jt=this.chain_[1],yn=this.chain_[2],pn=this.chain_[3],Dn=this.chain_[4];for(let De=0;De<80;De++){De<40?De<20?(Ot=pn^jt&(yn^pn),$n=1518500249):(Ot=jt^yn^pn,$n=1859775393):De<60?(Ot=jt&yn|pn&(jt|yn),$n=2400959708):(Ot=jt^yn^pn,$n=3395469782);const be=(Te<<5|Te>>>27)+Ot+Dn+$n+He[De]&4294967295;Dn=pn,pn=yn,yn=4294967295&(jt<<30|jt>>>2),jt=Te,Te=be}this.chain_[0]=this.chain_[0]+Te&4294967295,this.chain_[1]=this.chain_[1]+jt&4294967295,this.chain_[2]=this.chain_[2]+yn&4294967295,this.chain_[3]=this.chain_[3]+pn&4294967295,this.chain_[4]=this.chain_[4]+Dn&4294967295}update(ie,ge){if(null==ie)return;void 0===ge&&(ge=ie.length);const He=ge-this.blockSize;let Te=0;const jt=this.buf_;let yn=this.inbuf_;for(;Te<ge;){if(0===yn)for(;Te<=He;)this.compress_(ie,Te),Te+=this.blockSize;if("string"==typeof ie){for(;Te<ge;)if(jt[yn]=ie.charCodeAt(Te),++yn,++Te,yn===this.blockSize){this.compress_(jt),yn=0;break}}else for(;Te<ge;)if(jt[yn]=ie[Te],++yn,++Te,yn===this.blockSize){this.compress_(jt),yn=0;break}}this.inbuf_=yn,this.total_+=ge}digest(){const ie=[];let ge=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Te=this.blockSize-1;Te>=56;Te--)this.buf_[Te]=255&ge,ge/=256;this.compress_(this.buf_);let He=0;for(let Te=0;Te<5;Te++)for(let jt=24;jt>=0;jt-=8)ie[He]=this.chain_[Te]>>jt&255,++He;return ie}}function Gr(ne,ie){const ge=new gn(ne,ie);return ge.subscribe.bind(ge)}class gn{constructor(ie,ge){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ge,this.task.then(()=>{ie(this)}).catch(He=>{this.error(He)})}next(ie){this.forEachObserver(ge=>{ge.next(ie)})}error(ie){this.forEachObserver(ge=>{ge.error(ie)}),this.close(ie)}complete(){this.forEachObserver(ie=>{ie.complete()}),this.close()}subscribe(ie,ge,He){let Te;if(void 0===ie&&void 0===ge&&void 0===He)throw new Error("Missing Observer.");Te=function Gt(ne,ie){if("object"!=typeof ne||null===ne)return!1;for(const ge of ie)if(ge in ne&&"function"==typeof ne[ge])return!0;return!1}(ie,["next","error","complete"])?ie:{next:ie,error:ge,complete:He},void 0===Te.next&&(Te.next=ir),void 0===Te.error&&(Te.error=ir),void 0===Te.complete&&(Te.complete=ir);const jt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Te.error(this.finalError):Te.complete()}catch{}}),this.observers.push(Te),jt}unsubscribeOne(ie){void 0===this.observers||void 0===this.observers[ie]||(delete this.observers[ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ie){if(!this.finalized)for(let ge=0;ge<this.observers.length;ge++)this.sendOne(ge,ie)}sendOne(ie,ge){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ie])try{ge(this.observers[ie])}catch(He){typeof console<"u"&&console.error&&console.error(He)}})}close(ie){this.finalized||(this.finalized=!0,void 0!==ie&&(this.finalError=ie),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ir(){}const pr=function(ne,ie,ge,He){let Te;if(He<ie?Te="at least "+ie:He>ge&&(Te=0===ge?"none":"no more than "+ge),Te)throw new Error(ne+" failed: Was called with "+He+(1===He?" argument.":" arguments.")+" Expects "+Te+".")};function Bn(ne,ie){return`${ne} failed: ${ie} argument `}function vr(ne,ie,ge,He){if((!He||ge)&&"function"!=typeof ge)throw new Error(Bn(ne,ie)+"must be a valid function.")}function ai(ne,ie,ge,He){if((!He||ge)&&("object"!=typeof ge||null===ge))throw new Error(Bn(ne,ie)+"must be a valid context object.")}const er=function(ne){const ie=[];let ge=0;for(let He=0;He<ne.length;He++){let Te=ne.charCodeAt(He);if(Te>=55296&&Te<=56319){const jt=Te-55296;He++,B(He<ne.length,"Surrogate pair missing trail surrogate."),Te=65536+(jt<<10)+(ne.charCodeAt(He)-56320)}Te<128?ie[ge++]=Te:Te<2048?(ie[ge++]=Te>>6|192,ie[ge++]=63&Te|128):Te<65536?(ie[ge++]=Te>>12|224,ie[ge++]=Te>>6&63|128,ie[ge++]=63&Te|128):(ie[ge++]=Te>>18|240,ie[ge++]=Te>>12&63|128,ie[ge++]=Te>>6&63|128,ie[ge++]=63&Te|128)}return ie},mi=function(ne){let ie=0;for(let ge=0;ge<ne.length;ge++){const He=ne.charCodeAt(ge);He<128?ie++:He<2048?ie+=2:He>=55296&&He<=56319?(ie+=4,ge++):ie+=3}return ie},Or=1e3,ci=2,Ht=144e5,mt=.5;function Ne(ne,ie=Or,ge=ci){const He=ie*Math.pow(ge,ne),Te=Math.round(mt*He*(Math.random()-.5)*2);return Math.min(Ht,He+Te)}function Oe(ne){return ne&&ne._delegate?ne._delegate:ne}},801:(rn,Ke,j)=>{j.d(Ke,{IwR:()=>Ql,KTG:()=>I2,LM3:()=>S4,re8:()=>Ea,xf2:()=>fn});var fn={prefix:"fas",iconName:"eraser",icon:[512,512,[],"f12d","M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"]},I2={prefix:"fas",iconName:"eye-dropper",icon:[512,512,[],"f1fb","M50.75 333.25c-12 12-18.75 28.28-18.75 45.26V424L0 480l32 32 56-32h45.49c16.97 0 33.25-6.74 45.25-18.74l126.64-126.62-128-128L50.75 333.25zM483.88 28.12c-37.47-37.5-98.28-37.5-135.75 0l-77.09 77.09-13.1-13.1c-9.44-9.44-24.65-9.31-33.94 0l-40.97 40.97c-9.37 9.37-9.37 24.57 0 33.94l161.94 161.94c9.44 9.44 24.65 9.31 33.94 0L419.88 288c9.37-9.37 9.37-24.57 0-33.94l-13.1-13.1 77.09-77.09c37.51-37.48 37.51-98.26.01-135.75z"]},Ea={prefix:"fas",iconName:"fill-drip",icon:[576,512,[],"f576","M512 320s-64 92.65-64 128c0 35.35 28.66 64 64 64s64-28.65 64-64-64-128-64-128zm-9.37-102.94L294.94 9.37C288.69 3.12 280.5 0 272.31 0s-16.38 3.12-22.62 9.37l-81.58 81.58L81.93 4.76c-6.25-6.25-16.38-6.25-22.62 0L36.69 27.38c-6.24 6.25-6.24 16.38 0 22.62l86.19 86.18-94.76 94.76c-37.49 37.48-37.49 98.26 0 135.75l117.19 117.19c18.74 18.74 43.31 28.12 67.87 28.12 24.57 0 49.13-9.37 67.87-28.12l221.57-221.57c12.5-12.5 12.5-32.75.01-45.25zm-116.22 70.97H65.93c1.36-3.84 3.57-7.98 7.43-11.83l13.15-13.15 81.61-81.61 58.6 58.6c12.49 12.49 32.75 12.49 45.24 0s12.49-32.75 0-45.24l-58.6-58.6 58.95-58.95 162.44 162.44-48.34 48.34z"]},Ql={prefix:"fas",iconName:"pen",icon:[512,512,[],"f304","M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"]},S4={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"]}},3023:(rn,Ke,j)=>{var S=j(1481),B=j(4650),K=j(1180),Ce=j(6932);const we=[{path:"",redirectTo:"info",pathMatch:"full"},{path:"info",loadChildren:()=>j.e(337).then(j.bind(j,9337)).then(r=>r.IndexModule)},{path:"drawer",loadChildren:()=>j.e(529).then(j.bind(j,2765)).then(r=>r.DrawerModule)},{path:"gallery",loadChildren:()=>j.e(199).then(j.bind(j,3199)).then(r=>r.GalleryModule)}];let Ie=(()=>{class r{}return(0,K.Z)(r,"\u0275fac",function(t){return new(t||r)}),(0,K.Z)(r,"\u0275mod",B.oAB({type:r})),(0,K.Z)(r,"\u0275inj",B.cJS({imports:[Ce.Bz.forRoot(we),Ce.Bz]})),r})();var te=j(5861),Re=j(801),ke=j(8354),me=j(529);let Se=(()=>{class r{constructor(t,s){(0,K.Z)(this,"drawAreaService",void 0),(0,K.Z)(this,"http",void 0),(0,K.Z)(this,"headerDict",{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}),(0,K.Z)(this,"requestOptions",{headers:new me.WM(this.headerDict)}),this.drawAreaService=t,this.http=s}pushToGallery(t){const s=function de(r){const e=atob(r.split(",")[1]),t=[];let s=0;const c=e.length;for(;s<c;)t.push(e.charCodeAt(s)),s++;return new Blob([new Uint8Array(t)],{type:"image/png"})}(this.drawAreaService.context.canvas.toDataURL()),c=new FormData;return c.append("image",s),c.append("title",t),this.http.post("http://pixcreatorpresentation-env.eba-5m7amdfi.us-east-1.elasticbeanstalk.com/gallery",c,this.requestOptions)}}return(0,K.Z)(r,"\u0275fac",function(t){return new(t||r)(B.LFG(ke.x),B.LFG(me.eN))}),(0,K.Z)(r,"\u0275prov",B.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})),r})(),Tt=(()=>{class r{constructor(){(0,K.Z)(this,"loading",!1)}}return(0,K.Z)(r,"\u0275fac",function(t){return new(t||r)}),(0,K.Z)(r,"\u0275prov",B.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})),r})();var Fe=j(6895),Pt=j(3868);const Xt=["closeButton"],Je=[[["",8,"modal-header"]],[["",8,"modal-body"]],"*"],ut=[".modal-header",".modal-body","*"];let ft=(()=>{class r{constructor(){(0,K.Z)(this,"closeButton",void 0)}hide(){this.closeButton.nativeElement.click()}}return(0,K.Z)(r,"\u0275fac",function(t){return new(t||r)}),(0,K.Z)(r,"\u0275cmp",B.Xpm({type:r,selectors:[["app-modal"]],viewQuery:function(t,s){if(1&t&&B.Gf(Xt,5),2&t){let c;B.iGM(c=B.CRH())&&(s.closeButton=c.first)}},ngContentSelectors:ut,decls:8,vars:0,consts:[["id","saveModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",2,"display","none"],["closeButton",""]],template:function(t,s){1&t&&(B.F$t(Je),B.TgZ(0,"div",0)(1,"div",1)(2,"div",2),B._UZ(3,"button",3,4),B.Hsn(5),B.Hsn(6,1),B.Hsn(7,2),B.qZA()()())}})),r})();const Et=["modalWindow"],pt=["contentImage"],nt=["titleInput"],yt=["pushButton"];function bt(r,e){if(1&r){const t=B.EpF();B.TgZ(0,"li")(1,"a",18),B.NdJ("click",function(){B.CHM(t);const c=B.oxw();return B.KtG(c.setImage())}),B._uU(2,"Push to gallery"),B.qZA()()}}function dt(r,e){if(1&r&&B._UZ(0,"fa-icon",19),2&r){const t=B.oxw();B.Q6J("icon",t.spinnerIcon)("spin",!0)}}function H(r,e){1&r&&(B.TgZ(0,"span"),B._uU(1,"Push"),B.qZA())}let Be=(()=>{class r{constructor(t,s,c,p){(0,K.Z)(this,"router",void 0),(0,K.Z)(this,"drawAreaService",void 0),(0,K.Z)(this,"fb",void 0),(0,K.Z)(this,"loadingService",void 0),(0,K.Z)(this,"modalWindow",void 0),(0,K.Z)(this,"contentImage",void 0),(0,K.Z)(this,"titleInput",void 0),(0,K.Z)(this,"pushButton",void 0),(0,K.Z)(this,"spinnerIcon",Re.LM3),(0,K.Z)(this,"isLoading",!1),(0,K.Z)(this,"showButtonText",!0),this.router=t,this.drawAreaService=s,this.fb=c,this.loadingService=p}pushToGallery(t){var s=this;return(0,te.Z)(function*(){var c;s.loadingService.loading=!0,s.pushButton.nativeElement.style.paddingTop="15px",s.fb.pushToGallery(t).subscribe({next:(c=(0,te.Z)(function*(){s.pushButton.nativeElement.style.paddingTop="0",s.modalWindow.hide(),yield s.sleep(500),s.loadingService.loading=!1,s.titleInput.nativeElement.value=""}),function(){return c.apply(this,arguments)}),error:function(){var c=(0,te.Z)(function*(){s.pushButton.nativeElement.style.paddingTop="0",s.loadingService.loading=!1;const p=s.pushButton.nativeElement.style.backgroundColor;s.pushButton.nativeElement.style.backgroundColor="red",s.pushButton.nativeElement.disabled=!0,s.showButtonText=!1,yield s.sleep(3e3),s.pushButton.nativeElement.style.backgroundColor=p,s.pushButton.nativeElement.disabled=!1,s.showButtonText=!0});return function(){return c.apply(this,arguments)}}()})})()}setImage(){this.contentImage.nativeElement.src=this.drawAreaService.context.canvas.toDataURL()}sleep(t){return(0,te.Z)(function*(){return new Promise(s=>setTimeout(s,t))})()}}return(0,K.Z)(r,"\u0275fac",function(t){return new(t||r)(B.Y36(Ce.F0),B.Y36(ke.x),B.Y36(Se),B.Y36(Tt))}),(0,K.Z)(r,"\u0275cmp",B.Xpm({type:r,selectors:[["app-header"]],viewQuery:function(t,s){if(1&t&&(B.Gf(Et,5),B.Gf(pt,5),B.Gf(nt,5),B.Gf(yt,7)),2&t){let c;B.iGM(c=B.CRH())&&(s.modalWindow=c.first),B.iGM(c=B.CRH())&&(s.contentImage=c.first),B.iGM(c=B.CRH())&&(s.titleInput=c.first),B.iGM(c=B.CRH())&&(s.pushButton=c.first)}},decls:28,vars:4,consts:[["routerLink","/",1,"active"],["routerLink","/drawer"],["routerLink","/gallery"],[4,"ngIf"],["modalWindow",""],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body"],[1,"form-group","row","d-flex",2,"justify-content","center","margin-bottom","20px"],[1,"col","d-flex",2,"vertical-align","middle"],["type","text","placeholder","Title","id","inputTitle",1,"form-control","form-control-lg","d-flex",2,"font-size","30px","align-self","center"],["titleInput",""],[1,"image-container"],["src","assets/images/background.png","width","100%"],["contentImage",""],["type","button",1,"btn","btn-primary","pushButton",3,"disabled","click"],["pushButton",""],[3,"icon","spin",4,"ngIf"],["href","#","data-bs-toggle","modal","data-bs-target","#saveModal",3,"click"],[3,"icon","spin"]],template:function(t,s){if(1&t){const c=B.EpF();B.TgZ(0,"ul")(1,"li")(2,"a",0),B._uU(3,"Home"),B.qZA()(),B.TgZ(4,"li")(5,"a",1),B._uU(6,"Drawer"),B.qZA()(),B.TgZ(7,"li")(8,"a",2),B._uU(9,"Gallery"),B.qZA()(),B.YNc(10,bt,3,0,"li",3),B.qZA(),B.TgZ(11,"app-modal",null,4)(13,"div",5)(14,"h1",6),B._uU(15,"Push to gallery"),B.qZA()(),B.TgZ(16,"div",7)(17,"div",8)(18,"div",9),B._UZ(19,"input",10,11),B.qZA()(),B.TgZ(21,"div",12),B._UZ(22,"img",13,14),B.qZA()(),B.TgZ(24,"button",15,16),B.NdJ("click",function(){B.CHM(c);const y=B.MAs(20);return B.KtG(s.pushToGallery(y.value))}),B.YNc(26,dt,1,2,"fa-icon",17),B.YNc(27,H,2,0,"span",3),B.qZA()()}if(2&t){const c=B.MAs(20);B.xp6(10),B.Q6J("ngIf","/drawer"===s.router.url),B.xp6(14),B.Q6J("disabled",c.value.length<4||c.value.length>20),B.xp6(2),B.Q6J("ngIf",!0===s.loadingService.loading),B.xp6(1),B.Q6J("ngIf",!s.loadingService.loading&&s.showButtonText)}},dependencies:[Fe.O5,Ce.rH,Pt.BN,ft],styles:["ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;background-color:#333;height:80px;line-height:80px}li[_ngcontent-%COMP%]{float:left}a[_ngcontent-%COMP%]{color:#fff!important}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#fff;text-align:center;padding:0 16px;text-decoration:none;font-size:25px}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#111}.active[_ngcontent-%COMP%]{background-color:#04aa6d}.pushButton[_ngcontent-%COMP%]{width:100%;background-color:#04aa6d;color:#fff;font-size:40px;border:none;border-top-left-radius:0;border-top-right-radius:0;height:80px}.pushButton[disabled][_ngcontent-%COMP%]{background-color:#b3b3b3}.pushButton[_ngcontent-%COMP%]:hover{background-color:#000}img[_ngcontent-%COMP%]{background-image:url(background.png)}.image-container[_ngcontent-%COMP%]{border:1.333px solid rgb(206,212,218);border-radius:4px}.modal-header[_ngcontent-%COMP%]{justify-content:center;background-color:#04aa6d;text-transform:uppercase;color:#fff;flex-direction:column}.item[_ngcontent-%COMP%]{font-size:50px}"]})),r})(),zt=(()=>{class r{constructor(){(0,K.Z)(this,"title","PixCreator")}}return(0,K.Z)(r,"\u0275fac",function(t){return new(t||r)}),(0,K.Z)(r,"\u0275cmp",B.Xpm({type:r,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container-fluid"]],template:function(t,s){1&t&&(B._UZ(0,"app-header"),B.TgZ(1,"div",0),B._UZ(2,"router-outlet"),B.qZA())},dependencies:[Ce.lC,Be],styles:[".container-fluid[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);height:100%;background-color:gray}.container[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);height:100%}"]})),r})();var It=j(8395);const Zt_firebase={projectId:"pixcreator-66c34",appId:"1:653216671594:web:5ff198a1e99a6bcbe16713",databaseURL:"https://pixcreator-66c34-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"pixcreator-66c34.appspot.com",locationId:"europe-west6",apiKey:"AIzaSyB0LZwbTpmKo48GjTqHHJ7PxB1TIJzKNNg",authDomain:"pixcreator-66c34.firebaseapp.com",messagingSenderId:"653216671594",measurementId:"G-XNCRS1ET4J"};var xt=j(2011),Ve=j(5197),Qe=j(4986),Ue=j(9751),Ge=j(8996),at=j(9646),et=j(2122),St=j(8675),Nt=j(4482),_n=j(5403);function kt(){return(0,Nt.e)((r,e)=>{let t,s=!1;r.subscribe((0,_n.x)(e,c=>{const p=t;t=c,s&&e.next([p,c]),s=!0}))})}var gt,Kt=j(4004),Ft=j(5026),$t=j(1884),Tn=j(9300),Gn=(j(407),j(3942)),Nn=j(9681),kr=j(4859),br=j(1877),On=j(2090),cr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lr={},Jn=Jn||{},_t=cr||self;function vn(){}function Jr(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function An(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var Gr="closure_uid_"+(1e9*Math.random()>>>0),gn=0;function hn(r,e,t){return r.call.apply(r.bind,arguments)}function Gt(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,s),r.apply(e,c)}}return function(){return r.apply(e,arguments)}}function ir(r,e,t){return(ir=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?hn:Gt).apply(null,arguments)}function pr(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function Bn(r,e){function t(){}t.prototype=e.prototype,r.X=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.Wb=function(s,c,p){for(var y=Array(arguments.length-2),A=2;A<arguments.length;A++)y[A-2]=arguments[A];return e.prototype[c].apply(s,y)}}function Mn(){this.s=this.s,this.o=this.o}Mn.prototype.s=!1,Mn.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function un(r){Object.prototype.hasOwnProperty.call(r,Gr)&&r[Gr]||(r[Gr]=++gn)}(this)},Mn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ai=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function er(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function mi(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(Jr(s)){const c=r.length||0,p=s.length||0;r.length=c+p;for(let y=0;y<p;y++)r[c+y]=s[y]}else r.push(s)}}function bn(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}bn.prototype.h=function(){this.defaultPrevented=!0};var Or=function(){if(!_t.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{_t.addEventListener("test",vn,e),_t.removeEventListener("test",vn,e)}catch{}return r}();function ci(r){return/^[\s\xa0]*$/.test(r)}var Ht=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function mt(r,e){return r<e?-1:r>e?1:0}function Ne(){var r=_t.navigator;return r&&(r=r.userAgent)?r:""}function le(r){return-1!=Ne().indexOf(r)}function pe(r){return pe[" "](r),r}pe[" "]=vn;var pn,r,ne=le("Opera"),ie=le("Trident")||le("MSIE"),ge=le("Edge"),He=ge||ie,Te=le("Gecko")&&!(-1!=Ne().toLowerCase().indexOf("webkit")&&!le("Edge"))&&!(le("Trident")||le("MSIE"))&&!le("Edge"),jt=-1!=Ne().toLowerCase().indexOf("webkit")&&!le("Edge");function yn(){var r=_t.document;return r?r.documentMode:void 0}e:{var Dn="",Ot=(r=Ne(),Te?/rv:([^\);]+)(\)|;)/.exec(r):ge?/Edge\/([\d\.]+)/.exec(r):ie?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):jt?/WebKit\/(\S+)/.exec(r):ne?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(Ot&&(Dn=Ot?Ot[1]:""),ie){var $n=yn();if(null!=$n&&$n>parseFloat(Dn)){pn=String($n);break e}}pn=Dn}var De={};var Ct=_t.document&&ie&&(yn()||parseInt(pn,10))||void 0;function Jt(r,e){if(bn.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(Te){e:{try{pe(e.nodeName);var c=!0;break e}catch{}c=!1}c||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Vn[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&Jt.X.h.call(this)}}Bn(Jt,bn);var Vn={2:"touch",3:"pen",4:"mouse"};Jt.prototype.h=function(){Jt.X.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var Dr="closure_listenable_"+(1e6*Math.random()|0),Fr=0;function ss(r,e,t,s,c){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ha=c,this.key=++Fr,this.ba=this.ea=!1}function wr(r){r.ba=!0,r.listener=null,r.proxy=null,r.src=null,r.ha=null}function Vs(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function os(r){const e={};for(const t in r)e[t]=r[t];return e}const H1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D1(r,e){let t,s;for(let c=1;c<arguments.length;c++){for(t in s=arguments[c],s)r[t]=s[t];for(let p=0;p<H1.length;p++)t=H1[p],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function tr(r){this.src=r,this.g={},this.h=0}function li(r,e){var t=e.type;if(t in r.g){var p,s=r.g[t],c=ai(s,e);(p=0<=c)&&Array.prototype.splice.call(s,c,1),p&&(wr(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function Nr(r,e,t,s){for(var c=0;c<r.length;++c){var p=r[c];if(!p.ba&&p.listener==e&&p.capture==!!t&&p.ha==s)return c}return-1}tr.prototype.add=function(r,e,t,s,c){var p=r.toString();(r=this.g[p])||(r=this.g[p]=[],this.h++);var y=Nr(r,e,s,c);return-1<y?(e=r[y],t||(e.ea=!1)):((e=new ss(e,this.src,p,!!s,c)).ea=t,r.push(e)),e};var Mr="closure_lm_"+(1e6*Math.random()|0),ei={};function qi(r,e,t,s,c){if(s&&s.once)return ur(r,e,t,s,c);if(Array.isArray(e)){for(var p=0;p<e.length;p++)qi(r,e[p],t,s,c);return null}return t=y1(t),r&&r[Dr]?r.N(e,t,An(s)?!!s.capture:!!s,c):tn(r,e,t,!1,s,c)}function tn(r,e,t,s,c,p){if(!e)throw Error("Invalid event type");var y=An(c)?!!c.capture:!!c,A=Lr(r);if(A||(r[Mr]=A=new tr(r)),(t=A.add(e,t,s,y,p)).proxy)return t;if(s=function Hn(){const e=i1;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)Or||(c=y),void 0===c&&(c=!1),r.addEventListener(e.toString(),s,c);else if(r.attachEvent)r.attachEvent(Zr(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function ur(r,e,t,s,c){if(Array.isArray(e)){for(var p=0;p<e.length;p++)ur(r,e[p],t,s,c);return null}return t=y1(t),r&&r[Dr]?r.O(e,t,An(s)?!!s.capture:!!s,c):tn(r,e,t,!0,s,c)}function Ur(r,e,t,s,c){if(Array.isArray(e))for(var p=0;p<e.length;p++)Ur(r,e[p],t,s,c);else s=An(s)?!!s.capture:!!s,t=y1(t),r&&r[Dr]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=Nr(p=r.g[e],t,s,c))&&(wr(p[t]),Array.prototype.splice.call(p,t,1),0==p.length&&(delete r.g[e],r.h--))):r&&(r=Lr(r))&&(e=r.g[e.toString()],r=-1,e&&(r=Nr(e,t,s,c)),(t=-1<r?e[r]:null)&&gi(t))}function gi(r){if("number"!=typeof r&&r&&!r.ba){var e=r.src;if(e&&e[Dr])li(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(Zr(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Lr(e))?(li(t,r),0==t.h&&(t.src=null,e[Mr]=null)):wr(r)}}}function Zr(r){return r in ei?ei[r]:ei[r]="on"+r}function i1(r,e){if(r.ba)r=!0;else{e=new Jt(e,this);var t=r.listener,s=r.ha||r.src;r.ea&&gi(r),r=t.call(s,e)}return r}function Lr(r){return(r=r[Mr])instanceof tr?r:null}var Ri="__closure_events_fn_"+(1e9*Math.random()>>>0);function y1(r){return"function"==typeof r?r:(r[Ri]||(r[Ri]=function(e){return r.handleEvent(e)}),r[Ri])}function En(){Mn.call(this),this.i=new tr(this),this.P=this,this.I=null}function ti(r,e){var t,s=r.I;if(s)for(t=[];s;s=s.I)t.push(s);if(r=r.P,s=e.type||e,"string"==typeof e)e=new bn(e,r);else if(e instanceof bn)e.target=e.target||r;else{var c=e;D1(e=new bn(s,r),c)}if(c=!0,t)for(var p=t.length-1;0<=p;p--){var y=e.g=t[p];c=_1(y,s,!0,e)&&c}if(c=_1(y=e.g=r,s,!0,e)&&c,c=_1(y,s,!1,e)&&c,t)for(p=0;p<t.length;p++)c=_1(y=e.g=t[p],s,!1,e)&&c}function _1(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,p=0;p<e.length;++p){var y=e[p];if(y&&!y.ba&&y.capture==t){var A=y.listener,F=y.ha||y.src;y.ea&&li(r.i,y),c=!1!==A.call(F,s)&&c}}return c&&!s.defaultPrevented}Bn(En,Mn),En.prototype[Dr]=!0,En.prototype.removeEventListener=function(r,e,t,s){Ur(this,r,e,t,s)},En.prototype.M=function(){if(En.X.M.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)wr(t[s]);delete r.g[e],r.h--}}this.I=null},En.prototype.N=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},En.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var K1=_t.JSON.stringify;function Si(){var r=Pe;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Ti,T1=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new as,r=>r.reset());class as{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function s1(r){_t.setTimeout(()=>{throw r},0)}function C1(r,e){Ti||function Ee(){var r=_t.Promise.resolve(void 0);Ti=function(){r.then($e)}}(),Me||(Ti(),Me=!0),Pe.add(r,e)}var Me=!1,Pe=new class Di{constructor(){this.h=this.g=null}add(e,t){const s=T1.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function $e(){for(var r;r=Si();){try{r.h.call(r.g)}catch(t){s1(t)}var e=T1;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}Me=!1}function ct(r,e){En.call(this),this.h=r||1,this.g=e||_t,this.j=ir(this.lb,this),this.l=Date.now()}function Lt(r){r.ca=!1,r.R&&(r.g.clearTimeout(r.R),r.R=null)}function In(r,e,t){if("function"==typeof r)t&&(r=ir(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=ir(r.handleEvent,r)}return 2147483647<Number(e)?-1:_t.setTimeout(r,e||0)}function mn(r){r.g=In(()=>{r.g=null,r.i&&(r.i=!1,mn(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}Bn(ct,En),(gt=ct.prototype).ca=!1,gt.R=null,gt.lb=function(){if(this.ca){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-r):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ti(this,"tick"),this.ca&&(Lt(this),this.start()))}},gt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gt.M=function(){ct.X.M.call(this),Lt(this),delete this.g};class _r extends Mn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mn(this)}M(){super.M(),this.g&&(_t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ni(r){Mn.call(this),this.h=r,this.g={}}Bn(ni,Mn);var di=[];function Pi(r,e,t,s){Array.isArray(t)||(t&&(di[0]=t.toString()),t=di);for(var c=0;c<t.length;c++){var p=qi(e,t[c],s||r.handleEvent,!1,r.h||r);if(!p)break;r.g[p.key]=p}}function fr(r){Vs(r.g,function(e,t){this.g.hasOwnProperty(t)&&gi(e)},r),r.g={}}function jn(){this.g=!0}function ws(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function q1(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var c=s[1];if(Array.isArray(c)&&!(1>c.length)){var p=c[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var y=1;y<c.length;y++)c[y]=""}}}return K1(t)}catch{return e}}(r,t)+(s?" "+s:"")})}ni.prototype.M=function(){ni.X.M.call(this),fr(this)},ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jn.prototype.Aa=function(){this.g=!1},jn.prototype.info=function(){};var A1={},eo=null;function Hs(){return eo=eo||new En}function Es(r){bn.call(this,A1.Pa,r)}function Is(r){const e=Hs();ti(e,new Es(e))}function Fs(r,e){bn.call(this,A1.STAT_EVENT,r),this.stat=e}function jr(r){const e=Hs();ti(e,new Fs(e,r))}function vi(r,e){bn.call(this,A1.Qa,r),this.size=e}function yi(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return _t.setTimeout(function(){r()},e)}A1.Pa="serverreachability",Bn(Es,bn),A1.STAT_EVENT="statevent",Bn(Fs,bn),A1.Qa="timingevent",Bn(vi,bn);var Lo={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Us={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function to(){}function qn(){}to.prototype.h=null;var ui,cs={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function x1(){bn.call(this,"d")}function ls(){bn.call(this,"c")}function h1(){}function _i(r,e,t,s){this.l=r,this.j=e,this.m=t,this.U=s||1,this.S=new ni(this),this.O=ki,this.T=new ct(r=He?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new us}function us(){this.i=null,this.g="",this.h=!1}Bn(x1,bn),Bn(ls,bn),Bn(h1,to),h1.prototype.g=function(){return new XMLHttpRequest},h1.prototype.i=function(){return{}},ui=new h1;var ki=45e3,w1={},N1={};function Y1(r,e,t){r.K=1,r.v=fs(Ai(e)),r.s=t,r.P=!0,wo(r,null)}function wo(r,e){r.F=Date.now(),Cr(r),r.A=Ai(r.v);var t=r.A,s=r.U;Array.isArray(s)||(s=[String(s)]),Ms(t.i,"t",s),r.C=0,t=r.l.H,r.h=new us,r.g=ps(r.l,t?e:null,!r.s),0<r.N&&(r.L=new _r(ir(r.La,r,r.g),r.N)),Pi(r.S,r.g,"readystatechange",r.ib),e=r.H?os(r.H):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.da(r.A,r.u,r.s,e)):(r.u="GET",r.g.da(r.A,r.u,null,e)),Is(),function Br(r,e,t,s,c,p){r.info(function(){if(r.g)if(p)for(var y="",A=p.split("&"),F=0;F<A.length;F++){var Z=A[F].split("=");if(1<Z.length){var re=Z[0];Z=Z[1];var ye=re.split("_");y=2<=ye.length&&"type"==ye[1]?y+(re+"=")+Z+"&":y+(re+"=redacted&")}}else y=null;else y=p;return"XMLHTTP REQ ("+s+") [attempt "+c+"]: "+e+"\n"+t+"\n"+y})}(r.j,r.u,r.A,r.m,r.U,r.s)}function hs(r){return!!r.g&&"GET"==r.u&&2!=r.K&&r.l.Da}function Q1(r,e,t){let c,s=!0;for(;!r.I&&r.C<t.length;){if(c=a1(r,t),c==N1){4==e&&(r.o=4,jr(14),s=!1),ws(r.j,r.m,null,"[Incomplete Response]");break}if(c==w1){r.o=4,jr(15),ws(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}ws(r.j,r.m,c,null),pi(r,c)}hs(r)&&c!=N1&&c!=w1&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,jr(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.$&&(r.$=!0,(e=r.l).g==r&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ln(e),e.K=!0,jr(11))):(ws(r.j,r.m,t,"[Invalid Chunked Response]"),ji(r),Yi(r))}function a1(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?N1:(t=Number(e.substring(t,s)),isNaN(t)?w1:(s+=1)+t>e.length?N1:(e=e.substr(s,t),r.C=s+t,e))}function Cr(r){r.V=Date.now()+r.O,no(r,r.O)}function no(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=yi(ir(r.gb,r),e)}function Er(r){r.B&&(_t.clearTimeout(r.B),r.B=null)}function Yi(r){0==r.l.G||r.I||xr(r.l,r)}function ji(r){Er(r);var e=r.L;e&&"function"==typeof e.na&&e.na(),r.L=null,Lt(r.T),fr(r.S),r.g&&(e=r.g,r.g=null,e.abort(),e.na())}function pi(r,e){try{var t=r.l;if(0!=t.G&&(t.g==r||ae(t.h,r)))if(!r.J&&ae(t.h,r)&&3==t.G){try{var s=t.Fa.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var c=s;if(0==c[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<r.F))break e;or(t),f1(t)}vt(t),jr(18)}}else t.Ba=c[1],0<t.Ba-t.T&&37500>c[2]&&t.L&&0==t.A&&!t.v&&(t.v=yi(ir(t.cb,t),6e3));if(1>=oe(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Yr(t,11)}else if((r.J||t.g==r)&&or(t),!ci(e))for(c=t.Fa.g.parse(e),e=0;e<c.length;e++){let Z=c[e];if(t.T=Z[0],Z=Z[1],2==t.G)if("c"==Z[0]){t.I=Z[1],t.ka=Z[2];const re=Z[3];null!=re&&(t.ma=re,t.j.info("VER="+t.ma));const ye=Z[4];null!=ye&&(t.Ca=ye,t.j.info("SVER="+t.Ca));const Ze=Z[5];null!=Ze&&"number"==typeof Ze&&0<Ze&&(t.J=s=1.5*Ze,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const At=r.g;if(At){const Vt=At.g?At.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vt){var p=s.h;p.g||-1==Vt.indexOf("spdy")&&-1==Vt.indexOf("quic")&&-1==Vt.indexOf("h2")||(p.j=p.l,p.g=new Set,p.h&&(Ae(p,p.h),p.h=null))}if(s.D){const Cn=At.g?At.g.getResponseHeader("X-HTTP-Session-Id"):null;Cn&&(s.za=Cn,sn(s.F,s.D,Cn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-r.F,t.j.info("Handshake RTT: "+t.P+"ms"));var y=r;if((s=t).sa=Ei(s,s.H?s.ka:null,s.V),y.J){tt(s.h,y);var A=y,F=s.J;F&&A.setTimeout(F),A.B&&(Er(A),Cr(A)),s.g=y}else We(s);0<t.i.length&&L(t)}else"stop"!=Z[0]&&"close"!=Z[0]||Yr(t,7);else 3==t.G&&("stop"==Z[0]||"close"==Z[0]?"stop"==Z[0]?Yr(t,7):ds(t):"noop"!=Z[0]&&t.l&&t.l.wa(Z),t.A=0)}Is()}catch{}}function L1(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(Jr(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function bs(r){if(r.oa&&"function"==typeof r.oa)return r.oa();if(!r.W||"function"!=typeof r.W){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(Jr(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function zr(r){if(r.W&&"function"==typeof r.W)return r.W();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(Jr(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),c=s.length,p=0;p<c;p++)e.call(void 0,s[p],t&&t[p],r)}(gt=_i.prototype).setTimeout=function(r){this.O=r},gt.ib=function(r){r=r.target;const e=this.L;e&&3==Hi(r)?e.l():this.La(r)},gt.La=function(r){try{if(r==this.g)e:{const re=Hi(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>re)&&(3!=re||He||this.g&&(this.h.h||this.g.fa()||Ko(this.g)))){this.I||4!=re||7==e||Is(),Er(this);var t=this.g.aa();this.Y=t;t:if(hs(this)){var s=Ko(this.g);r="";var c=s.length,p=4==Hi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ji(this),Yi(this);var y="";break t}this.h.i=new _t.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:p&&e==c-1});s.splice(0,c),this.h.g+=r,this.C=0,y=this.h.g}else y=this.g.fa();if(this.i=200==t,function Co(r,e,t,s,c,p,y){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+c+"]: "+e+"\n"+t+"\n"+p+" "+y})}(this.j,this.u,this.A,this.m,this.U,re,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var A,F=this.g;if((A=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ci(A)){var Z=A;break t}}Z=null}if(!(t=Z)){this.i=!1,this.o=3,jr(12),ji(this),Yi(this);break e}ws(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,pi(this,t)}this.P?(Q1(this,re,y),He&&this.i&&3==re&&(Pi(this.S,this.T,"tick",this.hb),this.T.start())):(ws(this.j,this.m,y,null),pi(this,y)),4==re&&ji(this),this.i&&!this.I&&(4==re?xr(this.l,this):(this.i=!1,Cr(this)))}else 400==t&&0<y.indexOf("Unknown SID")?(this.o=3,jr(12)):(this.o=0,jr(13)),ji(this),Yi(this)}}}catch{}},gt.hb=function(){if(this.g){var r=Hi(this.g),e=this.g.fa();this.C<e.length&&(Er(this),Q1(this,r,e),this.i&&4!=r&&Cr(this))}},gt.cancel=function(){this.I=!0,ji(this)},gt.gb=function(){this.B=null;const r=Date.now();0<=r-this.V?(function o1(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Is(),jr(17)),ji(this),this.o=2,Yi(this)):no(this,this.V-r)};var Ci=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $i(r,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof $i){this.h=void 0!==e?e:r.h,Oi(this,r.j),this.s=r.s,this.g=r.g,Rn(this,r.m),this.l=r.l,e=r.i;var t=new hr;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ro(this,t),this.o=r.o}else r&&(t=String(r).match(Ci))?(this.h=!!e,Oi(this,t[1]||"",!0),this.s=sr(t[2]||""),this.g=sr(t[3]||"",!0),Rn(this,t[4]),this.l=sr(t[5]||"",!0),ro(this,t[6]||"",!0),this.o=sr(t[7]||"")):(this.h=!!e,this.i=new hr(null,this.h))}function Ai(r){return new $i(r)}function Oi(r,e,t){r.j=t?sr(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function Rn(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function ro(r,e,t){e instanceof hr?(r.i=e,function Xi(r,e){e&&!r.j&&(Wi(r),r.i=null,r.g.forEach(function(t,s){var c=s.toLowerCase();s!=c&&(U1(this,s),Ms(this,c,t))},r)),r.j=e}(r.i,r.h)):(t||(e=F1(e,X1)),r.i=new hr(e,r.h))}function sn(r,e,t){r.i.set(e,t)}function fs(r){return sn(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function sr(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function F1(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,js),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function js(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}$i.prototype.toString=function(){var r=[],e=this.j;e&&r.push(F1(e,io,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(F1(e,io,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(F1(t,"/"==t.charAt(0)?$s:Eo,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",F1(t,it)),r.join("")};var io=/[#\/\?@]/g,Eo=/[#\?:]/g,$s=/[#\?]/g,X1=/[#\?@]/g,it=/#/g;function hr(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function Wi(r){r.g||(r.g=new Map,r.h=0,r.i&&function Bs(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),c=null;if(0<=s){var p=r[t].substring(0,s);c=r[t].substring(s+1)}else p=r[t];e(p,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function U1(r,e){Wi(r),e=z1(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function Qi(r,e){return Wi(r),e=z1(r,e),r.g.has(e)}function Ms(r,e,t){U1(r,e),0<t.length&&(r.i=null,r.g.set(z1(r,e),er(t)),r.h+=t.length)}function z1(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function Ws(r){this.l=r||W,r=_t.PerformanceNavigationTiming?0<(r=_t.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(_t.g&&_t.g.Ga&&_t.g.Ga()&&_t.g.Ga().$b),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(gt=hr.prototype).add=function(r,e){Wi(this),this.i=null,r=z1(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},gt.forEach=function(r,e){Wi(this),this.g.forEach(function(t,s){t.forEach(function(c){r.call(e,c,s,this)},this)},this)},gt.oa=function(){Wi(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const c=r[s];for(let p=0;p<c.length;p++)t.push(e[s])}return t},gt.W=function(r){Wi(this);let e=[];if("string"==typeof r)Qi(this,r)&&(e=e.concat(this.g.get(z1(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},gt.set=function(r,e){return Wi(this),this.i=null,Qi(this,r=z1(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},gt.get=function(r,e){return r&&0<(r=this.W(r)).length?String(r[0]):e},gt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const p=encodeURIComponent(String(s)),y=this.W(s);for(s=0;s<y.length;s++){var c=p;""!==y[s]&&(c+="="+encodeURIComponent(String(y[s]))),r.push(c)}}return this.i=r.join("&")};var W=10;function ee(r){return!!r.h||!!r.g&&r.g.size>=r.j}function oe(r){return r.h?1:r.g?r.g.size:0}function ae(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function Ae(r,e){r.g?r.g.add(e):r.h=e}function tt(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function ht(r){if(null!=r.h)return r.i.concat(r.h.D);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.D);return e}return er(r.i)}function st(){}function qt(){this.g=new st}function Pn(r,e,t){const s=t||"";try{L1(r,function(c,p){let y=c;An(c)&&(y=K1(c)),e.push(s+p+"="+encodeURIComponent(y))})}catch(c){throw e.push(s+"type="+encodeURIComponent("_badmap")),c}}function nr(r,e,t,s,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(s)}catch{}}function Tr(r){this.l=r.ac||null,this.j=r.jb||!1}function ri(r,e){En.call(this),this.D=r,this.u=e,this.m=void 0,this.readyState=Vi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ws.prototype.cancel=function(){if(this.i=ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},st.prototype.stringify=function(r){return _t.JSON.stringify(r,void 0)},st.prototype.parse=function(r){return _t.JSON.parse(r,void 0)},Bn(Tr,to),Tr.prototype.g=function(){return new ri(this.l,this.j)},Tr.prototype.i=function(r){return function(){return r}}({}),Bn(ri,En);var Vi=0;function Ji(r){r.j.read().then(r.Ta.bind(r)).catch(r.ga.bind(r))}function wi(r){r.readyState=4,r.l=null,r.j=null,r.A=null,Gi(r)}function Gi(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(gt=ri.prototype).open=function(r,e){if(this.readyState!=Vi)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,Gi(this)},gt.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.D||_t).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},gt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wi(this)),this.readyState=Vi},gt.Wa=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,Gi(this)),this.g&&(this.readyState=3,Gi(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof _t.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ji(this)}else r.text().then(this.Va.bind(this),this.ga.bind(this))},gt.Ta=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?wi(this):Gi(this),3==this.readyState&&Ji(this)}},gt.Va=function(r){this.g&&(this.response=this.responseText=r,wi(this))},gt.Ua=function(r){this.g&&(this.response=r,wi(this))},gt.ga=function(){this.g&&wi(this)},gt.setRequestHeader=function(r,e){this.v.append(r,e)},gt.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},gt.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(ri.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var Kr=_t.JSON.parse;function Ar(r){En.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=E1,this.K=this.L=!1}Bn(Ar,En);var E1="",Gs=/^https?$/i,c1=["POST","PUT"];function so(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,Ds(r),Zs(r)}function Ds(r){r.D||(r.D=!0,ti(r,"complete"),ti(r,"error"))}function qr(r){if(r.h&&typeof Jn<"u"&&(!r.C[1]||4!=Hi(r)||2!=r.aa()))if(r.v&&4==Hi(r))In(r.Ha,0,r);else if(ti(r,"readystatechange"),4==Hi(r)){r.h=!1;try{const A=r.aa();e:switch(A){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===A){var c=String(r.H).match(Ci)[1]||null;if(!c&&_t.self&&_t.self.location){var p=_t.self.location.protocol;c=p.substr(0,p.length-1)}s=!Gs.test(c?c.toLowerCase():"")}t=s}if(t)ti(r,"complete"),ti(r,"success");else{r.m=6;try{var y=2<Hi(r)?r.g.statusText:""}catch{y=""}r.j=y+" ["+r.aa()+"]",Ds(r)}}finally{Zs(r)}}}function Zs(r,e){if(r.g){Wr(r);const t=r.g,s=r.C[0]?vn:null;r.g=null,r.C=null,e||ti(r,"ready");try{t.onreadystatechange=s}catch{}}}function Wr(r){r.g&&r.K&&(r.g.ontimeout=null),r.A&&(_t.clearTimeout(r.A),r.A=null)}function Hi(r){return r.g?r.g.readyState:0}function Ko(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.J){case E1:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function Fi(r){let e="";return Vs(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Ks(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=Fi(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):sn(r,e,t))}function qs(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function zo(r){this.Ca=0,this.i=[],this.j=new jn,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=qs("failFast",!1,r),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=qs("baseRetryDelayMs",5e3,r),this.bb=qs("retryDelaySeedMs",1e4,r),this.$a=qs("forwardChannelMaxRetries",2,r),this.ta=qs("forwardChannelRequestTimeoutMs",2e4,r),this.ra=r&&r.xmlHttpFactory||void 0,this.Da=r&&r.Zb||!1,this.J=void 0,this.H=r&&r.supportsCrossDomainXhr||!1,this.I="",this.h=new Ws(r&&r.concurrentRequestLimit),this.Fa=new qt,this.O=r&&r.fastHandshake||!1,this.N=r&&r.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=r&&r.Xb||!1,r&&r.Aa&&this.j.Aa(),r&&r.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&r&&r.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ds(r){if(Ro(r),3==r.G){var e=r.U++,t=Ai(r.F);sn(t,"SID",r.I),sn(t,"RID",e),sn(t,"TYPE","terminate"),Y(r,t),(e=new _i(r,r.j,e,void 0)).K=2,e.v=fs(Ai(t)),t=!1,_t.navigator&&_t.navigator.sendBeacon&&(t=_t.navigator.sendBeacon(e.v.toString(),"")),!t&&_t.Image&&((new Image).src=e.v,t=!0),t||(e.g=ps(e.l,null),e.g.da(e.v)),e.F=Date.now(),Cr(e)}Fn(r)}function f1(r){r.g&&(ln(r),r.g.cancel(),r.g=null)}function Ro(r){f1(r),r.u&&(_t.clearTimeout(r.u),r.u=null),or(r),r.h.cancel(),r.m&&("number"==typeof r.m&&_t.clearTimeout(r.m),r.m=null)}function L(r){ee(r.h)||r.m||(r.m=!0,C1(r.Ja,r),r.C=0)}function P(r,e){var t;t=e?e.m:r.U++;const s=Ai(r.F);sn(s,"SID",r.I),sn(s,"RID",t),sn(s,"AID",r.T),Y(r,s),r.o&&r.s&&Ks(s,r.o,r.s),t=new _i(r,r.j,t,r.C+1),null===r.o&&(t.H=r.s),e&&(r.i=e.D.concat(r.i)),e=fe(r,t,1e3),t.setTimeout(Math.round(.5*r.ta)+Math.round(.5*r.ta*Math.random())),Ae(r.h,t),Y1(t,s,e)}function Y(r,e){r.ia&&Vs(r.ia,function(t,s){sn(e,s,t)}),r.l&&L1({},function(t,s){sn(e,s,t)})}function fe(r,e,t){t=Math.min(r.i.length,t);var s=r.l?ir(r.l.Ra,r.l,r):null;e:{var c=r.i;let p=-1;for(;;){const y=["count="+t];-1==p?0<t?(p=c[0].h,y.push("ofs="+p)):p=0:y.push("ofs="+p);let A=!0;for(let F=0;F<t;F++){let Z=c[F].h;const re=c[F].g;if(Z-=p,0>Z)p=Math.max(0,c[F].h-100),A=!1;else try{Pn(re,y,"req"+Z+"_")}catch{s&&s(re)}}if(A){s=y.join("&");break e}}}return r=r.i.splice(0,t),e.D=r,s}function We(r){r.g||r.u||(r.Z=1,C1(r.Ia,r),r.A=0)}function vt(r){return!(r.g||r.u||3<=r.A||(r.Z++,r.u=yi(ir(r.Ia,r),Zn(r,r.A)),r.A++,0))}function ln(r){null!=r.B&&(_t.clearTimeout(r.B),r.B=null)}function dr(r){r.g=new _i(r,r.j,"rpc",r.Z),null===r.o&&(r.g.H=r.s),r.g.N=0;var e=Ai(r.sa);sn(e,"RID","rpc"),sn(e,"SID",r.I),sn(e,"CI",r.L?"0":"1"),sn(e,"AID",r.T),sn(e,"TYPE","xmlhttp"),Y(r,e),r.o&&r.s&&Ks(e,r.o,r.s),r.J&&r.g.setTimeout(r.J);var t=r.g;r=r.ka,t.K=1,t.v=fs(Ai(e)),t.s=null,t.P=!0,wo(t,r)}function or(r){null!=r.v&&(_t.clearTimeout(r.v),r.v=null)}function xr(r,e){var t=null;if(r.g==e){or(r),ln(r),r.g=null;var s=2}else{if(!ae(r.h,e))return;t=e.D,tt(r.h,e),s=1}if(0!=r.G)if(r.pa=e.Y,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var c=r.C;ti(s=Hs(),new vi(s,t)),L(r)}else We(r);else if(3==(c=e.o)||0==c&&0<r.pa||!(1==s&&function U(r,e){return!(oe(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=e.D.concat(r.i),0):1==r.G||2==r.G||r.C>=(r.Za?0:r.$a)||(r.m=yi(ir(r.Ja,r,e),Zn(r,r.C)),r.C++,0)))}(r,e)||2==s&&vt(r)))switch(t&&0<t.length&&(e=r.h,e.i=e.i.concat(t)),c){case 1:Yr(r,5);break;case 4:Yr(r,10);break;case 3:Yr(r,6);break;default:Yr(r,2)}}function Zn(r,e){let t=r.Xa+Math.floor(Math.random()*r.bb);return r.l||(t*=2),t*e}function Yr(r,e){if(r.j.info("Error code "+e),2==e){var t=null;r.l&&(t=null);var s=ir(r.kb,r);t||(t=new $i("//www.google.com/images/cleardot.gif"),_t.location&&"http"==_t.location.protocol||Oi(t,"https"),fs(t)),function Yn(r,e){const t=new jn;if(_t.Image){const s=new Image;s.onload=pr(nr,t,s,"TestLoadImage: loaded",!0,e),s.onerror=pr(nr,t,s,"TestLoadImage: error",!1,e),s.onabort=pr(nr,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=pr(nr,t,s,"TestLoadImage: timeout",!1,e),_t.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else jr(2);r.G=0,r.l&&r.l.va(e),Fn(r),Ro(r)}function Fn(r){if(r.G=0,r.la=[],r.l){const e=ht(r.h);(0!=e.length||0!=r.i.length)&&(mi(r.la,e),mi(r.la,r.i),r.h.i.length=0,er(r.i),r.i.length=0),r.l.ua()}}function Ei(r,e,t){var s=t instanceof $i?Ai(t):new $i(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),Rn(s,s.m);else{var c=_t.location;s=c.protocol,e=e?e+"."+c.hostname:c.hostname,c=+c.port;var p=new $i(null,void 0);s&&Oi(p,s),e&&(p.g=e),c&&Rn(p,c),t&&(p.l=t),s=p}return e=r.za,(t=r.D)&&e&&sn(s,t,e),sn(s,"VER",r.ma),Y(r,s),s}function ps(r,e,t){if(e&&!r.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ar(t&&r.Da&&!r.ra?new Tr({jb:!0}):r.ra)).Ka(r.H),e}function e1(){}function R1(){if(ie&&!(10<=Number(Ct)))throw Error("Environmental error: no available transport.")}function xi(r,e){En.call(this),this.g=new zo(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(r?r["X-WebChannel-Client-Profile"]=e.ya:r={"X-WebChannel-Client-Profile":e.ya}),this.g.S=r,(r=e&&e.Yb)&&!ci(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ci(e)&&(this.g.D=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new ms(this)}function oo(r){x1.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function Io(){ls.call(this),this.status=1}function ms(r){this.g=r}(gt=Ar.prototype).Ka=function(r){this.L=r},gt.da=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+r);e=e?e.toUpperCase():"GET",this.H=r,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ui.g(),this.C=function $r(r){return r.h||(r.h=r.i())}(this.u?this.u:ui),this.g.onreadystatechange=ir(this.Ha,this);try{this.F=!0,this.g.open(e,String(r),!0),this.F=!1}catch(p){return void so(this,p)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var c in s)t.set(c,s[c]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const p of s.keys())t.set(p,s.get(p))}s=Array.from(t.keys()).find(p=>"content-type"==p.toLowerCase()),c=_t.FormData&&r instanceof _t.FormData,!(0<=ai(c1,e))||s||c||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[p,y]of t)this.g.setRequestHeader(p,y);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Wr(this),0<this.B&&((this.K=function Ss(r){return ie&&function be(){return function Oe(r){var e=De;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=r(9)}(function(){let r=0;const e=Ht(String(pn)).split("."),t=Ht("9").split("."),s=Math.max(e.length,t.length);for(let y=0;0==r&&y<s;y++){var c=e[y]||"",p=t[y]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],0==c[0].length&&0==p[0].length)break;r=mt(0==c[1].length?0:parseInt(c[1],10),0==p[1].length?0:parseInt(p[1],10))||mt(0==c[2].length,0==p[2].length)||mt(c[2],p[2]),c=c[3],p=p[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ir(this.qa,this)):this.A=In(this.qa,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(p){so(this,p)}},gt.qa=function(){typeof Jn<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ti(this,"timeout"),this.abort(8))},gt.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,ti(this,"complete"),ti(this,"abort"),Zs(this))},gt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zs(this,!0)),Ar.X.M.call(this)},gt.Ha=function(){this.s||(this.F||this.v||this.l?qr(this):this.fb())},gt.fb=function(){qr(this)},gt.aa=function(){try{return 2<Hi(this)?this.g.status:-1}catch{return-1}},gt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},gt.Sa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),Kr(e)}},gt.Ea=function(){return this.m},gt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(gt=zo.prototype).ma=8,gt.G=1,gt.Ja=function(r){if(this.m)if(this.m=null,1==this.G){if(!r){this.U=Math.floor(1e5*Math.random()),r=this.U++;const c=new _i(this,this.j,r,void 0);let p=this.s;if(this.S&&(p?(p=os(p),D1(p,this.S)):p=this.S),null!==this.o||this.N||(c.H=p,p=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=fe(this,c,e),sn(t=Ai(this.F),"RID",r),sn(t,"CVER",22),this.D&&sn(t,"X-HTTP-Session-Id",this.D),Y(this,t),p&&(this.N?e="headers="+encodeURIComponent(String(Fi(p)))+"&"+e:this.o&&Ks(t,this.o,p)),Ae(this.h,c),this.Ya&&sn(t,"TYPE","init"),this.O?(sn(t,"$req",e),sn(t,"SID","null"),c.Z=!0,Y1(c,t,null)):Y1(c,t,e),this.G=2}}else 3==this.G&&(r?P(this,r):0==this.i.length||ee(this.h)||P(this))},gt.Ia=function(){if(this.u=null,dr(this),this.$&&!(this.K||null==this.g||0>=this.P)){var r=2*this.P;this.j.info("BP detection timer enabled: "+r),this.B=yi(ir(this.eb,this),r)}},gt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,jr(10),f1(this),dr(this))},gt.cb=function(){null!=this.v&&(this.v=null,f1(this),vt(this),jr(19))},gt.kb=function(r){r?(this.j.info("Successfully pinged google.com"),jr(2)):(this.j.info("Failed to ping google.com"),jr(1))},(gt=e1.prototype).xa=function(){},gt.wa=function(){},gt.va=function(){},gt.ua=function(){},gt.Ra=function(){},R1.prototype.g=function(r,e){return new xi(r,e)},Bn(xi,En),xi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var r=this.g,e=this.l,t=this.h||void 0;jr(0),r.V=e,r.ia=t||{},r.L=r.Y,r.F=Ei(r,null,r.V),L(r)},xi.prototype.close=function(){ds(this.g)},xi.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=K1(r),r=t);e.i.push(new class{constructor(r,e){this.h=r,this.g=e}}(e.ab++,r)),3==e.G&&L(e)},xi.prototype.M=function(){this.g.l=null,delete this.j,ds(this.g),delete this.g,xi.X.M.call(this)},Bn(oo,x1),Bn(Io,ls),Bn(ms,e1),ms.prototype.xa=function(){ti(this.g,"a")},ms.prototype.wa=function(r){ti(this.g,new oo(r))},ms.prototype.va=function(r){ti(this.g,new Io)},ms.prototype.ua=function(){ti(this.g,"b")},R1.prototype.createWebChannel=R1.prototype.g,xi.prototype.send=xi.prototype.u,xi.prototype.open=xi.prototype.m,xi.prototype.close=xi.prototype.close,Lo.NO_ERROR=0,Lo.TIMEOUT=8,Lo.HTTP_ERROR=6,Us.COMPLETE="complete",qn.EventType=cs,cs.OPEN="a",cs.CLOSE="b",cs.ERROR="c",cs.MESSAGE="d",En.prototype.listen=En.prototype.N,Ar.prototype.listenOnce=Ar.prototype.O,Ar.prototype.getLastError=Ar.prototype.Oa,Ar.prototype.getLastErrorCode=Ar.prototype.Ea,Ar.prototype.getStatus=Ar.prototype.aa,Ar.prototype.getResponseJson=Ar.prototype.Sa,Ar.prototype.getResponseText=Ar.prototype.fa,Ar.prototype.send=Ar.prototype.da,Ar.prototype.setWithCredentials=Ar.prototype.Ka;var bo=lr.createWebChannelTransport=function(){return new R1},w2=lr.getStatEventTarget=function(){return Hs()},Mo=lr.ErrorCode=Lo,qo=lr.EventType=Us,P2=lr.Event=A1,E2=lr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},d1=lr.FetchXmlHttpFactory=Tr,Ys=lr.WebChannel=qn,Po=lr.XhrIo=Ar;const ao="@firebase/firestore";class ii{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ii.UNAUTHENTICATED=new ii(null),ii.GOOGLE_CREDENTIALS=new ii("google-credentials-uid"),ii.FIRST_PARTY=new ii("first-party-uid"),ii.MOCK_USER=new ii("mock-user");let Ts="9.17.1";const gs=new br.Yd("@firebase/firestore");function u2(){return gs.logLevel}function Rt(r,...e){if(gs.logLevel<=br.in.DEBUG){const t=e.map(Oo);gs.debug(`Firestore (${Ts}): ${r}`,...t)}}function Ui(r,...e){if(gs.logLevel<=br.in.ERROR){const t=e.map(Oo);gs.error(`Firestore (${Ts}): ${r}`,...t)}}function I1(r,...e){if(gs.logLevel<=br.in.WARN){const t=e.map(Oo);gs.warn(`Firestore (${Ts}): ${r}`,...t)}}function Oo(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function an(r="Unexpected state"){const e=`FIRESTORE (${Ts}) INTERNAL ASSERTION FAILED: `+r;throw Ui(e),new Error(e)}function fn(r,e){r||an()}function Yt(r,e){return r}const Ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wt extends On.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class t1{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class k2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class P1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ii.UNAUTHENTICATED))}shutdown(){}}class X2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Yo{constructor(e){this.t=e,this.currentUser=ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let c=this.i;const p=Z=>this.i!==c?(c=this.i,t(Z)):Promise.resolve();let y=new t1;this.o=()=>{this.i++,this.currentUser=this.u(),y.resolve(),y=new t1,e.enqueueRetryable(()=>p(this.currentUser))};const A=()=>{const Z=y;e.enqueueRetryable((0,te.Z)(function*(){yield Z.promise,yield p(s.currentUser)}))},F=Z=>{Rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Z,this.auth.addAuthTokenListener(this.o),A()};this.t.onInit(Z=>F(Z)),setTimeout(()=>{if(!this.auth){const Z=this.t.getImmediate({optional:!0});Z?F(Z):(Rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),y.resolve(),y=new t1)}},0),A()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(fn("string"==typeof s.accessToken),new k2(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return fn(null===e||"string"==typeof e),new ii(e)}}class J2{constructor(e,t,s,c){this.h=e,this.l=t,this.m=s,this.g=c,this.type="FirstParty",this.user=ii.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(fn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Vo{constructor(e,t,s,c){this.h=e,this.l=t,this.m=s,this.g=c}getToken(){return Promise.resolve(new J2(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I2{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const s=p=>{null!=p.error&&Rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const y=p.token!==this.A;return this.A=p.token,Rt("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?t(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>s(p))};const c=p=>{Rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.T.onInit(p=>c(p)),setTimeout(()=>{if(!this.appCheck){const p=this.T.getImmediate({optional:!0});p?c(p):Rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(fn("string"==typeof t.token),this.A=t.token,new Qo(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function wa(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Ho{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const c=wa(40);for(let p=0;p<c.length;++p)s.length<20&&c[p]<t&&(s+=e.charAt(c[p]%e.length))}return s}}function Qn(r,e){return r<e?-1:r>e?1:0}function l1(r,e,t){return r.length===e.length&&r.every((s,c)=>t(s,e[c]))}function Qr(r){return r+"\0"}class Vr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new wt(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new wt(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new wt(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new wt(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vr.fromMillis(Date.now())}static fromDate(e){return Vr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Vr(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qn(this.nanoseconds,e.nanoseconds):Qn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ln{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ln(e)}static min(){return new Ln(new Vr(0,0))}static max(){return new Ln(new Vr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Fo{constructor(e,t,s){void 0===t?t=0:t>e.length&&an(),void 0===s?s=e.length-t:s>e.length-t&&an(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Fo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fo?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const p=e.get(c),y=t.get(c);if(p<y)return-1;if(p>y)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ar extends Fo{construct(e,t,s){return new ar(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new wt(Ye.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(c=>c.length>0))}return new ar(t)}static emptyPath(){return new ar([])}}const b2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ii extends Fo{construct(e,t,s){return new Ii(e,t,s)}static isValidIdentifier(e){return b2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ii.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ii(["__name__"])}static fromServerFormat(e){const t=[];let s="",c=0;const p=()=>{if(0===s.length)throw new wt(Ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let y=!1;for(;c<e.length;){const A=e[c];if("\\"===A){if(c+1===e.length)throw new wt(Ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const F=e[c+1];if("\\"!==F&&"."!==F&&"`"!==F)throw new wt(Ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=F,c+=2}else"`"===A?(y=!y,c++):"."!==A||y?(s+=A,c++):(p(),c++)}if(p(),y)throw new wt(Ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ii(t)}static emptyPath(){return new Ii([])}}class nn{constructor(e){this.path=e}static fromPath(e){return new nn(ar.fromString(e))}static fromName(e){return new nn(ar.fromString(e).popFirst(5))}static empty(){return new nn(ar.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ar.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ar.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nn(new ar(e.slice()))}}class h2{constructor(e,t,s,c){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=c}}function Xo(r){return r.fields.find(e=>2===e.kind)}function As(r){return r.fields.filter(e=>2!==e.kind)}h2.UNKNOWN_ID=-1;class Uo{constructor(e,t){this.fieldPath=e,this.kind=t}}class J1{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new J1(0,Ni.min())}}function b1(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,c=Ln.fromTimestamp(1e9===s?new Vr(t+1,0):new Vr(t,s));return new Ni(c,nn.empty(),e)}function vs(r){return new Ni(r.readTime,r.key,-1)}class Ni{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ni(Ln.min(),nn.empty(),-1)}static max(){return new Ni(Ln.max(),nn.empty(),-1)}}function co(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=nn.comparator(r.documentKey,e.documentKey),0!==t?t:Qn(r.largestBatchId,e.largestBatchId))}const lo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function M2(r){return S2.apply(this,arguments)}function S2(){return S2=(0,te.Z)(function*(r){if(r.code!==Ye.FAILED_PRECONDITION||r.message!==lo)throw r;Rt("LocalStore","Unexpectedly lost primary lease")}),S2.apply(this,arguments)}class Xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&an(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Xe((s,c)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(s,c)},this.catchCallback=p=>{this.wrapFailure(t,p).next(s,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Xe?t:Xe.resolve(t)}catch(t){return Xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Xe.reject(t)}static resolve(e){return new Xe((t,s)=>{t(e)})}static reject(e){return new Xe((t,s)=>{s(e)})}static waitFor(e){return new Xe((t,s)=>{let c=0,p=0,y=!1;e.forEach(A=>{++c,A.next(()=>{++p,y&&p===c&&t()},F=>s(F))}),y=!0,p===c&&t()})}static or(e){let t=Xe.resolve(!1);for(const s of e)t=t.next(c=>c?Xe.resolve(c):s());return t}static forEach(e,t){const s=[];return e.forEach((c,p)=>{s.push(t.call(this,c,p))}),this.waitFor(s)}static mapArray(e,t){return new Xe((s,c)=>{const p=e.length,y=new Array(p);let A=0;for(let F=0;F<p;F++){const Z=F;t(e[Z]).next(re=>{y[Z]=re,++A,A===p&&s(y)},re=>c(re))}})}static doWhile(e,t){return new Xe((s,c)=>{const p=()=>{!0===e()?t().next(()=>{p()},c):s()};p()})}}class n1{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new t1,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new ys(e,t.error)):this.P.resolve()},this.transaction.onerror=s=>{const c=xs(s.target.error);this.P.reject(new ys(e,c))}}static open(e,t,s,c){try{return new n1(t,e.transaction(c,s))}catch(p){throw new ys(t,p)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Rt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ea(t)}}class B1{constructor(e,t,s){this.name=e,this.version=t,this.S=s,12.2===B1.D((0,On.z$)())&&Ui("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Rt("SimpleDb","Removing database:",e),j1(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,On.hl)())return!1;if(B1.N())return!0;const e=(0,On.z$)(),t=B1.D(e),s=0<t&&t<10,c=B1.k(e),p=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||p)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static k(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}F(e){var t=this;return(0,te.Z)(function*(){return t.db||(Rt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,c)=>{const p=indexedDB.open(t.name,t.version);p.onsuccess=y=>{s(y.target.result)},p.onblocked=()=>{c(new ys(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=y=>{const A=y.target.error;c("VersionError"===A.name?new wt(Ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===A.name?new wt(Ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+A):new ys(e,A))},p.onupgradeneeded=y=>{Rt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',y.oldVersion),t.S.$(y.target.result,p.transaction,y.oldVersion,t.version).next(()=>{Rt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=s=>t.B(s)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,c){var p=this;return(0,te.Z)(function*(){const y="readonly"===t;let A=0;for(;;){++A;try{p.db=yield p.F(e);const F=n1.open(p.db,e,y?"readonly":"readwrite",s),Z=c(F).next(re=>(F.V(),re)).catch(re=>(F.abort(re),Xe.reject(re))).toPromise();return Z.catch(()=>{}),yield F.v,Z}catch(F){const Z=F,re="FirebaseError"!==Z.name&&A<3;if(Rt("SimpleDb","Transaction failed with error:",Z.message,"Retrying:",re),p.close(),!re)return Promise.reject(Z)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class p1{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return j1(this.q.delete())}}class ys extends wt{constructor(e,t){super(Ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function So(r){return"IndexedDbTransactionError"===r.name}class Ea{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Rt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Rt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),j1(s)}add(e){return Rt("SimpleDb","ADD",this.store.name,e,e),j1(this.store.add(e))}get(e){return j1(this.store.get(e)).next(t=>(void 0===t&&(t=null),Rt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Rt("SimpleDb","DELETE",this.store.name,e),j1(this.store.delete(e))}count(){return Rt("SimpleDb","COUNT",this.store.name),j1(this.store.count())}W(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const c=this.cursor(s),p=[];return this.H(c,(y,A)=>{p.push(A)}).next(()=>p)}{const c=this.store.getAll(s.range);return new Xe((p,y)=>{c.onerror=A=>{y(A.target.error)},c.onsuccess=A=>{p(A.target.result)}})}}J(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Xe((c,p)=>{s.onerror=y=>{p(y.target.error)},s.onsuccess=y=>{c(y.target.result)}})}Y(e,t){Rt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const c=this.cursor(s);return this.H(c,(p,y,A)=>A.delete())}Z(e,t){let s;t?s=e:(s={},t=e);const c=this.cursor(s);return this.H(c,t)}tt(e){const t=this.cursor({});return new Xe((s,c)=>{t.onerror=p=>{const y=xs(p.target.error);c(y)},t.onsuccess=p=>{const y=p.target.result;y?e(y.primaryKey,y.value).next(A=>{A?y.continue():s()}):s()}})}H(e,t){const s=[];return new Xe((c,p)=>{e.onerror=y=>{p(y.target.error)},e.onsuccess=y=>{const A=y.target.result;if(!A)return void c();const F=new p1(A),Z=t(A.primaryKey,A.value,F);if(Z instanceof Xe){const re=Z.catch(ye=>(F.done(),Xe.reject(ye)));s.push(re)}F.isDone?c():null===F.G?A.continue():A.continue(F.G)}}).next(()=>Xe.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function j1(r){return new Xe((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const c=xs(s.target.error);t(c)}})}let Bo=!1;function xs(r){const e=B1.D((0,On.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new wt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Bo||(Bo=!0,setTimeout(()=>{throw s},0)),s}}return r}class Qc{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Rt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,te.Z)(function*(){t.task=null;try{Rt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(s){So(s)?Rt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield M2(s)}yield t.nt(6e4)}))}}class I{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,te.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.it(s,e))})()}it(e,t){const s=new Set;let c=t,p=!0;return Xe.doWhile(()=>!0===p&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(y=>{if(null!==y&&!s.has(y))return Rt("IndexBackiller",`Processing collection: ${y}`),this.rt(e,y,c).next(A=>{c-=A,s.add(y)});p=!1})).next(()=>t-c)}rt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(c=>this.localStore.localDocuments.getNextDocuments(e,t,c,s).next(p=>{const y=p.changes;return this.localStore.indexManager.updateIndexEntries(e,y).next(()=>this.ot(c,p)).next(A=>(Rt("IndexBackiller",`Updating offset: ${A}`),this.localStore.indexManager.updateCollectionGroup(e,t,A))).next(()=>y.size)}))}ot(e,t){let s=e;return t.changes.forEach((c,p)=>{const y=vs(p);co(y,s)>0&&(s=y)}),new Ni(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let D=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=c=>this.ut(c),this.ct=c=>s.writeSequenceNumber(c))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return r.at=-1,r})();class C{constructor(e,t,s,c,p,y,A,F){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=p,this.forceLongPolling=y,this.autoDetectLongPolling=A,this.useFetchStreams=F}}class N{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new N("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof N&&e.projectId===this.projectId&&e.database===this.database}}function O(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function _(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function M(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function k(r){return null==r}function q(r){return 0===r&&1/r==-1/0}function he(r){return"number"==typeof r&&Number.isInteger(r)&&!q(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}class je{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new je(t)}static fromUint8Array(e){const t=function(s){let c="";for(let p=0;p<s.length;++p)c+=String.fromCharCode(s[p]);return c}(e);return new je(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}je.EMPTY_BYTE_STRING=new je("");const Qt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function on(r){if(fn(!!r),"string"==typeof r){let e=0;const t=Qt.exec(r);if(fn(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Bt(r.seconds),nanos:Bt(r.nanos)}}function Bt(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function kn(r){return"string"==typeof r?je.fromBase64String(r):je.fromUint8Array(r)}function Sn(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=r?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function $1(r){const e=r.mapValue.fields.__previous_value__;return Sn(e)?$1(e):e}function hi(r){const e=on(r.mapValue.fields.__local_write_time__.timestampValue);return new Vr(e.seconds,e.nanos)}const Ns={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},D2={nullValue:"NULL_VALUE"};function ho(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Sn(r)?4:Wa(r)?9007199254740991:10:an()}function m1(r,e){if(r===e)return!0;const t=ho(r);if(t!==ho(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return hi(r).isEqual(hi(e));case 3:return function(s,c){if("string"==typeof s.timestampValue&&"string"==typeof c.timestampValue&&s.timestampValue.length===c.timestampValue.length)return s.timestampValue===c.timestampValue;const p=on(s.timestampValue),y=on(c.timestampValue);return p.seconds===y.seconds&&p.nanos===y.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return c=e,kn(r.bytesValue).isEqual(kn(c.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,c){return Bt(s.geoPointValue.latitude)===Bt(c.geoPointValue.latitude)&&Bt(s.geoPointValue.longitude)===Bt(c.geoPointValue.longitude)}(r,e);case 2:return function(s,c){if("integerValue"in s&&"integerValue"in c)return Bt(s.integerValue)===Bt(c.integerValue);if("doubleValue"in s&&"doubleValue"in c){const p=Bt(s.doubleValue),y=Bt(c.doubleValue);return p===y?q(p)===q(y):isNaN(p)&&isNaN(y)}return!1}(r,e);case 9:return l1(r.arrayValue.values||[],e.arrayValue.values||[],m1);case 10:return function(s,c){const p=s.mapValue.fields||{},y=c.mapValue.fields||{};if(O(p)!==O(y))return!1;for(const A in p)if(p.hasOwnProperty(A)&&(void 0===y[A]||!m1(p[A],y[A])))return!1;return!0}(r,e);default:return an()}var c}function Ls(r,e){return void 0!==(r.values||[]).find(t=>m1(t,e))}function es(r,e){if(r===e)return 0;const t=ho(r),s=ho(e);if(t!==s)return Qn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qn(r.booleanValue,e.booleanValue);case 2:return function(c,p){const y=Bt(c.integerValue||c.doubleValue),A=Bt(p.integerValue||p.doubleValue);return y<A?-1:y>A?1:y===A?0:isNaN(y)?isNaN(A)?0:-1:1}(r,e);case 3:return Ba(r.timestampValue,e.timestampValue);case 4:return Ba(hi(r),hi(e));case 5:return Qn(r.stringValue,e.stringValue);case 6:return function(c,p){const y=kn(c),A=kn(p);return y.compareTo(A)}(r.bytesValue,e.bytesValue);case 7:return function(c,p){const y=c.split("/"),A=p.split("/");for(let F=0;F<y.length&&F<A.length;F++){const Z=Qn(y[F],A[F]);if(0!==Z)return Z}return Qn(y.length,A.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,p){const y=Qn(Bt(c.latitude),Bt(p.latitude));return 0!==y?y:Qn(Bt(c.longitude),Bt(p.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(c,p){const y=c.values||[],A=p.values||[];for(let F=0;F<y.length&&F<A.length;++F){const Z=es(y[F],A[F]);if(Z)return Z}return Qn(y.length,A.length)}(r.arrayValue,e.arrayValue);case 10:return function(c,p){if(c===Ns.mapValue&&p===Ns.mapValue)return 0;if(c===Ns.mapValue)return 1;if(p===Ns.mapValue)return-1;const y=c.fields||{},A=Object.keys(y),F=p.fields||{},Z=Object.keys(F);A.sort(),Z.sort();for(let re=0;re<A.length&&re<Z.length;++re){const ye=Qn(A[re],Z[re]);if(0!==ye)return ye;const Ze=es(y[A[re]],F[Z[re]]);if(0!==Ze)return Ze}return Qn(A.length,Z.length)}(r.mapValue,e.mapValue);default:throw an()}}function Ba(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return Qn(r,e);const t=on(r),s=on(e),c=Qn(t.seconds,s.seconds);return 0!==c?c:Qn(t.nanos,s.nanos)}function O2(r){return ea(r)}function ea(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const c=on(s);return`time(${c.seconds},${c.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?kn(r.bytesValue).toBase64():"referenceValue"in r?nn.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let c="[",p=!0;for(const y of s.values||[])p?p=!1:c+=",",c+=ea(y);return c+"]"}(r.arrayValue):"mapValue"in r?function(s){const c=Object.keys(s.fields||{}).sort();let p="{",y=!0;for(const A of c)y?y=!1:p+=",",p+=`${A}:${ea(s.fields[A])}`;return p+"}"}(r.mapValue):an();var e}function fo(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Ia(r){return!!r&&"integerValue"in r}function ja(r){return!!r&&"arrayValue"in r}function Xc(r){return!!r&&"nullValue"in r}function $a(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function d2(r){return!!r&&"mapValue"in r}function Ec(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return _(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Ec(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ec(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Wa(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ga(r){return"nullValue"in r?D2:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?fo(N.empty(),nn.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:an()}function M0(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?fo(N.empty(),nn.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Ns:an()}function g6(r,e){const t=es(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function v6(r,e){const t=es(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class T2{constructor(e,t){this.position=e,this.inclusive=t}}function Ic(r,e,t){let s=0;for(let c=0;c<r.position.length;c++){const p=e[c],y=r.position[c];if(s=p.field.isKeyField()?nn.comparator(nn.fromName(y.referenceValue),t.key):es(y,t.data.field(p.field)),"desc"===p.dir&&(s*=-1),0!==s)break}return s}function Za(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!m1(r.position[t],e.position[t]))return!1;return!0}class Jc{}class yr extends Jc{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new k4(e,t,s):"array-contains"===t?new Do(e,s):"in"===t?new qa(e,s):"not-in"===t?new mo(e,s):"array-contains-any"===t?new Ya(e,s):new yr(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new t4(e,s):new Sc(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(es(t,this.value)):null!==t&&ho(this.value)===ho(t)&&this.matchesComparison(es(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return an()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Sr extends Jc{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Sr(e,t)}matches(e){return Jo(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Jo(r){return"and"===r.op}function bc(r){return"or"===r.op}function po(r){return Mc(r)&&Jo(r)}function Mc(r){for(const e of r.filters)if(e instanceof Sr)return!1;return!0}function ta(r){if(r instanceof yr)return r.field.canonicalString()+r.op.toString()+O2(r.value);if(po(r))return r.filters.map(e=>ta(e)).join(",");{const e=r.filters.map(t=>ta(t)).join(",");return`${r.op}(${e})`}}function ba(r,e){return r instanceof yr?(t=r,(s=e)instanceof yr&&t.op===s.op&&t.field.isEqual(s.field)&&m1(t.value,s.value)):r instanceof Sr?function(t,s){return s instanceof Sr&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((c,p,y)=>c&&ba(p,s.filters[y]),!0)}(r,e):void an();var t,s}function e4(r,e){const t=r.filters.concat(e);return Sr.create(t,r.op)}function _s(r){return r instanceof yr?`${(e=r).field.canonicalString()} ${e.op} ${O2(e.value)}`:r instanceof Sr?function(e){return e.op.toString()+" {"+e.getFilters().map(_s).join(" ,")+"}"}(r):"Filter";var e}class k4 extends yr{constructor(e,t,s){super(e,t,s),this.key=nn.fromName(s.referenceValue)}matches(e){const t=nn.comparator(e.key,this.key);return this.matchesComparison(t)}}class t4 extends yr{constructor(e,t){super(e,"in",t),this.keys=Ka(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sc extends yr{constructor(e,t){super(e,"not-in",t),this.keys=Ka(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ka(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>nn.fromName(s.referenceValue))}class Do extends yr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ja(t)&&Ls(t.arrayValue,this.value)}}class qa extends yr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ls(this.value.arrayValue,t)}}class mo extends yr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ls(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ls(this.value.arrayValue,t)}}class Ya extends yr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ja(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Ls(this.value.arrayValue,s))}}class V2{constructor(e,t="asc"){this.field=e,this.dir=t}}function n4(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Rr{constructor(e,t){this.comparator=e,this.root=t||g1.EMPTY}insert(e,t){return new Rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,g1.BLACK,null,null))}remove(e){return new Rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,g1.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(0===c)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new A2(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new A2(this.root,e,this.comparator,!1)}getReverseIterator(){return new A2(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new A2(this.root,e,this.comparator,!0)}}class A2{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=t?s(e.key,t):1,t&&c&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class g1{constructor(e,t,s,c,p){this.key=e,this.value=t,this.color=s??g1.RED,this.left=c??g1.EMPTY,this.right=p??g1.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,p){return new g1(e??this.key,t??this.value,s??this.color,c??this.left,p??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const p=s(e,c.key);return c=p<0?c.copy(null,null,null,c.left.insert(e,t,s),null):0===p?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return g1.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===t(e,c.key)){if(c.right.isEmpty())return g1.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,g1.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,g1.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw an();const e=this.left.check();if(e!==this.right.check())throw an();return e+(this.isRed()?0:1)}}g1.EMPTY=null,g1.RED=!0,g1.BLACK=!1,g1.EMPTY=new class{constructor(){this.size=0}get key(){throw an()}get value(){throw an()}get color(){throw an()}get left(){throw an()}get right(){throw an()}copy(r,e,t,s,c){return this}insert(r,e,t){return new g1(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fi{constructor(e){this.comparator=e,this.data=new Rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dc(this.data.getIterator())}getIteratorFrom(e){return new Dc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof fi)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,p=s.getNext().key;if(0!==this.comparator(c,p))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fi(this.comparator);return t.data=e,t}}class Dc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function na(r){return r.hasNext()?r.getNext():void 0}class Qs{constructor(e){this.fields=e,e.sort(Ii.comparator)}static empty(){return new Qs([])}unionWith(e){let t=new fi(Ii.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Qs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return l1(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Li{constructor(e){this.value=e}static empty(){return new Li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!d2(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ec(t)}setAll(e){let t=Ii.emptyPath(),s={},c=[];e.forEach((y,A)=>{if(!t.isImmediateParentOf(A)){const F=this.getFieldsMap(t);this.applyChanges(F,s,c),s={},c=[],t=A.popLast()}y?s[A.lastSegment()]=Ec(y):c.push(A.lastSegment())});const p=this.getFieldsMap(t);this.applyChanges(p,s,c)}delete(e){const t=this.field(e.popLast());d2(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return m1(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];d2(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){_(t,(c,p)=>e[c]=p);for(const c of s)delete e[c]}clone(){return new Li(Ec(this.value))}}function O4(r){const e=[];return _(r.fields,(t,s)=>{const c=new Ii([t]);if(d2(s)){const p=O4(s.mapValue).fields;if(0===p.length)e.push(c);else for(const y of p)e.push(c.child(y))}else e.push(c)}),new Qs(e)}class bi{constructor(e,t,s,c,p,y,A){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.createTime=p,this.data=y,this.documentState=A}static newInvalidDocument(e){return new bi(e,0,Ln.min(),Ln.min(),Ln.min(),Li.empty(),0)}static newFoundDocument(e,t,s,c){return new bi(e,1,t,Ln.min(),s,c,0)}static newNoDocument(e,t){return new bi(e,2,t,Ln.min(),Ln.min(),Li.empty(),0)}static newUnknownDocument(e,t){return new bi(e,3,t,Ln.min(),Ln.min(),Li.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ln.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ln.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class r4{constructor(e,t=null,s=[],c=[],p=null,y=null,A=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=p,this.startAt=y,this.endAt=A,this.ft=null}}function i4(r,e=null,t=[],s=[],c=null,p=null,y=null){return new r4(r,e,t,s,c,p,y)}function e2(r){const e=Yt(r);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>ta(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(c=s).field.canonicalString()+c.dir;var c}).join(","),k(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>O2(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>O2(s)).join(",")),e.ft=t}return e.ft}function H2(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!n4(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!ba(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Za(r.startAt,e.startAt)&&Za(r.endAt,e.endAt)}function Tc(r){return nn.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function p2(r,e){return r.filters.filter(t=>t instanceof yr&&t.field.isEqual(e))}function V4(r,e,t){let s=D2,c=!0;for(const p of p2(r,e)){let y=D2,A=!0;switch(p.op){case"<":case"<=":y=Ga(p.value);break;case"==":case"in":case">=":y=p.value;break;case">":y=p.value,A=!1;break;case"!=":case"not-in":y=D2}g6({value:s,inclusive:c},{value:y,inclusive:A})<0&&(s=y,c=A)}if(null!==t)for(let p=0;p<r.orderBy.length;++p)if(r.orderBy[p].field.isEqual(e)){const y=t.position[p];g6({value:s,inclusive:c},{value:y,inclusive:t.inclusive})<0&&(s=y,c=t.inclusive);break}return{value:s,inclusive:c}}function Ac(r,e,t){let s=Ns,c=!0;for(const p of p2(r,e)){let y=Ns,A=!0;switch(p.op){case">=":case">":y=M0(p.value),A=!1;break;case"==":case"in":case"<=":y=p.value;break;case"<":y=p.value,A=!1;break;case"!=":case"not-in":y=Ns}v6({value:s,inclusive:c},{value:y,inclusive:A})>0&&(s=y,c=A)}if(null!==t)for(let p=0;p<r.orderBy.length;++p)if(r.orderBy[p].field.isEqual(e)){const y=t.position[p];v6({value:s,inclusive:c},{value:y,inclusive:t.inclusive})>0&&(s=y,c=t.inclusive);break}return{value:s,inclusive:c}}class go{constructor(e,t=null,s=[],c=[],p=null,y="F",A=null,F=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=p,this.limitType=y,this.startAt=A,this.endAt=F,this.dt=null,this._t=null}}function xc(r,e,t,s,c,p,y,A){return new go(r,e,t,s,c,p,y,A)}function jo(r){return new go(r)}function vo(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function Qa(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function ra(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function ia(r){return null!==r.collectionGroup}function t2(r){const e=Yt(r);if(null===e.dt){e.dt=[];const t=ra(e),s=Qa(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new V2(t)),e.dt.push(new V2(Ii.keyField(),"asc"));else{let c=!1;for(const p of e.explicitOrderBy)e.dt.push(p),p.field.isKeyField()&&(c=!0);if(!c){const p=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new V2(Ii.keyField(),p))}}}return e.dt}function k1(r){const e=Yt(r);if(!e._t)if("F"===e.limitType)e._t=i4(e.path,e.collectionGroup,t2(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const p of t2(e))t.push(new V2(p.field,"desc"===p.dir?"asc":"desc"));const s=e.endAt?new T2(e.endAt.position,e.endAt.inclusive):null,c=e.startAt?new T2(e.startAt.position,e.startAt.inclusive):null;e._t=i4(e.path,e.collectionGroup,t,e.filters,e.limit,s,c)}return e._t}function s4(r,e){e.getFirstInequalityField(),ra(r);const t=r.filters.concat([e]);return new go(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function sa(r,e,t){return new go(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function F2(r,e){return H2(k1(r),k1(e))&&r.limitType===e.limitType}function o4(r){return`${e2(k1(r))}|lt:${r.limitType}`}function Ma(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>_s(s)).join(", ")}]`),k(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(c=s).field.canonicalString()} (${c.dir})`;var c}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>O2(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>O2(s)).join(",")),`Target(${t})`}(k1(r))}; limitType=${r.limitType})`}function n2(r,e){return e.isFoundDocument()&&function(t,s){const c=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):nn.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(r,e)&&function(t,s){for(const c of t2(t))if(!c.field.isKeyField()&&null===s.data.field(c.field))return!1;return!0}(r,e)&&function(t,s){for(const c of t.filters)if(!c.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(c,p,y){const A=Ic(c,p,y);return c.inclusive?A<=0:A<0}(t.startAt,t2(t),s)||t.endAt&&!function(c,p,y){const A=Ic(c,p,y);return c.inclusive?A>=0:A>0}(t.endAt,t2(t),s)));var t,s}function Sa(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function a4(r){return(e,t)=>{let s=!1;for(const c of t2(r)){const p=c4(c,e,t);if(0!==p)return p;s=s||c.field.isKeyField()}return 0}}function c4(r,e,t){const s=r.field.isKeyField()?nn.comparator(e.key,t.key):function(c,p,y){const A=p.data.field(c),F=y.data.field(c);return null!==A&&null!==F?es(A,F):an()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return an()}}function Xa(r,e){if(r.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:q(e)?"-0":e}}function H4(r){return{integerValue:""+r}}function Nc(r,e){return he(e)?H4(e):Xa(r,e)}class Ja{constructor(){this._=void 0}}function U2(r,e,t){return r instanceof B2?function(s,c){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return c&&(p.fields.__previous_value__=c),{mapValue:p}}(t,e):r instanceof W1?j2(r,e):r instanceof yo?Da(r,e):function(s,c){const p=ec(s,c),y=r2(p)+r2(s.gt);return Ia(p)&&Ia(s.gt)?H4(y):Xa(s.yt,y)}(r,e)}function oa(r,e,t){return r instanceof W1?j2(r,e):r instanceof yo?Da(r,e):t}function ec(r,e){return r instanceof G1?Ia(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class B2 extends Ja{}class W1 extends Ja{constructor(e){super(),this.elements=e}}function j2(r,e){const t=aa(e);for(const s of r.elements)t.some(c=>m1(c,s))||t.push(s);return{arrayValue:{values:t}}}class yo extends Ja{constructor(e){super(),this.elements=e}}function Da(r,e){let t=aa(e);for(const s of r.elements)t=t.filter(c=>!m1(c,s));return{arrayValue:{values:t}}}class G1 extends Ja{constructor(e,t){super(),this.yt=e,this.gt=t}}function r2(r){return Bt(r.integerValue||r.doubleValue)}function aa(r){return ja(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class $2{constructor(e,t){this.field=e,this.transform=t}}class tc{constructor(e,t){this.version=e,this.transformResults=t}}class Zi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zi}static exists(e){return new Zi(void 0,e)}static updateTime(e){return new Zi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ts(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class $o{}function nc(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new x2(r.key,Zi.none()):new g2(r.key,r.data,Zi.none());{const t=r.data,s=Li.empty();let c=new fi(Ii.comparator);for(let p of e.fields)if(!c.has(p)){let y=t.field(p);null===y&&p.length>1&&(p=p.popLast(),y=t.field(p)),null===y?s.delete(p):s.set(p,y),c=c.add(p)}return new To(r.key,s,new Qs(c.toArray()),Zi.none())}}function rc(r,e,t){r instanceof g2?function(s,c,p){const y=s.value.clone(),A=ic(s.fieldTransforms,c,p.transformResults);y.setAll(A),c.convertToFoundDocument(p.version,y).setHasCommittedMutations()}(r,e,t):r instanceof To?function(s,c,p){if(!ts(s.precondition,c))return void c.convertToUnknownDocument(p.version);const y=ic(s.fieldTransforms,c,p.transformResults),A=c.data;A.setAll(Wo(s)),A.setAll(y),c.convertToFoundDocument(p.version,A).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ca(r,e,t,s){return r instanceof g2?function(c,p,y,A){if(!ts(c.precondition,p))return y;const F=c.value.clone(),Z=Aa(c.fieldTransforms,A,p);return F.setAll(Z),p.convertToFoundDocument(p.version,F).setHasLocalMutations(),null}(r,e,t,s):r instanceof To?function(c,p,y,A){if(!ts(c.precondition,p))return y;const F=Aa(c.fieldTransforms,A,p),Z=p.data;return Z.setAll(Wo(c)),Z.setAll(F),p.convertToFoundDocument(p.version,Z).setHasLocalMutations(),null===y?null:y.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(re=>re.field))}(r,e,t,s):(y=t,ts(r.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):y);var p,y}function Lc(r,e){let t=null;for(const s of r.fieldTransforms){const c=e.data.field(s.field),p=ec(s.transform,c||null);null!=p&&(null===t&&(t=Li.empty()),t.set(s.field,p))}return t||null}function Ta(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&l1(t,s,(c,p)=>function m2(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof W1&&s instanceof W1||t instanceof yo&&s instanceof yo?l1(t.elements,s.elements,m1):t instanceof G1&&s instanceof G1?m1(t.gt,s.gt):t instanceof B2&&s instanceof B2);var t,s}(c,p))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class g2 extends $o{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class To extends $o{constructor(e,t,s,c,p=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function Wo(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function ic(r,e,t){const s=new Map;fn(r.length===t.length);for(let c=0;c<t.length;c++){const p=r[c],y=p.transform,A=e.data.field(p.field);s.set(p.field,oa(y,A,t[c]))}return s}function Aa(r,e,t){const s=new Map;for(const c of r){const p=c.transform,y=t.data.field(c.field);s.set(c.field,U2(p,y,e))}return s}class x2 extends $o{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class N2 extends $o{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class l4{constructor(e){this.count=e}}var mr,Hr;function zc(r){switch(r){default:return an();case Ye.CANCELLED:case Ye.UNKNOWN:case Ye.DEADLINE_EXCEEDED:case Ye.RESOURCE_EXHAUSTED:case Ye.INTERNAL:case Ye.UNAVAILABLE:case Ye.UNAUTHENTICATED:return!1;case Ye.INVALID_ARGUMENT:case Ye.NOT_FOUND:case Ye.ALREADY_EXISTS:case Ye.PERMISSION_DENIED:case Ye.FAILED_PRECONDITION:case Ye.ABORTED:case Ye.OUT_OF_RANGE:case Ye.UNIMPLEMENTED:case Ye.DATA_LOSS:return!0}}function Rc(r){if(void 0===r)return Ui("GRPC error has no .code"),Ye.UNKNOWN;switch(r){case mr.OK:return Ye.OK;case mr.CANCELLED:return Ye.CANCELLED;case mr.UNKNOWN:return Ye.UNKNOWN;case mr.DEADLINE_EXCEEDED:return Ye.DEADLINE_EXCEEDED;case mr.RESOURCE_EXHAUSTED:return Ye.RESOURCE_EXHAUSTED;case mr.INTERNAL:return Ye.INTERNAL;case mr.UNAVAILABLE:return Ye.UNAVAILABLE;case mr.UNAUTHENTICATED:return Ye.UNAUTHENTICATED;case mr.INVALID_ARGUMENT:return Ye.INVALID_ARGUMENT;case mr.NOT_FOUND:return Ye.NOT_FOUND;case mr.ALREADY_EXISTS:return Ye.ALREADY_EXISTS;case mr.PERMISSION_DENIED:return Ye.PERMISSION_DENIED;case mr.FAILED_PRECONDITION:return Ye.FAILED_PRECONDITION;case mr.ABORTED:return Ye.ABORTED;case mr.OUT_OF_RANGE:return Ye.OUT_OF_RANGE;case mr.UNIMPLEMENTED:return Ye.UNIMPLEMENTED;case mr.DATA_LOSS:return Ye.DATA_LOSS;default:return an()}}(Hr=mr||(mr={}))[Hr.OK=0]="OK",Hr[Hr.CANCELLED=1]="CANCELLED",Hr[Hr.UNKNOWN=2]="UNKNOWN",Hr[Hr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hr[Hr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hr[Hr.NOT_FOUND=5]="NOT_FOUND",Hr[Hr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hr[Hr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hr[Hr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hr[Hr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hr[Hr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hr[Hr.ABORTED=10]="ABORTED",Hr[Hr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hr[Hr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hr[Hr.INTERNAL=13]="INTERNAL",Hr[Hr.UNAVAILABLE=14]="UNAVAILABLE",Hr[Hr.DATA_LOSS=15]="DATA_LOSS";class zs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[c,p]of s)if(this.equalsFn(c,e))return p}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(void 0===c)return this.inner[s]=[[e,t]],void this.innerSize++;for(let p=0;p<c.length;p++)if(this.equalsFn(c[p][0],e))return void(c[p]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return 1===s.length?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){_(this.inner,(t,s)=>{for(const[c,p]of s)e(c,p)})}isEmpty(){return M(this.inner)}size(){return this.innerSize}}const la=new Rr(nn.comparator);function ns(){return la}const sc=new Rr(nn.comparator);function xa(...r){let e=sc;for(const t of r)e=e.insert(t.key,t);return e}function oc(r){let e=sc;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function s2(){return ac()}function W2(){return ac()}function ac(){return new zs(r=>r.toString(),(r,e)=>r.isEqual(e))}const y6=new Rr(nn.comparator),w=new fi(nn.comparator);function d(...r){let e=w;for(const t of r)e=e.add(t);return e}const v=new fi(Qn);function T(){return v}class G{constructor(e,t,s,c,p){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const c=new Map;return c.set(e,J.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new G(Ln.min(),c,T(),ns(),d())}}class J{constructor(e,t,s,c,p){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new J(s,t,d(),d(),d())}}class Le{constructor(e,t,s,c){this.It=e,this.removedTargetIds=t,this.key=s,this.Tt=c}}class lt{constructor(e,t){this.targetId=e,this.Et=t}}class Wt{constructor(e,t,s=je.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class cn{constructor(){this.At=0,this.Rt=M1(),this.bt=je.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=d(),t=d(),s=d();return this.Rt.forEach((c,p)=>{switch(p){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:an()}}),new J(this.bt,this.Pt,e,t,s)}xt(){this.vt=!1,this.Rt=M1()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Kn{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=ns(),this.qt=zn(),this.Ut=new fi(Qn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const s=this.Wt(t);switch(e.state){case 0:this.zt(t)&&s.Dt(e.resumeToken);break;case 1:s.Mt(),s.Vt||s.xt(),s.Dt(e.resumeToken);break;case 2:s.Mt(),s.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(s.Ft(),s.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),s.Dt(e.resumeToken));break;default:an()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((s,c)=>{this.zt(c)&&t(c)})}Jt(e){const t=e.targetId,s=e.Et.count,c=this.Yt(t);if(c){const p=c.target;if(Tc(p))if(0===s){const y=new nn(p.path);this.Qt(t,y,bi.newNoDocument(y,Ln.min()))}else fn(1===s);else this.Xt(t)!==s&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((p,y)=>{const A=this.Yt(y);if(A){if(p.current&&Tc(A.target)){const F=new nn(A.target.path);null!==this.Lt.get(F)||this.te(y,F)||this.Qt(y,F,bi.newNoDocument(F,e))}p.St&&(t.set(y,p.Ct()),p.xt())}});let s=d();this.qt.forEach((p,y)=>{let A=!0;y.forEachWhile(F=>{const Z=this.Yt(F);return!Z||2===Z.purpose||(A=!1,!1)}),A&&(s=s.add(p))}),this.Lt.forEach((p,y)=>y.setReadTime(e));const c=new G(e,t,this.Ut,this.Lt,s);return this.Lt=ns(),this.qt=zn(),this.Ut=new fi(Qn),c}Gt(e,t){if(!this.zt(e))return;const s=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,s),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,s){if(!this.zt(e))return;const c=this.Wt(e);this.te(e,t)?c.Nt(t,1):c.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),s&&(this.Lt=this.Lt.insert(t,s))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new cn,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new fi(Qn),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Rt("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new cn),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function zn(){return new Rr(nn.comparator)}function M1(){return new Rr(nn.comparator)}const o2={asc:"ASCENDING",desc:"DESCENDING"},cc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F4={and:"AND",or:"OR"};class Na{constructor(e,t){this.databaseId=e,this.wt=t}}function Xs(r,e){return r.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ua(r,e){return r.wt?e.toBase64():e.toUint8Array()}function lc(r,e){return Xs(r,e.toTimestamp())}function u1(r){return fn(!!r),Ln.fromTimestamp(function(e){const t=on(e);return new Vr(t.seconds,t.nanos)}(r))}function uc(r,e){return(t=r,new ar(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function U4(r){const e=ar.fromString(r);return fn(M6(e)),e}function La(r,e){return uc(r.databaseId,e.path)}function L2(r,e){const t=U4(e);if(t.get(1)!==r.databaseId.projectId)throw new wt(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new wt(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new nn(Ol(t))}function ha(r,e){return uc(r.databaseId,e)}function Pc(r){const e=U4(r);return 4===e.length?ar.emptyPath():Ol(e)}function B4(r){return new ar(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Ol(r){return fn(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function _6(r,e,t){return{name:La(r,e),fields:t.value.mapValue.fields}}function S0(r,e,t){const s=L2(r,e.name),c=u1(e.updateTime),p=e.createTime?u1(e.createTime):Ln.min(),y=new Li({mapValue:{fields:e.fields}}),A=bi.newFoundDocument(s,c,p,y);return t&&A.setHasCommittedMutations(),t?A.setHasCommittedMutations():A}function j4(r,e){let t;if(e instanceof g2)t={update:_6(r,e.key,e.value)};else if(e instanceof x2)t={delete:La(r,e.key)};else if(e instanceof To)t={update:_6(r,e.key,e.data),updateMask:Ul(e.fieldMask)};else{if(!(e instanceof N2))return an();t={verify:La(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,p){const y=p.transform;if(y instanceof B2)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof W1)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof yo)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof G1)return{fieldPath:p.field.canonicalString(),increment:y.gt};throw an()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:lc(r,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:an()),t;var c}function C6(r,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?Zi.updateTime(u1(c.updateTime)):void 0!==c.exists?Zi.exists(c.exists):Zi.none():Zi.none(),s=e.updateTransforms?e.updateTransforms.map(c=>function(p,y){let A=null;"setToServerValue"in y?(fn("REQUEST_TIME"===y.setToServerValue),A=new B2):"appendMissingElements"in y?A=new W1(y.appendMissingElements.values||[]):"removeAllFromArray"in y?A=new yo(y.removeAllFromArray.values||[]):"increment"in y?A=new G1(p,y.increment):an();const F=Ii.fromServerFormat(y.fieldPath);return new $2(F,A)}(r,c)):[];var c;if(e.update){const c=L2(r,e.update.name),p=new Li({mapValue:{fields:e.update.fields}});if(e.updateMask){const y=new Qs((e.updateMask.fieldPaths||[]).map(Z=>Ii.fromServerFormat(Z)));return new To(c,p,y,t,s)}return new g2(c,p,t,s)}if(e.delete){const c=L2(r,e.delete);return new x2(c,t)}if(e.verify){const c=L2(r,e.verify);return new N2(c,t)}return an()}function w6(r,e){return{documents:[ha(r,e.path)]}}function u4(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=ha(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ha(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const c=function(F){if(0!==F.length)return kc(Sr.create(F,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const p=function(F){if(0!==F.length)return F.map(Z=>{return{field:O1((re=Z).field),direction:Fl(re.dir)};var re})}(e.orderBy);p&&(t.structuredQuery.orderBy=p);const y=(Z=e.limit,r.wt||k(Z)?Z:{value:Z});var Z,A,F;return null!==y&&(t.structuredQuery.limit=y),e.startAt&&(t.structuredQuery.startAt={before:(A=e.startAt).inclusive,values:A.position}),e.endAt&&(t.structuredQuery.endAt={before:!(F=e.endAt).inclusive,values:F.position}),t}function E6(r){let e=Pc(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){fn(1===s);const re=t.from[0];re.allDescendants?c=re.collectionId:e=e.child(re.collectionId)}let p=[];t.where&&(p=function(re){const ye=I6(re);return ye instanceof Sr&&po(ye)?ye.getFilters():[ye]}(t.where));let y=[];t.orderBy&&(y=t.orderBy.map(re=>{return new V2(Rs((ye=re).field),function(Ze){switch(Ze){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ye.direction));var ye}));let A=null;t.limit&&(A=function(re){let ye;return ye="object"==typeof re?re.value:re,k(ye)?null:ye}(t.limit));let F=null;var re;t.startAt&&(F=new T2((re=t.startAt).values||[],!!re.before));let Z=null;return t.endAt&&(Z=function(re){return new T2(re.values||[],!re.before)}(t.endAt)),xc(e,c,y,p,A,"F",F,Z)}function I6(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Rs(e.unaryFilter.field);return yr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Rs(e.unaryFilter.field);return yr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Rs(e.unaryFilter.field);return yr.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=Rs(e.unaryFilter.field);return yr.create(p,"!=",{nullValue:"NULL_VALUE"});default:return an()}}(r):void 0!==r.fieldFilter?yr.create(Rs((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return an()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return Sr.create(e.compositeFilter.filters.map(t=>I6(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return an()}}(e.compositeFilter.op))}(r):an();var e}function Fl(r){return o2[r]}function b6(r){return cc[r]}function fa(r){return F4[r]}function O1(r){return{fieldPath:r.canonicalString()}}function Rs(r){return Ii.fromServerFormat(r.fieldPath)}function kc(r){return r instanceof yr?function(e){if("=="===e.op){if($a(e.value))return{unaryFilter:{field:O1(e.field),op:"IS_NAN"}};if(Xc(e.value))return{unaryFilter:{field:O1(e.field),op:"IS_NULL"}}}else if("!="===e.op){if($a(e.value))return{unaryFilter:{field:O1(e.field),op:"IS_NOT_NAN"}};if(Xc(e.value))return{unaryFilter:{field:O1(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:O1(e.field),op:b6(e.op),value:e.value}}}(r):r instanceof Sr?function(e){const t=e.getFilters().map(s=>kc(s));return 1===t.length?t[0]:{compositeFilter:{op:fa(e.op),filters:t}}}(r):an()}function Ul(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function M6(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}function Go(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=a2(e)),e=Au(r.get(t),e);return a2(e)}function Au(r,e){let t=e;const s=r.length;for(let c=0;c<s;c++){const p=r.charAt(c);switch(p){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=p}}return t}function a2(r){return r+"\x01\x01"}function v2(r){const e=r.length;if(fn(e>=2),2===e)return fn("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),ar.emptyPath();const t=e-2,s=[];let c="";for(let p=0;p<e;){const y=r.indexOf("\x01",p);switch((y<0||y>t)&&an(),r.charAt(y+1)){case"\x01":const A=r.substring(p,y);let F;0===c.length?F=A:(c+=A,F=c,c=""),s.push(F);break;case"\x10":c+=r.substring(p,y),c+="\0";break;case"\x11":c+=r.substring(p,y+1);break;default:an()}p=y+2}return new ar(s)}const S6=["userId","batchId"];function h4(r,e){return[r,Go(e)]}function D6(r,e,t){return[r,Go(e),t]}const D0={},T0=["prefixPath","collectionGroup","readTime","documentId"],T6=["prefixPath","collectionGroup","documentId"],A6=["collectionGroup","readTime","prefixPath","documentId"],hc=["canonicalId","targetId"],xu=["targetId","path"],W4=["path","targetId"],Bl=["collectionId","parent"],x6=["indexId","uid"],N6=["uid","sequenceNumber"],L6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],za=["indexId","uid","orderedDocumentKey"],jl=["userId","collectionPath","documentId"],z6=["userId","collectionPath","largestBatchId"],G4=["userId","collectionGroup","largestBatchId"],R6=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],P6=[...R6,"documentOverlays"],f4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],da=f4,A0=[...da,"indexConfiguration","indexState","indexEntries"];class d4 extends uo{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Ps(r,e){const t=Yt(r);return B1.M(t.se,e)}class Z4{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const p=this.mutations[c];p.key.isEqual(e.key)&&rc(p,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ca(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ca(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=W2();return this.mutations.forEach(c=>{const p=e.get(c.key),y=p.overlayedDocument;let A=this.applyToLocalView(y,p.mutatedFields);A=t.has(c.key)?null:A;const F=nc(y,A);null!==F&&s.set(c.key,F),y.isValidDocument()||y.convertToNoDocument(Ln.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),d())}isEqual(e){return this.batchId===e.batchId&&l1(this.mutations,e.mutations,(t,s)=>Ta(t,s))&&l1(this.baseMutations,e.baseMutations,(t,s)=>Ta(t,s))}}class K4{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){fn(e.mutations.length===s.length);let c=y6;const p=e.mutations;for(let y=0;y<p.length;y++)c=c.insert(p[y].key,s[y].version);return new K4(e,t,s,c)}}class h{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class l{constructor(e,t,s,c,p=Ln.min(),y=Ln.min(),A=je.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=y,this.resumeToken=A}withSequenceNumber(e){return new l(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new l(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new l(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class u{constructor(e){this.ie=e}}function b(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:z(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:La(c=r.ie,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:Xs(c,p.version.toTimestamp()),createTime:Xs(c,p.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:V(e.version)};else{if(!e.isUnknownDocument())return an();s.unknownDocument={path:t.path.toArray(),version:V(e.version)}}var c,p;return s}function z(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function V(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Q(r){const e=new Vr(r.seconds,r.nanoseconds);return Ln.fromTimestamp(e)}function ce(r,e){const t=(e.baseMutations||[]).map(p=>C6(r.ie,p));for(let p=0;p<e.mutations.length-1;++p)p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(e.mutations[p].updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p);const s=e.mutations.map(p=>C6(r.ie,p)),c=Vr.fromMillis(e.localWriteTimeMs);return new Z4(e.batchId,c,t,s)}function ve(r){const e=Q(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?Q(r.lastLimboFreeSnapshotVersion):Ln.min();let s;var c;return void 0!==r.query.documents?(fn(1===(c=r.query).documents.length),s=k1(jo(Pc(c.documents[0])))):s=k1(E6(r.query)),new l(s,r.targetId,0,r.lastListenSequenceNumber,e,t,je.fromBase64String(r.resumeToken))}function rt(r,e){const t=V(e.snapshotVersion),s=V(e.lastLimboFreeSnapshotVersion);let c;c=Tc(e.target)?w6(r.ie,e.target):u4(r.ie,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:e2(e.target),readTime:t,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:c}}function ot(r){const e=E6({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?sa(e,e.limit,"L"):e}function Mt(r,e){return new h(e.largestBatchId,C6(r.ie,e.overlayMutation))}function dn(r,e){const t=e.path.lastSegment();return[r,Go(e.path.popLast()),t]}function xn(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:V(s.readTime),documentKey:Go(s.documentKey.path),largestBatchId:s.largestBatchId}}class oi{getBundleMetadata(e,t){return rs(e).get(t).next(s=>{if(s)return{id:(c=s).bundleId,createTime:Q(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return rs(e).put({bundleId:(s=t).id,createTime:V(u1(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return z2(e).get(t).next(s=>{if(s)return{name:(c=s).name,query:ot(c.bundledQuery),readTime:Q(c.readTime)};var c})}saveNamedQuery(e,t){return z2(e).put({name:(s=t).name,readTime:V(u1(s.readTime)),bundledQuery:s.bundledQuery});var s}}function rs(r){return Ps(r,"bundles")}function z2(r){return Ps(r,"namedQueries")}class y2{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new y2(e,t.uid||"")}getOverlay(e,t){return G2(e).get(dn(this.userId,t)).next(s=>s?Mt(this.yt,s):null)}getOverlays(e,t){const s=s2();return Xe.forEach(t,c=>this.getOverlay(e,c).next(p=>{null!==p&&s.set(c,p)})).next(()=>s)}saveOverlays(e,t,s){const c=[];return s.forEach((p,y)=>{const A=new h(t,y);c.push(this.oe(e,A))}),Xe.waitFor(c)}removeOverlaysForBatchId(e,t,s){const c=new Set;t.forEach(y=>c.add(Go(y.getCollectionPath())));const p=[];return c.forEach(y=>{const A=IDBKeyRange.bound([this.userId,y,s],[this.userId,y,s+1],!1,!0);p.push(G2(e).Y("collectionPathOverlayIndex",A))}),Xe.waitFor(p)}getOverlaysForCollection(e,t,s){const c=s2(),p=Go(t),y=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,Number.POSITIVE_INFINITY],!0);return G2(e).W("collectionPathOverlayIndex",y).next(A=>{for(const F of A){const Z=Mt(this.yt,F);c.set(Z.getKey(),Z)}return c})}getOverlaysForCollectionGroup(e,t,s,c){const p=s2();let y;const A=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return G2(e).Z({index:"collectionGroupOverlayIndex",range:A},(F,Z,re)=>{const ye=Mt(this.yt,Z);p.size()<c||ye.largestBatchId===y?(p.set(ye.getKey(),ye),y=ye.largestBatchId):re.done()}).next(()=>p)}oe(e,t){return G2(e).put(function(s,c,p){const[y,A,F]=dn(c,p.mutation.key);return{userId:c,collectionPath:A,documentId:F,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:j4(s.ie,p.mutation)}}(this.yt,this.userId,t))}}function G2(r){return Ps(r,"documentOverlays")}class Ra{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Bt(e.integerValue));else if("doubleValue"in e){const s=Bt(e.doubleValue);isNaN(s)?this.he(t,13):(this.he(t,15),q(s)?t.le(0):t.le(s))}else if("timestampValue"in e){const s=e.timestampValue;this.he(t,20),"string"==typeof s?t.fe(s):(t.fe(`${s.seconds||""}`),t.le(s.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(kn(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.he(t,45),t.le(s.latitude||0),t.le(s.longitude||0)}else"mapValue"in e?Wa(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):an()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const s=e.fields||{};this.he(t,55);for(const c of Object.keys(s))this.de(c,t),this.ce(s[c],t)}ye(e,t){const s=e.values||[];this.he(t,50);for(const c of s)this.ce(c,t)}me(e,t){this.he(t,37),nn.fromName(e).path.forEach(s=>{this.he(t,60),this.pe(s,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function Nu(r){if(0===r)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function x0(r){const e=64-function(t){let s=0;for(let c=0;c<8;++c){const p=Nu(255&t[c]);if(s+=p,8!==p)break}return s}(r);return Math.ceil(e/8)}Ra.Ie=new Ra;class $l{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ee(s.value),s=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.be(s.value),s=t.next();this.Pe()}ve(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ee(s);else if(s<2048)this.Ee(960|s>>>6),this.Ee(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|s>>>12),this.Ee(128|63&s>>>6),this.Ee(128|63&s);else{const c=t.codePointAt(0);this.Ee(240|c>>>18),this.Ee(128|63&c>>>12),this.Ee(128|63&c>>>6),this.Ee(128|63&c)}}this.Ae()}Ve(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.be(s);else if(s<2048)this.be(960|s>>>6),this.be(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.be(480|s>>>12),this.be(128|63&s>>>6),this.be(128|63&s);else{const c=t.codePointAt(0);this.be(240|c>>>18),this.be(128|63&c>>>12),this.be(128|63&c>>>6),this.be(128|63&c)}}this.Pe()}Se(e){const t=this.De(e),s=x0(t);this.Ce(1+s),this.buffer[this.position++]=255&s;for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=255&t[c]}xe(e){const t=this.De(e),s=x0(t);this.Ce(1+s),this.buffer[this.position++]=~(255&s);for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=~(255&t[c])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(c){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,c,!1),new Uint8Array(p.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let c=1;c<t.length;++c)t[c]^=s?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const c=new Uint8Array(s);c.set(this.buffer),this.buffer=c}}class K8{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class Wl{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class fc{constructor(){this.$e=new $l,this.Be=new K8(this.$e),this.Le=new Wl(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class p4{constructor(e,t,s,c){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=c}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new p4(this.indexId,this.documentKey,this.arrayValue,s)}}function Oc(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=Lu(r.arrayValue,e.arrayValue),0!==t?t:(t=Lu(r.directionalValue,e.directionalValue),0!==t?t:nn.comparator(r.documentKey,e.documentKey)))}function Lu(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class q8{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const s=t;s.isInequality()?this.Qe=s:this.Ge.push(s)}}je(e){fn(e.collectionGroup===this.collectionId);const t=Xo(e);if(void 0!==t&&!this.We(t))return!1;const s=As(e);let c=0,p=0;for(;c<s.length&&this.We(s[c]);++c);if(c===s.length)return!0;if(void 0!==this.Qe){const y=s[c];if(!this.ze(this.Qe,y)||!this.He(this.Ke[p++],y))return!1;++c}for(;c<s.length;++c)if(p>=this.Ke.length||!this.He(this.Ke[p++],s[c]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Gl(r){var e,t;if(fn(r instanceof yr||r instanceof Sr),r instanceof yr){if(r instanceof qa){const c=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(p=>yr.create(r.field,"==",p)))||[];return Sr.create(c,"or")}return r}const s=r.filters.map(c=>Gl(c));return Sr.create(s,r.op)}function zu(r){if(0===r.getFilters().length)return[];const e=Kl(Gl(r));return fn(Pa(e)),Zl(e)||Vc(e)?[e]:e.getFilters()}function Zl(r){return r instanceof yr}function Vc(r){return r instanceof Sr&&po(r)}function Pa(r){return Zl(r)||Vc(r)||function(e){if(e instanceof Sr&&bc(e)){for(const t of e.getFilters())if(!Zl(t)&&!Vc(t))return!1;return!0}return!1}(r)}function Kl(r){if(fn(r instanceof yr||r instanceof Sr),r instanceof yr)return r;if(1===r.filters.length)return Kl(r.filters[0]);const e=r.filters.map(s=>Kl(s));let t=Sr.create(e,r.op);return t=Yl(t),Pa(t)?t:(fn(t instanceof Sr),fn(Jo(t)),fn(t.filters.length>1),t.filters.reduce((s,c)=>ql(s,c)))}function ql(r,e){let t;return fn(r instanceof yr||r instanceof Sr),fn(e instanceof yr||e instanceof Sr),t=r instanceof yr?e instanceof yr?Sr.create([r,e],"and"):Y8(r,e):e instanceof yr?Y8(e,r):function(s,c){if(fn(s.filters.length>0&&c.filters.length>0),Jo(s)&&Jo(c))return e4(s,c.getFilters());const p=bc(s)?s:c,y=bc(s)?c:s,A=p.filters.map(F=>ql(F,y));return Sr.create(A,"or")}(r,e),Yl(t)}function Y8(r,e){if(Jo(e))return e4(e,r.getFilters());{const t=e.filters.map(s=>ql(r,s));return Sr.create(t,"or")}}function Yl(r){if(fn(r instanceof yr||r instanceof Sr),r instanceof yr)return r;const e=r.getFilters();if(1===e.length)return Yl(e[0]);if(Mc(r))return r;const t=e.map(c=>Yl(c)),s=[];return t.forEach(c=>{c instanceof yr?s.push(c):c instanceof Sr&&(c.op===r.op?s.push(...c.filters):s.push(c))}),1===s.length?s[0]:Sr.create(s,r.op)}class Ru{constructor(){this.Je=new Pu}addToCollectionParentIndex(e,t){return this.Je.add(t),Xe.resolve()}getCollectionParents(e,t){return Xe.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return Xe.resolve()}deleteFieldIndex(e,t){return Xe.resolve()}getDocumentsMatchingTarget(e,t){return Xe.resolve(null)}getIndexType(e,t){return Xe.resolve(0)}getFieldIndexes(e,t){return Xe.resolve([])}getNextCollectionGroupToUpdate(e){return Xe.resolve(null)}getMinOffset(e,t){return Xe.resolve(Ni.min())}getMinOffsetFromCollectionGroup(e,t){return Xe.resolve(Ni.min())}updateCollectionGroup(e,t,s){return Xe.resolve()}updateIndexEntries(e,t){return Xe.resolve()}}class Pu{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new fi(ar.comparator),p=!c.has(s);return this.index[t]=c.add(s),p}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new fi(ar.comparator)).toArray()}}const k6=new Uint8Array(0);class ku{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new Pu,this.Xe=new zs(s=>e2(s),(s,c)=>H2(s,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const s=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const p={collectionId:s,parent:Go(c)};return Ou(e).put(p)}return Xe.resolve()}getCollectionParents(e,t){const s=[],c=IDBKeyRange.bound([t,""],[Qr(t),""],!1,!0);return Ou(e).W(c).next(p=>{for(const y of p){if(y.collectionId!==t)break;s.push(v2(y.parent))}return s})}addFieldIndex(e,t){const s=N0(e),c={indexId:(y=t).indexId,collectionGroup:y.collectionGroup,fields:y.fields.map(A=>[A.fieldPath.canonicalString(),A.kind])};var y;delete c.indexId;const p=s.add(c);if(t.indexState){const y=O6(e);return p.next(A=>{y.put(xn(A,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return p.next()}deleteFieldIndex(e,t){const s=N0(e),c=O6(e),p=q4(e);return s.delete(t.indexId).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=q4(e);let c=!0;const p=new Map;return Xe.forEach(this.Ze(t),y=>this.tn(e,y).next(A=>{c&&(c=!!A),p.set(y,A)})).next(()=>{if(c){let y=d();const A=[];return Xe.forEach(p,(F,Z)=>{var re;Rt("IndexedDbIndexManager",`Using index ${re=F,`id=${re.indexId}|cg=${re.collectionGroup}|f=${re.fields.map(Mi=>`${Mi.fieldPath}:${Mi.kind}`).join(",")}`} to execute ${e2(t)}`);const ye=function(Mi,ks){const zi=Xo(ks);if(void 0===zi)return null;for(const Bi of p2(Mi,zi.fieldPath))switch(Bi.op){case"array-contains-any":return Bi.value.arrayValue.values||[];case"array-contains":return[Bi.value]}return null}(Z,F),Ze=function(Mi,ks){const zi=new Map;for(const Bi of As(ks))for(const xo of p2(Mi,Bi.fieldPath))switch(xo.op){case"==":case"in":zi.set(Bi.fieldPath.canonicalString(),xo.value);break;case"not-in":case"!=":return zi.set(Bi.fieldPath.canonicalString(),xo.value),Array.from(zi.values())}return null}(Z,F),At=function(Mi,ks){const zi=[];let Bi=!0;for(const xo of As(ks)){const Du=0===xo.kind?V4(Mi,xo.fieldPath,Mi.startAt):Ac(Mi,xo.fieldPath,Mi.startAt);zi.push(Du.value),Bi&&(Bi=Du.inclusive)}return new T2(zi,Bi)}(Z,F),Vt=function(Mi,ks){const zi=[];let Bi=!0;for(const xo of As(ks)){const Du=0===xo.kind?Ac(Mi,xo.fieldPath,Mi.endAt):V4(Mi,xo.fieldPath,Mi.endAt);zi.push(Du.value),Bi&&(Bi=Du.inclusive)}return new T2(zi,Bi)}(Z,F),Cn=this.en(F,Z,At),Wn=this.en(F,Z,Vt),v1=this.nn(F,Z,Ze),is=this.sn(F.indexId,ye,Cn,At.inclusive,Wn,Vt.inclusive,v1);return Xe.forEach(is,Mi=>s.J(Mi,t.limit).next(ks=>{ks.forEach(zi=>{const Bi=nn.fromSegments(zi.documentKey);y.has(Bi)||(y=y.add(Bi),A.push(Bi))})}))}).next(()=>A)}return Xe.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:zu(Sr.create(e.filters,"and")).map(s=>i4(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,s,c,p,y,A){const F=(null!=t?t.length:1)*Math.max(s.length,p.length),Z=F/(null!=t?t.length:1),re=[];for(let ye=0;ye<F;++ye){const Ze=t?this.rn(t[ye/Z]):k6,At=this.on(e,Ze,s[ye%Z],c),Vt=this.un(e,Ze,p[ye%Z],y),Cn=A.map(Wn=>this.on(e,Ze,Wn,!0));re.push(...this.createRange(At,Vt,Cn))}return re}on(e,t,s,c){const p=new p4(e,nn.empty(),t,s);return c?p:p.Ue()}un(e,t,s,c){const p=new p4(e,nn.empty(),t,s);return c?p.Ue():p}tn(e,t){const s=new q8(t),c=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,c).next(p=>{let y=null;for(const A of p)s.je(A)&&(!y||A.fields.length>y.fields.length)&&(y=A);return y})}getIndexType(e,t){let s=2;const c=this.Ze(t);return Xe.forEach(c,p=>this.tn(e,p).next(y=>{y?0!==s&&y.fields.length<function(A){let F=new fi(Ii.comparator),Z=!1;for(const re of A.filters)for(const ye of re.getFlattenedFilters())ye.field.isKeyField()||("array-contains"===ye.op||"array-contains-any"===ye.op?Z=!0:F=F.add(ye.field));for(const re of A.orderBy)re.field.isKeyField()||(F=F.add(re.field));return F.size+(Z?1:0)}(p)&&(s=1):s=0})).next(()=>null!==t.limit&&c.length>1&&2===s?1:s)}cn(e,t){const s=new fc;for(const c of As(e)){const p=t.data.field(c.fieldPath);if(null==p)return null;const y=s.qe(c.kind);Ra.Ie.ue(p,y)}return s.Fe()}rn(e){const t=new fc;return Ra.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const s=new fc;return Ra.Ie.ue(fo(this.databaseId,t),s.qe(function(c){const p=As(c);return 0===p.length?0:p[p.length-1].kind}(e))),s.Fe()}nn(e,t,s){if(null===s)return[];let c=[];c.push(new fc);let p=0;for(const y of As(e)){const A=s[p++];for(const F of c)if(this.hn(t,y.fieldPath)&&ja(A))c=this.ln(c,y,A);else{const Z=F.qe(y.kind);Ra.Ie.ue(A,Z)}}return this.fn(c)}en(e,t,s){return this.nn(e,t,s.position)}fn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Fe();return t}ln(e,t,s){const c=[...e],p=[];for(const y of s.arrayValue.values||[])for(const A of c){const F=new fc;F.seed(A.Fe()),Ra.Ie.ue(y,F.qe(t.kind)),p.push(F)}return p}hn(e,t){return!!e.filters.find(s=>s instanceof yr&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=N0(e),c=O6(e);return(t?s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.W()).next(p=>{const y=[];return Xe.forEach(p,A=>c.get([A.indexId,this.uid]).next(F=>{y.push(function(Z,re){const ye=re?new J1(re.sequenceNumber,new Ni(Q(re.readTime),new nn(v2(re.documentKey)),re.largestBatchId)):J1.empty(),Ze=Z.fields.map(([At,Vt])=>new Uo(Ii.fromServerFormat(At),Vt));return new h2(Z.indexId,Z.collectionGroup,Ze,ye)}(A,F))})).next(()=>y)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,c)=>{const p=s.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==p?p:Qn(s.collectionGroup,c.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const c=N0(e),p=O6(e);return this.dn(e).next(y=>c.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(A=>Xe.forEach(A,F=>p.put(xn(F.indexId,this.user,y,s)))))}updateIndexEntries(e,t){const s=new Map;return Xe.forEach(t,(c,p)=>{const y=s.get(c.collectionGroup);return(y?Xe.resolve(y):this.getFieldIndexes(e,c.collectionGroup)).next(A=>(s.set(c.collectionGroup,A),Xe.forEach(A,F=>this._n(e,c,F).next(Z=>{const re=this.wn(p,F);return Z.isEqual(re)?Xe.resolve():this.mn(e,p,F,Z,re)}))))})}gn(e,t,s,c){return q4(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.an(s,t.key),documentKey:t.key.path.toArray()})}yn(e,t,s,c){return q4(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.an(s,t.key),t.key.path.toArray()])}_n(e,t,s){const c=q4(e);let p=new fi(Oc);return c.Z({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.an(s,t)])},(y,A)=>{p=p.add(new p4(s.indexId,t,A.arrayValue,A.directionalValue))}).next(()=>p)}wn(e,t){let s=new fi(Oc);const c=this.cn(t,e);if(null==c)return s;const p=Xo(t);if(null!=p){const y=e.data.field(p.fieldPath);if(ja(y))for(const A of y.arrayValue.values||[])s=s.add(new p4(t.indexId,e.key,this.rn(A),c))}else s=s.add(new p4(t.indexId,e.key,k6,c));return s}mn(e,t,s,c,p){Rt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const y=[];return function(A,F,Z,re,ye){const Ze=A.getIterator(),At=F.getIterator();let Vt=na(Ze),Cn=na(At);for(;Vt||Cn;){let Wn=!1,v1=!1;if(Vt&&Cn){const is=Z(Vt,Cn);is<0?v1=!0:is>0&&(Wn=!0)}else null!=Vt?v1=!0:Wn=!0;Wn?(re(Cn),Cn=na(At)):v1?(ye(Vt),Vt=na(Ze)):(Vt=na(Ze),Cn=na(At))}}(c,p,Oc,A=>{y.push(this.gn(e,t,s,A))},A=>{y.push(this.yn(e,t,s,A))}),Xe.waitFor(y)}dn(e){let t=1;return O6(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,c,p)=>{p.done(),t=c.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((y,A)=>Oc(y,A)).filter((y,A,F)=>!A||0!==Oc(y,F[A-1]));const c=[];c.push(e);for(const y of s){const A=Oc(y,e),F=Oc(y,t);if(0===A)c[0]=e.Ue();else if(A>0&&F<0)c.push(y),c.push(y.Ue());else if(F>0)break}c.push(t);const p=[];for(let y=0;y<c.length;y+=2){if(this.pn(c[y],c[y+1]))return[];p.push(IDBKeyRange.bound([c[y].indexId,this.uid,c[y].arrayValue,c[y].directionalValue,k6,[]],[c[y+1].indexId,this.uid,c[y+1].arrayValue,c[y+1].directionalValue,k6,[]]))}return p}pn(e,t){return Oc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Z2)}getMinOffset(e,t){return Xe.mapArray(this.Ze(t),s=>this.tn(e,s).next(c=>c||an())).next(Z2)}}function Ou(r){return Ps(r,"collectionParents")}function q4(r){return Ps(r,"indexEntries")}function N0(r){return Ps(r,"indexConfiguration")}function O6(r){return Ps(r,"indexState")}function Z2(r){fn(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const c=r[s].indexState.offset;co(c,e)<0&&(e=c),t<c.largestBatchId&&(t=c.largestBatchId)}return new Ni(e.readTime,e.documentKey,t)}const Vu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class c2{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new c2(e,c2.DEFAULT_COLLECTION_PERCENTILE,c2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Hu(r,e,t){const s=r.store("mutations"),c=r.store("documentMutations"),p=[],y=IDBKeyRange.only(t.batchId);let A=0;const F=s.Z({range:y},(re,ye,Ze)=>(A++,Ze.delete()));p.push(F.next(()=>{fn(1===A)}));const Z=[];for(const re of t.mutations){const ye=D6(e,re.key.path,t.batchId);p.push(c.delete(ye)),Z.push(re.key)}return Xe.waitFor(p).next(()=>Z)}function L0(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw an();e=r.noDocument}return JSON.stringify(e).length}c2.DEFAULT_COLLECTION_PERCENTILE=10,c2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,c2.DEFAULT=new c2(41943040,c2.DEFAULT_COLLECTION_PERCENTILE,c2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),c2.DISABLED=new c2(-1,0,0);class z0{constructor(e,t,s,c){this.userId=e,this.yt=t,this.indexManager=s,this.referenceDelegate=c,this.In={}}static re(e,t,s,c){fn(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new z0(p,t,s,c)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dc(e).Z({index:"userMutationsIndex",range:s},(c,p,y)=>{t=!1,y.done()}).next(()=>t)}addMutationBatch(e,t,s,c){const p=Y4(e),y=dc(e);return y.add({}).next(A=>{fn("number"==typeof A);const F=new Z4(A,t,s,c),Z=function(Ze,At,Vt){const Cn=Vt.baseMutations.map(v1=>j4(Ze.ie,v1)),Wn=Vt.mutations.map(v1=>j4(Ze.ie,v1));return{userId:At,batchId:Vt.batchId,localWriteTimeMs:Vt.localWriteTime.toMillis(),baseMutations:Cn,mutations:Wn}}(this.yt,this.userId,F),re=[];let ye=new fi((Ze,At)=>Qn(Ze.canonicalString(),At.canonicalString()));for(const Ze of c){const At=D6(this.userId,Ze.key.path,A);ye=ye.add(Ze.key.path.popLast()),re.push(y.put(Z)),re.push(p.put(At,D0))}return ye.forEach(Ze=>{re.push(this.indexManager.addToCollectionParentIndex(e,Ze))}),e.addOnCommittedListener(()=>{this.In[A]=F.keys()}),Xe.waitFor(re).next(()=>F)})}lookupMutationBatch(e,t){return dc(e).get(t).next(s=>s?(fn(s.userId===this.userId),ce(this.yt,s)):null)}Tn(e,t){return this.In[t]?Xe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const c=s.keys();return this.In[t]=c,c}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=IDBKeyRange.lowerBound([this.userId,s]);let p=null;return dc(e).Z({index:"userMutationsIndex",range:c},(y,A,F)=>{A.userId===this.userId&&(fn(A.batchId>=s),p=ce(this.yt,A)),F.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return dc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(c,p,y)=>{s=p.batchId,y.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dc(e).W("userMutationsIndex",t).next(s=>s.map(c=>ce(this.yt,c)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=h4(this.userId,t.path),c=IDBKeyRange.lowerBound(s),p=[];return Y4(e).Z({range:c},(y,A,F)=>{const[Z,re,ye]=y,Ze=v2(re);if(Z===this.userId&&t.path.isEqual(Ze))return dc(e).get(ye).next(At=>{if(!At)throw an();fn(At.userId===this.userId),p.push(ce(this.yt,At))});F.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new fi(Qn);const c=[];return t.forEach(p=>{const y=h4(this.userId,p.path),A=IDBKeyRange.lowerBound(y),F=Y4(e).Z({range:A},(Z,re,ye)=>{const[Ze,At,Vt]=Z,Cn=v2(At);Ze===this.userId&&p.path.isEqual(Cn)?s=s.add(Vt):ye.done()});c.push(F)}),Xe.waitFor(c).next(()=>this.En(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1,p=h4(this.userId,s),y=IDBKeyRange.lowerBound(p);let A=new fi(Qn);return Y4(e).Z({range:y},(F,Z,re)=>{const[ye,Ze,At]=F,Vt=v2(Ze);ye===this.userId&&s.isPrefixOf(Vt)?Vt.length===c&&(A=A.add(At)):re.done()}).next(()=>this.En(e,A))}En(e,t){const s=[],c=[];return t.forEach(p=>{c.push(dc(e).get(p).next(y=>{if(null===y)throw an();fn(y.userId===this.userId),s.push(ce(this.yt,y))}))}),Xe.waitFor(c).next(()=>s)}removeMutationBatch(e,t){return Hu(e.se,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Xe.forEach(s,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Xe.resolve();const s=IDBKeyRange.lowerBound([this.userId]),c=[];return Y4(e).Z({range:s},(p,y,A)=>{if(p[0]===this.userId){const F=v2(p[1]);c.push(F)}else A.done()}).next(()=>{fn(0===c.length)})})}containsKey(e,t){return Ql(e,this.userId,t)}Rn(e){return Fu(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ql(r,e,t){const s=h4(e,t.path),c=s[1],p=IDBKeyRange.lowerBound(s);let y=!1;return Y4(r).Z({range:p,X:!0},(A,F,Z)=>{const[re,ye,Ze]=A;re===e&&ye===c&&(y=!0),Z.done()}).next(()=>y)}function dc(r){return Ps(r,"mutations")}function Y4(r){return Ps(r,"documentMutations")}function Fu(r){return Ps(r,"mutationQueues")}class m4{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new m4(0)}static vn(){return new m4(-1)}}class Ir{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const s=new m4(t.highestTargetId);return t.highestTargetId=s.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ln.fromTimestamp(new Vr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Vn(e).next(c=>(c.highestListenSequenceNumber=t,s&&(c.lastRemoteSnapshotVersion=s.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),this.Sn(e,c)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(s=>(s.targetCount+=1,this.Cn(t,s),this.Sn(e,s))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>g4(e).delete(t.targetId)).next(()=>this.Vn(e)).next(s=>(fn(s.targetCount>0),s.targetCount-=1,this.Sn(e,s)))}removeTargets(e,t,s){let c=0;const p=[];return g4(e).Z((y,A)=>{const F=ve(A);F.sequenceNumber<=t&&null===s.get(F.targetId)&&(c++,p.push(this.removeTargetData(e,F)))}).next(()=>Xe.waitFor(p)).next(()=>c)}forEachTarget(e,t){return g4(e).Z((s,c)=>{const p=ve(c);t(p)})}Vn(e){return Xl(e).get("targetGlobalKey").next(t=>(fn(null!==t),t))}Sn(e,t){return Xl(e).put("targetGlobalKey",t)}Dn(e,t){return g4(e).put(rt(this.yt,t))}Cn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=e2(t),c=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let p=null;return g4(e).Z({range:c,index:"queryTargetsIndex"},(y,A,F)=>{const Z=ve(A);H2(t,Z.target)&&(p=Z,F.done())}).next(()=>p)}addMatchingKeys(e,t,s){const c=[],p=pc(e);return t.forEach(y=>{const A=Go(y.path);c.push(p.put({targetId:s,path:A})),c.push(this.referenceDelegate.addReference(e,s,y))}),Xe.waitFor(c)}removeMatchingKeys(e,t,s){const c=pc(e);return Xe.forEach(t,p=>{const y=Go(p.path);return Xe.waitFor([c.delete([s,y]),this.referenceDelegate.removeReference(e,s,p)])})}removeMatchingKeysForTargetId(e,t){const s=pc(e),c=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(c)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),c=pc(e);let p=d();return c.Z({range:s,X:!0},(y,A,F)=>{const Z=v2(y[1]),re=new nn(Z);p=p.add(re)}).next(()=>p)}containsKey(e,t){const s=Go(t.path),c=IDBKeyRange.bound([s],[Qr(s)],!1,!0);let p=0;return pc(e).Z({index:"documentTargetsIndex",X:!0,range:c},([y,A],F,Z)=>{0!==y&&(p++,Z.done())}).next(()=>p>0)}ne(e,t){return g4(e).get(t).next(s=>s?ve(s):null)}}function g4(r){return Ps(r,"targets")}function Xl(r){return Ps(r,"targetGlobal")}function pc(r){return Ps(r,"targetDocuments")}function Uu([r,e],[t,s]){const c=Qn(r,t);return 0===c?Qn(e,s):c}class Q8{constructor(e){this.xn=e,this.buffer=new fi(Uu),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Uu(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Bu{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Rt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,te.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){So(s)?Rt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield M2(s)}yield t.Fn(3e5)}))}}class X8{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Xe.resolve(D.at);const s=new Q8(t);return this.$n.forEachTarget(e,c=>s.On(c.sequenceNumber)).next(()=>this.$n.Ln(e,c=>s.On(c))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.$n.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Rt("LruGarbageCollector","Garbage collection skipped; disabled"),Xe.resolve(Vu)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vu):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let s,c,p,y,A,F,Z;const re=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ye=>(ye>this.params.maximumSequenceNumbersToCollect?(Rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ye}`),c=this.params.maximumSequenceNumbersToCollect):c=ye,y=Date.now(),this.nthSequenceNumber(e,c))).next(ye=>(s=ye,A=Date.now(),this.removeTargets(e,s,t))).next(ye=>(p=ye,F=Date.now(),this.removeOrphanedDocuments(e,s))).next(ye=>(Z=Date.now(),u2()<=br.in.DEBUG&&Rt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${y-re}ms\n\tDetermined least recently used ${c} in `+(A-y)+`ms\n\tRemoved ${p} targets in `+(F-A)+`ms\n\tRemoved ${ye} documents in `+(Z-F)+`ms\nTotal Duration: ${Z-re}ms`),Xe.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:p,documentsRemoved:ye})))}}class ju{constructor(e,t){this.db=e,this.garbageCollector=new X8(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(c=>s+c))}Un(e){let t=0;return this.Ln(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(s,c)=>t(c))}addReference(e,t,s){return R0(e,s)}removeReference(e,t,s){return R0(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return R0(e,t)}Gn(e,t){return function(s,c){let p=!1;return Fu(s).tt(y=>Ql(s,y,c).next(A=>(A&&(p=!0),Xe.resolve(!A)))).next(()=>p)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let p=0;return this.Kn(e,(y,A)=>{if(A<=t){const F=this.Gn(e,y).next(Z=>{if(!Z)return p++,s.getEntry(e,y).next(()=>(s.removeEntry(y,Ln.min()),pc(e).delete([0,Go(y.path)])))});c.push(F)}}).next(()=>Xe.waitFor(c)).next(()=>s.apply(e)).next(()=>p)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return R0(e,t)}Kn(e,t){const s=pc(e);let c,p=D.at;return s.Z({index:"documentTargetsIndex"},([y,A],{path:F,sequenceNumber:Z})=>{0===y?(p!==D.at&&t(new nn(v2(c)),p),p=Z,c=F):p=D.at}).next(()=>{p!==D.at&&t(new nn(v2(c)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function R0(r,e){return pc(r).put((s=r.currentSequenceNumber,{targetId:0,path:Go(e.path),sequenceNumber:s}));var s}class $u{constructor(){this.changes=new zs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Xe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ch{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return v4(e).put(s)}removeEntry(e,t,s){return v4(e).delete(function(c,p){const y=c.path.toArray();return[y.slice(0,y.length-2),y[y.length-2],z(p),y[y.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Qn(e,s)))}getEntry(e,t){let s=bi.newInvalidDocument(t);return v4(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(y4(t))},(c,p)=>{s=this.jn(t,p)}).next(()=>s)}Wn(e,t){let s={size:0,document:bi.newInvalidDocument(t)};return v4(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(y4(t))},(c,p)=>{s={document:this.jn(t,p),size:L0(p)}}).next(()=>s)}getEntries(e,t){let s=ns();return this.zn(e,t,(c,p)=>{const y=this.jn(c,p);s=s.insert(c,y)}).next(()=>s)}Hn(e,t){let s=ns(),c=new Rr(nn.comparator);return this.zn(e,t,(p,y)=>{const A=this.jn(p,y);s=s.insert(p,A),c=c.insert(p,L0(y))}).next(()=>({documents:s,Jn:c}))}zn(e,t,s){if(t.isEmpty())return Xe.resolve();let c=new fi(Gu);t.forEach(F=>c=c.add(F));const p=IDBKeyRange.bound(y4(c.first()),y4(c.last())),y=c.getIterator();let A=y.getNext();return v4(e).Z({index:"documentKeyIndex",range:p},(F,Z,re)=>{const ye=nn.fromSegments([...Z.prefixPath,Z.collectionGroup,Z.documentId]);for(;A&&Gu(A,ye)<0;)s(A,null),A=y.getNext();A&&A.isEqual(ye)&&(s(A,Z),A=y.hasNext()?y.getNext():null),A?re.j(y4(A)):re.done()}).next(()=>{for(;A;)s(A,null),A=y.hasNext()?y.getNext():null})}getDocumentsMatchingQuery(e,t,s,c){const p=t.path,y=[p.popLast().toArray(),p.lastSegment(),z(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],A=[p.popLast().toArray(),p.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return v4(e).W(IDBKeyRange.bound(y,A,!0)).next(F=>{let Z=ns();for(const re of F){const ye=this.jn(nn.fromSegments(re.prefixPath.concat(re.collectionGroup,re.documentId)),re);ye.isFoundDocument()&&(n2(t,ye)||c.has(ye.key))&&(Z=Z.insert(ye.key,ye))}return Z})}getAllFromCollectionGroup(e,t,s,c){let p=ns();const y=P0(t,s),A=P0(t,Ni.max());return v4(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(y,A,!0)},(F,Z,re)=>{const ye=this.jn(nn.fromSegments(Z.prefixPath.concat(Z.collectionGroup,Z.documentId)),Z);p=p.insert(ye.key,ye),p.size===c&&re.done()}).next(()=>p)}newChangeBuffer(e){return new Wu(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Hc(e).get("remoteDocumentGlobalKey").next(t=>(fn(!!t),t))}Qn(e,t){return Hc(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const s=function m(r,e){let t;if(e.document)t=S0(r.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=nn.fromSegments(e.noDocument.path),c=Q(e.noDocument.readTime);t=bi.newNoDocument(s,c),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return an();{const s=nn.fromSegments(e.unknownDocument.path),c=Q(e.unknownDocument.version);t=bi.newUnknownDocument(s,c)}}return e.readTime&&t.setReadTime(function(s){const c=new Vr(s[0],s[1]);return Ln.fromTimestamp(c)}(e.readTime)),t}(this.yt,t);if(!s.isNoDocument()||!s.version.isEqual(Ln.min()))return s}return bi.newInvalidDocument(e)}}function Jl(r){return new ch(r)}class Wu extends $u{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new zs(s=>s.toString(),(s,c)=>s.isEqual(c))}applyChanges(e){const t=[];let s=0,c=new fi((p,y)=>Qn(p.canonicalString(),y.canonicalString()));return this.changes.forEach((p,y)=>{const A=this.Xn.get(p);if(t.push(this.Yn.removeEntry(e,p,A.readTime)),y.isValidDocument()){const F=b(this.Yn.yt,y);c=c.add(p.path.popLast());const Z=L0(F);s+=Z-A.size,t.push(this.Yn.addEntry(e,p,F))}else if(s-=A.size,this.trackRemovals){const F=b(this.Yn.yt,y.convertToNoDocument(Ln.min()));t.push(this.Yn.addEntry(e,p,F))}}),c.forEach(p=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,p))}),t.push(this.Yn.updateMetadata(e,s)),Xe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(s=>(this.Xn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:s,Jn:c})=>(c.forEach((p,y)=>{this.Xn.set(p,{size:y,readTime:s.get(p).readTime})}),s))}}function Hc(r){return Ps(r,"remoteDocumentGlobal")}function v4(r){return Ps(r,"remoteDocumentsV14")}function y4(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function P0(r,e){const t=e.documentKey.path.toArray();return[r,z(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Gu(r,e){const t=r.path.toArray(),s=e.path.toArray();let c=0;for(let p=0;p<t.length-2&&p<s.length-2;++p)if(c=Qn(t[p],s[p]),c)return c;return c=Qn(t.length,s.length),c||(c=Qn(t[t.length-2],s[s.length-2]),c||Qn(t[t.length-1],s[s.length-1]))}class lh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class J8{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(s=c,this.remoteDocumentCache.getEntry(e,t))).next(c=>(null!==s&&ca(s.mutation,c,Qs.empty(),Vr.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,d()).next(()=>s))}getLocalViewOfDocuments(e,t,s=d()){const c=s2();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,s).next(p=>{let y=xa();return p.forEach((A,F)=>{y=y.insert(A,F.overlayedDocument)}),y}))}getOverlayedDocuments(e,t){const s=s2();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,d()))}populateOverlays(e,t,s){const c=[];return s.forEach(p=>{t.has(p)||c.push(p)}),this.documentOverlayCache.getOverlays(e,c).next(p=>{p.forEach((y,A)=>{t.set(y,A)})})}computeViews(e,t,s,c){let p=ns();const y=ac(),A=ac();return t.forEach((F,Z)=>{const re=s.get(Z.key);c.has(Z.key)&&(void 0===re||re.mutation instanceof To)?p=p.insert(Z.key,Z):void 0!==re?(y.set(Z.key,re.mutation.getFieldMask()),ca(re.mutation,Z,re.mutation.getFieldMask(),Vr.now())):y.set(Z.key,Qs.empty())}),this.recalculateAndSaveOverlays(e,p).next(F=>(F.forEach((Z,re)=>y.set(Z,re)),t.forEach((Z,re)=>{var ye;return A.set(Z,new lh(re,null!==(ye=y.get(Z))&&void 0!==ye?ye:null))}),A))}recalculateAndSaveOverlays(e,t){const s=ac();let c=new Rr((y,A)=>y-A),p=d();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(y=>{for(const A of y)A.keys().forEach(F=>{const Z=t.get(F);if(null===Z)return;let re=s.get(F)||Qs.empty();re=A.applyToLocalView(Z,re),s.set(F,re);const ye=(c.get(A.batchId)||d()).add(F);c=c.insert(A.batchId,ye)})}).next(()=>{const y=[],A=c.getReverseIterator();for(;A.hasNext();){const F=A.getNext(),Z=F.key,re=F.value,ye=W2();re.forEach(Ze=>{if(!p.has(Ze)){const At=nc(t.get(Ze),s.get(Ze));null!==At&&ye.set(Ze,At),p=p.add(Ze)}}),y.push(this.documentOverlayCache.saveOverlays(e,Z,ye))}return Xe.waitFor(y)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return nn.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ia(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var c}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next(p=>{const y=c-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-p.size):Xe.resolve(s2());let A=-1,F=p;return y.next(Z=>Xe.forEach(Z,(re,ye)=>(A<ye.largestBatchId&&(A=ye.largestBatchId),p.get(re)?Xe.resolve():this.remoteDocumentCache.getEntry(e,re).next(Ze=>{F=F.insert(re,Ze)}))).next(()=>this.populateOverlays(e,Z,p)).next(()=>this.computeViews(e,F,Z,d())).next(re=>({batchId:A,changes:oc(re)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nn(t)).next(s=>{let c=xa();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const c=t.collectionGroup;let p=xa();return this.indexManager.getCollectionParents(e,c).next(y=>Xe.forEach(y,A=>{const F=(Z=t,re=A.child(c),new go(re,null,Z.explicitOrderBy.slice(),Z.filters.slice(),Z.limit,Z.limitType,Z.startAt,Z.endAt));var Z,re;return this.getDocumentsMatchingCollectionQuery(e,F,s).next(Z=>{Z.forEach((re,ye)=>{p=p.insert(re,ye)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,t,s){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(p=>(c=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c))).next(p=>{c.forEach((A,F)=>{const Z=F.getKey();null===p.get(Z)&&(p=p.insert(Z,bi.newInvalidDocument(Z)))});let y=xa();return p.forEach((A,F)=>{const Z=c.get(A);void 0!==Z&&ca(Z.mutation,F,Qs.empty(),Vr.now()),n2(t,F)&&(y=y.insert(A,F))}),y})}}class uh{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Xe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var s;return this.Zn.set(t.id,{id:(s=t).id,version:s.version,createTime:u1(s.createTime)}),Xe.resolve()}getNamedQuery(e,t){return Xe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(s=t).name,query:ot(s.bundledQuery),readTime:u1(s.readTime)}),Xe.resolve();var s}}class e5{constructor(){this.overlays=new Rr(nn.comparator),this.es=new Map}getOverlay(e,t){return Xe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=s2();return Xe.forEach(t,c=>this.getOverlay(e,c).next(p=>{null!==p&&s.set(c,p)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((c,p)=>{this.oe(e,t,p)}),Xe.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.es.get(s);return void 0!==c&&(c.forEach(p=>this.overlays=this.overlays.remove(p)),this.es.delete(s)),Xe.resolve()}getOverlaysForCollection(e,t,s){const c=s2(),p=t.length+1,y=new nn(t.child("")),A=this.overlays.getIteratorFrom(y);for(;A.hasNext();){const F=A.getNext().value,Z=F.getKey();if(!t.isPrefixOf(Z.path))break;Z.path.length===p&&F.largestBatchId>s&&c.set(F.getKey(),F)}return Xe.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let p=new Rr((Z,re)=>Z-re);const y=this.overlays.getIterator();for(;y.hasNext();){const Z=y.getNext().value;if(Z.getKey().getCollectionGroup()===t&&Z.largestBatchId>s){let re=p.get(Z.largestBatchId);null===re&&(re=s2(),p=p.insert(Z.largestBatchId,re)),re.set(Z.getKey(),Z)}}const A=s2(),F=p.getIterator();for(;F.hasNext()&&(F.getNext().value.forEach((Z,re)=>A.set(Z,re)),!(A.size()>=c)););return Xe.resolve(A)}oe(e,t,s){const c=this.overlays.get(s.key);if(null!==c){const y=this.es.get(c.largestBatchId).delete(s.key);this.es.set(c.largestBatchId,y)}this.overlays=this.overlays.insert(s.key,new h(t,s));let p=this.es.get(t);void 0===p&&(p=d(),this.es.set(t,p)),this.es.set(t,p.add(s.key))}}class k0{constructor(){this.ns=new fi(Ao.ss),this.rs=new fi(Ao.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const s=new Ao(e,t);this.ns=this.ns.add(s),this.rs=this.rs.add(s)}us(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.cs(new Ao(e,t))}hs(e,t){e.forEach(s=>this.removeReference(s,t))}ls(e){const t=new nn(new ar([])),s=new Ao(t,e),c=new Ao(t,e+1),p=[];return this.rs.forEachInRange([s,c],y=>{this.cs(y),p.push(y.key)}),p}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new nn(new ar([])),s=new Ao(t,e),c=new Ao(t,e+1);let p=d();return this.rs.forEachInRange([s,c],y=>{p=p.add(y.key)}),p}containsKey(e){const t=new Ao(e,0),s=this.ns.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Ao{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return nn.comparator(e.key,t.key)||Qn(e._s,t._s)}static os(e,t){return Qn(e._s,t._s)||nn.comparator(e.key,t.key)}}class t5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new fi(Ao.ss)}checkEmpty(e){return Xe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,c){const p=this.ws;this.ws++;const y=new Z4(p,t,s,c);this.mutationQueue.push(y);for(const A of c)this.gs=this.gs.add(new Ao(A.key,p)),this.indexManager.addToCollectionParentIndex(e,A.key.path.popLast());return Xe.resolve(y)}lookupMutationBatch(e,t){return Xe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const c=this.ps(t+1),p=c<0?0:c;return Xe.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ao(t,0),c=new Ao(t,Number.POSITIVE_INFINITY),p=[];return this.gs.forEachInRange([s,c],y=>{const A=this.ys(y._s);p.push(A)}),Xe.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new fi(Qn);return t.forEach(c=>{const p=new Ao(c,0),y=new Ao(c,Number.POSITIVE_INFINITY);this.gs.forEachInRange([p,y],A=>{s=s.add(A._s)})}),Xe.resolve(this.Is(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let p=s;nn.isDocumentKey(p)||(p=p.child(""));const y=new Ao(new nn(p),0);let A=new fi(Qn);return this.gs.forEachWhile(F=>{const Z=F.key.path;return!!s.isPrefixOf(Z)&&(Z.length===c&&(A=A.add(F._s)),!0)},y),Xe.resolve(this.Is(A))}Is(e){const t=[];return e.forEach(s=>{const c=this.ys(s);null!==c&&t.push(c)}),t}removeMutationBatch(e,t){fn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let s=this.gs;return Xe.forEach(t.mutations,c=>{const p=new Ao(c.key,t.batchId);return s=s.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.gs=s})}An(e){}containsKey(e,t){const s=new Ao(t,0),c=this.gs.firstAfterOrEqual(s);return Xe.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return Xe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Q4{constructor(e){this.Es=e,this.docs=new Rr(nn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),p=c?c.size:0,y=this.Es(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:y}),this.size+=y-p,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Xe.resolve(s?s.document.mutableCopy():bi.newInvalidDocument(t))}getEntries(e,t){let s=ns();return t.forEach(c=>{const p=this.docs.get(c);s=s.insert(c,p?p.document.mutableCopy():bi.newInvalidDocument(c))}),Xe.resolve(s)}getDocumentsMatchingQuery(e,t,s,c){let p=ns();const y=t.path,A=new nn(y.child("")),F=this.docs.getIteratorFrom(A);for(;F.hasNext();){const{key:Z,value:{document:re}}=F.getNext();if(!y.isPrefixOf(Z.path))break;Z.path.length>y.length+1||co(vs(re),s)<=0||(c.has(re.key)||n2(t,re))&&(p=p.insert(re.key,re.mutableCopy()))}return Xe.resolve(p)}getAllFromCollectionGroup(e,t,s,c){an()}As(e,t){return Xe.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new n5(this)}getSize(e){return Xe.resolve(this.size)}}class n5 extends $u{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((s,c)=>{c.isValidDocument()?t.push(this.Yn.addEntry(e,c)):this.Yn.removeEntry(s)}),Xe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class Zu{constructor(e){this.persistence=e,this.Rs=new zs(t=>e2(t),H2),this.lastRemoteSnapshotVersion=Ln.min(),this.highestTargetId=0,this.bs=0,this.Ps=new k0,this.targetCount=0,this.vs=m4.Pn()}forEachTarget(e,t){return this.Rs.forEach((s,c)=>t(c)),Xe.resolve()}getLastRemoteSnapshotVersion(e){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.bs&&(this.bs=t),Xe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new m4(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Xe.resolve()}updateTargetData(e,t){return this.Dn(t),Xe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(e,t,s){let c=0;const p=[];return this.Rs.forEach((y,A)=>{A.sequenceNumber<=t&&null===s.get(A.targetId)&&(this.Rs.delete(y),p.push(this.removeMatchingKeysForTargetId(e,A.targetId)),c++)}),Xe.waitFor(p).next(()=>c)}getTargetCount(e){return Xe.resolve(this.targetCount)}getTargetData(e,t){const s=this.Rs.get(t)||null;return Xe.resolve(s)}addMatchingKeys(e,t,s){return this.Ps.us(t,s),Xe.resolve()}removeMatchingKeys(e,t,s){this.Ps.hs(t,s);const c=this.persistence.referenceDelegate,p=[];return c&&t.forEach(y=>{p.push(c.markPotentiallyOrphaned(e,y))}),Xe.waitFor(p)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Xe.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ps.ds(t);return Xe.resolve(s)}containsKey(e,t){return Xe.resolve(this.Ps.containsKey(t))}}class V6{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new D(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Zu(this),this.indexManager=new Ru,this.remoteDocumentCache=new Q4(s=>this.referenceDelegate.xs(s)),this.yt=new u(t),this.Ns=new uh(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new e5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Vs[e.toKey()];return s||(s=new t5(t,this.referenceDelegate),this.Vs[e.toKey()]=s),s}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,s){Rt("MemoryPersistence","Starting transaction:",e);const c=new r5(this.Ss.next());return this.referenceDelegate.ks(),s(c).next(p=>this.referenceDelegate.Os(c).next(()=>p)).toPromise().then(p=>(c.raiseOnCommittedEvent(),p))}Ms(e,t){return Xe.or(Object.values(this.Vs).map(s=>()=>s.containsKey(e,t)))}}class r5 extends uo{constructor(e){super(),this.currentSequenceNumber=e}}class H6{constructor(e){this.persistence=e,this.Fs=new k0,this.$s=null}static Bs(e){return new H6(e)}get Ls(){if(this.$s)return this.$s;throw an()}addReference(e,t,s){return this.Fs.addReference(s,t),this.Ls.delete(s.toString()),Xe.resolve()}removeReference(e,t,s){return this.Fs.removeReference(s,t),this.Ls.add(s.toString()),Xe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Xe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(c=>this.Ls.add(c.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(p=>this.Ls.add(p.toString()))}).next(()=>s.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.Ls,s=>{const c=nn.fromPath(s);return this.qs(e,c).next(p=>{p||t.removeEntry(c,Ln.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(s=>{s?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return Xe.or([()=>Xe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class i5{constructor(e){this.yt=e}$(e,t,s,c){const p=new n1("createOrUpgrade",t);var A;s<1&&c>=1&&(e.createObjectStore("owner"),(A=e).createObjectStore("mutationQueues",{keyPath:"userId"}),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",S6,{unique:!0}),A.createObjectStore("documentMutations"),Ku(e),function(A){A.createObjectStore("remoteDocuments")}(e));let y=Xe.resolve();return s<3&&c>=3&&(0!==s&&(function(A){A.deleteObjectStore("targetDocuments"),A.deleteObjectStore("targets"),A.deleteObjectStore("targetGlobal")}(e),Ku(e)),y=y.next(()=>function(A){const F=A.store("targetGlobal"),Z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ln.min().toTimestamp(),targetCount:0};return F.put("targetGlobalKey",Z)}(p))),s<4&&c>=4&&(0!==s&&(y=y.next(()=>function(A,F){return F.store("mutations").W().next(Z=>{A.deleteObjectStore("mutations"),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",S6,{unique:!0});const re=F.store("mutations"),ye=Z.map(Ze=>re.put(Ze));return Xe.waitFor(ye)})}(e,p))),y=y.next(()=>{!function(A){A.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&c>=5&&(y=y.next(()=>this.Us(p))),s<6&&c>=6&&(y=y.next(()=>(function(A){A.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(p)))),s<7&&c>=7&&(y=y.next(()=>this.Gs(p))),s<8&&c>=8&&(y=y.next(()=>this.Qs(e,p))),s<9&&c>=9&&(y=y.next(()=>{!function(A){A.objectStoreNames.contains("remoteDocumentChanges")&&A.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&c>=10&&(y=y.next(()=>this.js(p))),s<11&&c>=11&&(y=y.next(()=>{(function(A){A.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(A){A.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&c>=12&&(y=y.next(()=>{!function(A){const F=A.createObjectStore("documentOverlays",{keyPath:jl});F.createIndex("collectionPathOverlayIndex",z6,{unique:!1}),F.createIndex("collectionGroupOverlayIndex",G4,{unique:!1})}(e)})),s<13&&c>=13&&(y=y.next(()=>function(A){const F=A.createObjectStore("remoteDocumentsV14",{keyPath:T0});F.createIndex("documentKeyIndex",T6),F.createIndex("collectionGroupIndex",A6)}(e)).next(()=>this.Ws(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&c>=14&&(y=y.next(()=>this.zs(e,p))),s<15&&c>=15&&(y=y.next(()=>function(A){A.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),A.createObjectStore("indexState",{keyPath:x6}).createIndex("sequenceNumberIndex",N6,{unique:!1}),A.createObjectStore("indexEntries",{keyPath:L6}).createIndex("documentKeyIndex",za,{unique:!1})}(e))),y}Ks(e){let t=0;return e.store("remoteDocuments").Z((s,c)=>{t+=L0(c)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Us(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.W().next(c=>Xe.forEach(c,p=>{const y=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",y).next(A=>Xe.forEach(A,F=>{fn(F.userId===p.userId);const Z=ce(this.yt,F);return Hu(e,p.userId,Z).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const p=[];return s.Z((y,A)=>{const F=new ar(y),Z=[0,Go(F)];p.push(t.get(Z).next(re=>re?Xe.resolve():t.put({targetId:0,path:Go(F),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>Xe.waitFor(p))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Bl});const s=t.store("collectionParents"),c=new Pu,p=y=>{if(c.add(y)){const A=y.lastSegment(),F=y.popLast();return s.put({collectionId:A,parent:Go(F)})}};return t.store("remoteDocuments").Z({X:!0},(y,A)=>{const F=new ar(y);return p(F.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([y,A,F],Z)=>{const re=v2(A);return p(re.popLast())}))}js(e){const t=e.store("targets");return t.Z((s,c)=>{const p=ve(c),y=rt(this.yt,p);return t.put(y)})}Ws(e,t){const s=t.store("remoteDocuments"),c=[];return s.Z((p,y)=>{const A=t.store("remoteDocumentsV14"),F=(Z=y,Z.document?new nn(ar.fromString(Z.document.name).popFirst(5)):Z.noDocument?nn.fromSegments(Z.noDocument.path):Z.unknownDocument?nn.fromSegments(Z.unknownDocument.path):an()).path.toArray();var Z;const re={prefixPath:F.slice(0,F.length-2),collectionGroup:F[F.length-2],documentId:F[F.length-1],readTime:y.readTime||[0,0],unknownDocument:y.unknownDocument,noDocument:y.noDocument,document:y.document,hasCommittedMutations:!!y.hasCommittedMutations};c.push(A.put(re))}).next(()=>Xe.waitFor(c))}zs(e,t){const s=t.store("mutations"),c=Jl(this.yt),p=new V6(H6.Bs,this.yt.ie);return s.W().next(y=>{const A=new Map;return y.forEach(F=>{var Z;let re=null!==(Z=A.get(F.userId))&&void 0!==Z?Z:d();ce(this.yt,F).keys().forEach(ye=>re=re.add(ye)),A.set(F.userId,re)}),Xe.forEach(A,(F,Z)=>{const re=new ii(Z),ye=y2.re(this.yt,re),Ze=p.getIndexManager(re),At=z0.re(re,this.yt,Ze,p.referenceDelegate);return new J8(c,At,ye,Ze).recalculateAndSaveOverlaysForDocumentKeys(new d4(t,D.at),F).next()})})}}function Ku(r){r.createObjectStore("targetDocuments",{keyPath:xu}).createIndex("documentTargetsIndex",W4,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hc,{unique:!0}),r.createObjectStore("targetGlobal")}const e3="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class t3{constructor(e,t,s,c,p,y,A,F,Z,re,ye=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Hs=p,this.window=y,this.document=A,this.Js=Z,this.Ys=re,this.Xs=ye,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Ze=>Promise.resolve(),!t3.C())throw new wt(Ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ju(this,c),this.ii=t+"main",this.yt=new u(F),this.ri=new B1(this.ii,this.Xs,new i5(this.yt)),this.Cs=new Ir(this.referenceDelegate,this.yt),this.remoteDocumentCache=Jl(this.yt),this.Ns=new oi,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===re&&Ui("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new wt(Ye.FAILED_PRECONDITION,e3);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new D(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var s=(0,te.Z)(function*(c){if(t.started)return e(c)});return function(c){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,te.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,te.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>U6(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(So(e))return Rt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Rt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return F6(e).get("owner").next(t=>Xe.resolve(this.mi(t)))}gi(e){return U6(e).delete(this.clientId)}yi(){var e=this;return(0,te.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const c=Ps(s,"clientMetadata");return c.W().next(p=>{const y=e.Ii(p,18e5),A=p.filter(F=>-1===y.indexOf(F));return Xe.forEach(A,F=>c.delete(F.clientId)).next(()=>A)})}).catch(()=>[]);if(e.oi)for(const s of t)e.oi.removeItem(e.Ti(s.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Xe.resolve(!0):F6(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new wt(Ye.FAILED_PRECONDITION,e3);return!1}}return!(!this.networkEnabled||!this.inForeground)||U6(e).W().next(s=>void 0===this.Ii(s,5e3).find(c=>!(this.clientId===c.clientId||!(!this.networkEnabled&&c.networkEnabled||!this.inForeground&&c.inForeground&&this.networkEnabled===c.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Rt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,te.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new d4(t,D.at);return e._i(s).next(()=>e.gi(s))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(s=>this.pi(s.updateTimeMs,t)&&!this.Ei(s.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>U6(e).W().next(t=>this.Ii(t,18e5).map(s=>s.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return z0.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ku(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return y2.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,s){Rt("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===t?"readonly":"readwrite",p=15===(y=this.Xs)?A0:14===y?da:13===y?f4:12===y?P6:11===y?R6:void an();var y;let A;return this.ri.runTransaction(e,c,p,F=>(A=new d4(F,this.Ss?this.Ss.next():D.at),"readwrite-primary"===t?this.fi(A).next(Z=>!!Z||this.di(A)).next(Z=>{if(!Z)throw Ui(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new wt(Ye.FAILED_PRECONDITION,lo);return s(A)}).next(Z=>this.wi(A).next(()=>Z)):this.Vi(A).next(()=>s(A)))).then(F=>(A.raiseOnCommittedEvent(),F))}Vi(e){return F6(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new wt(Ye.FAILED_PRECONDITION,e3)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return F6(e).put("owner",t)}static C(){return B1.C()}_i(e){const t=F6(e);return t.get("owner").next(s=>this.mi(s)?(Rt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Xe.resolve())}pi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Ui(`Detected an update time that is in the future: ${e} > ${s}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,On.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const s=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Rt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Ui("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Ui("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function F6(r){return Ps(r,"owner")}function U6(r){return Ps(r,"clientMetadata")}function n3(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class O0{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.Si=s,this.Di=c}static Ci(e,t){let s=d(),c=d();for(const p of t.docChanges)switch(p.type){case 0:s=s.add(p.doc.key);break;case 1:c=c.add(p.doc.key)}return new O0(e,t.fromCache,s,c)}}class r3{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,s,c){return this.ki(e,t).next(p=>p||this.Oi(e,t,c,s)).next(p=>p||this.Mi(e,t))}ki(e,t){if(vo(t))return Xe.resolve(null);let s=k1(t);return this.indexManager.getIndexType(e,s).next(c=>0===c?null:(null!==t.limit&&1===c&&(t=sa(t,null,"F"),s=k1(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(p=>{const y=d(...p);return this.Ni.getDocuments(e,y).next(A=>this.indexManager.getMinOffset(e,s).next(F=>{const Z=this.Fi(t,A);return this.$i(t,Z,y,F.readTime)?this.ki(e,sa(t,null,"F")):this.Bi(e,Z,t,F)}))})))}Oi(e,t,s,c){return vo(t)||c.isEqual(Ln.min())?this.Mi(e,t):this.Ni.getDocuments(e,s).next(p=>{const y=this.Fi(t,p);return this.$i(t,y,s,c)?this.Mi(e,t):(u2()<=br.in.DEBUG&&Rt("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Ma(t)),this.Bi(e,y,t,b1(c,-1)))})}Fi(e,t){let s=new fi(a4(e));return t.forEach((c,p)=>{n2(e,p)&&(s=s.add(p))}),s}$i(e,t,s,c){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const p="F"===e.limitType?t.last():t.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(c)>0)}Mi(e,t){return u2()<=br.in.DEBUG&&Rt("QueryEngine","Using full collection scan to execute query:",Ma(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ni.min())}Bi(e,t,s,c){return this.Ni.getDocumentsMatchingQuery(e,s,c).next(p=>(t.forEach(y=>{p=p.insert(y.key,y)}),p))}}class i3{constructor(e,t,s,c){this.persistence=e,this.Li=t,this.yt=c,this.qi=new Rr(Qn),this.Ui=new zs(p=>e2(p),H2),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(s)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new J8(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function s5(r,e,t,s){return new i3(r,e,t,s)}function V0(r,e){return s3.apply(this,arguments)}function s3(){return s3=(0,te.Z)(function*(r,e){const t=Yt(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next(p=>(c=p,t.Qi(e),t.mutationQueue.getAllMutationBatches(s))).next(p=>{const y=[],A=[];let F=d();for(const Z of c){y.push(Z.batchId);for(const re of Z.mutations)F=F.add(re.key)}for(const Z of p){A.push(Z.batchId);for(const re of Z.mutations)F=F.add(re.key)}return t.localDocuments.getDocuments(s,F).next(Z=>({ji:Z,removedBatchIds:y,addedBatchIds:A}))})})}),s3.apply(this,arguments)}function _4(r){const e=Yt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Yu(r,e,t){let s=d(),c=d();return t.forEach(p=>s=s.add(p)),e.getEntries(r,s).next(p=>{let y=ns();return t.forEach((A,F)=>{const Z=p.get(A);F.isFoundDocument()!==Z.isFoundDocument()&&(c=c.add(A)),F.isNoDocument()&&F.version.isEqual(Ln.min())?(e.removeEntry(A,F.readTime),y=y.insert(A,F)):!Z.isValidDocument()||F.version.compareTo(Z.version)>0||0===F.version.compareTo(Z.version)&&Z.hasPendingWrites?(e.addEntry(F),y=y.insert(A,F)):Rt("LocalStore","Ignoring outdated watch update for ",A,". Current version:",Z.version," Watch version:",F.version)}),{Wi:y,zi:c}})}function Qu(r,e){const t=Yt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function X4(r,e){const t=Yt(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let c;return t.Cs.getTargetData(s,e).next(p=>p?(c=p,Xe.resolve(c)):t.Cs.allocateTargetId(s).next(y=>(c=new l(e,y,0,s.currentSequenceNumber),t.Cs.addTargetData(s,c).next(()=>c))))}).then(s=>{const c=t.qi.get(s.targetId);return(null===c||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.qi=t.qi.insert(s.targetId,s),t.Ui.set(e,s.targetId)),s})}function J4(r,e,t){return e6.apply(this,arguments)}function e6(){return e6=(0,te.Z)(function*(r,e,t){const s=Yt(r),c=s.qi.get(e),p=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",p,y=>s.persistence.referenceDelegate.removeTarget(y,c)))}catch(y){if(!So(y))throw y;Rt("LocalStore",`Failed to update sequence numbers for target ${e}: ${y}`)}s.qi=s.qi.remove(e),s.Ui.delete(c.target)}),e6.apply(this,arguments)}function mc(r,e,t){const s=Yt(r);let c=Ln.min(),p=d();return s.persistence.runTransaction("Execute query","readonly",y=>function(A,F,Z){const re=Yt(A),ye=re.Ui.get(Z);return void 0!==ye?Xe.resolve(re.qi.get(ye)):re.Cs.getTargetData(F,Z)}(s,y,k1(e)).next(A=>{if(A)return c=A.lastLimboFreeSnapshotVersion,s.Cs.getMatchingKeysForTargetId(y,A.targetId).next(F=>{p=F})}).next(()=>s.Li.getDocumentsMatchingQuery(y,e,t?c:Ln.min(),t?p:d())).next(A=>(F0(s,Sa(e),A),{documents:A,Hi:p})))}function H0(r,e){const t=Yt(r),s=Yt(t.Cs),c=t.qi.get(e);return c?Promise.resolve(c.target):t.persistence.runTransaction("Get target data","readonly",p=>s.ne(p,e).next(y=>y?y.target:null))}function t6(r,e){const t=Yt(r),s=t.Ki.get(e)||Ln.min();return t.persistence.runTransaction("Get new document changes","readonly",c=>t.Gi.getAllFromCollectionGroup(c,e,b1(s,-1),Number.MAX_SAFE_INTEGER)).then(c=>(F0(t,e,c),c))}function F0(r,e,t){let s=r.Ki.get(e)||Ln.min();t.forEach((c,p)=>{p.readTime.compareTo(s)>0&&(s=p.readTime)}),r.Ki.set(e,s)}function B0(){return B0=(0,te.Z)(function*(r,e,t,s){const c=Yt(r);let p=d(),y=ns();for(const Z of t){const re=e.Ji(Z.metadata.name);Z.document&&(p=p.add(re));const ye=e.Yi(Z);ye.setReadTime(e.Xi(Z.metadata.readTime)),y=y.insert(re,ye)}const A=c.Gi.newChangeBuffer({trackRemovals:!0}),F=yield X4(c,(Z=s,k1(jo(ar.fromString(`__bundle__/docs/${Z}`)))));var Z;return c.persistence.runTransaction("Apply bundle documents","readwrite",Z=>Yu(Z,A,y).next(re=>(A.apply(Z),re)).next(re=>c.Cs.removeMatchingKeysForTargetId(Z,F.targetId).next(()=>c.Cs.addMatchingKeys(Z,p,F.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(Z,re.Wi,re.zi)).next(()=>re.Wi)))}),B0.apply(this,arguments)}function o3(r,e){return B6.apply(this,arguments)}function B6(){return B6=(0,te.Z)(function*(r,e,t=d()){const s=yield X4(r,k1(ot(e.bundledQuery))),c=Yt(r);return c.persistence.runTransaction("Save named query","readwrite",p=>{const y=u1(e.readTime);if(s.snapshotVersion.compareTo(y)>=0)return c.Ns.saveNamedQuery(p,e);const A=s.withResumeToken(je.EMPTY_BYTE_STRING,y);return c.qi=c.qi.insert(A.targetId,A),c.Cs.updateTargetData(p,A).next(()=>c.Cs.removeMatchingKeysForTargetId(p,s.targetId)).next(()=>c.Cs.addMatchingKeys(p,t,s.targetId)).next(()=>c.Ns.saveNamedQuery(p,e))})}),B6.apply(this,arguments)}function j0(r,e){return`firestore_clients_${r}_${e}`}function a3(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function j6(r,e){return`firestore_targets_${r}_${e}`}class $0{constructor(e,t,s,c){this.user=e,this.batchId=t,this.state=s,this.error=c}static Zi(e,t,s){const c=JSON.parse(s);let p,y="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return y&&c.error&&(y="string"==typeof c.error.message&&"string"==typeof c.error.code,y&&(p=new wt(c.error.code,c.error.message))),y?new $0(e,t,c.state,p):(Ui("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $6{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Zi(e,t){const s=JSON.parse(t);let c,p="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return p&&s.error&&(p="string"==typeof s.error.message&&"string"==typeof s.error.code,p&&(c=new wt(s.error.code,s.error.message))),p?new $6(e,s.state,c):(Ui("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class W6{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const s=JSON.parse(t);let c="object"==typeof s&&s.activeTargetIds instanceof Array,p=T();for(let y=0;c&&y<s.activeTargetIds.length;++y)c=he(s.activeTargetIds[y]),p=p.add(s.activeTargetIds[y]);return c?new W6(e,p):(Ui("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class c3{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new c3(t.clientId,t.onlineState):(Ui("SharedClientState",`Failed to parse online state: ${e}`),null)}}class W0{constructor(){this.activeTargetIds=T()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class G0{constructor(e,t,s,c,p){this.window=e,this.Hs=t,this.persistenceKey=s,this.sr=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Rr(Qn),this.started=!1,this.cr=[];const y=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.ar=j0(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new W0),this.lr=new RegExp(`^firestore_clients_${y}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${y}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${y}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(A){return`firestore_bundle_loaded_v2_${A}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,te.Z)(function*(){const t=yield e.syncEngine.vi();for(const c of t){if(c===e.sr)continue;const p=e.getItem(j0(e.persistenceKey,c));if(p){const y=W6.Zi(c,p);y&&(e.ur=e.ur.insert(y.clientId,y))}}e.gr();const s=e.storage.getItem(e.wr);if(s){const c=e.yr(s);c&&e.pr(c)}for(const c of e.cr)e.rr(c);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((s,c)=>{c.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,s){this.Tr(e,t,s),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(j6(this.persistenceKey,e));if(s){const c=$6.Zi(e,s);c&&(t=c.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(j6(this.persistenceKey,e))}updateQueryState(e,t,s){this.Rr(e,t,s)}handleUserChange(e,t,s){t.forEach(c=>{this.Er(c)}),this.currentUser=e,s.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Rt("SharedClientState","READ",e,t),t}setItem(e,t){Rt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Rt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Rt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.ar)return void Ui("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,te.Z)(function*(){if(t.started){if(null!==s.key)if(t.lr.test(s.key)){if(null==s.newValue){const c=t.vr(s.key);return t.Vr(c,null)}{const c=t.Sr(s.key,s.newValue);if(c)return t.Vr(c.clientId,c)}}else if(t.dr.test(s.key)){if(null!==s.newValue){const c=t.Dr(s.key,s.newValue);if(c)return t.Cr(c)}}else if(t._r.test(s.key)){if(null!==s.newValue){const c=t.Nr(s.key,s.newValue);if(c)return t.kr(c)}}else if(s.key===t.wr){if(null!==s.newValue){const c=t.yr(s.newValue);if(c)return t.pr(c)}}else if(s.key===t.hr){const c=function(p){let y=D.at;if(null!=p)try{const A=JSON.parse(p);fn("number"==typeof A),y=A}catch(A){Ui("SharedClientState","Failed to read sequence number from WebStorage",A)}return y}(s.newValue);c!==D.at&&t.sequenceNumberHandler(c)}else if(s.key===t.mr){const c=t.Or(s.newValue);yield Promise.all(c.map(p=>t.syncEngine.Mr(p)))}}else t.cr.push(s)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,s){const c=new $0(this.currentUser,e,t,s),p=a3(this.persistenceKey,this.currentUser,e);this.setItem(p,c.tr())}Er(e){const t=a3(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,s){const c=j6(this.persistenceKey,e),p=new $6(e,t,s);this.setItem(c,p.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const s=this.vr(e);return W6.Zi(s,t)}Dr(e,t){const s=this.dr.exec(e),c=Number(s[1]);return $0.Zi(new ii(void 0!==s[2]?s[2]:null),c,t)}Nr(e,t){const s=this._r.exec(e),c=Number(s[1]);return $6.Zi(c,t)}yr(e){return c3.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,te.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Rt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const s=t?this.ur.insert(e,t):this.ur.remove(e),c=this.Ir(this.ur),p=this.Ir(s),y=[],A=[];return p.forEach(F=>{c.has(F)||y.push(F)}),c.forEach(F=>{p.has(F)||A.push(F)}),this.syncEngine.Br(y,A).then(()=>{this.ur=s})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=T();return e.forEach((s,c)=>{t=t.unionWith(c.activeTargetIds)}),t}}class Xu{constructor(){this.Lr=new W0,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,s){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new W0,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class o5{Ur(e){}shutdown(){}}class _2{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Rt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Rt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ju={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class a5{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class fh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,s,c,p){const y=this.ho(e,t);Rt("RestConnection","Sending: ",y,s);const A={};return this.lo(A,c,p),this.fo(e,y,A,s).then(F=>(Rt("RestConnection","Received: ",F),F),F=>{throw I1("RestConnection",`${e} failed with error: `,F,"url: ",y,"request:",s),F})}_o(e,t,s,c,p,y){return this.ao(e,t,s,c,p)}lo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ts,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,p)=>e[p]=c),s&&s.headers.forEach((c,p)=>e[p]=c)}ho(e,t){return`${this.oo}/v1/${t}:${Ju[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,s,c){return new Promise((p,y)=>{const A=new Po;A.setWithCredentials(!0),A.listenOnce(qo.COMPLETE,()=>{try{switch(A.getLastErrorCode()){case Mo.NO_ERROR:const Z=A.getResponseJson();Rt("Connection","XHR received:",JSON.stringify(Z)),p(Z);break;case Mo.TIMEOUT:Rt("Connection",'RPC "'+e+'" timed out'),y(new wt(Ye.DEADLINE_EXCEEDED,"Request time out"));break;case Mo.HTTP_ERROR:const re=A.getStatus();if(Rt("Connection",'RPC "'+e+'" failed with status:',re,"response text:",A.getResponseText()),re>0){let ye=A.getResponseJson();Array.isArray(ye)&&(ye=ye[0]);const Ze=ye?.error;if(Ze&&Ze.status&&Ze.message){const At=function(Vt){const Cn=Vt.toLowerCase().replace(/_/g,"-");return Object.values(Ye).indexOf(Cn)>=0?Cn:Ye.UNKNOWN}(Ze.status);y(new wt(At,Ze.message))}else y(new wt(Ye.UNKNOWN,"Server responded with status "+A.getStatus()))}else y(new wt(Ye.UNAVAILABLE,"Connection failed."));break;default:an()}}finally{Rt("Connection",'RPC "'+e+'" completed.')}});const F=JSON.stringify(c);A.send(t,"POST",F,s,15)})}wo(e,t,s){const c=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=bo(),y=w2(),A={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(A.xmlHttpFactory=new d1({})),this.lo(A.initMessageHeaders,t,s),A.encodeInitMessageHeaders=!0;const F=c.join("");Rt("Connection","Creating WebChannel: "+F,A);const Z=p.createWebChannel(F,A);let re=!1,ye=!1;const Ze=new a5({Hr:Vt=>{ye?Rt("Connection","Not sending because WebChannel is closed:",Vt):(re||(Rt("Connection","Opening WebChannel transport."),Z.open(),re=!0),Rt("Connection","WebChannel sending:",Vt),Z.send(Vt))},Jr:()=>Z.close()}),At=(Vt,Cn,Wn)=>{Vt.listen(Cn,v1=>{try{Wn(v1)}catch(is){setTimeout(()=>{throw is},0)}})};return At(Z,Ys.EventType.OPEN,()=>{ye||Rt("Connection","WebChannel transport opened.")}),At(Z,Ys.EventType.CLOSE,()=>{ye||(ye=!0,Rt("Connection","WebChannel transport closed"),Ze.io())}),At(Z,Ys.EventType.ERROR,Vt=>{ye||(ye=!0,I1("Connection","WebChannel transport errored:",Vt),Ze.io(new wt(Ye.UNAVAILABLE,"The operation could not be completed")))}),At(Z,Ys.EventType.MESSAGE,Vt=>{var Cn;if(!ye){const Wn=Vt.data[0];fn(!!Wn);const is=Wn.error||(null===(Cn=Wn[0])||void 0===Cn?void 0:Cn.error);if(is){Rt("Connection","WebChannel received error:",is);const Mi=is.status;let ks=function(Bi){const xo=mr[Bi];if(void 0!==xo)return Rc(xo)}(Mi),zi=is.message;void 0===ks&&(ks=Ye.INTERNAL,zi="Unknown error status: "+Mi+" with message "+is.message),ye=!0,Ze.io(new wt(ks,zi)),Z.close()}else Rt("Connection","WebChannel received:",Wn),Ze.ro(Wn)}}),At(y,P2.STAT_EVENT,Vt=>{Vt.stat===E2.PROXY?Rt("Connection","Detected buffering proxy"):Vt.stat===E2.NOPROXY&&Rt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ze.so()},0),Ze}}function Z0(){return typeof window<"u"?window:null}function G6(){return typeof document<"u"?document:null}function Z6(r){return new Na(r,!0)}class l3{constructor(e,t,s=1e3,c=1.5,p=6e4){this.Hs=e,this.timerId=t,this.mo=s,this.yo=c,this.po=p,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),s=Math.max(0,Date.now()-this.Eo),c=Math.max(0,t-s);c>0&&Rt("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,c,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class e8{constructor(e,t,s,c,p,y,A,F){this.Hs=e,this.vo=s,this.Vo=c,this.connection=p,this.authCredentialsProvider=y,this.appCheckCredentialsProvider=A,this.listener=F,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new l3(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,te.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,te.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var s=this;return(0,te.Z)(function*(){s.Lo(),s.qo(),s.xo.cancel(),s.So++,4!==e?s.xo.reset():t&&t.code===Ye.RESOURCE_EXHAUSTED?(Ui(t.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),s.xo.Ao()):t&&t.code===Ye.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Uo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,c])=>{this.So===t&&this.Go(s,c)},s=>{e(()=>{const c=new wt(Ye.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Qo(c)})})}Go(e,t){const s=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{s(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(c=>{s(()=>this.Qo(c))}),this.stream.onMessage(c=>{s(()=>this.onMessage(c))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,te.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Rt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Rt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t8 extends e8{constructor(e,t,s,c,p,y){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,y),this.yt=p}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Hl(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(F=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===F?1:"REMOVE"===F?2:"CURRENT"===F?3:"RESET"===F?4:an(),c=e.targetChange.targetIds||[],p=function(F,Z){return F.wt?(fn(void 0===Z||"string"==typeof Z),je.fromBase64String(Z||"")):(fn(void 0===Z||Z instanceof Uint8Array),je.fromUint8Array(Z||new Uint8Array))}(r,e.targetChange.resumeToken),y=e.targetChange.cause,A=y&&function(F){const Z=void 0===F.code?Ye.UNKNOWN:Rc(F.code);return new wt(Z,F.message||"")}(y);t=new Wt(s,c,p,A||null)}else if("documentChange"in e){const s=e.documentChange,c=L2(r,s.document.name),p=u1(s.document.updateTime),y=s.document.createTime?u1(s.document.createTime):Ln.min(),A=new Li({mapValue:{fields:s.document.fields}}),F=bi.newFoundDocument(c,p,y,A);t=new Le(s.targetIds||[],s.removedTargetIds||[],F.key,F)}else if("documentDelete"in e){const s=e.documentDelete,c=L2(r,s.document),p=s.readTime?u1(s.readTime):Ln.min(),y=bi.newNoDocument(c,p);t=new Le([],s.removedTargetIds||[],y.key,y)}else if("documentRemove"in e){const s=e.documentRemove,c=L2(r,s.document);t=new Le([],s.removedTargetIds||[],c,null)}else{if(!("filter"in e))return an();{const s=e.filter,p=new l4(s.count||0);t=new lt(s.targetId,p)}}var F;return t}(this.yt,e),s=function(c){if(!("targetChange"in c))return Ln.min();const p=c.targetChange;return p.targetIds&&p.targetIds.length?Ln.min():p.readTime?u1(p.readTime):Ln.min()}(e);return this.listener.Wo(t,s)}zo(e){const t={};t.database=B4(this.yt),t.addTarget=function(c,p){let y;const A=p.target;return y=Tc(A)?{documents:w6(c,A)}:{query:u4(c,A)},y.targetId=p.targetId,p.resumeToken.approximateByteSize()>0?y.resumeToken=ua(c,p.resumeToken):p.snapshotVersion.compareTo(Ln.min())>0&&(y.readTime=Xs(c,p.snapshotVersion.toTimestamp())),y}(this.yt,e);const s=function Z1(r,e){const t=function(s,c){switch(c){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return an()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Bo(t)}Ho(e){const t={};t.database=B4(this.yt),t.removeTarget=e,this.Bo(t)}}class c5 extends e8{constructor(e,t,s,c,p,y){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,y),this.yt=p,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(fn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function $4(r,e){return r&&r.length>0?(fn(void 0!==e),r.map(t=>function(s,c){let p=u1(s.updateTime?s.updateTime:c);return p.isEqual(Ln.min())&&(p=u1(c)),new tc(p,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=u1(e.commitTime);return this.listener.Zo(s,t)}return fn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=B4(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>j4(this.yt,s))};this.Bo(t)}}class l5 extends class{}{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.yt=c,this.nu=!1}su(){if(this.nu)throw new wt(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.connection.ao(e,t,s,c,p)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new wt(Ye.UNKNOWN,c.toString())})}_o(e,t,s,c){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,y])=>this.connection._o(e,t,s,p,y,c)).catch(p=>{throw"FirebaseError"===p.name?(p.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new wt(Ye.UNKNOWN,p.toString())})}terminate(){this.nu=!0}}class u5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Ui(t),this.ou=!1):Rt("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class h5{constructor(e,t,s,c,p){var y=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=p,this.mu.Ur(A=>{s.enqueueAndForget((0,te.Z)(function*(){var F;pa(y)&&(Rt("RemoteStore","Restarting streams for network reachability change."),yield(F=(0,te.Z)(function*(Z){const re=Yt(Z);re._u.add(4),yield l2(re),re.gu.set("Unknown"),re._u.delete(4),yield K6(re)}),function(Z){return F.apply(this,arguments)})(y))}))}),this.gu=new u5(s,c)}}function K6(r){return f3.apply(this,arguments)}function f3(){return f3=(0,te.Z)(function*(r){if(pa(r))for(const e of r.wu)yield e(!0)}),f3.apply(this,arguments)}function l2(r){return q6.apply(this,arguments)}function q6(){return q6=(0,te.Z)(function*(r){for(const e of r.wu)yield e(!1)}),q6.apply(this,arguments)}function K0(r,e){const t=Yt(r);t.du.has(e.targetId)||(t.du.set(e.targetId,e),p3(t)?d3(t):i6(t).ko()&&q0(t,e))}function Y6(r,e){const t=Yt(r),s=i6(t);t.du.delete(e),s.ko()&&n8(t,e),0===t.du.size&&(s.ko()?s.Fo():pa(t)&&t.gu.set("Unknown"))}function q0(r,e){r.yu.Ot(e.targetId),i6(r).zo(e)}function n8(r,e){r.yu.Ot(e),i6(r).Ho(e)}function d3(r){r.yu=new Kn({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>r.du.get(e)||null}),i6(r).start(),r.gu.uu()}function p3(r){return pa(r)&&!i6(r).No()&&r.du.size>0}function pa(r){return 0===Yt(r)._u.size}function r8(r){r.yu=void 0}function f5(r){return n6.apply(this,arguments)}function n6(){return n6=(0,te.Z)(function*(r){r.du.forEach((e,t)=>{q0(r,e)})}),n6.apply(this,arguments)}function m3(r,e){return r6.apply(this,arguments)}function r6(){return r6=(0,te.Z)(function*(r,e){r8(r),p3(r)?(r.gu.hu(e),d3(r)):r.gu.set("Unknown")}),r6.apply(this,arguments)}function dh(r,e,t){return Q6.apply(this,arguments)}function Q6(){return Q6=(0,te.Z)(function*(r,e,t){if(r.gu.set("Online"),e instanceof Wt&&2===e.state&&e.cause)try{yield(s=(0,te.Z)(function*(c,p){const y=p.cause;for(const A of p.targetIds)c.du.has(A)&&(yield c.remoteSyncer.rejectListen(A,y),c.du.delete(A),c.yu.removeTarget(A))}),function(c,p){return s.apply(this,arguments)})(r,e)}catch(s){Rt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield g3(r,s)}else if(e instanceof Le?r.yu.Kt(e):e instanceof lt?r.yu.Jt(e):r.yu.jt(e),!t.isEqual(Ln.min()))try{const s=yield _4(r.localStore);t.compareTo(s)>=0&&(yield function(c,p){const y=c.yu.Zt(p);return y.targetChanges.forEach((A,F)=>{if(A.resumeToken.approximateByteSize()>0){const Z=c.du.get(F);Z&&c.du.set(F,Z.withResumeToken(A.resumeToken,p))}}),y.targetMismatches.forEach(A=>{const F=c.du.get(A);if(!F)return;c.du.set(A,F.withResumeToken(je.EMPTY_BYTE_STRING,F.snapshotVersion)),n8(c,A);const Z=new l(F.target,A,1,F.sequenceNumber);q0(c,Z)}),c.remoteSyncer.applyRemoteEvent(y)}(r,t))}catch(s){Rt("RemoteStore","Failed to raise snapshot:",s),yield g3(r,s)}var s}),Q6.apply(this,arguments)}function g3(r,e,t){return Y0.apply(this,arguments)}function Y0(){return Y0=(0,te.Z)(function*(r,e,t){if(!So(e))throw e;r._u.add(1),yield l2(r),r.gu.set("Offline"),t||(t=()=>_4(r.localStore)),r.asyncQueue.enqueueRetryable((0,te.Z)(function*(){Rt("RemoteStore","Retrying IndexedDB access"),yield t(),r._u.delete(1),yield K6(r)}))}),Y0.apply(this,arguments)}function v3(r,e){return e().catch(t=>g3(r,t,e))}function C4(r){return Q0.apply(this,arguments)}function Q0(){return Q0=(0,te.Z)(function*(r){const e=Yt(r),t=Fc(e);let s=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;y3(e);)try{const c=yield Qu(e.localStore,s);if(null===c){0===e.fu.length&&t.Fo();break}s=c.batchId,gc(e,c)}catch(c){yield g3(e,c)}X6(e)&&J6(e)}),Q0.apply(this,arguments)}function y3(r){return pa(r)&&r.fu.length<10}function gc(r,e){r.fu.push(e);const t=Fc(r);t.ko()&&t.Yo&&t.Xo(e.mutations)}function X6(r){return pa(r)&&!Fc(r).No()&&r.fu.length>0}function J6(r){Fc(r).start()}function e0(r){return _3.apply(this,arguments)}function _3(){return _3=(0,te.Z)(function*(r){Fc(r).eu()}),_3.apply(this,arguments)}function i8(r){return X0.apply(this,arguments)}function X0(){return X0=(0,te.Z)(function*(r){const e=Fc(r);for(const t of r.fu)e.Xo(t.mutations)}),X0.apply(this,arguments)}function d5(r,e,t){return C3.apply(this,arguments)}function C3(){return C3=(0,te.Z)(function*(r,e,t){const s=r.fu.shift(),c=K4.from(s,e,t);yield v3(r,()=>r.remoteSyncer.applySuccessfulWrite(c)),yield C4(r)}),C3.apply(this,arguments)}function t0(r,e){return w3.apply(this,arguments)}function w3(){return w3=(0,te.Z)(function*(r,e){var t;e&&Fc(r).Yo&&(yield(t=(0,te.Z)(function*(s,c){if(zc(p=c.code)&&p!==Ye.ABORTED){const y=s.fu.shift();Fc(s).Mo(),yield v3(s,()=>s.remoteSyncer.rejectFailedWrite(y.batchId,c)),yield C4(s)}var p}),function(s,c){return t.apply(this,arguments)})(r,e)),X6(r)&&J6(r)}),w3.apply(this,arguments)}function p5(r,e){return E3.apply(this,arguments)}function E3(){return E3=(0,te.Z)(function*(r,e){const t=Yt(r);t.asyncQueue.verifyOperationInProgress(),Rt("RemoteStore","RemoteStore received new credentials");const s=pa(t);t._u.add(3),yield l2(t),s&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield K6(t)}),E3.apply(this,arguments)}function I3(r,e){return b3.apply(this,arguments)}function b3(){return b3=(0,te.Z)(function*(r,e){const t=Yt(r);e?(t._u.delete(2),yield K6(t)):e||(t._u.add(2),yield l2(t),t.gu.set("Unknown"))}),b3.apply(this,arguments)}function i6(r){return r.pu||(r.pu=function(e,t,s){const c=Yt(e);return c.su(),new t8(t,c.connection,c.authCredentials,c.appCheckCredentials,c.yt,s)}(r.datastore,r.asyncQueue,{Yr:f5.bind(null,r),Zr:m3.bind(null,r),Wo:dh.bind(null,r)}),r.wu.push(function(){var e=(0,te.Z)(function*(t){t?(r.pu.Mo(),p3(r)?d3(r):r.gu.set("Unknown")):(yield r.pu.stop(),r8(r))});return function(t){return e.apply(this,arguments)}}())),r.pu}function Fc(r){return r.Iu||(r.Iu=function(e,t,s){const c=Yt(e);return c.su(),new c5(t,c.connection,c.authCredentials,c.appCheckCredentials,c.yt,s)}(r.datastore,r.asyncQueue,{Yr:e0.bind(null,r),Zr:t0.bind(null,r),tu:i8.bind(null,r),Zo:d5.bind(null,r)}),r.wu.push(function(){var e=(0,te.Z)(function*(t){t?(r.Iu.Mo(),yield C4(r)):(yield r.Iu.stop(),r.fu.length>0&&(Rt("RemoteStore",`Stopping write stream with ${r.fu.length} pending writes`),r.fu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Iu}class M3{constructor(e,t,s,c,p){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=p,this.deferred=new t1,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(y=>{})}static createAndSchedule(e,t,s,c,p){const y=Date.now()+s,A=new M3(e,t,y,c,p);return A.start(s),A}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new wt(Ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function s6(r,e){if(Ui("AsyncQueue",`${e}: ${r}`),So(r))return new wt(Ye.UNAVAILABLE,`${e}: ${r}`);throw r}class w4{constructor(e){this.comparator=e?(t,s)=>e(t,s)||nn.comparator(t.key,s.key):(t,s)=>nn.comparator(t.key,s.key),this.keyedMap=xa(),this.sortedSet=new Rr(this.comparator)}static emptySet(e){return new w4(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof w4)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,p=s.getNext().key;if(!c.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new w4;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class S3{constructor(){this.Tu=new Rr(nn.comparator)}track(e){const t=e.doc.key,s=this.Tu.get(t);s?0!==e.type&&3===s.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==s.type?this.Tu=this.Tu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Tu=this.Tu.remove(t):1===e.type&&2===s.type?this.Tu=this.Tu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):an():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,s)=>{e.push(s)}),e}}class o6{constructor(e,t,s,c,p,y,A,F,Z){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=p,this.fromCache=y,this.syncStateChanged=A,this.excludesMetadataChanges=F,this.hasCachedResults=Z}static fromInitialDocuments(e,t,s,c,p){const y=[];return t.forEach(A=>{y.push({type:0,doc:A})}),new o6(e,t,w4.emptySet(t),y,s,c,!0,!1,p)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&F2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}class D3{constructor(){this.Au=void 0,this.listeners=[]}}class m5{constructor(){this.queries=new zs(e=>o4(e),F2),this.onlineState="Unknown",this.Ru=new Set}}function T3(r,e){return A3.apply(this,arguments)}function A3(){return A3=(0,te.Z)(function*(r,e){const t=Yt(r),s=e.query;let c=!1,p=t.queries.get(s);if(p||(c=!0,p=new D3),c)try{p.Au=yield t.onListen(s)}catch(y){const A=s6(y,`Initialization of query '${Ma(e.query)}' failed`);return void e.onError(A)}t.queries.set(s,p),p.listeners.push(e),e.bu(t.onlineState),p.Au&&e.Pu(p.Au)&&J0(t)}),A3.apply(this,arguments)}function x3(r,e){return N3.apply(this,arguments)}function N3(){return N3=(0,te.Z)(function*(r,e){const t=Yt(r),s=e.query;let c=!1;const p=t.queries.get(s);if(p){const y=p.listeners.indexOf(e);y>=0&&(p.listeners.splice(y,1),c=0===p.listeners.length)}if(c)return t.queries.delete(s),t.onUnlisten(s)}),N3.apply(this,arguments)}function g5(r,e){const t=Yt(r);let s=!1;for(const c of e){const y=t.queries.get(c.query);if(y){for(const A of y.listeners)A.Pu(c)&&(s=!0);y.Au=c}}s&&J0(t)}function v5(r,e,t){const s=Yt(r),c=s.queries.get(e);if(c)for(const p of c.listeners)p.onError(t);s.queries.delete(e)}function J0(r){r.Ru.forEach(e=>{e.next()})}class el{constructor(e,t,s){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=s||{}}Pu(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)3!==c.type&&s.push(c);e=new o6(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=o6.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class y5{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class _5{constructor(e){this.yt=e}Ji(e){return L2(this.yt,e)}Yi(e){return e.metadata.exists?S0(this.yt,e.document,!1):bi.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return u1(e)}}class s8{constructor(e,t,s){this.Mu=e,this.localStore=t,this.yt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=n0(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const s=ar.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,s=new _5(this.yt);for(const c of e)if(c.metadata.queries){const p=s.Ji(c.metadata.name);for(const y of c.metadata.queries){const A=(t.get(y)||d()).add(p);t.set(y,A)}}return t}complete(){var e=this;return(0,te.Z)(function*(){const t=yield function U0(r,e,t,s){return B0.apply(this,arguments)}(e.localStore,new _5(e.yt),e.documents,e.Mu.id),s=e.$u(e.documents);for(const c of e.queries)yield o3(e.localStore,c,s.get(c.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function n0(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class Uc{constructor(e){this.key=e}}class C5{constructor(e){this.key=e}}class r0{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=d(),this.mutatedKeys=d(),this.Gu=a4(e),this.Qu=new w4(this.Gu)}get ju(){return this.qu}Wu(e,t){const s=t?t.zu:new S3,c=t?t.Qu:this.Qu;let p=t?t.mutatedKeys:this.mutatedKeys,y=c,A=!1;const F="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,Z="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((re,ye)=>{const Ze=c.get(re),At=n2(this.query,ye)?ye:null,Vt=!!Ze&&this.mutatedKeys.has(Ze.key),Cn=!!At&&(At.hasLocalMutations||this.mutatedKeys.has(At.key)&&At.hasCommittedMutations);let Wn=!1;Ze&&At?Ze.data.isEqual(At.data)?Vt!==Cn&&(s.track({type:3,doc:At}),Wn=!0):this.Hu(Ze,At)||(s.track({type:2,doc:At}),Wn=!0,(F&&this.Gu(At,F)>0||Z&&this.Gu(At,Z)<0)&&(A=!0)):!Ze&&At?(s.track({type:0,doc:At}),Wn=!0):Ze&&!At&&(s.track({type:1,doc:Ze}),Wn=!0,(F||Z)&&(A=!0)),Wn&&(At?(y=y.add(At),p=Cn?p.add(re):p.delete(re)):(y=y.delete(re),p=p.delete(re)))}),null!==this.query.limit)for(;y.size>this.query.limit;){const re="F"===this.query.limitType?y.last():y.first();y=y.delete(re.key),p=p.delete(re.key),s.track({type:1,doc:re})}return{Qu:y,zu:s,$i:A,mutatedKeys:p}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const c=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const p=e.zu.Eu();p.sort((Z,re)=>function(ye,Ze){const At=Vt=>{switch(Vt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return an()}};return At(ye)-At(Ze)}(Z.type,re.type)||this.Gu(Z.doc,re.doc)),this.Ju(s);const y=t?this.Yu():[],A=0===this.Ku.size&&this.current?1:0,F=A!==this.Uu;return this.Uu=A,0!==p.length||F?{snapshot:new o6(this.query,e.Qu,c,p,e.mutatedKeys,0===A,F,!1,!!s&&s.resumeToken.approximateByteSize()>0),Xu:y}:{Xu:y}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new S3,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=d(),this.Qu.forEach(s=>{this.Zu(s.key)&&(this.Ku=this.Ku.add(s.key))});const t=[];return e.forEach(s=>{this.Ku.has(s)||t.push(new C5(s))}),this.Ku.forEach(s=>{e.has(s)||t.push(new Uc(s))}),t}tc(e){this.qu=e.Hi,this.Ku=d();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return o6.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class w5{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class E5{constructor(e){this.key=e,this.nc=!1}}class L3{constructor(e,t,s,c,p,y){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=p,this.maxConcurrentLimboResolutions=y,this.sc={},this.ic=new zs(A=>o4(A),F2),this.rc=new Map,this.oc=new Set,this.uc=new Rr(nn.comparator),this.cc=new Map,this.ac=new k0,this.hc={},this.lc=new Map,this.fc=m4.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function I5(r,e){return K2.apply(this,arguments)}function K2(){return K2=(0,te.Z)(function*(r,e){const t=F3(r);let s,c;const p=t.ic.get(e);if(p)s=p.targetId,t.sharedClientState.addLocalQueryTarget(s),c=p.view.ec();else{const y=yield X4(t.localStore,k1(e));t.isPrimaryClient&&K0(t.remoteStore,y);const A=t.sharedClientState.addLocalQueryTarget(y.targetId);s=y.targetId,c=yield E4(t,e,s,"current"===A,y.resumeToken)}return c}),K2.apply(this,arguments)}function E4(r,e,t,s,c){return _o.apply(this,arguments)}function _o(){return _o=(0,te.Z)(function*(r,e,t,s,c){r._c=(ye,Ze,At)=>{return(Vt=(0,te.Z)(function*(Cn,Wn,v1,is){let Mi=Wn.view.Wu(v1);Mi.$i&&(Mi=yield mc(Cn.localStore,Wn.query,!1).then(({documents:Bi})=>Wn.view.Wu(Bi,Mi)));const ks=is&&is.targetChanges.get(Wn.targetId),zi=Wn.view.applyChanges(Mi,Cn.isPrimaryClient,ks);return il(Cn,Wn.targetId,zi.Xu),zi.snapshot}),function(Cn,Wn,v1,is){return Vt.apply(this,arguments)})(r,ye,Ze,At);var Vt};const p=yield mc(r.localStore,e,!0),y=new r0(e,p.Hi),A=y.Wu(p.documents),F=J.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,c),Z=y.applyChanges(A,r.isPrimaryClient,F);il(r,t,Z.Xu);const re=new w5(e,t,y);return r.ic.set(e,re),r.rc.has(t)?r.rc.get(t).push(e):r.rc.set(t,[e]),Z.snapshot}),_o.apply(this,arguments)}function I4(r,e){return a6.apply(this,arguments)}function a6(){return a6=(0,te.Z)(function*(r,e){const t=Yt(r),s=t.ic.get(e),c=t.rc.get(s.targetId);if(c.length>1)return t.rc.set(s.targetId,c.filter(p=>!F2(p,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield J4(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Y6(t.remoteStore,s.targetId),D4(t,s.targetId)}).catch(M2))):(D4(t,s.targetId),yield J4(t.localStore,s.targetId,!0))}),a6.apply(this,arguments)}function s0(){return s0=(0,te.Z)(function*(r,e,t){const s=ul(r);try{const c=yield function(p,y){const A=Yt(p),F=Vr.now(),Z=y.reduce((Ze,At)=>Ze.add(At.key),d());let re,ye;return A.persistence.runTransaction("Locally write mutations","readwrite",Ze=>{let At=ns(),Vt=d();return A.Gi.getEntries(Ze,Z).next(Cn=>{At=Cn,At.forEach((Wn,v1)=>{v1.isValidDocument()||(Vt=Vt.add(Wn))})}).next(()=>A.localDocuments.getOverlayedDocuments(Ze,At)).next(Cn=>{re=Cn;const Wn=[];for(const v1 of y){const is=Lc(v1,re.get(v1.key).overlayedDocument);null!=is&&Wn.push(new To(v1.key,is,O4(is.value.mapValue),Zi.exists(!0)))}return A.mutationQueue.addMutationBatch(Ze,F,Wn,y)}).next(Cn=>{ye=Cn;const Wn=Cn.applyToLocalDocumentSet(re,Vt);return A.documentOverlayCache.saveOverlays(Ze,Cn.batchId,Wn)})}).then(()=>({batchId:ye.batchId,changes:oc(re)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),function(p,y,A){let F=p.hc[p.currentUser.toKey()];F||(F=new Rr(Qn)),F=F.insert(y,A),p.hc[p.currentUser.toKey()]=F}(s,c.batchId,t),yield vc(s,c.changes),yield C4(s.remoteStore)}catch(c){const p=s6(c,"Failed to persist write");t.reject(p)}}),s0.apply(this,arguments)}function b4(r,e){return Bc.apply(this,arguments)}function Bc(){return Bc=(0,te.Z)(function*(r,e){const t=Yt(r);try{const s=yield function qu(r,e){const t=Yt(r),s=e.snapshotVersion;let c=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const y=t.Gi.newChangeBuffer({trackRemovals:!0});c=t.qi;const A=[];e.targetChanges.forEach((re,ye)=>{const Ze=c.get(ye);if(!Ze)return;A.push(t.Cs.removeMatchingKeys(p,re.removedDocuments,ye).next(()=>t.Cs.addMatchingKeys(p,re.addedDocuments,ye)));let At=Ze.withSequenceNumber(p.currentSequenceNumber);var Vt,Cn,Wn;e.targetMismatches.has(ye)?At=At.withResumeToken(je.EMPTY_BYTE_STRING,Ln.min()).withLastLimboFreeSnapshotVersion(Ln.min()):re.resumeToken.approximateByteSize()>0&&(At=At.withResumeToken(re.resumeToken,s)),c=c.insert(ye,At),Cn=At,Wn=re,(0===(Vt=Ze).resumeToken.approximateByteSize()||Cn.snapshotVersion.toMicroseconds()-Vt.snapshotVersion.toMicroseconds()>=3e8||Wn.addedDocuments.size+Wn.modifiedDocuments.size+Wn.removedDocuments.size>0)&&A.push(t.Cs.updateTargetData(p,At))});let F=ns(),Z=d();if(e.documentUpdates.forEach(re=>{e.resolvedLimboDocuments.has(re)&&A.push(t.persistence.referenceDelegate.updateLimboDocument(p,re))}),A.push(Yu(p,y,e.documentUpdates).next(re=>{F=re.Wi,Z=re.zi})),!s.isEqual(Ln.min())){const re=t.Cs.getLastRemoteSnapshotVersion(p).next(ye=>t.Cs.setTargetsMetadata(p,p.currentSequenceNumber,s));A.push(re)}return Xe.waitFor(A).next(()=>y.apply(p)).next(()=>t.localDocuments.getLocalViewOfDocuments(p,F,Z)).next(()=>F)}).then(p=>(t.qi=c,p))}(t.localStore,e);e.targetChanges.forEach((c,p)=>{const y=t.cc.get(p);y&&(fn(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?y.nc=!0:c.modifiedDocuments.size>0?fn(y.nc):c.removedDocuments.size>0&&(fn(y.nc),y.nc=!1))}),yield vc(t,s,e)}catch(s){yield M2(s)}}),Bc.apply(this,arguments)}function M4(r,e,t){const s=Yt(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const c=[];s.ic.forEach((p,y)=>{const A=y.view.bu(e);A.snapshot&&c.push(A.snapshot)}),function(p,y){const A=Yt(p);A.onlineState=y;let F=!1;A.queries.forEach((Z,re)=>{for(const ye of re.listeners)ye.bu(y)&&(F=!0)}),F&&J0(A)}(s.eventManager,e),c.length&&s.sc.Wo(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function c6(r,e,t){return jc.apply(this,arguments)}function jc(){return jc=(0,te.Z)(function*(r,e,t){const s=Yt(r);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.cc.get(e),p=c&&c.key;if(p){let y=new Rr(nn.comparator);y=y.insert(p,bi.newNoDocument(p,Ln.min()));const A=d().add(p),F=new G(Ln.min(),new Map,new fi(Qn),y,A);yield b4(s,F),s.uc=s.uc.remove(p),s.cc.delete(e),sl(s)}else yield J4(s.localStore,e,!1).then(()=>D4(s,e,t)).catch(M2)}),jc.apply(this,arguments)}function l6(r,e){return $c.apply(this,arguments)}function $c(){return $c=(0,te.Z)(function*(r,e){const t=Yt(r),s=e.batch.batchId;try{const c=yield function hh(r,e){const t=Yt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const c=e.batch.keys(),p=t.Gi.newChangeBuffer({trackRemovals:!0});return function(y,A,F,Z){const re=F.batch,ye=re.keys();let Ze=Xe.resolve();return ye.forEach(At=>{Ze=Ze.next(()=>Z.getEntry(A,At)).next(Vt=>{const Cn=F.docVersions.get(At);fn(null!==Cn),Vt.version.compareTo(Cn)<0&&(re.applyToRemoteDocument(Vt,F),Vt.isValidDocument()&&(Vt.setReadTime(F.commitVersion),Z.addEntry(Vt)))})}),Ze.next(()=>y.mutationQueue.removeMutationBatch(A,re))}(t,s,e,p).next(()=>p.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(y){let A=d();for(let F=0;F<y.mutationResults.length;++F)y.mutationResults[F].transformResults.length>0&&(A=A.add(y.batch.mutations[F].key));return A}(e))).next(()=>t.localDocuments.getDocuments(s,c))})}(t.localStore,e);rl(t,s,null),nl(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield vc(t,c)}catch(c){yield M2(c)}}),$c.apply(this,arguments)}function S4(r,e,t){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,te.Z)(function*(r,e,t){const s=Yt(r);try{const c=yield function(p,y){const A=Yt(p);return A.persistence.runTransaction("Reject batch","readwrite-primary",F=>{let Z;return A.mutationQueue.lookupMutationBatch(F,y).next(re=>(fn(null!==re),Z=re.keys(),A.mutationQueue.removeMutationBatch(F,re))).next(()=>A.mutationQueue.performConsistencyCheck(F)).next(()=>A.documentOverlayCache.removeOverlaysForBatchId(F,Z,y)).next(()=>A.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(F,Z)).next(()=>A.localDocuments.getDocuments(F,Z))})}(s.localStore,e);rl(s,e,t),nl(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield vc(s,c)}catch(c){yield M2(c)}}),Wc.apply(this,arguments)}function tl(){return tl=(0,te.Z)(function*(r,e){const t=Yt(r);pa(t.remoteStore)||Rt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(p){const y=Yt(p);return y.persistence.runTransaction("Get highest unacknowledged batch id","readonly",A=>y.mutationQueue.getHighestUnacknowledgedBatchId(A))}(t.localStore);if(-1===s)return void e.resolve();const c=t.lc.get(s)||[];c.push(e),t.lc.set(s,c)}catch(s){const c=s6(s,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),tl.apply(this,arguments)}function nl(r,e){(r.lc.get(e)||[]).forEach(t=>{t.resolve()}),r.lc.delete(e)}function rl(r,e,t){const s=Yt(r);let c=s.hc[s.currentUser.toKey()];if(c){const p=c.get(e);p&&(t?p.reject(t):p.resolve(),c=c.remove(e)),s.hc[s.currentUser.toKey()]=c}}function D4(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.rc.get(e))r.ic.delete(s),t&&r.sc.wc(s,t);r.rc.delete(e),r.isPrimaryClient&&r.ac.ls(e).forEach(s=>{r.ac.containsKey(s)||z3(r,s)})}function z3(r,e){r.oc.delete(e.path.canonicalString());const t=r.uc.get(e);null!==t&&(Y6(r.remoteStore,t),r.uc=r.uc.remove(e),r.cc.delete(t),sl(r))}function il(r,e,t){for(const s of t)s instanceof Uc?(r.ac.addReference(s.key,e),a8(r,s)):s instanceof C5?(Rt("SyncEngine","Document no longer in limbo: "+s.key),r.ac.removeReference(s.key,e),r.ac.containsKey(s.key)||z3(r,s.key)):an()}function a8(r,e){const t=e.key,s=t.path.canonicalString();r.uc.get(t)||r.oc.has(s)||(Rt("SyncEngine","New document in limbo: "+t),r.oc.add(s),sl(r))}function sl(r){for(;r.oc.size>0&&r.uc.size<r.maxConcurrentLimboResolutions;){const e=r.oc.values().next().value;r.oc.delete(e);const t=new nn(ar.fromString(e)),s=r.fc.next();r.cc.set(s,new E5(t)),r.uc=r.uc.insert(t,s),K0(r.remoteStore,new l(k1(jo(t.path)),s,2,D.at))}}function vc(r,e,t){return R3.apply(this,arguments)}function R3(){return R3=(0,te.Z)(function*(r,e,t){const s=Yt(r),c=[],p=[],y=[];var A;s.ic.isEmpty()||(s.ic.forEach((A,F)=>{y.push(s._c(F,e,t).then(Z=>{if((Z||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(F.targetId,Z?.fromCache?"not-current":"current"),Z){c.push(Z);const re=O0.Ci(F.targetId,Z);p.push(re)}}))}),yield Promise.all(y),s.sc.Wo(c),yield(A=(0,te.Z)(function*(F,Z){const re=Yt(F);try{yield re.persistence.runTransaction("notifyLocalViewChanges","readwrite",ye=>Xe.forEach(Z,Ze=>Xe.forEach(Ze.Si,At=>re.persistence.referenceDelegate.addReference(ye,Ze.targetId,At)).next(()=>Xe.forEach(Ze.Di,At=>re.persistence.referenceDelegate.removeReference(ye,Ze.targetId,At)))))}catch(ye){if(!So(ye))throw ye;Rt("LocalStore","Failed to update sequence numbers: "+ye)}for(const ye of Z){const Ze=ye.targetId;if(!ye.fromCache){const At=re.qi.get(Ze),Cn=At.withLastLimboFreeSnapshotVersion(At.snapshotVersion);re.qi=re.qi.insert(Ze,Cn)}}}),function(F,Z){return A.apply(this,arguments)})(s.localStore,p))}),R3.apply(this,arguments)}function c8(r,e){return P3.apply(this,arguments)}function P3(){return P3=(0,te.Z)(function*(r,e){const t=Yt(r);if(!t.currentUser.isEqual(e)){Rt("SyncEngine","User change. New user:",e.toKey());const s=yield V0(t.localStore,e);t.currentUser=e,(c=t).lc.forEach(y=>{y.forEach(A=>{A.reject(new wt(Ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.lc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield vc(t,s.ji)}var c}),P3.apply(this,arguments)}function l8(r,e){const t=Yt(r),s=t.cc.get(e);if(s&&s.nc)return d().add(s.key);{let c=d();const p=t.rc.get(e);if(!p)return c;for(const y of p){const A=t.ic.get(y);c=c.unionWith(A.view.ju)}return c}}function k3(r,e){return o0.apply(this,arguments)}function o0(){return o0=(0,te.Z)(function*(r,e){const t=Yt(r),s=yield mc(t.localStore,e.query,!0),c=e.view.tc(s);return t.isPrimaryClient&&il(t,e.targetId,c.Xu),c}),o0.apply(this,arguments)}function b5(r,e){return u6.apply(this,arguments)}function u6(){return u6=(0,te.Z)(function*(r,e){const t=Yt(r);return t6(t.localStore,e).then(s=>vc(t,s))}),u6.apply(this,arguments)}function ol(r,e,t,s){return a0.apply(this,arguments)}function a0(){return a0=(0,te.Z)(function*(r,e,t,s){const c=Yt(r),p=yield function(y,A){const F=Yt(y),Z=Yt(F.mutationQueue);return F.persistence.runTransaction("Lookup mutation documents","readonly",re=>Z.Tn(re,A).next(ye=>ye?F.localDocuments.getDocuments(re,ye):Xe.resolve(null)))}(c.localStore,e);var A;null!==p?("pending"===t?yield C4(c.remoteStore):"acknowledged"===t||"rejected"===t?(rl(c,e,s||null),nl(c,e),A=e,Yt(Yt(c.localStore).mutationQueue).An(A)):an(),yield vc(c,p)):Rt("SyncEngine","Cannot apply mutation batch with id: "+e)}),a0.apply(this,arguments)}function c0(){return c0=(0,te.Z)(function*(r,e){const t=Yt(r);if(F3(t),ul(t),!0===e&&!0!==t.dc){const s=t.sharedClientState.getAllActiveQueryTargets(),c=yield al(t,s.toArray());t.dc=!0,yield I3(t.remoteStore,!0);for(const p of c)K0(t.remoteStore,p)}else if(!1===e&&!1!==t.dc){const s=[];let c=Promise.resolve();t.rc.forEach((p,y)=>{t.sharedClientState.isLocalQueryTarget(y)?s.push(y):c=c.then(()=>(D4(t,y),J4(t.localStore,y,!0))),Y6(t.remoteStore,y)}),yield c,yield al(t,s),function(p){const y=Yt(p);y.cc.forEach((A,F)=>{Y6(y.remoteStore,F)}),y.ac.fs(),y.cc=new Map,y.uc=new Rr(nn.comparator)}(t),t.dc=!1,yield I3(t.remoteStore,!1)}}),c0.apply(this,arguments)}function al(r,e,t){return l0.apply(this,arguments)}function l0(){return l0=(0,te.Z)(function*(r,e,t){const s=Yt(r),c=[],p=[];for(const y of e){let A;const F=s.rc.get(y);if(F&&0!==F.length){A=yield X4(s.localStore,k1(F[0]));for(const Z of F){const re=s.ic.get(Z),ye=yield k3(s,re);ye.snapshot&&p.push(ye.snapshot)}}else{const Z=yield H0(s.localStore,y);A=yield X4(s.localStore,Z),yield E4(s,O3(Z),y,!1,A.resumeToken)}c.push(A)}return s.sc.Wo(p),c}),l0.apply(this,arguments)}function O3(r){return xc(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function V3(r){const e=Yt(r);return Yt(Yt(e.localStore).persistence).vi()}function u8(r,e,t,s){return cl.apply(this,arguments)}function cl(){return cl=(0,te.Z)(function*(r,e,t,s){const c=Yt(r);if(c.dc)return void Rt("SyncEngine","Ignoring unexpected query state notification.");const p=c.rc.get(e);if(p&&p.length>0)switch(t){case"current":case"not-current":{const y=yield t6(c.localStore,Sa(p[0])),A=G.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,je.EMPTY_BYTE_STRING);yield vc(c,y,A);break}case"rejected":yield J4(c.localStore,e,!0),D4(c,e,s);break;default:an()}}),cl.apply(this,arguments)}function H3(r,e,t){return ll.apply(this,arguments)}function ll(){return ll=(0,te.Z)(function*(r,e,t){const s=F3(r);if(s.dc){for(const c of e){if(s.rc.has(c)){Rt("SyncEngine","Adding an already active target "+c);continue}const p=yield H0(s.localStore,c),y=yield X4(s.localStore,p);yield E4(s,O3(p),y.targetId,!1,y.resumeToken),K0(s.remoteStore,y)}for(const c of t)s.rc.has(c)&&(yield J4(s.localStore,c,!1).then(()=>{Y6(s.remoteStore,c),D4(s,c)}).catch(M2))}}),ll.apply(this,arguments)}function F3(r){const e=Yt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=b4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c6.bind(null,e),e.sc.Wo=g5.bind(null,e.eventManager),e.sc.wc=v5.bind(null,e.eventManager),e}function ul(r){const e=Yt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=S4.bind(null,e),e}class U3{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,te.Z)(function*(){t.yt=Z6(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return s5(this.persistence,new r3,e.initialUser,this.yt)}yc(e){return new V6(H6.Bs,this.yt)}gc(e){return new Xu}terminate(){var e=this;return(0,te.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class B3 extends U3{constructor(e,t,s){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,te.Z)(function*(){yield t().call(s,e),yield s.Ac.initialize(s,e),yield ul(s.Ac.syncEngine),yield C4(s.Ac.remoteStore),yield s.persistence.li(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return s5(this.persistence,new r3,e.initialUser,this.yt)}Tc(e,t){return new Bu(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const s=new I(t,this.persistence);return new Qc(e.asyncQueue,s)}yc(e){const t=n3(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?c2.withCacheSize(this.cacheSizeBytes):c2.DEFAULT;return new t3(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Z0(),G6(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Xu}}class S5 extends B3{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,te.Z)(function*(){yield t().call(s,e);const c=s.Ac.syncEngine;s.sharedClientState instanceof G0&&(s.sharedClientState.syncEngine={Fr:ol.bind(null,c),$r:u8.bind(null,c),Br:H3.bind(null,c),vi:V3.bind(null,c),Mr:b5.bind(null,c)},yield s.sharedClientState.start()),yield s.persistence.li(function(){var p=(0,te.Z)(function*(y){yield function M5(r,e){return c0.apply(this,arguments)}(s.Ac.syncEngine,y),s.gcScheduler&&(y&&!s.gcScheduler.started?s.gcScheduler.start():y||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(y&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():y||s.indexBackfillerScheduler.stop())});return function(y){return p.apply(this,arguments)}}())})()}gc(e){const t=Z0();if(!G0.C(t))throw new wt(Ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=n3(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new G0(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class hl{initialize(e,t){var s=this;return(0,te.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=c=>M4(s.syncEngine,c,1),s.remoteStore.remoteSyncer.handleCredentialChange=c8.bind(null,s.syncEngine),yield I3(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new m5}createDatastore(e){const t=Z6(e.databaseInfo.databaseId),s=new fh(e.databaseInfo);return new l5(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,c=e.asyncQueue,p=A=>M4(this.syncEngine,A,0),y=_2.C()?new _2:new o5,new h5(t,s,c,p,y);var t,s,c,p,y}createSyncEngine(e,t){return function(s,c,p,y,A,F,Z){const re=new L3(s,c,p,y,A,F);return Z&&(re.dc=!0),re}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,te.Z)(function*(t){const s=Yt(t);Rt("RemoteStore","RemoteStore shutting down."),s._u.add(5),yield l2(s),s.mu.shutdown(),s.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function fl(r,e,t){if(!t)throw new wt(Ye.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function dl(r,e,t,s){if(!0===e&&!0===s)throw new wt(Ye.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function pl(r){if(!nn.isDocumentKey(r))throw new wt(Ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ml(r){if(nn.isDocumentKey(r))throw new wt(Ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function u0(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":an()}function Xr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new wt(Ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=u0(r);throw new wt(Ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function j3(r,e){if(e<=0)throw new wt(Ye.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}const $3=new Map;class W3{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new wt(Ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new wt(Ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,dl("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class h6{constructor(e,t,s,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new wt(Ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new wt(Ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W3(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new P1;switch(t.type){case"gapi":return new Vo(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new wt(Ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$3.get(e);t&&(Rt("ComponentProvider","Removing Datastore"),$3.delete(e),t.terminate())}(this),Promise.resolve()}}class r1{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ka(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new r1(this.firestore,e,this._key)}}class V1{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new V1(this.firestore,e,this._query)}}class ka extends V1{constructor(e,t,s){super(e,t,jo(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new r1(this.firestore,null,new nn(e))}withConverter(e){return new ka(this.firestore,e,this._path)}}function f8(r,e,...t){if(r=(0,On.m9)(r),fl("collection","path",e),r instanceof h6){const s=ar.fromString(e,...t);return ml(s),new ka(r,null,s)}{if(!(r instanceof r1||r instanceof ka))throw new wt(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ar.fromString(e,...t));return ml(s),new ka(r.firestore,null,s)}}function Oa(r,e,...t){if(r=(0,On.m9)(r),1===arguments.length&&(e=Ho.R()),fl("doc","path",e),r instanceof h6){const s=ar.fromString(e,...t);return pl(s),new r1(r,null,new nn(s))}{if(!(r instanceof r1||r instanceof ka))throw new wt(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ar.fromString(e,...t));return pl(s),new r1(r.firestore,r instanceof ka?r.converter:null,new nn(s))}}function gl(r,e){return r=(0,On.m9)(r),e=(0,On.m9)(e),(r instanceof r1||r instanceof ka)&&(e instanceof r1||e instanceof ka)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function K3(r,e){return r=(0,On.m9)(r),e=(0,On.m9)(e),r instanceof V1&&e instanceof V1&&r.firestore===e.firestore&&F2(r._query,e._query)&&r.converter===e.converter}function vl(r,e=10240){let t=0;return{read:()=>(0,te.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,te.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class q3{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Ui("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ph{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new t1,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(s=>{s&&s.Ou()?this.metadata.resolve(s.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.ku)}`))},s=>this.metadata.reject(s))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,te.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,te.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,te.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const s=e.vc.decode(t),c=Number(s);isNaN(c)&&e.Dc(`length string (${s}) is not valid number`);const p=yield e.Cc(c);return new y5(JSON.parse(p),t.length+c)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,te.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Cc(e){var t=this;return(0,te.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const s=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,te.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class T5{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,te.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new wt(Ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(c=(0,te.Z)(function*(p,y){const A=Yt(p),F=B4(A.yt)+"/documents",Z={documents:y.map(At=>La(A.yt,At))},re=yield A._o("BatchGetDocuments",F,Z,y.length),ye=new Map;re.forEach(At=>{const Vt=function Vl(r,e){return"found"in e?function(t,s){fn(!!s.found);const c=L2(t,s.found.name),p=u1(s.found.updateTime),y=s.found.createTime?u1(s.found.createTime):Ln.min(),A=new Li({mapValue:{fields:s.found.fields}});return bi.newFoundDocument(c,p,y,A)}(r,e):"missing"in e?function(t,s){fn(!!s.missing),fn(!!s.readTime);const c=L2(t,s.missing),p=u1(s.readTime);return bi.newNoDocument(c,p)}(r,e):an()}(A.yt,At);ye.set(Vt.key.toString(),Vt)});const Ze=[];return y.forEach(At=>{const Vt=ye.get(At.toString());fn(!!Vt),Ze.push(Vt)}),Ze}),function(p,y){return c.apply(this,arguments)})(t.datastore,e);var c;return s.forEach(c=>t.recordVersion(c)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new x2(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,te.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,c)=>{const p=nn.fromPath(c);e.mutations.push(new N2(p,e.precondition(p)))}),yield(s=(0,te.Z)(function*(c,p){const y=Yt(c),A=B4(y.yt)+"/documents",F={writes:p.map(Z=>j4(y.yt,Z))};yield y.ao("Commit",A,F)}),function(c,p){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw an();t=Ln.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new wt(Ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ln.min())?Zi.exists(!1):Zi.updateTime(t):Zi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ln.min()))throw new wt(Ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zi.updateTime(t)}return Zi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Js{constructor(e,t,s,c,p){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=c,this.deferred=p,this.kc=s.maxAttempts,this.xo=new l3(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,te.Z)(function*(){const t=new T5(e.datastore),s=e.Mc(t);s&&s.then(c=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(c)}).catch(p=>{e.Fc(p)}))}).catch(c=>{e.Fc(c)})}))}Mc(e){try{const t=this.updateFunction(e);return!k(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!zc(t)}return!1}}class p8{constructor(e,t,s,c){var p=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=c,this.user=ii.UNAUTHENTICATED,this.clientId=Ho.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var y=(0,te.Z)(function*(A){Rt("FirestoreClient","Received user=",A.uid),yield p.authCredentialListener(A),p.user=A});return function(A){return y.apply(this,arguments)}}()),this.appCheckCredentials.start(s,y=>(Rt("FirestoreClient","Received new app check token=",y),this.appCheckCredentialListener(y,this.user)))}getConfiguration(){var e=this;return(0,te.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new wt(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new t1;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,te.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const c=s6(s,"Failed to shutdown persistence");t.reject(c)}})),t.promise}}function m8(r,e){return Y3.apply(this,arguments)}function Y3(){return Y3=(0,te.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),Rt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var c=(0,te.Z)(function*(p){s.isEqual(p)||(yield V0(e.localStore,p),s=p)});return function(p){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r.offlineComponents=e}),Y3.apply(this,arguments)}function Q3(r,e){return X3.apply(this,arguments)}function X3(){return X3=(0,te.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield yl(r);Rt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(c=>p5(e.remoteStore,c)),r.setAppCheckTokenChangeListener((c,p)=>p5(e.remoteStore,p)),r.onlineComponents=e}),X3.apply(this,arguments)}function yl(r){return _l.apply(this,arguments)}function _l(){return _l=(0,te.Z)(function*(r){return r.offlineComponents||(Rt("FirestoreClient","Using default OfflineComponentProvider"),yield m8(r,new U3)),r.offlineComponents}),_l.apply(this,arguments)}function yc(r){return J3.apply(this,arguments)}function J3(){return J3=(0,te.Z)(function*(r){return r.onlineComponents||(Rt("FirestoreClient","Using default OnlineComponentProvider"),yield Q3(r,new hl)),r.onlineComponents}),J3.apply(this,arguments)}function g8(r){return yl(r).then(e=>e.persistence)}function h0(r){return yl(r).then(e=>e.localStore)}function eu(r){return yc(r).then(e=>e.remoteStore)}function Cl(r){return yc(r).then(e=>e.syncEngine)}function Gc(r){return f0.apply(this,arguments)}function f0(){return f0=(0,te.Z)(function*(r){const e=yield yc(r),t=e.eventManager;return t.onListen=I5.bind(null,e.syncEngine),t.onUnlisten=I4.bind(null,e.syncEngine),t}),f0.apply(this,arguments)}function ma(r,e,t={}){const s=new t1;return r.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function(c,p,y,A,F){const Z=new q3({next:ye=>{p.enqueueAndForget(()=>x3(c,re));const Ze=ye.docs.has(y);!Ze&&ye.fromCache?F.reject(new wt(Ye.UNAVAILABLE,"Failed to get document because the client is offline.")):Ze&&ye.fromCache&&A&&"server"===A.source?F.reject(new wt(Ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):F.resolve(ye)},error:ye=>F.reject(ye)}),re=new el(jo(y.path),Z,{includeMetadataChanges:!0,Nu:!0});return T3(c,re)}(yield Gc(r),r.asyncQueue,e,t,s)})),s.promise}function Y2(r,e,t={}){const s=new t1;return r.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function(c,p,y,A,F){const Z=new q3({next:ye=>{p.enqueueAndForget(()=>x3(c,re)),ye.fromCache&&"server"===A.source?F.reject(new wt(Ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):F.resolve(ye)},error:ye=>F.reject(ye)}),re=new el(y,Z,{includeMetadataChanges:!0,Nu:!0});return T3(c,re)}(yield Gc(r),r.asyncQueue,e,t,s)})),s.promise}class L5{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new l3(this,"async_queue_retry"),this.Wc=()=>{const t=G6();t&&Rt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=G6();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=G6();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new t1;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,te.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!So(t))throw t;Rt("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(s=>{throw this.Kc=s,this.Gc=!1,Ui("INTERNAL UNHANDLED ERROR: ",function(p){let y=p.message||"";return p.stack&&(y=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),y}(s)),s}).then(s=>(this.Gc=!1,s))));return this.Bc=t,t}enqueueAfterDelay(e,t,s){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const c=M3.createAndSchedule(this,e,t,s,p=>this.Yc(p));return this.Uc.push(c),c}zc(){this.Kc&&an()}verifyOperationInProgress(){}Xc(){var e=this;return(0,te.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function tu(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const c of["next","error","complete"])if(c in s&&"function"==typeof s[c])return!0;return!1}(r)}class z5{constructor(){this._progressObserver={},this._taskCompletionResolver=new t1,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ki extends h6{constructor(e,t,s,c){super(e,t,s,c),this.type="firestore",this._queue=new L5,this._persistenceKey=c?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ru(this),this._firestoreClient.terminate()}}function Cs(r){return r._firestoreClient||ru(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function ru(r){var e;const t=r._freezeSettings(),s=(p=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new C(r._databaseId,p,r._persistenceKey,(A=t).host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,A.useFetchStreams));var p,A;r._firestoreClient=new p8(r._authCredentials,r._appCheckCredentials,r._queue,s)}function w8(r,e,t){const s=new t1;return r.asyncQueue.enqueue((0,te.Z)(function*(){try{yield m8(r,t),yield Q3(r,e),s.resolve()}catch(c){const p=c;if(!("FirebaseError"===(y=p).name?y.code===Ye.FAILED_PRECONDITION||y.code===Ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&y instanceof DOMException)||22===y.code||20===y.code||11===y.code))throw p;I1("Error enabling offline persistence. Falling back to persistence disabled: "+p),s.reject(p)}var y})).then(()=>s.promise)}function su(r){if(r._initialized||r._terminated)throw new wt(Ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class va{constructor(e){this._byteString=e}static fromBase64String(e){try{return new va(je.fromBase64String(e))}catch(t){throw new wt(Ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new va(je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ha{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new wt(Ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zc{constructor(e){this._methodName=e}}class d0{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new wt(Ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new wt(Ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qn(this._lat,e._lat)||Qn(this._long,e._long)}}const O5=/^__.*__$/;class V5{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new To(e,this.data,this.fieldMask,t,this.fieldTransforms):new g2(e,this.data,t,this.fieldTransforms)}}class S8{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new To(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function D8(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw an()}}class Il{constructor(e,t,s,c,p,y){this.settings=e,this.databaseId=t,this.yt=s,this.ignoreUndefinedProperties=c,void 0===p&&this.na(),this.fieldTransforms=p||[],this.fieldMask=y||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Il(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ia({path:s,oa:!1});return c.ua(e),c}ca(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ia({path:s,oa:!1});return c.na(),c}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return g0(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(D8(this.sa)&&O5.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class H5{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=s||Z6(e)}da(e,t,s,c=!1){return new Il({sa:e,methodName:t,fa:s,path:Ii.emptyPath(),oa:!1,la:c},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function T4(r){const e=r._freezeSettings(),t=Z6(r._databaseId);return new H5(r._databaseId,!!e.ignoreUndefinedProperties,t)}function bl(r,e,t,s,c,p={}){const y=r.da(p.merge||p.mergeFields?2:0,e,t,c);Ml("Data must be an object, but it was:",y,s);const A=lu(s,y);let F,Z;if(p.merge)F=new Qs(y.fieldMask),Z=y.fieldTransforms;else if(p.mergeFields){const re=[];for(const ye of p.mergeFields){const Ze=Sl(e,ye,t);if(!y.contains(Ze))throw new wt(Ye.INVALID_ARGUMENT,`Field '${Ze}' is specified in your field mask but missing from your input data.`);hu(re,Ze)||re.push(Ze)}F=new Qs(re),Z=y.fieldTransforms.filter(ye=>F.covers(ye.field))}else F=null,Z=y.fieldTransforms;return new V5(new Li(A),F,Z)}class p0 extends Zc{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof p0}}function T8(r,e,t){return new Il({sa:3,fa:e.settings.fa,methodName:r._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class ou extends Zc{_toFieldTransform(e){return new $2(e.path,new B2)}isEqual(e){return e instanceof ou}}class F5 extends Zc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=T8(this,e,!0),s=this._a.map(p=>Kc(p,t)),c=new W1(s);return new $2(e.path,c)}isEqual(e){return this===e}}class U5 extends Zc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=T8(this,e,!0),s=this._a.map(p=>Kc(p,t)),c=new yo(s);return new $2(e.path,c)}isEqual(e){return this===e}}class B5 extends Zc{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new G1(e.yt,Nc(e.yt,this.wa));return new $2(e.path,t)}isEqual(e){return this===e}}function au(r,e,t,s){const c=r.da(1,e,t);Ml("Data must be an object, but it was:",c,s);const p=[],y=Li.empty();_(s,(F,Z)=>{const re=m0(e,F,t);Z=(0,On.m9)(Z);const ye=c.ca(re);if(Z instanceof p0)p.push(re);else{const Ze=Kc(Z,ye);null!=Ze&&(p.push(re),y.set(re,Ze))}});const A=new Qs(p);return new S8(y,A,c.fieldTransforms)}function cu(r,e,t,s,c,p){const y=r.da(1,e,t),A=[Sl(e,s,t)],F=[c];if(p.length%2!=0)throw new wt(Ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ze=0;Ze<p.length;Ze+=2)A.push(Sl(e,p[Ze])),F.push(p[Ze+1]);const Z=[],re=Li.empty();for(let Ze=A.length-1;Ze>=0;--Ze)if(!hu(Z,A[Ze])){const At=A[Ze];let Vt=F[Ze];Vt=(0,On.m9)(Vt);const Cn=y.ca(At);if(Vt instanceof p0)Z.push(At);else{const Wn=Kc(Vt,Cn);null!=Wn&&(Z.push(At),re.set(At,Wn))}}const ye=new Qs(Z);return new S8(re,ye,y.fieldTransforms)}function A8(r,e,t,s=!1){return Kc(t,r.da(s?4:3,e))}function Kc(r,e){if(uu(r=(0,On.m9)(r)))return Ml("Unsupported field value:",e,r),lu(r,e);if(r instanceof Zc)return function(t,s){if(!D8(s.sa))throw s.ha(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ha(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(s);c&&s.fieldTransforms.push(c)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,s){const c=[];let p=0;for(const y of t){let A=Kc(y,s.aa(p));null==A&&(A={nullValue:"NULL_VALUE"}),c.push(A),p++}return{arrayValue:{values:c}}}(r,e)}return function(t,s){if(null===(t=(0,On.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Nc(s.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const c=Vr.fromDate(t);return{timestampValue:Xs(s.yt,c)}}if(t instanceof Vr){const c=new Vr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Xs(s.yt,c)}}if(t instanceof d0)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof va)return{bytesValue:ua(s.yt,t._byteString)};if(t instanceof r1){const c=s.databaseId,p=t.firestore._databaseId;if(!p.isEqual(c))throw s.ha(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:uc(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.ha(`Unsupported field value: ${u0(t)}`)}(r,e)}function lu(r,e){const t={};return M(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_(r,(s,c)=>{const p=Kc(c,e.ra(s));null!=p&&(t[s]=p)}),{mapValue:{fields:t}}}function uu(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof Vr||r instanceof d0||r instanceof va||r instanceof r1||r instanceof Zc)}function Ml(r,e,t){if(!uu(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=u0(t);throw e.ha("an object"===s?r+" a custom object":r+" "+s)}var s}function Sl(r,e,t){if((e=(0,On.m9)(e))instanceof Ha)return e._internalPath;if("string"==typeof e)return m0(r,e);throw g0("Field path arguments must be of type string or ",r,!1,void 0,t)}const x8=new RegExp("[~\\*/\\[\\]]");function m0(r,e,t){if(e.search(x8)>=0)throw g0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Ha(...e.split("."))._internalPath}catch{throw g0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function g0(r,e,t,s,c){const p=s&&!s.isEmpty(),y=void 0!==c;let A=`Function ${e}() called with invalid data`;t&&(A+=" (via `toFirestore()`)"),A+=". ";let F="";return(p||y)&&(F+=" (found",p&&(F+=` in field ${s}`),y&&(F+=` in document ${c}`),F+=")"),new wt(Ye.INVALID_ARGUMENT,A+r+F)}function hu(r,e){return r.some(t=>t.isEqual(e))}class A4{constructor(e,t,s,c,p){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new r1(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new N8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Fa("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class N8 extends A4{data(){return super.data()}}function Fa(r,e){return"string"==typeof e?m0(r,e):e instanceof Ha?e._internalPath:e._delegate._internalPath}function L8(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new wt(Ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fu{}class Ua extends fu{}function x4(r,e,...t){let s=[];e instanceof fu&&s.push(e),s=s.concat(t),function(c){const p=c.filter(A=>A instanceof L4).length,y=c.filter(A=>A instanceof N4).length;if(p>1||p>0&&y>0)throw new wt(Ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const c of s)r=c._apply(r);return r}class N4 extends Ua{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new N4(e,t,s)}_apply(e){const t=this._parse(e);return mu(e._query,t),new V1(e.firestore,e.converter,s4(e._query,t))}_parse(e){const t=T4(e.firestore);return function(c,p,y,A,F,Z,re){let ye;if(F.isKeyField()){if("array-contains"===Z||"array-contains-any"===Z)throw new wt(Ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Z}' queries on documentId().`);if("in"===Z||"not-in"===Z){pu(re,Z);const Ze=[];for(const At of re)Ze.push(R8(A,c,At));ye={arrayValue:{values:Ze}}}else ye=R8(A,c,re)}else"in"!==Z&&"not-in"!==Z&&"array-contains-any"!==Z||pu(re,Z),ye=A8(y,"where",re,"in"===Z||"not-in"===Z);return yr.create(F,Z,ye)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class L4 extends fu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new L4(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Sr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,c){let p=s;const y=c.getFlattenedFilters();for(const A of y)mu(p,A),p=s4(p,A)}(e._query,t),new V1(e.firestore,e.converter,s4(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Xn extends Ua{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Xn(e,t)}_apply(e){const t=function(s,c,p){if(null!==s.startAt)throw new wt(Ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new wt(Ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const y=new V2(c,p);return function(A,F){if(null===Qa(A)){const Z=ra(A);null!==Z&&gu(0,Z,F.field)}}(s,y),y}(e._query,this._field,this._direction);return new V1(e.firestore,e.converter,function(s,c){const p=s.explicitOrderBy.concat([c]);return new go(s.path,s.collectionGroup,p,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Dl extends Ua{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Dl(e,t,s)}_apply(e){return new V1(e.firestore,e.converter,sa(e._query,this._limit,this._limitType))}}class Tl extends Ua{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Tl(e,t,s)}_apply(e){const t=du(e,this.type,this._docOrFields,this._inclusive);return new V1(e.firestore,e.converter,(c=t,new go((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,c,s.endAt)));var s,c}}class S1 extends Ua{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new S1(e,t,s)}_apply(e){const t=du(e,this.type,this._docOrFields,this._inclusive);return new V1(e.firestore,e.converter,(c=t,new go((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,c)));var s,c}}function du(r,e,t,s){if(t[0]=(0,On.m9)(t[0]),t[0]instanceof A4)return function(c,p,y,A,F){if(!A)throw new wt(Ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${y}().`);const Z=[];for(const re of t2(c))if(re.field.isKeyField())Z.push(fo(p,A.key));else{const ye=A.data.field(re.field);if(Sn(ye))throw new wt(Ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+re.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ye){const Ze=re.field.canonicalString();throw new wt(Ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ze}' (used as the orderBy) does not exist.`)}Z.push(ye)}return new T2(Z,F)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const c=T4(r.firestore);return function(p,y,A,F,Z,re){const ye=p.explicitOrderBy;if(Z.length>ye.length)throw new wt(Ye.INVALID_ARGUMENT,`Too many arguments provided to ${F}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ze=[];for(let At=0;At<Z.length;At++){const Vt=Z[At];if(ye[At].field.isKeyField()){if("string"!=typeof Vt)throw new wt(Ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${F}(), but got a ${typeof Vt}`);if(!ia(p)&&-1!==Vt.indexOf("/"))throw new wt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${F}() must be a plain document ID, but '${Vt}' contains a slash.`);const Cn=p.path.child(ar.fromString(Vt));if(!nn.isDocumentKey(Cn))throw new wt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${F}() must result in a valid document path, but '${Cn}' is not because it contains an odd number of segments.`);const Wn=new nn(Cn);Ze.push(fo(y,Wn))}else{const Cn=A8(A,F,Vt);Ze.push(Cn)}}return new T2(Ze,re)}(r._query,r.firestore._databaseId,c,e,t,s)}}function R8(r,e,t){if("string"==typeof(t=(0,On.m9)(t))){if(""===t)throw new wt(Ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ia(e)&&-1!==t.indexOf("/"))throw new wt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ar.fromString(t));if(!nn.isDocumentKey(s))throw new wt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return fo(r,new nn(s))}if(t instanceof r1)return fo(r,t._key);throw new wt(Ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${u0(t)}.`)}function pu(r,e){if(!Array.isArray(r)||0===r.length)throw new wt(Ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(r.length>10)throw new wt(Ye.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function mu(r,e){if(e.isInequality()){const s=ra(r),c=e.field;if(null!==s&&!s.isEqual(c))throw new wt(Ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${c.toString()}'`);const p=Qa(r);null!==p&&gu(0,c,p)}const t=function(s,c){for(const p of s)for(const y of p.getFlattenedFilters())if(c.indexOf(y.op)>=0)return y.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new wt(Ye.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function gu(r,e,t){if(!t.isEqual(e))throw new wt(Ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class yu{convertValue(e,t="none"){switch(ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw an()}}convertObject(e,t){const s={};return _(e.fields,(c,p)=>{s[c]=this.convertValue(p,t)}),s}convertGeoPoint(e){return new d0(Bt(e.latitude),Bt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=$1(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(hi(e));default:return null}}convertTimestamp(e){const t=on(e);return new Vr(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ar.fromString(e);fn(M6(s));const c=new N(s.get(1),s.get(3)),p=new nn(s.popFirst(5));return c.isEqual(t)||Ui(`Document ${p} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),p}}function Nl(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class G5 extends yu{constructor(e){super(),this.firestore=e}convertBytes(e){return new va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new r1(this.firestore,null,t)}}class ya{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _c extends A4{constructor(e,t,s,c,p,y){super(e,t,s,c,y),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new v0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Fa("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class v0 extends _c{data(e={}){return super.data(e)}}class qc{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new ya(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new v0(this._firestore,this._userDataWriter,s.key,s,new ya(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new wt(Ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,c){if(s._snapshot.oldDocs.isEmpty()){let p=0;return s._snapshot.docChanges.map(y=>({type:"added",doc:new v0(s._firestore,s._userDataWriter,y.doc.key,y.doc,new ya(s._snapshot.mutatedKeys.has(y.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:p++}))}{let p=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(y=>c||3!==y.type).map(y=>{const A=new v0(s._firestore,s._userDataWriter,y.doc.key,y.doc,new ya(s._snapshot.mutatedKeys.has(y.doc.key),s._snapshot.fromCache),s.query.converter);let F=-1,Z=-1;return 0!==y.type&&(F=p.indexOf(y.doc.key),p=p.delete(y.doc.key)),1!==y.type&&(p=p.add(y.doc),Z=p.indexOf(y.doc.key)),{type:Ll(y.type),doc:A,oldIndex:F,newIndex:Z}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ll(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return an()}}function _u(r,e){return r instanceof _c&&e instanceof _c?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof qc&&e instanceof qc&&r._firestore===e._firestore&&K3(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class Cc extends yu{constructor(e){super(),this.firestore=e}convertBytes(e){return new va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new r1(this.firestore,null,t)}}function k8(r,e,t){r=Xr(r,r1);const s=Xr(r.firestore,Ki),c=Nl(r.converter,e,t);return d6(s,[bl(T4(s),"setDoc",r._key,c,null!==r.converter,t).toMutation(r._key,Zi.none())])}function Cu(r,e,t,...s){r=Xr(r,r1);const c=Xr(r.firestore,Ki),p=T4(c);let y;return y="string"==typeof(e=(0,On.m9)(e))||e instanceof Ha?cu(p,"updateDoc",r._key,e,t,s):au(p,"updateDoc",r._key,e),d6(c,[y.toMutation(r._key,Zi.exists(!0))])}function H8(r,...e){var t,s,c;r=(0,On.m9)(r);let p={includeMetadataChanges:!1},y=0;"object"!=typeof e[y]||tu(e[y])||(p=e[y],y++);const A={includeMetadataChanges:p.includeMetadataChanges};if(tu(e[y])){const ye=e[y];e[y]=null===(t=ye.next)||void 0===t?void 0:t.bind(ye),e[y+1]=null===(s=ye.error)||void 0===s?void 0:s.bind(ye),e[y+2]=null===(c=ye.complete)||void 0===c?void 0:c.bind(ye)}let F,Z,re;if(r instanceof r1)Z=Xr(r.firestore,Ki),re=jo(r._key.path),F={next:ye=>{e[y]&&e[y](wu(Z,r,ye))},error:e[y+1],complete:e[y+2]};else{const ye=Xr(r,V1);Z=Xr(ye.firestore,Ki),re=ye._query;const Ze=new Cc(Z);F={next:At=>{e[y]&&e[y](new qc(Z,Ze,ye,At))},error:e[y+1],complete:e[y+2]},L8(r._query)}return function(ye,Ze,At,Vt){const Cn=new q3(Vt),Wn=new el(Ze,Cn,At);return ye.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return T3(yield Gc(ye),Wn)})),()=>{Cn.bc(),ye.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return x3(yield Gc(ye),Wn)}))}}(Cs(Z),re,A,F)}function d6(r,e){return function(t,s){const c=new t1;return t.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function q2(r,e,t){return s0.apply(this,arguments)}(yield Cl(t),s,c)})),c.promise}(Cs(r),e)}function wu(r,e,t){const s=t.docs.get(e._key),c=new Cc(r);return new _c(r,c,e._key,s,new ya(t.hasPendingWrites,t.fromCache),e.converter)}const Zh={maxAttempts:5};class Kh{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=T4(e)}set(e,t,s){this._verifyNotCommitted();const c=z4(e,this._firestore),p=Nl(c.converter,t,s),y=bl(this._dataReader,"WriteBatch.set",c._key,p,null!==c.converter,s);return this._mutations.push(y.toMutation(c._key,Zi.none())),this}update(e,t,s,...c){this._verifyNotCommitted();const p=z4(e,this._firestore);let y;return y="string"==typeof(t=(0,On.m9)(t))||t instanceof Ha?cu(this._dataReader,"WriteBatch.update",p._key,t,s,c):au(this._dataReader,"WriteBatch.update",p._key,t),this._mutations.push(y.toMutation(p._key,Zi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=z4(e,this._firestore);return this._mutations=this._mutations.concat(new x2(t._key,Zi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new wt(Ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function z4(r,e){if((r=(0,On.m9)(r)).firestore!==e)throw new wt(Ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class U8 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=T4(e)}get(e){const t=z4(e,this._firestore),s=new G5(this._firestore);return this._transaction.lookup([t._key]).then(c=>{if(!c||1!==c.length)return an();const p=c[0];if(p.isFoundDocument())return new A4(this._firestore,s,p.key,p,t.converter);if(p.isNoDocument())return new A4(this._firestore,s,t._key,null,t.converter);throw an()})}set(e,t,s){const c=z4(e,this._firestore),p=Nl(c.converter,t,s),y=bl(this._dataReader,"Transaction.set",c._key,p,null!==c.converter,s);return this._transaction.set(c._key,y),this}update(e,t,s,...c){const p=z4(e,this._firestore);let y;return y="string"==typeof(t=(0,On.m9)(t))||t instanceof Ha?cu(this._dataReader,"Transaction.update",p._key,t,s,c):au(this._dataReader,"Transaction.update",p._key,t),this._transaction.update(p._key,y),this}delete(e){const t=z4(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=z4(e,this._firestore),s=new Cc(this._firestore);return super.get(e).then(c=>new _c(this._firestore,s,t._key,c._document,new ya(!1,!1),t.converter))}}!function(r,e=!0){Ts=Nn.SDK_VERSION,(0,Nn._registerComponent)(new kr.wA("firestore",(t,{instanceIdentifier:s,options:c})=>{const p=t.getProvider("app").getImmediate(),y=new Ki(new Yo(t.getProvider("auth-internal")),new I2(t.getProvider("app-check-internal")),function(A,F){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new wt(Ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new N(A.options.projectId,F)}(p,s),p);return c=Object.assign({useFetchStreams:e},c),y._setSettings(c),y},"PUBLIC").setMultipleInstances(!0)),(0,Nn.registerVersion)(ao,"3.8.3",r),(0,Nn.registerVersion)(ao,"3.8.3","esm2017")}();function Y5(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new wt("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function wh(){if(typeof Uint8Array>"u")throw new wt("unimplemented","Uint8Arrays are not available in this environment.")}function zl(){if(!function _e(){return typeof atob<"u"}())throw new wt("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Iu{constructor(e){this._delegate=e}static fromBase64String(e){return zl(),new Iu(va.fromBase64String(e))}static fromUint8Array(e){return wh(),new Iu(va.fromUint8Array(e))}toBase64(){return zl(),this._delegate.toBase64()}toUint8Array(){return wh(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function B8(r){return function tf(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class Eh{enableIndexedDbPersistence(e,t){return function C8(r,e){su(r=Xr(r,Ki));const t=Cs(r),s=r._freezeSettings(),c=new hl;return w8(t,c,new B3(c,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function wl(r){su(r=Xr(r,Ki));const e=Cs(r),t=r._freezeSettings(),s=new hl;return w8(e,s,new S5(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function E8(r){if(r._initialized&&!r._terminated)throw new wt(Ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new t1;return r._queue.enqueueAndForgetEvenWhileRestricted((0,te.Z)(function*(){try{yield(t=(0,te.Z)(function*(s){if(!B1.C())return Promise.resolve();const c=s+"main";yield B1.delete(c)}),function(s){return t.apply(this,arguments)})(n3(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ih{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof N||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&I1("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function G3(r,e,t,s={}){var c;const p=(r=Xr(r,h6))._getSettings();if("firestore.googleapis.com"!==p.host&&p.host!==e&&I1("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},p),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let y,A;if("string"==typeof s.mockUserToken)y=s.mockUserToken,A=ii.MOCK_USER;else{y=(0,On.Sg)(s.mockUserToken,null===(c=r._app)||void 0===c?void 0:c.options.projectId);const F=s.mockUserToken.sub||s.mockUserToken.user_id;if(!F)throw new wt(Ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new ii(F)}r._authCredentials=new X2(new k2(y,A))}}(this._delegate,e,t,s)}enableNetwork(){return function iu(r){return function Va(r){return r.asyncQueue.enqueue((0,te.Z)(function*(){const e=yield g8(r),t=yield eu(r);return e.setNetworkEnabled(!0),function(s){const c=Yt(s);return c._u.delete(0),K6(c)}(t)}))}(Cs(r=Xr(r,Ki)))}(this._delegate)}disableNetwork(){return function El(r){return function x5(r){return r.asyncQueue.enqueue((0,te.Z)(function*(){const e=yield g8(r),t=yield eu(r);return e.setNetworkEnabled(!1),(s=(0,te.Z)(function*(c){const p=Yt(c);p._u.add(0),yield l2(p),p.gu.set("Offline")}),function(c){return s.apply(this,arguments)})(t);var s}))}(Cs(r=Xr(r,Ki)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,dl("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function I8(r){return function(e){const t=new t1;return e.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function o8(r,e){return tl.apply(this,arguments)}(yield Cl(e),t)})),t.promise}(Cs(r=Xr(r,Ki)))}(this._delegate)}onSnapshotsInSync(e){return function F8(r,e){return function y8(r,e){const t=new q3(e);return r.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return s=yield Gc(r),c=t,Yt(s).Ru.add(c),void c.next();var s,c})),()=>{t.bc(),r.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return s=yield Gc(r),c=t,void Yt(s).Ru.delete(c);var s,c}))}}(Cs(r=Xr(r,Ki)),tu(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new wt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Rl(this,f8(this._delegate,e))}catch(t){throw R2(t,"collection()","Firestore.collection()")}}doc(e){try{return new _a(this,Oa(this._delegate,e))}catch(t){throw R2(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new C2(this,function Z3(r,e){if(r=Xr(r,h6),fl("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new wt(Ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new V1(r,null,(t=e,new go(ar.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw R2(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function qh(r,e,t){r=Xr(r,Ki);const s=Object.assign(Object.assign({},Zh),t);return function(c){if(c.maxAttempts<1)throw new wt(Ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(c,p,y){const A=new t1;return c.asyncQueue.enqueueAndForget((0,te.Z)(function*(){const F=yield function A5(r){return yc(r).then(e=>e.datastore)}(c);new Js(c.asyncQueue,F,y,p,A).run()})),A.promise}(Cs(r),c=>e(new U8(r,c)),s)}(this._delegate,t=>e(new j8(this,t)))}batch(){return Cs(this._delegate),new bh(new Kh(this._delegate,e=>d6(this._delegate,e)))}loadBundle(e){return function b8(r,e){const t=Cs(r=Xr(r,Ki)),s=new z5;return function _8(r,e,t,s){const c=function(p,y){let A;return A="string"==typeof p?(new TextEncoder).encode(p):p,F=function(F,Z){if(F instanceof Uint8Array)return vl(F,Z);if(F instanceof ArrayBuffer)return vl(new Uint8Array(F),Z);if(F instanceof ReadableStream)return F.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(A),new ph(F,y);var F}(t,Z6(e));r.asyncQueue.enqueueAndForget((0,te.Z)(function*(){!function h8(r,e,t){const s=Yt(r);var c;(c=(0,te.Z)(function*(p,y,A){try{const F=yield y.getMetadata();if(yield function(Ze,At){const Vt=Yt(Ze),Cn=u1(At.createTime);return Vt.persistence.runTransaction("hasNewerBundle","readonly",Wn=>Vt.Ns.getBundleMetadata(Wn,At.id)).then(Wn=>!!Wn&&Wn.createTime.compareTo(Cn)>=0)}(p.localStore,F))return yield y.close(),A._completeWith({taskState:"Success",documentsLoaded:(Ze=F).totalDocuments,bytesLoaded:Ze.totalBytes,totalDocuments:Ze.totalDocuments,totalBytes:Ze.totalBytes}),Promise.resolve(new Set);A._updateProgress(n0(F));const Z=new s8(F,p.localStore,y.yt);let re=yield y.mc();for(;re;){const Ze=yield Z.Fu(re);Ze&&A._updateProgress(Ze),re=yield y.mc()}const ye=yield Z.complete();return yield vc(p,ye.Lu,void 0),yield function(Ze,At){const Vt=Yt(Ze);return Vt.persistence.runTransaction("Save bundle","readwrite",Cn=>Vt.Ns.saveBundleMetadata(Cn,At))}(p.localStore,F),A._completeWith(ye.progress),Promise.resolve(ye.Bu)}catch(F){return I1("SyncEngine",`Loading bundle failed with ${F}`),A._failWith(F),Promise.resolve(new Set)}var Ze}),function(p,y,A){return c.apply(this,arguments)})(s,e,t).then(c=>{s.sharedClientState.notifyBundleLoaded(c)})}(yield Cl(r),c,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function M8(r,e){return function N5(r,e){return r.asyncQueue.enqueue((0,te.Z)(function*(){return function(t,s){const c=Yt(t);return c.persistence.runTransaction("Get named query","readonly",p=>c.Ns.getNamedQuery(p,s))}(yield h0(r),e)}))}(Cs(r=Xr(r,Ki)),e).then(t=>t?new V1(r,null,t.query):null)}(this._delegate,e).then(t=>t?new C2(this,t):null)}}class bu extends yu{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iu(new va(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return _a.forKey(t,this.firestore,null)}}class j8{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new bu(e)}get(e){const t=w0(e);return this._delegate.get(t).then(s=>new C0(this._firestore,new _c(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const c=w0(e);return s?(Y5("Transaction.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const p=w0(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,s,...c),this}delete(e){const t=w0(e);return this._delegate.delete(t),this}}class bh{constructor(e){this._delegate=e}set(e,t,s){const c=w0(e);return s?(Y5("WriteBatch.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const p=w0(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,s,...c),this}delete(e){const t=w0(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class p6{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new v0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Mu(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=p6.INSTANCES;let c=s.get(e);c||(c=new WeakMap,s.set(e,c));let p=c.get(t);return p||(p=new p6(e,new bu(e),t),c.set(t,p)),p}}p6.INSTANCES=new WeakMap;class _a{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bu(e)}static forPath(e,t,s){if(e.length%2!=0)throw new wt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _a(t,new r1(t._delegate,s,new nn(e)))}static forKey(e,t,s){return new _a(t,new r1(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Rl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Rl(this.firestore,f8(this._delegate,e))}catch(t){throw R2(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,On.m9)(e))instanceof r1&&gl(this._delegate,e)}set(e,t){t=Y5("DocumentReference.set",t);try{return t?k8(this._delegate,e,t):k8(this._delegate,e)}catch(s){throw R2(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Cu(this._delegate,e):Cu(this._delegate,e,t,...s)}catch(c){throw R2(c,"updateDoc()","DocumentReference.update()")}}delete(){return function O8(r){return d6(Xr(r.firestore,Ki),[new x2(r._key,Zi.none())])}(this._delegate)}onSnapshot(...e){const t=Mh(e),s=Sh(e,c=>new C0(this.firestore,new _c(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return H8(this._delegate,t,s)}get(e){let t;return t="cache"===e?.source?function Z5(r){r=Xr(r,r1);const e=Xr(r.firestore,Ki),t=Cs(e),s=new Cc(e);return function v8(r,e){const t=new t1;return r.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return(s=(0,te.Z)(function*(c,p,y){try{const A=yield function(F,Z){const re=Yt(F);return re.persistence.runTransaction("read document","readonly",ye=>re.localDocuments.getDocument(ye,Z))}(c,p);A.isFoundDocument()?y.resolve(A):A.isNoDocument()?y.resolve(null):y.reject(new wt(Ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(A){const F=s6(A,`Failed to get document '${p} from cache`);y.reject(F)}}),function(c,p,y){return s.apply(this,arguments)})(yield h0(r),e,t);var s})),t.promise}(t,r._key).then(c=>new _c(e,s,r._key,c,new ya(null!==c&&c.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===e?.source?function y0(r){r=Xr(r,r1);const e=Xr(r.firestore,Ki);return ma(Cs(e),r._key,{source:"server"}).then(t=>wu(e,r,t))}(this._delegate):function P8(r){r=Xr(r,r1);const e=Xr(r.firestore,Ki);return ma(Cs(e),r._key).then(t=>wu(e,r,t))}(this._delegate),t.then(s=>new C0(this.firestore,new _c(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new _a(this.firestore,this._delegate.withConverter(e?p6.getInstance(this.firestore,e):null))}}function R2(r,e,t){return r.message=r.message.replace(e,t),r}function Mh(r){for(const e of r)if("object"==typeof e&&!B8(e))return e;return{}}function Sh(r,e){var t,s;let c;return c=B8(r[0])?r[0]:B8(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:p=>{c.next&&c.next(e(p))},error:null===(t=c.error)||void 0===t?void 0:t.bind(c),complete:null===(s=c.complete)||void 0===s?void 0:s.bind(c)}}class C0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new _a(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _u(this._delegate,e._delegate)}}class Mu extends C0{data(e){const t=this._delegate.data(e);return function Q2(r,e){r||an()}(void 0!==t),t}}class C2{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bu(e)}where(e,t,s){try{return new C2(this.firestore,x4(this._delegate,function vh(r,e,t){const s=e,c=Fa("where",r);return N4._create(c,s,t)}(e,t,s)))}catch(c){throw R2(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new C2(this.firestore,x4(this._delegate,function $5(r,e="asc"){const t=e,s=Fa("orderBy",r);return Xn._create(s,t)}(e,t)))}catch(s){throw R2(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new C2(this.firestore,x4(this._delegate,function W5(r){return j3("limit",r),Dl._create("limit",r,"F")}(e)))}catch(t){throw R2(t,"limit()","Query.limit()")}}limitToLast(e){try{return new C2(this.firestore,x4(this._delegate,function f6(r){return j3("limitToLast",r),Dl._create("limitToLast",r,"L")}(e)))}catch(t){throw R2(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new C2(this.firestore,x4(this._delegate,function Al(...r){return Tl._create("startAt",r,!0)}(...e)))}catch(t){throw R2(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new C2(this.firestore,x4(this._delegate,function xl(...r){return Tl._create("startAfter",r,!1)}(...e)))}catch(t){throw R2(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new C2(this.firestore,x4(this._delegate,function yh(...r){return S1._create("endBefore",r,!1)}(...e)))}catch(t){throw R2(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new C2(this.firestore,x4(this._delegate,function z8(...r){return S1._create("endAt",r,!0)}(...e)))}catch(t){throw R2(t,"endAt()","Query.endAt()")}}isEqual(e){return K3(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function K5(r){r=Xr(r,V1);const e=Xr(r.firestore,Ki),t=Cs(e),s=new Cc(e);return function ga(r,e){const t=new t1;return r.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return(s=(0,te.Z)(function*(c,p,y){try{const A=yield mc(c,p,!0),F=new r0(p,A.Hi),Z=F.Wu(A.documents),re=F.applyChanges(Z,!1);y.resolve(re.snapshot)}catch(A){const F=s6(A,`Failed to execute query '${p} against cache`);y.reject(F)}}),function(c,p,y){return s.apply(this,arguments)})(yield h0(r),e,t);var s})),t.promise}(t,r._query).then(c=>new qc(e,s,r,c))}(this._delegate):"server"===e?.source?function q5(r){r=Xr(r,V1);const e=Xr(r.firestore,Ki),t=Cs(e),s=new Cc(e);return Y2(t,r._query,{source:"server"}).then(c=>new qc(e,s,r,c))}(this._delegate):function _0(r){r=Xr(r,V1);const e=Xr(r.firestore,Ki),t=Cs(e),s=new Cc(e);return L8(r._query),Y2(t,r._query).then(c=>new qc(e,s,r,c))}(this._delegate),t.then(s=>new Q5(this.firestore,new qc(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=Mh(e),s=Sh(e,c=>new Q5(this.firestore,new qc(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return H8(this._delegate,t,s)}withConverter(e){return new C2(this.firestore,this._delegate.withConverter(e?p6.getInstance(this.firestore,e):null))}}class rf{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Mu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Q5{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new C2(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Mu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new rf(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Mu(this._firestore,s))})}isEqual(e){return _u(this._delegate,e._delegate)}}class Rl extends C2{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _a(this.firestore,e):null}doc(e){try{return new _a(this.firestore,void 0===e?Oa(this._delegate):Oa(this._delegate,e))}catch(t){throw R2(t,"doc()","CollectionReference.doc()")}}add(e){return function V8(r,e){const t=Xr(r.firestore,Ki),s=Oa(r),c=Nl(r.converter,e);return d6(t,[bl(T4(r.firestore),"addDoc",s._key,c,null!==r.converter,{}).toMutation(s._key,Zi.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new _a(this.firestore,t))}isEqual(e){return gl(this._delegate,e._delegate)}withConverter(e){return new Rl(this.firestore,this._delegate.withConverter(e?p6.getInstance(this.firestore,e):null))}}function w0(r){return Xr(r,r1)}class X5{constructor(...e){this._delegate=new Ha(...e)}static documentId(){return new X5(Ii.keyField().canonicalString())}isEqual(e){return(e=(0,On.m9)(e))instanceof Ha&&this._delegate._internalPath.isEqual(e._internalPath)}}class E0{constructor(e){this._delegate=e}static serverTimestamp(){const e=function _h(){return new ou("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new E0(e)}static delete(){const e=function Yh(){return new p0("deleteField")}();return e._methodName="FieldValue.delete",new E0(e)}static arrayUnion(...e){const t=function Eu(...r){return new F5("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new E0(t)}static arrayRemove(...e){const t=function Qh(...r){return new U5("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new E0(t)}static increment(e){const t=function Xh(r){return new B5("increment",r)}(e);return t._methodName="FieldValue.increment",new E0(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const sf={Firestore:Ih,GeoPoint:d0,Timestamp:Vr,Blob:Iu,Transaction:j8,WriteBatch:bh,DocumentReference:_a,DocumentSnapshot:C0,Query:C2,QueryDocumentSnapshot:Mu,QuerySnapshot:Q5,CollectionReference:Rl,FieldPath:X5,FieldValue:E0,setLogLevel:function nf(r){!function ko(r){gs.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function Dh(r){(function af(r,e){r.INTERNAL.registerComponent(new kr.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),c=t.getProvider("firestore").getImmediate();return e(s,c)},"PUBLIC").setServiceProps(Object.assign({},sf)))})(r,(e,t)=>new Ih(e,t,new Eh)),r.registerVersion("@firebase/firestore-compat","0.3.3")}(Gn.Z);var R4=j(1205),cf=j(6217),lf=j(9260);function Ah(r,e){return function Th(r,e=Qe.z){return new Ue.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{s?.()}})}(r,e)}function J5(r,e){return Ah(r,e).pipe((0,Kt.U)(t=>({payload:t,type:"query"})))}function Pl(r,e){return J5(r,e).pipe((0,St.O)(void 0),kt(),(0,Kt.U)(([t,s])=>{const c=s.payload.docChanges(),p=c.map(y=>({type:y.type,payload:y}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((y,A)=>{const F=c.find(re=>re.doc.ref.isEqual(y.ref)),Z=t?.payload.docs.find(re=>re.ref.isEqual(y.ref));F&&JSON.stringify(F.doc.metadata)===JSON.stringify(y.metadata)||!F&&Z&&JSON.stringify(Z.metadata)===JSON.stringify(y.metadata)||p.push({type:"modified",payload:{oldIndex:A,newIndex:A,type:"modified",doc:y}})}),p}))}function $8(r,e,t){return Pl(r,t).pipe((0,Ft.R)((s,c)=>function xh(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function hf(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return Su(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Su(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Su(r,e.oldIndex,1)}return r}(r,s))}),r}(s,c.map(p=>p.payload),e),[]),(0,$t.x)(),(0,Kt.U)(s=>s.map(c=>({type:c.type,payload:c}))))}function Su(r,e,t,...s){const c=r.slice();return c.splice(e,t,...s),c}function Nh(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class W8{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Pl(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Kt.U)(s=>s.filter(c=>e.indexOf(c.type)>-1)))),t.pipe((0,St.O)(void 0),kt(),(0,Tn.h)(([s,c])=>c.length>0||!s),(0,Kt.U)(([s,c])=>c),et.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ft.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Nh(e);return $8(this.query,t,this.afs.schedulers.outsideAngular).pipe(et.iC)}valueChanges(e={}){return J5(this.query,this.afs.schedulers.outsideAngular).pipe((0,Kt.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),et.iC)}get(e){return(0,Ge.D)(this.query.get(e)).pipe(et.iC)}add(e){return this.ref.add(e)}doc(e){return new Lh(this.ref.doc(e),this.afs)}}class Lh{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:c,query:p}=th(s,t);return new W8(c,p,this.afs)}snapshotChanges(){return function uf(r,e){return Ah(r,e).pipe((0,St.O)(void 0),kt(),(0,Kt.U)(([t,s])=>s.exists?t?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(et.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Kt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ge.D)(this.ref.get(e)).pipe(et.iC)}}class ff{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Pl(this.query,this.afs.schedulers.outsideAngular).pipe((0,Kt.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,Tn.h)(t=>t.length>0),et.iC):Pl(this.query,this.afs.schedulers.outsideAngular).pipe(et.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ft.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Nh(e);return $8(this.query,t,this.afs.schedulers.outsideAngular).pipe(et.iC)}valueChanges(e={}){return J5(this.query,this.afs.schedulers.outsideAngular).pipe((0,Kt.U)(s=>s.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),et.iC)}get(e){return(0,Ge.D)(this.query.get(e)).pipe(et.iC)}}const I0=new B.OlP("angularfire2.enableFirestorePersistence"),eh=new B.OlP("angularfire2.firestore.persistenceSettings"),df=new B.OlP("angularfire2.firestore.settings"),Uf=new B.OlP("angularfire2.firestore.use-emulator");function th(r,e=(t=>t)){return{query:e(r),ref:r}}let nh=(()=>{class r{constructor(t,s,c,p,y,A,F,Z,re,ye,Ze,At,Vt,Cn,Wn,v1,is){this.schedulers=F;const Mi=(0,xt.on)(t,A,s),ks=re;ye&&(0,R4.nw)(Mi,A,Ze,Vt,Cn,Wn,At,v1),[this.firestore,this.persistenceEnabled$]=(0,xt.cc)(`${Mi.name}.firestore`,"AngularFirestore",Mi.name,()=>{const zi=A.runOutsideAngular(()=>Mi.firestore());if(p&&zi.settings(p),ks&&zi.useEmulator(...ks),c&&!(0,Fe.PM)(y)){const Bi=()=>{try{return(0,Ge.D)(zi.enablePersistence(Z||void 0).then(()=>!0,()=>!1))}catch(xo){return typeof console<"u"&&console.warn(xo),(0,at.of)(!1)}};return[zi,A.runOutsideAngular(Bi)]}return[zi,(0,at.of)(!1)]},[p,ks,c])}collection(t,s){let c;c="string"==typeof t?this.firestore.collection(t):t;const{ref:p,query:y}=th(c,s),A=this.schedulers.ngZone.run(()=>p);return new W8(A,y,this)}collectionGroup(t,s){const c=s||(y=>y),p=this.firestore.collectionGroup(t);return new ff(c(p),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const c=this.schedulers.ngZone.run(()=>s);return new Lh(c,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(B.LFG(xt.Dh),B.LFG(xt.xv,8),B.LFG(I0,8),B.LFG(df,8),B.LFG(B.Lbi),B.LFG(B.R0b),B.LFG(et.HU),B.LFG(eh,8),B.LFG(Uf,8),B.LFG(R4.zQ,8),B.LFG(R4.Qv,8),B.LFG(R4.L6,8),B.LFG(R4._Q,8),B.LFG(R4.rT,8),B.LFG(R4.lh,8),B.LFG(R4.f7,8),B.LFG(cf.nm,8))},r.\u0275prov=B.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),zh=(()=>{class r{constructor(){lf.Z.registerVersion("angularfire",et.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:I0,useValue:!0},{provide:eh,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=B.oAB({type:r}),r.\u0275inj=B.cJS({providers:[nh]}),r})(),rh=(()=>{class r{}return(0,K.Z)(r,"\u0275fac",function(t){return new(t||r)}),(0,K.Z)(r,"\u0275mod",B.oAB({type:r,bootstrap:[zt]})),(0,K.Z)(r,"\u0275inj",B.cJS({imports:[S.b2,Ie,It.m,xt.hO.initializeApp(Zt_firebase),Ve.JS,zh,zh]})),r})();S.q6().bootstrapModule(rh).catch(r=>console.error(r))},8354:(rn,Ke,j)=>{j.d(Ke,{x:()=>K});var S=j(1180),B=j(4650);let K=(()=>{class Ce{constructor(){(0,S.Z)(this,"_cellSize",25),(0,S.Z)(this,"ctx",void 0),(0,S.Z)(this,"hoverCtx",void 0)}set context(Ie){this.ctx=Ie}get context(){return this.ctx}set hoverContext(Ie){this.hoverCtx=Ie}get hoverContext(){return this.hoverCtx}get cellSize(){return this._cellSize}}return(0,S.Z)(Ce,"\u0275fac",function(Ie){return new(Ie||Ce)}),(0,S.Z)(Ce,"\u0275prov",B.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"})),Ce})()},8395:(rn,Ke,j)=>{j.d(Ke,{m:()=>Ie});var S=j(1180),B=j(6895),K=j(529),Ce=j(3868),we=j(4650);let Ie=(()=>{class te{}return(0,S.Z)(te,"\u0275fac",function(ke){return new(ke||te)}),(0,S.Z)(te,"\u0275mod",we.oAB({type:te})),(0,S.Z)(te,"\u0275inj",we.cJS({imports:[B.ez,K.JF,Ce.uH]})),te})()},1135:(rn,Ke,j)=>{j.d(Ke,{X:()=>B});var S=j(7579);class B extends S.x{constructor(Ce){super(),this._value=Ce}get value(){return this.getValue()}_subscribe(Ce){const we=super._subscribe(Ce);return!we.closed&&Ce.next(this._value),we}getValue(){const{hasError:Ce,thrownError:we,_value:Ie}=this;if(Ce)throw we;return this._throwIfClosed(),Ie}next(Ce){super.next(this._value=Ce)}}},9751:(rn,Ke,j)=>{j.d(Ke,{y:()=>Re});var S=j(930),B=j(727),K=j(8822),Ce=j(9635),we=j(2416),Ie=j(576),te=j(2806);let Re=(()=>{class Se{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const Pt=new Se;return Pt.source=this,Pt.operator=Fe,Pt}subscribe(Fe,Pt,Xt){const Je=function me(Se){return Se&&Se instanceof S.Lv||function de(Se){return Se&&(0,Ie.m)(Se.next)&&(0,Ie.m)(Se.error)&&(0,Ie.m)(Se.complete)}(Se)&&(0,B.Nn)(Se)}(Fe)?Fe:new S.Hp(Fe,Pt,Xt);return(0,te.x)(()=>{const{operator:ut,source:ft}=this;Je.add(ut?ut.call(Je,ft):ft?this._subscribe(Je):this._trySubscribe(Je))}),Je}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(Pt){Fe.error(Pt)}}forEach(Fe,Pt){return new(Pt=ke(Pt))((Xt,Je)=>{const ut=new S.Hp({next:ft=>{try{Fe(ft)}catch(Et){Je(Et),ut.unsubscribe()}},error:Je,complete:Xt});this.subscribe(ut)})}_subscribe(Fe){var Pt;return null===(Pt=this.source)||void 0===Pt?void 0:Pt.subscribe(Fe)}[K.L](){return this}pipe(...Fe){return(0,Ce.U)(Fe)(this)}toPromise(Fe){return new(Fe=ke(Fe))((Pt,Xt)=>{let Je;this.subscribe(ut=>Je=ut,ut=>Xt(ut),()=>Pt(Je))})}}return Se.create=Tt=>new Se(Tt),Se})();function ke(Se){var Tt;return null!==(Tt=Se??we.v.Promise)&&void 0!==Tt?Tt:Promise}},7579:(rn,Ke,j)=>{j.d(Ke,{x:()=>te});var S=j(9751),B=j(727);const Ce=(0,j(3888).d)(ke=>function(){ke(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=j(8737),Ie=j(2806);let te=(()=>{class ke extends S.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(me){const Se=new Re(this,this);return Se.operator=me,Se}_throwIfClosed(){if(this.closed)throw new Ce}next(me){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Se of this.currentObservers)Se.next(me)}})}error(me){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=me;const{observers:Se}=this;for(;Se.length;)Se.shift().error(me)}})}complete(){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:me}=this;for(;me.length;)me.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var me;return(null===(me=this.observers)||void 0===me?void 0:me.length)>0}_trySubscribe(me){return this._throwIfClosed(),super._trySubscribe(me)}_subscribe(me){return this._throwIfClosed(),this._checkFinalizedStatuses(me),this._innerSubscribe(me)}_innerSubscribe(me){const{hasError:Se,isStopped:Tt,observers:Fe}=this;return Se||Tt?B.Lc:(this.currentObservers=null,Fe.push(me),new B.w0(()=>{this.currentObservers=null,(0,we.P)(Fe,me)}))}_checkFinalizedStatuses(me){const{hasError:Se,thrownError:Tt,isStopped:Fe}=this;Se?me.error(Tt):Fe&&me.complete()}asObservable(){const me=new S.y;return me.source=this,me}}return ke.create=(de,me)=>new Re(de,me),ke})();class Re extends te{constructor(de,me){super(),this.destination=de,this.source=me}next(de){var me,Se;null===(Se=null===(me=this.destination)||void 0===me?void 0:me.next)||void 0===Se||Se.call(me,de)}error(de){var me,Se;null===(Se=null===(me=this.destination)||void 0===me?void 0:me.error)||void 0===Se||Se.call(me,de)}complete(){var de,me;null===(me=null===(de=this.destination)||void 0===de?void 0:de.complete)||void 0===me||me.call(de)}_subscribe(de){var me,Se;return null!==(Se=null===(me=this.source)||void 0===me?void 0:me.subscribe(de))&&void 0!==Se?Se:B.Lc}}},930:(rn,Ke,j)=>{j.d(Ke,{Hp:()=>Xt,Lv:()=>Se});var S=j(576),B=j(727),K=j(2416),Ce=j(7849),we=j(5032);const Ie=ke("C",void 0,void 0);function ke(pt,nt,yt){return{kind:pt,value:nt,error:yt}}var de=j(3410),me=j(2806);class Se extends B.w0{constructor(nt){super(),this.isStopped=!1,nt?(this.destination=nt,(0,B.Nn)(nt)&&nt.add(this)):this.destination=Et}static create(nt,yt,bt){return new Xt(nt,yt,bt)}next(nt){this.isStopped?ft(function Re(pt){return ke("N",pt,void 0)}(nt),this):this._next(nt)}error(nt){this.isStopped?ft(function te(pt){return ke("E",void 0,pt)}(nt),this):(this.isStopped=!0,this._error(nt))}complete(){this.isStopped?ft(Ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(nt){this.destination.next(nt)}_error(nt){try{this.destination.error(nt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Tt=Function.prototype.bind;function Fe(pt,nt){return Tt.call(pt,nt)}class Pt{constructor(nt){this.partialObserver=nt}next(nt){const{partialObserver:yt}=this;if(yt.next)try{yt.next(nt)}catch(bt){Je(bt)}}error(nt){const{partialObserver:yt}=this;if(yt.error)try{yt.error(nt)}catch(bt){Je(bt)}else Je(nt)}complete(){const{partialObserver:nt}=this;if(nt.complete)try{nt.complete()}catch(yt){Je(yt)}}}class Xt extends Se{constructor(nt,yt,bt){let dt;if(super(),(0,S.m)(nt)||!nt)dt={next:nt??void 0,error:yt??void 0,complete:bt??void 0};else{let H;this&&K.v.useDeprecatedNextContext?(H=Object.create(nt),H.unsubscribe=()=>this.unsubscribe(),dt={next:nt.next&&Fe(nt.next,H),error:nt.error&&Fe(nt.error,H),complete:nt.complete&&Fe(nt.complete,H)}):dt=nt}this.destination=new Pt(dt)}}function Je(pt){K.v.useDeprecatedSynchronousErrorHandling?(0,me.O)(pt):(0,Ce.h)(pt)}function ft(pt,nt){const{onStoppedNotification:yt}=K.v;yt&&de.z.setTimeout(()=>yt(pt,nt))}const Et={closed:!0,next:we.Z,error:function ut(pt){throw pt},complete:we.Z}},727:(rn,Ke,j)=>{j.d(Ke,{Lc:()=>Ie,w0:()=>we,Nn:()=>te});var S=j(576);const K=(0,j(3888).d)(ke=>function(me){ke(this),this.message=me?`${me.length} errors occurred during unsubscription:\n${me.map((Se,Tt)=>`${Tt+1}) ${Se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=me});var Ce=j(8737);class we{constructor(de){this.initialTeardown=de,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let de;if(!this.closed){this.closed=!0;const{_parentage:me}=this;if(me)if(this._parentage=null,Array.isArray(me))for(const Fe of me)Fe.remove(this);else me.remove(this);const{initialTeardown:Se}=this;if((0,S.m)(Se))try{Se()}catch(Fe){de=Fe instanceof K?Fe.errors:[Fe]}const{_finalizers:Tt}=this;if(Tt){this._finalizers=null;for(const Fe of Tt)try{Re(Fe)}catch(Pt){de=de??[],Pt instanceof K?de=[...de,...Pt.errors]:de.push(Pt)}}if(de)throw new K(de)}}add(de){var me;if(de&&de!==this)if(this.closed)Re(de);else{if(de instanceof we){if(de.closed||de._hasParent(this))return;de._addParent(this)}(this._finalizers=null!==(me=this._finalizers)&&void 0!==me?me:[]).push(de)}}_hasParent(de){const{_parentage:me}=this;return me===de||Array.isArray(me)&&me.includes(de)}_addParent(de){const{_parentage:me}=this;this._parentage=Array.isArray(me)?(me.push(de),me):me?[me,de]:de}_removeParent(de){const{_parentage:me}=this;me===de?this._parentage=null:Array.isArray(me)&&(0,Ce.P)(me,de)}remove(de){const{_finalizers:me}=this;me&&(0,Ce.P)(me,de),de instanceof we&&de._removeParent(this)}}we.EMPTY=(()=>{const ke=new we;return ke.closed=!0,ke})();const Ie=we.EMPTY;function te(ke){return ke instanceof we||ke&&"closed"in ke&&(0,S.m)(ke.remove)&&(0,S.m)(ke.add)&&(0,S.m)(ke.unsubscribe)}function Re(ke){(0,S.m)(ke)?ke():ke.unsubscribe()}},2416:(rn,Ke,j)=>{j.d(Ke,{v:()=>S});const S={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(rn,Ke,j)=>{j.d(Ke,{z:()=>we});var S=j(8189),K=j(7669),Ce=j(8996);function we(...Ie){return function B(){return(0,S.J)(1)}()((0,Ce.D)(Ie,(0,K.yG)(Ie)))}},515:(rn,Ke,j)=>{j.d(Ke,{E:()=>B});const B=new(j(9751).y)(we=>we.complete())},8996:(rn,Ke,j)=>{j.d(Ke,{D:()=>nt});var S=j(8421),B=j(5363),K=j(9468),Ie=j(9751),Re=j(2202),ke=j(576),de=j(9672);function Se(yt,bt){if(!yt)throw new Error("Iterable cannot be null");return new Ie.y(dt=>{(0,de.f)(dt,bt,()=>{const H=yt[Symbol.asyncIterator]();(0,de.f)(dt,bt,()=>{H.next().then(Be=>{Be.done?dt.complete():dt.next(Be.value)})},0,!0)})})}var Tt=j(3670),Fe=j(8239),Pt=j(1144),Xt=j(6495),Je=j(2206),ut=j(4532),ft=j(3260);function nt(yt,bt){return bt?function pt(yt,bt){if(null!=yt){if((0,Tt.c)(yt))return function Ce(yt,bt){return(0,S.Xf)(yt).pipe((0,K.R)(bt),(0,B.Q)(bt))}(yt,bt);if((0,Pt.z)(yt))return function te(yt,bt){return new Ie.y(dt=>{let H=0;return bt.schedule(function(){H===yt.length?dt.complete():(dt.next(yt[H++]),dt.closed||this.schedule())})})}(yt,bt);if((0,Fe.t)(yt))return function we(yt,bt){return(0,S.Xf)(yt).pipe((0,K.R)(bt),(0,B.Q)(bt))}(yt,bt);if((0,Je.D)(yt))return Se(yt,bt);if((0,Xt.T)(yt))return function me(yt,bt){return new Ie.y(dt=>{let H;return(0,de.f)(dt,bt,()=>{H=yt[Re.h](),(0,de.f)(dt,bt,()=>{let Be,zt;try{({value:Be,done:zt}=H.next())}catch(It){return void dt.error(It)}zt?dt.complete():dt.next(Be)},0,!0)}),()=>(0,ke.m)(H?.return)&&H.return()})}(yt,bt);if((0,ft.L)(yt))return function Et(yt,bt){return Se((0,ft.Q)(yt),bt)}(yt,bt)}throw(0,ut.z)(yt)}(yt,bt):(0,S.Xf)(yt)}},8421:(rn,Ke,j)=>{j.d(Ke,{Xf:()=>Tt});var S=j(655),B=j(1144),K=j(8239),Ce=j(9751),we=j(3670),Ie=j(2206),te=j(4532),Re=j(6495),ke=j(3260),de=j(576),me=j(7849),Se=j(8822);function Tt(pt){if(pt instanceof Ce.y)return pt;if(null!=pt){if((0,we.c)(pt))return function Fe(pt){return new Ce.y(nt=>{const yt=pt[Se.L]();if((0,de.m)(yt.subscribe))return yt.subscribe(nt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(pt);if((0,B.z)(pt))return function Pt(pt){return new Ce.y(nt=>{for(let yt=0;yt<pt.length&&!nt.closed;yt++)nt.next(pt[yt]);nt.complete()})}(pt);if((0,K.t)(pt))return function Xt(pt){return new Ce.y(nt=>{pt.then(yt=>{nt.closed||(nt.next(yt),nt.complete())},yt=>nt.error(yt)).then(null,me.h)})}(pt);if((0,Ie.D)(pt))return ut(pt);if((0,Re.T)(pt))return function Je(pt){return new Ce.y(nt=>{for(const yt of pt)if(nt.next(yt),nt.closed)return;nt.complete()})}(pt);if((0,ke.L)(pt))return function ft(pt){return ut((0,ke.Q)(pt))}(pt)}throw(0,te.z)(pt)}function ut(pt){return new Ce.y(nt=>{(function Et(pt,nt){var yt,bt,dt,H;return(0,S.mG)(this,void 0,void 0,function*(){try{for(yt=(0,S.KL)(pt);!(bt=yield yt.next()).done;)if(nt.next(bt.value),nt.closed)return}catch(Be){dt={error:Be}}finally{try{bt&&!bt.done&&(H=yt.return)&&(yield H.call(yt))}finally{if(dt)throw dt.error}}nt.complete()})})(pt,nt).catch(yt=>nt.error(yt))})}},6451:(rn,Ke,j)=>{j.d(Ke,{T:()=>Ie});var S=j(8189),B=j(8421),K=j(515),Ce=j(7669),we=j(8996);function Ie(...te){const Re=(0,Ce.yG)(te),ke=(0,Ce._6)(te,1/0),de=te;return de.length?1===de.length?(0,B.Xf)(de[0]):(0,S.J)(ke)((0,we.D)(de,Re)):K.E}},9646:(rn,Ke,j)=>{j.d(Ke,{of:()=>K});var S=j(7669),B=j(8996);function K(...Ce){const we=(0,S.yG)(Ce);return(0,B.D)(Ce,we)}},5403:(rn,Ke,j)=>{j.d(Ke,{x:()=>B});var S=j(930);function B(Ce,we,Ie,te,Re){return new K(Ce,we,Ie,te,Re)}class K extends S.Lv{constructor(we,Ie,te,Re,ke,de){super(we),this.onFinalize=ke,this.shouldUnsubscribe=de,this._next=Ie?function(me){try{Ie(me)}catch(Se){we.error(Se)}}:super._next,this._error=Re?function(me){try{Re(me)}catch(Se){we.error(Se)}finally{this.unsubscribe()}}:super._error,this._complete=te?function(){try{te()}catch(me){we.error(me)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var we;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ie}=this;super.unsubscribe(),!Ie&&(null===(we=this.onFinalize)||void 0===we||we.call(this))}}}},4351:(rn,Ke,j)=>{j.d(Ke,{b:()=>K});var S=j(5577),B=j(576);function K(Ce,we){return(0,B.m)(we)?(0,S.z)(Ce,we,1):(0,S.z)(Ce,1)}},6590:(rn,Ke,j)=>{j.d(Ke,{d:()=>K});var S=j(4482),B=j(5403);function K(Ce){return(0,S.e)((we,Ie)=>{let te=!1;we.subscribe((0,B.x)(Ie,Re=>{te=!0,Ie.next(Re)},()=>{te||Ie.next(Ce),Ie.complete()}))})}},1884:(rn,Ke,j)=>{j.d(Ke,{x:()=>Ce});var S=j(4671),B=j(4482),K=j(5403);function Ce(Ie,te=S.y){return Ie=Ie??we,(0,B.e)((Re,ke)=>{let de,me=!0;Re.subscribe((0,K.x)(ke,Se=>{const Tt=te(Se);(me||!Ie(de,Tt))&&(me=!1,de=Tt,ke.next(Se))}))})}function we(Ie,te){return Ie===te}},9300:(rn,Ke,j)=>{j.d(Ke,{h:()=>K});var S=j(4482),B=j(5403);function K(Ce,we){return(0,S.e)((Ie,te)=>{let Re=0;Ie.subscribe((0,B.x)(te,ke=>Ce.call(we,ke,Re++)&&te.next(ke)))})}},590:(rn,Ke,j)=>{j.d(Ke,{P:()=>te});var S=j(6805),B=j(9300),K=j(5698),Ce=j(6590),we=j(8068),Ie=j(4671);function te(Re,ke){const de=arguments.length>=2;return me=>me.pipe(Re?(0,B.h)((Se,Tt)=>Re(Se,Tt,me)):Ie.y,(0,K.q)(1),de?(0,Ce.d)(ke):(0,we.T)(()=>new S.K))}},4004:(rn,Ke,j)=>{j.d(Ke,{U:()=>K});var S=j(4482),B=j(5403);function K(Ce,we){return(0,S.e)((Ie,te)=>{let Re=0;Ie.subscribe((0,B.x)(te,ke=>{te.next(Ce.call(we,ke,Re++))}))})}},8189:(rn,Ke,j)=>{j.d(Ke,{J:()=>K});var S=j(5577),B=j(4671);function K(Ce=1/0){return(0,S.z)(B.y,Ce)}},5577:(rn,Ke,j)=>{j.d(Ke,{z:()=>Re});var S=j(4004),B=j(8421),K=j(4482),Ce=j(9672),we=j(5403),te=j(576);function Re(ke,de,me=1/0){return(0,te.m)(de)?Re((Se,Tt)=>(0,S.U)((Fe,Pt)=>de(Se,Fe,Tt,Pt))((0,B.Xf)(ke(Se,Tt))),me):("number"==typeof de&&(me=de),(0,K.e)((Se,Tt)=>function Ie(ke,de,me,Se,Tt,Fe,Pt,Xt){const Je=[];let ut=0,ft=0,Et=!1;const pt=()=>{Et&&!Je.length&&!ut&&de.complete()},nt=bt=>ut<Se?yt(bt):Je.push(bt),yt=bt=>{Fe&&de.next(bt),ut++;let dt=!1;(0,B.Xf)(me(bt,ft++)).subscribe((0,we.x)(de,H=>{Tt?.(H),Fe?nt(H):de.next(H)},()=>{dt=!0},void 0,()=>{if(dt)try{for(ut--;Je.length&&ut<Se;){const H=Je.shift();Pt?(0,Ce.f)(de,Pt,()=>yt(H)):yt(H)}pt()}catch(H){de.error(H)}}))};return ke.subscribe((0,we.x)(de,nt,()=>{Et=!0,pt()})),()=>{Xt?.()}}(Se,Tt,ke,me)))}},5363:(rn,Ke,j)=>{j.d(Ke,{Q:()=>Ce});var S=j(9672),B=j(4482),K=j(5403);function Ce(we,Ie=0){return(0,B.e)((te,Re)=>{te.subscribe((0,K.x)(Re,ke=>(0,S.f)(Re,we,()=>Re.next(ke),Ie),()=>(0,S.f)(Re,we,()=>Re.complete(),Ie),ke=>(0,S.f)(Re,we,()=>Re.error(ke),Ie)))})}},5026:(rn,Ke,j)=>{j.d(Ke,{R:()=>Ce});var S=j(4482),B=j(5403);function Ce(we,Ie){return(0,S.e)(function K(we,Ie,te,Re,ke){return(de,me)=>{let Se=te,Tt=Ie,Fe=0;de.subscribe((0,B.x)(me,Pt=>{const Xt=Fe++;Tt=Se?we(Tt,Pt,Xt):(Se=!0,Pt),Re&&me.next(Tt)},ke&&(()=>{Se&&me.next(Tt),me.complete()})))}}(we,Ie,arguments.length>=2,!0))}},3099:(rn,Ke,j)=>{j.d(Ke,{B:()=>we});var S=j(8421),B=j(7579),K=j(930),Ce=j(4482);function we(te={}){const{connector:Re=(()=>new B.x),resetOnError:ke=!0,resetOnComplete:de=!0,resetOnRefCountZero:me=!0}=te;return Se=>{let Tt,Fe,Pt,Xt=0,Je=!1,ut=!1;const ft=()=>{Fe?.unsubscribe(),Fe=void 0},Et=()=>{ft(),Tt=Pt=void 0,Je=ut=!1},pt=()=>{const nt=Tt;Et(),nt?.unsubscribe()};return(0,Ce.e)((nt,yt)=>{Xt++,!ut&&!Je&&ft();const bt=Pt=Pt??Re();yt.add(()=>{Xt--,0===Xt&&!ut&&!Je&&(Fe=Ie(pt,me))}),bt.subscribe(yt),!Tt&&Xt>0&&(Tt=new K.Hp({next:dt=>bt.next(dt),error:dt=>{ut=!0,ft(),Fe=Ie(Et,ke,dt),bt.error(dt)},complete:()=>{Je=!0,ft(),Fe=Ie(Et,de),bt.complete()}}),(0,S.Xf)(nt).subscribe(Tt))})(Se)}}function Ie(te,Re,...ke){if(!0===Re)return void te();if(!1===Re)return;const de=new K.Hp({next:()=>{de.unsubscribe(),te()}});return Re(...ke).subscribe(de)}},8675:(rn,Ke,j)=>{j.d(Ke,{O:()=>Ce});var S=j(7272),B=j(7669),K=j(4482);function Ce(...we){const Ie=(0,B.yG)(we);return(0,K.e)((te,Re)=>{(Ie?(0,S.z)(we,te,Ie):(0,S.z)(we,te)).subscribe(Re)})}},9468:(rn,Ke,j)=>{j.d(Ke,{R:()=>B});var S=j(4482);function B(K,Ce=0){return(0,S.e)((we,Ie)=>{Ie.add(K.schedule(()=>we.subscribe(Ie),Ce))})}},3900:(rn,Ke,j)=>{j.d(Ke,{w:()=>Ce});var S=j(8421),B=j(4482),K=j(5403);function Ce(we,Ie){return(0,B.e)((te,Re)=>{let ke=null,de=0,me=!1;const Se=()=>me&&!ke&&Re.complete();te.subscribe((0,K.x)(Re,Tt=>{ke?.unsubscribe();let Fe=0;const Pt=de++;(0,S.Xf)(we(Tt,Pt)).subscribe(ke=(0,K.x)(Re,Xt=>Re.next(Ie?Ie(Tt,Xt,Pt,Fe++):Xt),()=>{ke=null,Se()}))},()=>{me=!0,Se()}))})}},5698:(rn,Ke,j)=>{j.d(Ke,{q:()=>Ce});var S=j(515),B=j(4482),K=j(5403);function Ce(we){return we<=0?()=>S.E:(0,B.e)((Ie,te)=>{let Re=0;Ie.subscribe((0,K.x)(te,ke=>{++Re<=we&&(te.next(ke),we<=Re&&te.complete())}))})}},8505:(rn,Ke,j)=>{j.d(Ke,{b:()=>we});var S=j(576),B=j(4482),K=j(5403),Ce=j(4671);function we(Ie,te,Re){const ke=(0,S.m)(Ie)||te||Re?{next:Ie,error:te,complete:Re}:Ie;return ke?(0,B.e)((de,me)=>{var Se;null===(Se=ke.subscribe)||void 0===Se||Se.call(ke);let Tt=!0;de.subscribe((0,K.x)(me,Fe=>{var Pt;null===(Pt=ke.next)||void 0===Pt||Pt.call(ke,Fe),me.next(Fe)},()=>{var Fe;Tt=!1,null===(Fe=ke.complete)||void 0===Fe||Fe.call(ke),me.complete()},Fe=>{var Pt;Tt=!1,null===(Pt=ke.error)||void 0===Pt||Pt.call(ke,Fe),me.error(Fe)},()=>{var Fe,Pt;Tt&&(null===(Fe=ke.unsubscribe)||void 0===Fe||Fe.call(ke)),null===(Pt=ke.finalize)||void 0===Pt||Pt.call(ke)}))}):Ce.y}},8068:(rn,Ke,j)=>{j.d(Ke,{T:()=>Ce});var S=j(6805),B=j(4482),K=j(5403);function Ce(Ie=we){return(0,B.e)((te,Re)=>{let ke=!1;te.subscribe((0,K.x)(Re,de=>{ke=!0,Re.next(de)},()=>ke?Re.complete():Re.error(Ie())))})}function we(){return new S.K}},4408:(rn,Ke,j)=>{j.d(Ke,{o:()=>we});var S=j(727);class B extends S.w0{constructor(te,Re){super()}schedule(te,Re=0){return this}}const K={setInterval(Ie,te,...Re){const{delegate:ke}=K;return ke?.setInterval?ke.setInterval(Ie,te,...Re):setInterval(Ie,te,...Re)},clearInterval(Ie){const{delegate:te}=K;return(te?.clearInterval||clearInterval)(Ie)},delegate:void 0};var Ce=j(8737);class we extends B{constructor(te,Re){super(te,Re),this.scheduler=te,this.work=Re,this.pending=!1}schedule(te,Re=0){var ke;if(this.closed)return this;this.state=te;const de=this.id,me=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId(me,de,Re)),this.pending=!0,this.delay=Re,this.id=null!==(ke=this.id)&&void 0!==ke?ke:this.requestAsyncId(me,this.id,Re),this}requestAsyncId(te,Re,ke=0){return K.setInterval(te.flush.bind(te,this),ke)}recycleAsyncId(te,Re,ke=0){if(null!=ke&&this.delay===ke&&!1===this.pending)return Re;null!=Re&&K.clearInterval(Re)}execute(te,Re){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ke=this._execute(te,Re);if(ke)return ke;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(te,Re){let de,ke=!1;try{this.work(te)}catch(me){ke=!0,de=me||new Error("Scheduled action threw falsy error")}if(ke)return this.unsubscribe(),de}unsubscribe(){if(!this.closed){const{id:te,scheduler:Re}=this,{actions:ke}=Re;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ce.P)(ke,this),null!=te&&(this.id=this.recycleAsyncId(Re,te,null)),this.delay=null,super.unsubscribe()}}}},7565:(rn,Ke,j)=>{j.d(Ke,{v:()=>K});var S=j(6063);class B{constructor(we,Ie=B.now){this.schedulerActionCtor=we,this.now=Ie}schedule(we,Ie=0,te){return new this.schedulerActionCtor(this,we).schedule(te,Ie)}}B.now=S.l.now;class K extends B{constructor(we,Ie=B.now){super(we,Ie),this.actions=[],this._active=!1}flush(we){const{actions:Ie}=this;if(this._active)return void Ie.push(we);let te;this._active=!0;do{if(te=we.execute(we.state,we.delay))break}while(we=Ie.shift());if(this._active=!1,te){for(;we=Ie.shift();)we.unsubscribe();throw te}}}},4986:(rn,Ke,j)=>{j.d(Ke,{z:()=>K});var S=j(4408);const K=new(j(7565).v)(S.o)},6063:(rn,Ke,j)=>{j.d(Ke,{l:()=>S});const S={now:()=>(S.delegate||Date).now(),delegate:void 0}},3410:(rn,Ke,j)=>{j.d(Ke,{z:()=>S});const S={setTimeout(B,K,...Ce){const{delegate:we}=S;return we?.setTimeout?we.setTimeout(B,K,...Ce):setTimeout(B,K,...Ce)},clearTimeout(B){const{delegate:K}=S;return(K?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(rn,Ke,j)=>{j.d(Ke,{h:()=>B});const B=function S(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(rn,Ke,j)=>{j.d(Ke,{L:()=>S});const S="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(rn,Ke,j)=>{j.d(Ke,{K:()=>B});const B=(0,j(3888).d)(K=>function(){K(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(rn,Ke,j)=>{j.d(Ke,{_6:()=>Ie,jO:()=>Ce,yG:()=>we});var S=j(576);function K(te){return te[te.length-1]}function Ce(te){return(0,S.m)(K(te))?te.pop():void 0}function we(te){return function B(te){return te&&(0,S.m)(te.schedule)}(K(te))?te.pop():void 0}function Ie(te,Re){return"number"==typeof K(te)?te.pop():Re}},8737:(rn,Ke,j)=>{function S(B,K){if(B){const Ce=B.indexOf(K);0<=Ce&&B.splice(Ce,1)}}j.d(Ke,{P:()=>S})},3888:(rn,Ke,j)=>{function S(B){const Ce=B(we=>{Error.call(we),we.stack=(new Error).stack});return Ce.prototype=Object.create(Error.prototype),Ce.prototype.constructor=Ce,Ce}j.d(Ke,{d:()=>S})},2806:(rn,Ke,j)=>{j.d(Ke,{O:()=>Ce,x:()=>K});var S=j(2416);let B=null;function K(we){if(S.v.useDeprecatedSynchronousErrorHandling){const Ie=!B;if(Ie&&(B={errorThrown:!1,error:null}),we(),Ie){const{errorThrown:te,error:Re}=B;if(B=null,te)throw Re}}else we()}function Ce(we){S.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=we)}},9672:(rn,Ke,j)=>{function S(B,K,Ce,we=0,Ie=!1){const te=K.schedule(function(){Ce(),Ie?B.add(this.schedule(null,we)):this.unsubscribe()},we);if(B.add(te),!Ie)return te}j.d(Ke,{f:()=>S})},4671:(rn,Ke,j)=>{function S(B){return B}j.d(Ke,{y:()=>S})},1144:(rn,Ke,j)=>{j.d(Ke,{z:()=>S});const S=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(rn,Ke,j)=>{j.d(Ke,{D:()=>B});var S=j(576);function B(K){return Symbol.asyncIterator&&(0,S.m)(K?.[Symbol.asyncIterator])}},576:(rn,Ke,j)=>{function S(B){return"function"==typeof B}j.d(Ke,{m:()=>S})},3670:(rn,Ke,j)=>{j.d(Ke,{c:()=>K});var S=j(8822),B=j(576);function K(Ce){return(0,B.m)(Ce[S.L])}},6495:(rn,Ke,j)=>{j.d(Ke,{T:()=>K});var S=j(2202),B=j(576);function K(Ce){return(0,B.m)(Ce?.[S.h])}},8239:(rn,Ke,j)=>{j.d(Ke,{t:()=>B});var S=j(576);function B(K){return(0,S.m)(K?.then)}},3260:(rn,Ke,j)=>{j.d(Ke,{L:()=>Ce,Q:()=>K});var S=j(655),B=j(576);function K(we){return(0,S.FC)(this,arguments,function*(){const te=we.getReader();try{for(;;){const{value:Re,done:ke}=yield(0,S.qq)(te.read());if(ke)return yield(0,S.qq)(void 0);yield yield(0,S.qq)(Re)}}finally{te.releaseLock()}})}function Ce(we){return(0,B.m)(we?.getReader)}},4482:(rn,Ke,j)=>{j.d(Ke,{A:()=>B,e:()=>K});var S=j(576);function B(Ce){return(0,S.m)(Ce?.lift)}function K(Ce){return we=>{if(B(we))return we.lift(function(Ie){try{return Ce(Ie,this)}catch(te){this.error(te)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(rn,Ke,j)=>{function S(){}j.d(Ke,{Z:()=>S})},9635:(rn,Ke,j)=>{j.d(Ke,{U:()=>K,z:()=>B});var S=j(4671);function B(...Ce){return K(Ce)}function K(Ce){return 0===Ce.length?S.y:1===Ce.length?Ce[0]:function(Ie){return Ce.reduce((te,Re)=>Re(te),Ie)}}},7849:(rn,Ke,j)=>{j.d(Ke,{h:()=>K});var S=j(2416),B=j(3410);function K(Ce){B.z.setTimeout(()=>{const{onUnhandledError:we}=S.v;if(!we)throw Ce;we(Ce)})}},4532:(rn,Ke,j)=>{function S(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(Ke,{z:()=>S})},655:(rn,Ke,j)=>{function Ce(Ve,Qe){var Ue={};for(var Ge in Ve)Object.prototype.hasOwnProperty.call(Ve,Ge)&&Qe.indexOf(Ge)<0&&(Ue[Ge]=Ve[Ge]);if(null!=Ve&&"function"==typeof Object.getOwnPropertySymbols){var at=0;for(Ge=Object.getOwnPropertySymbols(Ve);at<Ge.length;at++)Qe.indexOf(Ge[at])<0&&Object.prototype.propertyIsEnumerable.call(Ve,Ge[at])&&(Ue[Ge[at]]=Ve[Ge[at]])}return Ue}function Se(Ve,Qe,Ue,Ge){return new(Ue||(Ue=Promise))(function(et,St){function Nt(Kt){try{kt(Ge.next(Kt))}catch(Ft){St(Ft)}}function _n(Kt){try{kt(Ge.throw(Kt))}catch(Ft){St(Ft)}}function kt(Kt){Kt.done?et(Kt.value):function at(et){return et instanceof Ue?et:new Ue(function(St){St(et)})}(Kt.value).then(Nt,_n)}kt((Ge=Ge.apply(Ve,Qe||[])).next())})}function pt(Ve){return this instanceof pt?(this.v=Ve,this):new pt(Ve)}function nt(Ve,Qe,Ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var at,Ge=Ue.apply(Ve,Qe||[]),et=[];return at={},St("next"),St("throw"),St("return"),at[Symbol.asyncIterator]=function(){return this},at;function St($t){Ge[$t]&&(at[$t]=function(Tn){return new Promise(function(rr,Gn){et.push([$t,Tn,rr,Gn])>1||Nt($t,Tn)})})}function Nt($t,Tn){try{!function _n($t){$t.value instanceof pt?Promise.resolve($t.value.v).then(kt,Kt):Ft(et[0][2],$t)}(Ge[$t](Tn))}catch(rr){Ft(et[0][3],rr)}}function kt($t){Nt("next",$t)}function Kt($t){Nt("throw",$t)}function Ft($t,Tn){$t(Tn),et.shift(),et.length&&Nt(et[0][0],et[0][1])}}function bt(Ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,Qe=Ve[Symbol.asyncIterator];return Qe?Qe.call(Ve):(Ve=function Xt(Ve){var Qe="function"==typeof Symbol&&Symbol.iterator,Ue=Qe&&Ve[Qe],Ge=0;if(Ue)return Ue.call(Ve);if(Ve&&"number"==typeof Ve.length)return{next:function(){return Ve&&Ge>=Ve.length&&(Ve=void 0),{value:Ve&&Ve[Ge++],done:!Ve}}};throw new TypeError(Qe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ve),Ue={},Ge("next"),Ge("throw"),Ge("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue);function Ge(et){Ue[et]=Ve[et]&&function(St){return new Promise(function(Nt,_n){!function at(et,St,Nt,_n){Promise.resolve(_n).then(function(kt){et({value:kt,done:Nt})},St)}(Nt,_n,(St=Ve[et](St)).done,St.value)})}}}j.d(Ke,{FC:()=>nt,KL:()=>bt,_T:()=>Ce,mG:()=>Se,qq:()=>pt})},6895:(rn,Ke,j)=>{j.d(Ke,{Do:()=>ft,EM:()=>us,HT:()=>Ce,JF:()=>wo,K0:()=>Ie,Mx:()=>ei,NF:()=>x1,O5:()=>y1,PM:()=>ls,S$:()=>Xt,V_:()=>ke,Ye:()=>Et,b0:()=>ut,bD:()=>to,ez:()=>Us,q:()=>K,sg:()=>i1,tP:()=>Ti,w_:()=>we});var S=j(4650);let B=null;function K(){return B}function Ce(L){B||(B=L)}class we{}const Ie=new S.OlP("DocumentToken");let te=(()=>{class L{historyGo(P){throw new Error("Not implemented")}}return L.\u0275fac=function(P){return new(P||L)},L.\u0275prov=S.Yz7({token:L,factory:function(){return function Re(){return(0,S.LFG)(de)}()},providedIn:"platform"}),L})();const ke=new S.OlP("Location Initialized");let de=(()=>{class L extends te{constructor(P){super(),this._doc=P,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return K().getBaseHref(this._doc)}onPopState(P){const Y=K().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("popstate",P,!1),()=>Y.removeEventListener("popstate",P)}onHashChange(P){const Y=K().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("hashchange",P,!1),()=>Y.removeEventListener("hashchange",P)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(P){this._location.pathname=P}pushState(P,Y,fe){me()?this._history.pushState(P,Y,fe):this._location.hash=fe}replaceState(P,Y,fe){me()?this._history.replaceState(P,Y,fe):this._location.hash=fe}forward(){this._history.forward()}back(){this._history.back()}historyGo(P=0){this._history.go(P)}getState(){return this._history.state}}return L.\u0275fac=function(P){return new(P||L)(S.LFG(Ie))},L.\u0275prov=S.Yz7({token:L,factory:function(){return function Se(){return new de((0,S.LFG)(Ie))}()},providedIn:"platform"}),L})();function me(){return!!window.history.pushState}function Tt(L,U){if(0==L.length)return U;if(0==U.length)return L;let P=0;return L.endsWith("/")&&P++,U.startsWith("/")&&P++,2==P?L+U.substring(1):1==P?L+U:L+"/"+U}function Fe(L){const U=L.match(/#|\?|$/),P=U&&U.index||L.length;return L.slice(0,P-("/"===L[P-1]?1:0))+L.slice(P)}function Pt(L){return L&&"?"!==L[0]?"?"+L:L}let Xt=(()=>{class L{historyGo(P){throw new Error("Not implemented")}}return L.\u0275fac=function(P){return new(P||L)},L.\u0275prov=S.Yz7({token:L,factory:function(){return(0,S.f3M)(ut)},providedIn:"root"}),L})();const Je=new S.OlP("appBaseHref");let ut=(()=>{class L extends Xt{constructor(P,Y){super(),this._platformLocation=P,this._removeListenerFns=[],this._baseHref=Y??this._platformLocation.getBaseHrefFromDOM()??(0,S.f3M)(Ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}prepareExternalUrl(P){return Tt(this._baseHref,P)}path(P=!1){const Y=this._platformLocation.pathname+Pt(this._platformLocation.search),fe=this._platformLocation.hash;return fe&&P?`${Y}${fe}`:Y}pushState(P,Y,fe,We){const vt=this.prepareExternalUrl(fe+Pt(We));this._platformLocation.pushState(P,Y,vt)}replaceState(P,Y,fe,We){const vt=this.prepareExternalUrl(fe+Pt(We));this._platformLocation.replaceState(P,Y,vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}}return L.\u0275fac=function(P){return new(P||L)(S.LFG(te),S.LFG(Je,8))},L.\u0275prov=S.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})(),ft=(()=>{class L extends Xt{constructor(P,Y){super(),this._platformLocation=P,this._baseHref="",this._removeListenerFns=[],null!=Y&&(this._baseHref=Y)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}path(P=!1){let Y=this._platformLocation.hash;return null==Y&&(Y="#"),Y.length>0?Y.substring(1):Y}prepareExternalUrl(P){const Y=Tt(this._baseHref,P);return Y.length>0?"#"+Y:Y}pushState(P,Y,fe,We){let vt=this.prepareExternalUrl(fe+Pt(We));0==vt.length&&(vt=this._platformLocation.pathname),this._platformLocation.pushState(P,Y,vt)}replaceState(P,Y,fe,We){let vt=this.prepareExternalUrl(fe+Pt(We));0==vt.length&&(vt=this._platformLocation.pathname),this._platformLocation.replaceState(P,Y,vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}}return L.\u0275fac=function(P){return new(P||L)(S.LFG(te),S.LFG(Je,8))},L.\u0275prov=S.Yz7({token:L,factory:L.\u0275fac}),L})(),Et=(()=>{class L{constructor(P){this._subject=new S.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=P;const Y=this._locationStrategy.getBaseHref();this._basePath=function bt(L){if(new RegExp("^(https?:)?//").test(L)){const[,P]=L.split(/\/\/[^\/]+/);return P}return L}(Fe(yt(Y))),this._locationStrategy.onPopState(fe=>{this._subject.emit({url:this.path(!0),pop:!0,state:fe.state,type:fe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(P=!1){return this.normalize(this._locationStrategy.path(P))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(P,Y=""){return this.path()==this.normalize(P+Pt(Y))}normalize(P){return L.stripTrailingSlash(function nt(L,U){return L&&new RegExp(`^${L}([/;?#]|$)`).test(U)?U.substring(L.length):U}(this._basePath,yt(P)))}prepareExternalUrl(P){return P&&"/"!==P[0]&&(P="/"+P),this._locationStrategy.prepareExternalUrl(P)}go(P,Y="",fe=null){this._locationStrategy.pushState(fe,"",P,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+Pt(Y)),fe)}replaceState(P,Y="",fe=null){this._locationStrategy.replaceState(fe,"",P,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+Pt(Y)),fe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(P=0){this._locationStrategy.historyGo?.(P)}onUrlChange(P){return this._urlChangeListeners.push(P),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Y=>{this._notifyUrlChangeListeners(Y.url,Y.state)})),()=>{const Y=this._urlChangeListeners.indexOf(P);this._urlChangeListeners.splice(Y,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(P="",Y){this._urlChangeListeners.forEach(fe=>fe(P,Y))}subscribe(P,Y,fe){return this._subject.subscribe({next:P,error:Y,complete:fe})}}return L.normalizeQueryParams=Pt,L.joinWithSlash=Tt,L.stripTrailingSlash=Fe,L.\u0275fac=function(P){return new(P||L)(S.LFG(Xt))},L.\u0275prov=S.Yz7({token:L,factory:function(){return function pt(){return new Et((0,S.LFG)(Xt))}()},providedIn:"root"}),L})();function yt(L){return L.replace(/\/index.html$/,"")}function ei(L,U){U=encodeURIComponent(U);for(const P of L.split(";")){const Y=P.indexOf("="),[fe,We]=-1==Y?[P,""]:[P.slice(0,Y),P.slice(Y+1)];if(fe.trim()===U)return decodeURIComponent(We)}return null}class Zr{constructor(U,P,Y,fe){this.$implicit=U,this.ngForOf=P,this.index=Y,this.count=fe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let i1=(()=>{class L{set ngForOf(P){this._ngForOf=P,this._ngForOfDirty=!0}set ngForTrackBy(P){this._trackByFn=P}get ngForTrackBy(){return this._trackByFn}constructor(P,Y,fe){this._viewContainer=P,this._template=Y,this._differs=fe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(P){P&&(this._template=P)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const P=this._ngForOf;!this._differ&&P&&(this._differ=this._differs.find(P).create(this.ngForTrackBy))}if(this._differ){const P=this._differ.diff(this._ngForOf);P&&this._applyChanges(P)}}_applyChanges(P){const Y=this._viewContainer;P.forEachOperation((fe,We,vt)=>{if(null==fe.previousIndex)Y.createEmbeddedView(this._template,new Zr(fe.item,this._ngForOf,-1,-1),null===vt?void 0:vt);else if(null==vt)Y.remove(null===We?void 0:We);else if(null!==We){const ln=Y.get(We);Y.move(ln,vt),Lr(ln,fe)}});for(let fe=0,We=Y.length;fe<We;fe++){const ln=Y.get(fe).context;ln.index=fe,ln.count=We,ln.ngForOf=this._ngForOf}P.forEachIdentityChange(fe=>{Lr(Y.get(fe.currentIndex),fe)})}static ngTemplateContextGuard(P,Y){return!0}}return L.\u0275fac=function(P){return new(P||L)(S.Y36(S.s_b),S.Y36(S.Rgc),S.Y36(S.ZZ4))},L.\u0275dir=S.lG2({type:L,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),L})();function Lr(L,U){L.context.$implicit=U.item}let y1=(()=>{class L{constructor(P,Y){this._viewContainer=P,this._context=new En,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Y}set ngIf(P){this._context.$implicit=this._context.ngIf=P,this._updateView()}set ngIfThen(P){ti("ngIfThen",P),this._thenTemplateRef=P,this._thenViewRef=null,this._updateView()}set ngIfElse(P){ti("ngIfElse",P),this._elseTemplateRef=P,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(P,Y){return!0}}return L.\u0275fac=function(P){return new(P||L)(S.Y36(S.s_b),S.Y36(S.Rgc))},L.\u0275dir=S.lG2({type:L,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),L})();class En{constructor(){this.$implicit=null,this.ngIf=null}}function ti(L,U){if(U&&!U.createEmbeddedView)throw new Error(`${L} must be a TemplateRef, but received '${(0,S.AaK)(U)}'.`)}let Ti=(()=>{class L{constructor(P){this._viewContainerRef=P,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(P){if(P.ngTemplateOutlet||P.ngTemplateOutletInjector){const Y=this._viewContainerRef;if(this._viewRef&&Y.remove(Y.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:fe,ngTemplateOutletContext:We,ngTemplateOutletInjector:vt}=this;this._viewRef=Y.createEmbeddedView(fe,We,vt?{injector:vt}:void 0)}else this._viewRef=null}else this._viewRef&&P.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return L.\u0275fac=function(P){return new(P||L)(S.Y36(S.s_b))},L.\u0275dir=S.lG2({type:L,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[S.TTD]}),L})(),Us=(()=>{class L{}return L.\u0275fac=function(P){return new(P||L)},L.\u0275mod=S.oAB({type:L}),L.\u0275inj=S.cJS({}),L})();const to="browser",$r="server";function x1(L){return L===to}function ls(L){return L===$r}let us=(()=>{class L{}return L.\u0275prov=(0,S.Yz7)({token:L,providedIn:"root",factory:()=>new ki((0,S.LFG)(Ie),window)}),L})();class ki{constructor(U,P){this.document=U,this.window=P,this.offset=()=>[0,0]}setOffset(U){this.offset=Array.isArray(U)?()=>U:U}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(U){this.supportsScrolling()&&this.window.scrollTo(U[0],U[1])}scrollToAnchor(U){if(!this.supportsScrolling())return;const P=function N1(L,U){const P=L.getElementById(U)||L.getElementsByName(U)[0];if(P)return P;if("function"==typeof L.createTreeWalker&&L.body&&(L.body.createShadowRoot||L.body.attachShadow)){const Y=L.createTreeWalker(L.body,NodeFilter.SHOW_ELEMENT);let fe=Y.currentNode;for(;fe;){const We=fe.shadowRoot;if(We){const vt=We.getElementById(U)||We.querySelector(`[name="${U}"]`);if(vt)return vt}fe=Y.nextNode()}}return null}(this.document,U);P&&(this.scrollToElement(P),P.focus())}setHistoryScrollRestoration(U){if(this.supportScrollRestoration()){const P=this.window.history;P&&P.scrollRestoration&&(P.scrollRestoration=U)}}scrollToElement(U){const P=U.getBoundingClientRect(),Y=P.left+this.window.pageXOffset,fe=P.top+this.window.pageYOffset,We=this.offset();this.window.scrollTo(Y-We[0],fe-We[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const U=w1(this.window.history)||w1(Object.getPrototypeOf(this.window.history));return!(!U||!U.writable&&!U.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function w1(L){return Object.getOwnPropertyDescriptor(L,"scrollRestoration")}class wo{}},529:(rn,Ke,j)=>{j.d(Ke,{JF:()=>ci,WM:()=>de,eN:()=>Qe});var S=j(6895),B=j(4650),K=j(9646),Ce=j(9751),we=j(4351),Ie=j(9300),te=j(4004);class Re{}class ke{}class de{constructor(le){this.normalizedNames=new Map,this.lazyUpdate=null,le?this.lazyInit="string"==typeof le?()=>{this.headers=new Map,le.split("\n").forEach(pe=>{const Oe=pe.indexOf(":");if(Oe>0){const ne=pe.slice(0,Oe),ie=ne.toLowerCase(),ge=pe.slice(Oe+1).trim();this.maybeSetNormalizedName(ne,ie),this.headers.has(ie)?this.headers.get(ie).push(ge):this.headers.set(ie,[ge])}})}:()=>{this.headers=new Map,Object.keys(le).forEach(pe=>{let Oe=le[pe];const ne=pe.toLowerCase();"string"==typeof Oe&&(Oe=[Oe]),Oe.length>0&&(this.headers.set(ne,Oe),this.maybeSetNormalizedName(pe,ne))})}:this.headers=new Map}has(le){return this.init(),this.headers.has(le.toLowerCase())}get(le){this.init();const pe=this.headers.get(le.toLowerCase());return pe&&pe.length>0?pe[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(le){return this.init(),this.headers.get(le.toLowerCase())||null}append(le,pe){return this.clone({name:le,value:pe,op:"a"})}set(le,pe){return this.clone({name:le,value:pe,op:"s"})}delete(le,pe){return this.clone({name:le,value:pe,op:"d"})}maybeSetNormalizedName(le,pe){this.normalizedNames.has(pe)||this.normalizedNames.set(pe,le)}init(){this.lazyInit&&(this.lazyInit instanceof de?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(le=>this.applyUpdate(le)),this.lazyUpdate=null))}copyFrom(le){le.init(),Array.from(le.headers.keys()).forEach(pe=>{this.headers.set(pe,le.headers.get(pe)),this.normalizedNames.set(pe,le.normalizedNames.get(pe))})}clone(le){const pe=new de;return pe.lazyInit=this.lazyInit&&this.lazyInit instanceof de?this.lazyInit:this,pe.lazyUpdate=(this.lazyUpdate||[]).concat([le]),pe}applyUpdate(le){const pe=le.name.toLowerCase();switch(le.op){case"a":case"s":let Oe=le.value;if("string"==typeof Oe&&(Oe=[Oe]),0===Oe.length)return;this.maybeSetNormalizedName(le.name,pe);const ne=("a"===le.op?this.headers.get(pe):void 0)||[];ne.push(...Oe),this.headers.set(pe,ne);break;case"d":const ie=le.value;if(ie){let ge=this.headers.get(pe);if(!ge)return;ge=ge.filter(He=>-1===ie.indexOf(He)),0===ge.length?(this.headers.delete(pe),this.normalizedNames.delete(pe)):this.headers.set(pe,ge)}else this.headers.delete(pe),this.normalizedNames.delete(pe)}}forEach(le){this.init(),Array.from(this.normalizedNames.keys()).forEach(pe=>le(this.normalizedNames.get(pe),this.headers.get(pe)))}}class Se{encodeKey(le){return Xt(le)}encodeValue(le){return Xt(le)}decodeKey(le){return decodeURIComponent(le)}decodeValue(le){return decodeURIComponent(le)}}const Fe=/%(\d[a-f0-9])/gi,Pt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Xt(Ne){return encodeURIComponent(Ne).replace(Fe,(le,pe)=>Pt[pe]??le)}function Je(Ne){return`${Ne}`}class ut{constructor(le={}){if(this.updates=null,this.cloneFrom=null,this.encoder=le.encoder||new Se,le.fromString){if(le.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Tt(Ne,le){const pe=new Map;return Ne.length>0&&Ne.replace(/^\?/,"").split("&").forEach(ne=>{const ie=ne.indexOf("="),[ge,He]=-1==ie?[le.decodeKey(ne),""]:[le.decodeKey(ne.slice(0,ie)),le.decodeValue(ne.slice(ie+1))],Te=pe.get(ge)||[];Te.push(He),pe.set(ge,Te)}),pe}(le.fromString,this.encoder)}else le.fromObject?(this.map=new Map,Object.keys(le.fromObject).forEach(pe=>{const Oe=le.fromObject[pe],ne=Array.isArray(Oe)?Oe.map(Je):[Je(Oe)];this.map.set(pe,ne)})):this.map=null}has(le){return this.init(),this.map.has(le)}get(le){this.init();const pe=this.map.get(le);return pe?pe[0]:null}getAll(le){return this.init(),this.map.get(le)||null}keys(){return this.init(),Array.from(this.map.keys())}append(le,pe){return this.clone({param:le,value:pe,op:"a"})}appendAll(le){const pe=[];return Object.keys(le).forEach(Oe=>{const ne=le[Oe];Array.isArray(ne)?ne.forEach(ie=>{pe.push({param:Oe,value:ie,op:"a"})}):pe.push({param:Oe,value:ne,op:"a"})}),this.clone(pe)}set(le,pe){return this.clone({param:le,value:pe,op:"s"})}delete(le,pe){return this.clone({param:le,value:pe,op:"d"})}toString(){return this.init(),this.keys().map(le=>{const pe=this.encoder.encodeKey(le);return this.map.get(le).map(Oe=>pe+"="+this.encoder.encodeValue(Oe)).join("&")}).filter(le=>""!==le).join("&")}clone(le){const pe=new ut({encoder:this.encoder});return pe.cloneFrom=this.cloneFrom||this,pe.updates=(this.updates||[]).concat(le),pe}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(le=>this.map.set(le,this.cloneFrom.map.get(le))),this.updates.forEach(le=>{switch(le.op){case"a":case"s":const pe=("a"===le.op?this.map.get(le.param):void 0)||[];pe.push(Je(le.value)),this.map.set(le.param,pe);break;case"d":if(void 0===le.value){this.map.delete(le.param);break}{let Oe=this.map.get(le.param)||[];const ne=Oe.indexOf(Je(le.value));-1!==ne&&Oe.splice(ne,1),Oe.length>0?this.map.set(le.param,Oe):this.map.delete(le.param)}}}),this.cloneFrom=this.updates=null)}}class Et{constructor(){this.map=new Map}set(le,pe){return this.map.set(le,pe),this}get(le){return this.map.has(le)||this.map.set(le,le.defaultValue()),this.map.get(le)}delete(le){return this.map.delete(le),this}has(le){return this.map.has(le)}keys(){return this.map.keys()}}function nt(Ne){return typeof ArrayBuffer<"u"&&Ne instanceof ArrayBuffer}function yt(Ne){return typeof Blob<"u"&&Ne instanceof Blob}function bt(Ne){return typeof FormData<"u"&&Ne instanceof FormData}class H{constructor(le,pe,Oe,ne){let ie;if(this.url=pe,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=le.toUpperCase(),function pt(Ne){switch(Ne){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ne?(this.body=void 0!==Oe?Oe:null,ie=ne):ie=Oe,ie&&(this.reportProgress=!!ie.reportProgress,this.withCredentials=!!ie.withCredentials,ie.responseType&&(this.responseType=ie.responseType),ie.headers&&(this.headers=ie.headers),ie.context&&(this.context=ie.context),ie.params&&(this.params=ie.params)),this.headers||(this.headers=new de),this.context||(this.context=new Et),this.params){const ge=this.params.toString();if(0===ge.length)this.urlWithParams=pe;else{const He=pe.indexOf("?");this.urlWithParams=pe+(-1===He?"?":He<pe.length-1?"&":"")+ge}}else this.params=new ut,this.urlWithParams=pe}serializeBody(){return null===this.body?null:nt(this.body)||yt(this.body)||bt(this.body)||function dt(Ne){return typeof URLSearchParams<"u"&&Ne instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ut?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||bt(this.body)?null:yt(this.body)?this.body.type||null:nt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ut?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(le={}){const pe=le.method||this.method,Oe=le.url||this.url,ne=le.responseType||this.responseType,ie=void 0!==le.body?le.body:this.body,ge=void 0!==le.withCredentials?le.withCredentials:this.withCredentials,He=void 0!==le.reportProgress?le.reportProgress:this.reportProgress;let Te=le.headers||this.headers,jt=le.params||this.params;const yn=le.context??this.context;return void 0!==le.setHeaders&&(Te=Object.keys(le.setHeaders).reduce((pn,Dn)=>pn.set(Dn,le.setHeaders[Dn]),Te)),le.setParams&&(jt=Object.keys(le.setParams).reduce((pn,Dn)=>pn.set(Dn,le.setParams[Dn]),jt)),new H(pe,Oe,ie,{params:jt,headers:Te,context:yn,reportProgress:He,responseType:ne,withCredentials:ge})}}var Be=(()=>((Be=Be||{})[Be.Sent=0]="Sent",Be[Be.UploadProgress=1]="UploadProgress",Be[Be.ResponseHeader=2]="ResponseHeader",Be[Be.DownloadProgress=3]="DownloadProgress",Be[Be.Response=4]="Response",Be[Be.User=5]="User",Be))();class zt{constructor(le,pe=200,Oe="OK"){this.headers=le.headers||new de,this.status=void 0!==le.status?le.status:pe,this.statusText=le.statusText||Oe,this.url=le.url||null,this.ok=this.status>=200&&this.status<300}}class It extends zt{constructor(le={}){super(le),this.type=Be.ResponseHeader}clone(le={}){return new It({headers:le.headers||this.headers,status:void 0!==le.status?le.status:this.status,statusText:le.statusText||this.statusText,url:le.url||this.url||void 0})}}class Zt extends zt{constructor(le={}){super(le),this.type=Be.Response,this.body=void 0!==le.body?le.body:null}clone(le={}){return new Zt({body:void 0!==le.body?le.body:this.body,headers:le.headers||this.headers,status:void 0!==le.status?le.status:this.status,statusText:le.statusText||this.statusText,url:le.url||this.url||void 0})}}class xt extends zt{constructor(le){super(le,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${le.url||"(unknown url)"}`:`Http failure response for ${le.url||"(unknown url)"}: ${le.status} ${le.statusText}`,this.error=le.error||null}}function Ve(Ne,le){return{body:le,headers:Ne.headers,context:Ne.context,observe:Ne.observe,params:Ne.params,reportProgress:Ne.reportProgress,responseType:Ne.responseType,withCredentials:Ne.withCredentials}}let Qe=(()=>{class Ne{constructor(pe){this.handler=pe}request(pe,Oe,ne={}){let ie;if(pe instanceof H)ie=pe;else{let Te,jt;Te=ne.headers instanceof de?ne.headers:new de(ne.headers),ne.params&&(jt=ne.params instanceof ut?ne.params:new ut({fromObject:ne.params})),ie=new H(pe,Oe,void 0!==ne.body?ne.body:null,{headers:Te,context:ne.context,params:jt,reportProgress:ne.reportProgress,responseType:ne.responseType||"json",withCredentials:ne.withCredentials})}const ge=(0,K.of)(ie).pipe((0,we.b)(Te=>this.handler.handle(Te)));if(pe instanceof H||"events"===ne.observe)return ge;const He=ge.pipe((0,Ie.h)(Te=>Te instanceof Zt));switch(ne.observe||"body"){case"body":switch(ie.responseType){case"arraybuffer":return He.pipe((0,te.U)(Te=>{if(null!==Te.body&&!(Te.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Te.body}));case"blob":return He.pipe((0,te.U)(Te=>{if(null!==Te.body&&!(Te.body instanceof Blob))throw new Error("Response is not a Blob.");return Te.body}));case"text":return He.pipe((0,te.U)(Te=>{if(null!==Te.body&&"string"!=typeof Te.body)throw new Error("Response is not a string.");return Te.body}));default:return He.pipe((0,te.U)(Te=>Te.body))}case"response":return He;default:throw new Error(`Unreachable: unhandled observe type ${ne.observe}}`)}}delete(pe,Oe={}){return this.request("DELETE",pe,Oe)}get(pe,Oe={}){return this.request("GET",pe,Oe)}head(pe,Oe={}){return this.request("HEAD",pe,Oe)}jsonp(pe,Oe){return this.request("JSONP",pe,{params:(new ut).append(Oe,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(pe,Oe={}){return this.request("OPTIONS",pe,Oe)}patch(pe,Oe,ne={}){return this.request("PATCH",pe,Ve(ne,Oe))}post(pe,Oe,ne={}){return this.request("POST",pe,Ve(ne,Oe))}put(pe,Oe,ne={}){return this.request("PUT",pe,Ve(ne,Oe))}}return Ne.\u0275fac=function(pe){return new(pe||Ne)(B.LFG(Re))},Ne.\u0275prov=B.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();function Ue(Ne,le){return le(Ne)}function Ge(Ne,le){return(pe,Oe)=>le.intercept(pe,{handle:ne=>Ne(ne,Oe)})}const et=new B.OlP("HTTP_INTERCEPTORS"),St=new B.OlP("HTTP_INTERCEPTOR_FNS");function Nt(){let Ne=null;return(le,pe)=>(null===Ne&&(Ne=((0,B.f3M)(et,{optional:!0})??[]).reduceRight(Ge,Ue)),Ne(le,pe))}let _n=(()=>{class Ne extends Re{constructor(pe,Oe){super(),this.backend=pe,this.injector=Oe,this.chain=null}handle(pe){if(null===this.chain){const Oe=Array.from(new Set(this.injector.get(St)));this.chain=Oe.reduceRight((ne,ie)=>function at(Ne,le,pe){return(Oe,ne)=>pe.runInContext(()=>le(Oe,ie=>Ne(ie,ne)))}(ne,ie,this.injector),Ue)}return this.chain(pe,Oe=>this.backend.handle(Oe))}}return Ne.\u0275fac=function(pe){return new(pe||Ne)(B.LFG(ke),B.LFG(B.lqb))},Ne.\u0275prov=B.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();const cr=/^\)\]\}',?\n/;let gt=(()=>{class Ne{constructor(pe){this.xhrFactory=pe}handle(pe){if("JSONP"===pe.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ce.y(Oe=>{const ne=this.xhrFactory.build();if(ne.open(pe.method,pe.urlWithParams),pe.withCredentials&&(ne.withCredentials=!0),pe.headers.forEach((Ot,$n)=>ne.setRequestHeader(Ot,$n.join(","))),pe.headers.has("Accept")||ne.setRequestHeader("Accept","application/json, text/plain, */*"),!pe.headers.has("Content-Type")){const Ot=pe.detectContentTypeHeader();null!==Ot&&ne.setRequestHeader("Content-Type",Ot)}if(pe.responseType){const Ot=pe.responseType.toLowerCase();ne.responseType="json"!==Ot?Ot:"text"}const ie=pe.serializeBody();let ge=null;const He=()=>{if(null!==ge)return ge;const Ot=ne.statusText||"OK",$n=new de(ne.getAllResponseHeaders()),De=function lr(Ne){return"responseURL"in Ne&&Ne.responseURL?Ne.responseURL:/^X-Request-URL:/m.test(Ne.getAllResponseHeaders())?Ne.getResponseHeader("X-Request-URL"):null}(ne)||pe.url;return ge=new It({headers:$n,status:ne.status,statusText:Ot,url:De}),ge},Te=()=>{let{headers:Ot,status:$n,statusText:De,url:be}=He(),se=null;204!==$n&&(se=typeof ne.response>"u"?ne.responseText:ne.response),0===$n&&($n=se?200:0);let xe=$n>=200&&$n<300;if("json"===pe.responseType&&"string"==typeof se){const Ct=se;se=se.replace(cr,"");try{se=""!==se?JSON.parse(se):null}catch(Jt){se=Ct,xe&&(xe=!1,se={error:Jt,text:se})}}xe?(Oe.next(new Zt({body:se,headers:Ot,status:$n,statusText:De,url:be||void 0})),Oe.complete()):Oe.error(new xt({error:se,headers:Ot,status:$n,statusText:De,url:be||void 0}))},jt=Ot=>{const{url:$n}=He(),De=new xt({error:Ot,status:ne.status||0,statusText:ne.statusText||"Unknown Error",url:$n||void 0});Oe.error(De)};let yn=!1;const pn=Ot=>{yn||(Oe.next(He()),yn=!0);let $n={type:Be.DownloadProgress,loaded:Ot.loaded};Ot.lengthComputable&&($n.total=Ot.total),"text"===pe.responseType&&ne.responseText&&($n.partialText=ne.responseText),Oe.next($n)},Dn=Ot=>{let $n={type:Be.UploadProgress,loaded:Ot.loaded};Ot.lengthComputable&&($n.total=Ot.total),Oe.next($n)};return ne.addEventListener("load",Te),ne.addEventListener("error",jt),ne.addEventListener("timeout",jt),ne.addEventListener("abort",jt),pe.reportProgress&&(ne.addEventListener("progress",pn),null!==ie&&ne.upload&&ne.upload.addEventListener("progress",Dn)),ne.send(ie),Oe.next({type:Be.Sent}),()=>{ne.removeEventListener("error",jt),ne.removeEventListener("abort",jt),ne.removeEventListener("load",Te),ne.removeEventListener("timeout",jt),pe.reportProgress&&(ne.removeEventListener("progress",pn),null!==ie&&ne.upload&&ne.upload.removeEventListener("progress",Dn)),ne.readyState!==ne.DONE&&ne.abort()}})}}return Ne.\u0275fac=function(pe){return new(pe||Ne)(B.LFG(S.JF))},Ne.\u0275prov=B.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();const Jn=new B.OlP("XSRF_ENABLED"),vn=new B.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),An=new B.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class un{}let Gr=(()=>{class Ne{constructor(pe,Oe,ne){this.doc=pe,this.platform=Oe,this.cookieName=ne,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const pe=this.doc.cookie||"";return pe!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,S.Mx)(pe,this.cookieName),this.lastCookieString=pe),this.lastToken}}return Ne.\u0275fac=function(pe){return new(pe||Ne)(B.LFG(S.K0),B.LFG(B.Lbi),B.LFG(vn))},Ne.\u0275prov=B.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();function gn(Ne,le){const pe=Ne.url.toLowerCase();if(!(0,B.f3M)(Jn)||"GET"===Ne.method||"HEAD"===Ne.method||pe.startsWith("http://")||pe.startsWith("https://"))return le(Ne);const Oe=(0,B.f3M)(un).getToken(),ne=(0,B.f3M)(An);return null!=Oe&&!Ne.headers.has(ne)&&(Ne=Ne.clone({headers:Ne.headers.set(ne,Oe)})),le(Ne)}var Gt=(()=>((Gt=Gt||{})[Gt.Interceptors=0]="Interceptors",Gt[Gt.LegacyInterceptors=1]="LegacyInterceptors",Gt[Gt.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Gt[Gt.NoXsrfProtection=3]="NoXsrfProtection",Gt[Gt.JsonpSupport=4]="JsonpSupport",Gt[Gt.RequestsMadeViaParent=5]="RequestsMadeViaParent",Gt))();function ir(Ne,le){return{\u0275kind:Ne,\u0275providers:le}}function pr(...Ne){const le=[Qe,gt,_n,{provide:Re,useExisting:_n},{provide:ke,useExisting:gt},{provide:St,useValue:gn,multi:!0},{provide:Jn,useValue:!0},{provide:un,useClass:Gr}];for(const pe of Ne)le.push(...pe.\u0275providers);return(0,B.MR2)(le)}const Mn=new B.OlP("LEGACY_INTERCEPTOR_FN");let ci=(()=>{class Ne{}return Ne.\u0275fac=function(pe){return new(pe||Ne)},Ne.\u0275mod=B.oAB({type:Ne}),Ne.\u0275inj=B.cJS({providers:[pr(ir(Gt.LegacyInterceptors,[{provide:Mn,useFactory:Nt},{provide:St,useExisting:Mn,multi:!0}]))]}),Ne})()},4650:(rn,Ke,j)=>{j.d(Ke,{$8M:()=>J2,$WT:()=>Mr,$Z:()=>qu,AFp:()=>bd,AaK:()=>Re,CHM:()=>Wi,CRH:()=>td,CZH:()=>Vh,CqO:()=>cl,D6c:()=>L9,EJc:()=>Z7,EiD:()=>w6,EpF:()=>O3,F$t:()=>hl,F4k:()=>u8,FYo:()=>rs,FiY:()=>O,G48:()=>p9,Gf:()=>Jf,GfV:()=>Ra,GkF:()=>l0,Gre:()=>d0,Hsn:()=>fl,Ikx:()=>A4,JOm:()=>po,JVY:()=>Le,JZr:()=>Xt,Jf7:()=>Gl,KtG:()=>U1,L6k:()=>lt,LAX:()=>cn,LFG:()=>Ht,LSH:()=>b6,Lbi:()=>$7,Lck:()=>df,MAs:()=>l8,MMx:()=>rh,MR2:()=>D0,NdJ:()=>H3,O4$:()=>Hi,OlP:()=>Qr,Oqu:()=>iu,P3R:()=>M6,PXZ:()=>c9,Q6J:()=>k3,QGY:()=>V3,Qsj:()=>z2,R0b:()=>Yc,RDi:()=>zs,Rgc:()=>oh,SBq:()=>xn,Sil:()=>q7,Suo:()=>ed,TTD:()=>_i,TgZ:()=>u6,Tol:()=>v8,Udp:()=>Gc,X6Q:()=>d9,XFs:()=>_t,Xpm:()=>Vn,Xts:()=>v2,Y36:()=>_4,YKP:()=>eh,YNc:()=>c8,Yjl:()=>D1,Yz7:()=>Ft,Z0I:()=>Gn,ZZ4:()=>Of,_UZ:()=>a0,_Vd:()=>ot,_c5:()=>x9,_uU:()=>I8,aQg:()=>Vf,c2e:()=>W7,cJS:()=>Tn,cg1:()=>N4,dDg:()=>i9,dqk:()=>gn,eBb:()=>Wt,eFA:()=>Od,ekj:()=>f0,eoX:()=>Rd,evT:()=>zu,f3M:()=>Ne,g9A:()=>Sd,h0i:()=>I0,hGG:()=>N9,hYB:()=>ml,hij:()=>El,iGM:()=>Xf,ifc:()=>pn,ip1:()=>Id,jDz:()=>e,kL8:()=>L4,lG2:()=>H1,lqb:()=>da,lri:()=>Ld,mCW:()=>Na,n5z:()=>k2,oAB:()=>wr,oJD:()=>I6,oxw:()=>B3,pB0:()=>Kn,q3G:()=>Z1,q4F:()=>Nu,qLn:()=>fc,qZA:()=>ol,qzn:()=>G,rWj:()=>zd,s9C:()=>dl,sBO:()=>m9,s_b:()=>Ph,soG:()=>Hh,tb:()=>Dd,tp0:()=>M,uIk:()=>s0,vHH:()=>Je,vpe:()=>m6,wAp:()=>Xn,xp6:()=>g4,z2F:()=>Fh,z3N:()=>T,zSh:()=>z6,zs3:()=>Hc});var S=j(7579),B=j(727),K=j(9751),Ce=j(6451),we=j(3099);function Ie(n){for(let i in n)if(n[i]===Ie)return i;throw Error("Could not find renamed property on target object.")}function Re(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Re).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function ke(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const de=Ie({__forward_ref__:Ie});function me(n){return n.__forward_ref__=me,n.toString=function(){return Re(this())},n}function Se(n){return Tt(n)?n():n}function Tt(n){return"function"==typeof n&&n.hasOwnProperty(de)&&n.__forward_ref__===me}function Fe(n){return n&&!!n.\u0275providers}const Xt="https://g.co/ng/security#xss";class Je extends Error{constructor(i,o){super(ut(i,o)),this.code=i}}function ut(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function ft(n){return"string"==typeof n?n:null==n?"":String(n)}function bt(n,i){throw new Je(-201,!1)}function St(n,i){null==n&&function Nt(n,i,o,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${o} ${a} ${i} <=Actual]`))}(i,n,null,"!=")}function Ft(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tn(n){return{providers:n.providers||[],imports:n.imports||[]}}function rr(n){return Nn(n,cr)||Nn(n,gt)}function Gn(n){return null!==rr(n)}function Nn(n,i){return n.hasOwnProperty(i)?n[i]:null}function On(n){return n&&(n.hasOwnProperty(lr)||n.hasOwnProperty(Jn))?n[lr]:null}const cr=Ie({\u0275prov:Ie}),lr=Ie({\u0275inj:Ie}),gt=Ie({ngInjectableDef:Ie}),Jn=Ie({ngInjectorDef:Ie});var _t=(()=>((_t=_t||{})[_t.Default=0]="Default",_t[_t.Host=1]="Host",_t[_t.Self=2]="Self",_t[_t.SkipSelf=4]="SkipSelf",_t[_t.Optional=8]="Optional",_t))();let vn;function An(n){const i=vn;return vn=n,i}function un(n,i,o){const a=rr(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&_t.Optional?null:void 0!==i?i:void bt(Re(n))}const gn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),pr={},Bn="__NG_DI_FLAG__",Mn="ngTempTokenPath",vr="ngTokenPath",ai=/\n/gm,er="\u0275",mi="__source";let bn;function Or(n){const i=bn;return bn=n,i}function ci(n,i=_t.Default){if(void 0===bn)throw new Je(-203,!1);return null===bn?un(n,void 0,i):bn.get(n,i&_t.Optional?null:void 0,i)}function Ht(n,i=_t.Default){return(function Jr(){return vn}()||ci)(Se(n),i)}function Ne(n,i=_t.Default){return Ht(n,le(i))}function le(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function pe(n){const i=[];for(let o=0;o<n.length;o++){const a=Se(n[o]);if(Array.isArray(a)){if(0===a.length)throw new Je(900,!1);let f,g=_t.Default;for(let E=0;E<a.length;E++){const x=a[E],R=ne(x);"number"==typeof R?-1===R?f=x.token:g|=R:f=x}i.push(Ht(f,g))}else i.push(Ht(a))}return i}function Oe(n,i){return n[Bn]=i,n.prototype[Bn]=i,n}function ne(n){return n[Bn]}function He(n){return{toString:n}.toString()}var Te=(()=>((Te=Te||{})[Te.OnPush=0]="OnPush",Te[Te.Default=1]="Default",Te))(),pn=(()=>{return(n=pn||(pn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",pn;var n})();const Dn={},Ot=[],$n=Ie({\u0275cmp:Ie}),De=Ie({\u0275dir:Ie}),be=Ie({\u0275pipe:Ie}),se=Ie({\u0275mod:Ie}),xe=Ie({\u0275fac:Ie}),Ct=Ie({__NG_ELEMENT_ID__:Ie});let Jt=0;function Vn(n){return He(()=>{const o=!0===n.standalone,a={},f={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Te.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Ot,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||pn.Emulated,id:"c"+Jt++,styles:n.styles||Ot,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},g=n.dependencies,E=n.features;return f.inputs=os(n.inputs,a),f.outputs=os(n.outputs),E&&E.forEach(x=>x(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(Fr).filter(ss):null,f.pipeDefs=g?()=>("function"==typeof g?g():g).map(Nr).filter(ss):null,f})}function Fr(n){return tr(n)||li(n)}function ss(n){return null!==n}function wr(n){return He(()=>({type:n.type,bootstrap:n.bootstrap||Ot,declarations:n.declarations||Ot,imports:n.imports||Ot,exports:n.exports||Ot,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function os(n,i){if(null==n)return Dn;const o={};for(const a in n)if(n.hasOwnProperty(a)){let f=n[a],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),o[f]=a,i&&(i[f]=g)}return o}const H1=Vn;function D1(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function tr(n){return n[$n]||null}function li(n){return n[De]||null}function Nr(n){return n[be]||null}function Mr(n){const i=tr(n)||li(n)||Nr(n);return null!==i&&i.standalone}function ei(n,i){const o=n[se]||null;if(!o&&!0===i)throw new Error(`Type ${Re(n)} does not have '\u0275mod' property.`);return o}const qi=0,tn=1,Hn=2,ur=3,Ur=4,gi=5,Zr=6,i1=7,Lr=8,Ri=9,y1=10,En=11,ti=12,_1=13,K1=14,Si=15,Di=16,T1=17,as=18,s1=19,C1=20,Ti=21,Ee=22,Pe=1,$e=2,ct=7,Lt=8,In=9,mn=10;function ni(n){return Array.isArray(n)&&"object"==typeof n[Pe]}function di(n){return Array.isArray(n)&&!0===n[Pe]}function Pi(n){return 0!=(4&n.flags)}function fr(n){return n.componentOffset>-1}function jn(n){return 1==(1&n.flags)}function Br(n){return null!==n.template}function Co(n){return 0!=(256&n[Hn])}function ui(n,i){return n.hasOwnProperty(xe)?n[xe]:null}class h1{constructor(i,o,a){this.previousValue=i,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function _i(){return us}function us(n){return n.type.prototype.ngOnChanges&&(n.setInput=w1),ki}function ki(){const n=Y1(this),i=n?.current;if(i){const o=n.previous;if(o===Dn)n.previous=i;else for(let a in i)o[a]=i[a];n.current=null,this.ngOnChanges(i)}}function w1(n,i,o,a){const f=this.declaredInputs[o],g=Y1(n)||function wo(n,i){return n[N1]=i}(n,{previous:Dn,current:null}),E=g.current||(g.current={}),x=g.previous,R=x[f];E[f]=new h1(R&&R.currentValue,i,x===Dn),n[a]=i}_i.ngInherit=!0;const N1="__ngSimpleChanges__";function Y1(n){return n[N1]||null}const a1=function(n,i,o){},Cr="svg";function Er(n){for(;Array.isArray(n);)n=n[qi];return n}function ji(n,i){return Er(i[n])}function pi(n,i){return Er(i[n.index])}function bs(n,i){return n.data[i]}function Ci(n,i){const o=i[n];return ni(o)?o:o[qi]}function $i(n){return 64==(64&n[Hn])}function Oi(n,i){return null==i?null:n[i]}function Rn(n){n[as]=0}function ro(n,i){n[gi]+=i;let o=n,a=n[ur];for(;null!==a&&(1===i&&1===o[gi]||-1===i&&0===o[gi]);)a[gi]+=i,o=a,a=a[ur]}const sn={lFrame:E1(null),bindingsEnabled:!0};function Eo(){return sn.bindingsEnabled}function it(){return sn.lFrame.lView}function hr(){return sn.lFrame.tView}function Wi(n){return sn.lFrame.contextLView=n,n[Lr]}function U1(n){return sn.lFrame.contextLView=null,n}function Qi(){let n=Ms();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ms(){return sn.lFrame.currentTNode}function Xi(n,i){const o=sn.lFrame;o.currentTNode=n,o.isParent=i}function Zo(){return sn.lFrame.isParent}function Ws(){sn.lFrame.isParent=!1}function ht(){return sn.lFrame.bindingIndex++}function st(n){const i=sn.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function Yn(n,i){const o=sn.lFrame;o.bindingIndex=o.bindingRootIndex=n,Tr(i)}function Tr(n){sn.lFrame.currentDirectiveIndex=n}function Vi(){return sn.lFrame.currentQueryIndex}function Ji(n){sn.lFrame.currentQueryIndex=n}function wi(n){const i=n[tn];return 2===i.type?i.declTNode:1===i.type?n[Zr]:null}function Gi(n,i,o){if(o&_t.SkipSelf){let f=i,g=n;for(;!(f=f.parent,null!==f||o&_t.Host||(f=wi(g),null===f||(g=g[Si],10&f.type))););if(null===f)return!1;i=f,n=g}const a=sn.lFrame=Ar();return a.currentTNode=i,a.lView=n,!0}function Kr(n){const i=Ar(),o=n[tn];sn.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Ar(){const n=sn.lFrame,i=null===n?null:n.child;return null===i?E1(n):i}function E1(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Gs(){const n=sn.lFrame;return sn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const c1=Gs;function Ss(){const n=Gs();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function qr(){return sn.lFrame.selectedIndex}function Zs(n){sn.lFrame.selectedIndex=n}function Wr(){const n=sn.lFrame;return bs(n.tView,n.selectedIndex)}function Hi(){sn.lFrame.currentNamespace=Cr}function ds(n,i){for(let o=i.directiveStart,a=i.directiveEnd;o<a;o++){const g=n.data[o].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:x,ngAfterViewInit:R,ngAfterViewChecked:$,ngOnDestroy:X}=g;E&&(n.contentHooks||(n.contentHooks=[])).push(-o,E),x&&((n.contentHooks||(n.contentHooks=[])).push(o,x),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,x)),R&&(n.viewHooks||(n.viewHooks=[])).push(-o,R),$&&((n.viewHooks||(n.viewHooks=[])).push(o,$),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,$)),null!=X&&(n.destroyHooks||(n.destroyHooks=[])).push(o,X)}}function f1(n,i,o){U(n,i,3,o)}function Ro(n,i,o,a){(3&n[Hn])===o&&U(n,i,o,a)}function L(n,i){let o=n[Hn];(3&o)===i&&(o&=2047,o+=1,n[Hn]=o)}function U(n,i,o,a){const g=a??-1,E=i.length-1;let x=0;for(let R=void 0!==a?65535&n[as]:0;R<E;R++)if("number"==typeof i[R+1]){if(x=i[R],null!=a&&x>=a)break}else i[R]<0&&(n[as]+=65536),(x<g||-1==g)&&(P(n,o,i,R),n[as]=(4294901760&n[as])+R+2),R++}function P(n,i,o,a){const f=o[a]<0,g=o[a+1],x=n[f?-o[a]:o[a]];if(f){if(n[Hn]>>11<n[as]>>16&&(3&n[Hn])===i){n[Hn]+=2048,a1(4,x,g);try{g.call(x)}finally{a1(5,x,g)}}}else{a1(4,x,g);try{g.call(x)}finally{a1(5,x,g)}}}const Y=-1;class fe{constructor(i,o,a){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function Fn(n,i,o){let a=0;for(;a<o.length;){const f=o[a];if("number"==typeof f){if(0!==f)break;a++;const g=o[a++],E=o[a++],x=o[a++];n.setAttribute(i,E,x,g)}else{const g=f,E=o[++a];ps(g)?n.setProperty(i,g,E):n.setAttribute(i,g,E),a++}}return a}function Ei(n){return 3===n||4===n||6===n}function ps(n){return 64===n.charCodeAt(0)}function e1(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let a=0;a<i.length;a++){const f=i[a];"number"==typeof f?o=f:0===o||R1(n,o,f,null,-1===o||2===o?i[++a]:null)}}return n}function R1(n,i,o,a,f){let g=0,E=n.length;if(-1===i)E=-1;else for(;g<n.length;){const x=n[g++];if("number"==typeof x){if(x===i){E=-1;break}if(x>i){E=g-1;break}}}for(;g<n.length;){const x=n[g];if("number"==typeof x)break;if(x===o){if(null===a)return void(null!==f&&(n[g+1]=f));if(a===n[g+1])return void(n[g+2]=f)}g++,null!==a&&g++,null!==f&&g++}-1!==E&&(n.splice(E,0,i),g=E+1),n.splice(g++,0,o),null!==a&&n.splice(g++,0,a),null!==f&&n.splice(g++,0,f)}function xi(n){return n!==Y}function oo(n){return 32767&n}function ms(n,i){let o=function Io(n){return n>>16}(n),a=i;for(;o>0;)a=a[Si],o--;return a}let bo=!0;function w2(n){const i=bo;return bo=n,i}const qo=255,P2=5;let E2=0;const d1={};function Po(n,i){const o=ii(n,i);if(-1!==o)return o;const a=i[tn];a.firstCreatePass&&(n.injectorIndex=i.length,ao(a.data,n),ao(i,null),ao(a.blueprint,null));const f=Ts(n,i),g=n.injectorIndex;if(xi(f)){const E=oo(f),x=ms(f,i),R=x[tn].data;for(let $=0;$<8;$++)i[g+$]=x[E+$]|R[E+$]}return i[g+8]=f,g}function ao(n,i){n.push(0,0,0,0,0,0,0,0,i)}function ii(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function Ts(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,a=null,f=i;for(;null!==f;){if(a=Yo(f),null===a)return Y;if(o++,f=f[Si],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return Y}function gs(n,i,o){!function Ys(n,i,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(Ct)&&(a=o[Ct]),null==a&&(a=o[Ct]=E2++);const f=a&qo;i.data[n+(f>>P2)]|=1<<f}(n,i,o)}function ko(n,i,o){if(o&_t.Optional||void 0!==n)return n;bt()}function Rt(n,i,o,a){if(o&_t.Optional&&void 0===a&&(a=null),!(o&(_t.Self|_t.Host))){const f=n[Ri],g=An(void 0);try{return f?f.get(i,a,o&_t.Optional):un(i,a,o&_t.Optional)}finally{An(g)}}return ko(a,0,o)}function Ui(n,i,o,a=_t.Default,f){if(null!==n){if(1024&i[Hn]){const E=function X2(n,i,o,a,f){let g=n,E=i;for(;null!==g&&null!==E&&1024&E[Hn]&&!(256&E[Hn]);){const x=I1(g,E,o,a|_t.Self,d1);if(x!==d1)return x;let R=g.parent;if(!R){const $=E[Ti];if($){const X=$.get(o,d1,a);if(X!==d1)return X}R=Yo(E),E=E[Si]}g=R}return f}(n,i,o,a,d1);if(E!==d1)return E}const g=I1(n,i,o,a,d1);if(g!==d1)return g}return Rt(i,o,a,f)}function I1(n,i,o,a,f){const g=function Q2(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Ct)?n[Ct]:void 0;return"number"==typeof i?i>=0?i&qo:t1:i}(o);if("function"==typeof g){if(!Gi(i,n,a))return a&_t.Host?ko(f,0,a):Rt(i,o,a,f);try{const E=g(a);if(null!=E||a&_t.Optional)return E;bt()}finally{c1()}}else if("number"==typeof g){let E=null,x=ii(n,i),R=Y,$=a&_t.Host?i[Di][Zr]:null;for((-1===x||a&_t.SkipSelf)&&(R=-1===x?Ts(n,i):i[x+8],R!==Y&&Ye(a,!1)?(E=i[tn],x=oo(R),i=ms(R,i)):x=-1);-1!==x;){const X=i[tn];if(Yt(g,x,X.data)){const ue=Oo(x,i,o,E,a,$);if(ue!==d1)return ue}R=i[x+8],R!==Y&&Ye(a,i[tn].data[x+8]===$)&&Yt(g,x,i)?(E=X,x=oo(R),i=ms(R,i)):x=-1}}return f}function Oo(n,i,o,a,f,g){const E=i[tn],x=E.data[n+8],X=an(x,E,o,null==a?fr(x)&&bo:a!=E&&0!=(3&x.type),f&_t.Host&&g===x);return null!==X?fn(i,E,X,x):d1}function an(n,i,o,a,f){const g=n.providerIndexes,E=i.data,x=1048575&g,R=n.directiveStart,X=g>>20,ze=f?x+X:n.directiveEnd;for(let qe=a?x:x+X;qe<ze;qe++){const Dt=E[qe];if(qe<R&&o===Dt||qe>=R&&Dt.type===o)return qe}if(f){const qe=E[R];if(qe&&Br(qe)&&qe.type===o)return R}return null}function fn(n,i,o,a){let f=n[o];const g=i.data;if(function We(n){return n instanceof fe}(f)){const E=f;E.resolving&&function pt(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new Je(-200,`Circular dependency in DI detected for ${n}${o}`)}(function Et(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ft(n)}(g[o]));const x=w2(E.canSeeViewProviders);E.resolving=!0;const R=E.injectImpl?An(E.injectImpl):null;Gi(n,a,_t.Default);try{f=n[o]=E.factory(void 0,g,n,a),i.firstCreatePass&&o>=a.directiveStart&&function zo(n,i,o){const{ngOnChanges:a,ngOnInit:f,ngDoCheck:g}=i.type.prototype;if(a){const E=us(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,E),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,E)}f&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,f),g&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,g),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,g))}(o,g[o],i)}finally{null!==R&&An(R),w2(x),E.resolving=!1,c1()}}return f}function Yt(n,i,o){return!!(o[i+(n>>P2)]&1<<n)}function Ye(n,i){return!(n&_t.Self||n&_t.Host&&i)}class wt{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,a){return Ui(this._tNode,this._lView,i,le(a),o)}}function t1(){return new wt(Qi(),it())}function k2(n){return He(()=>{const i=n.prototype.constructor,o=i[xe]||P1(i),a=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==a;){const g=f[xe]||P1(f);if(g&&g!==o)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function P1(n){return Tt(n)?()=>{const i=P1(Se(n));return i&&i()}:ui(n)}function Yo(n){const i=n[tn],o=i.type;return 2===o?i.declTNode:1===o?n[Zr]:null}function J2(n){return function u2(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const a=o.length;let f=0;for(;f<a;){const g=o[f];if(Ei(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<a&&"string"==typeof o[f];)f++;else{if(g===i)return o[f+1];f+=2}}}return null}(Qi(),n)}const Qo="__parameters__";function Ho(n,i,o){return He(()=>{const a=function wa(n){return function(...o){if(n){const a=n(...o);for(const f in a)this[f]=a[f]}}}(i);function f(...g){if(this instanceof f)return a.apply(this,g),this;const E=new f(...g);return x.annotation=E,x;function x(R,$,X){const ue=R.hasOwnProperty(Qo)?R[Qo]:Object.defineProperty(R,Qo,{value:[]})[Qo];for(;ue.length<=X;)ue.push(null);return(ue[X]=ue[X]||[]).push(E),R}}return o&&(f.prototype=Object.create(o.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class Qr{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Ft({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function vs(n,i){n.forEach(o=>Array.isArray(o)?vs(o,i):i(o))}function Ni(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function co(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function lo(n,i){const o=[];for(let a=0;a<n;a++)o.push(i);return o}function n1(n,i,o){let a=p1(n,i);return a>=0?n[1|a]=o:(a=~a,function S2(n,i,o,a){let f=n.length;if(f==i)n.push(o,a);else if(1===f)n.push(a,n[0]),n[0]=o;else{for(f--,n.push(n[f-1],n[f]);f>i;)n[f]=n[f-2],f--;n[i]=o,n[i+1]=a}}(n,a,i,o)),a}function B1(n,i){const o=p1(n,i);if(o>=0)return n[1|o]}function p1(n,i){return function So(n,i,o){let a=0,f=n.length>>o;for(;f!==a;){const g=a+(f-a>>1),E=n[g<<o];if(i===E)return g<<o;E>i?f=g:a=g+1}return~(f<<o)}(n,i,1)}const O=Oe(Ho("Optional"),8),M=Oe(Ho("SkipSelf"),4);var po=(()=>((po=po||{})[po.Important=1]="Important",po[po.DashCase=2]="DashCase",po))();const _s=new Map;let k4=0;const n4="__ngContext__";function Rr(n,i){ni(i)?(n[n4]=i[C1],function Sc(n){_s.set(n[C1],n)}(i)):n[n4]=i}let e2;function H2(n,i){return e2(n,i)}function p2(n){const i=n[ur];return di(i)?i[ur]:i}function go(n){return jo(n[_1])}function xc(n){return jo(n[Ur])}function jo(n){for(;null!==n&&!di(n);)n=n[Ur];return n}function vo(n,i,o,a,f){if(null!=a){let g,E=!1;di(a)?g=a:ni(a)&&(E=!0,a=a[qi]);const x=Er(a);0===n&&null!==o?null==f?oa(i,o,x):U2(i,o,x,f||null,!0):1===n&&null!==o?U2(i,o,x,f||null,!0):2===n?function $o(n,i,o){const a=j2(n,i);a&&function B2(n,i,o,a){n.removeChild(i,o,a)}(n,a,i,o)}(i,x,E):3===n&&i.destroyNode(x),null!=g&&function Ta(n,i,o,a,f){const g=o[ct];g!==Er(o)&&vo(i,n,a,g,f);for(let x=mn;x<o.length;x++){const R=o[x];rc(R[tn],R,n,i,a,g)}}(i,n,g,o,f)}}function t2(n,i,o){return n.createElement(i,o)}function n2(n,i){const o=n[In],a=o.indexOf(i),f=i[ur];512&i[Hn]&&(i[Hn]&=-513,ro(f,-1)),o.splice(a,1)}function Sa(n,i){if(n.length<=mn)return;const o=mn+i,a=n[o];if(a){const f=a[T1];null!==f&&f!==n&&n2(f,a),i>0&&(n[o-1][Ur]=a[Ur]);const g=co(n,mn+i);!function k1(n,i){rc(n,i,i[En],2,null,null),i[qi]=null,i[Zr]=null}(a[tn],a);const E=g[s1];null!==E&&E.detachView(g[tn]),a[ur]=null,a[Ur]=null,a[Hn]&=-65}return a}function a4(n,i){if(!(128&i[Hn])){const o=i[En];o.destroyNode&&rc(n,i,o,3,null,null),function F2(n){let i=n[_1];if(!i)return c4(n[tn],n);for(;i;){let o=null;if(ni(i))o=i[_1];else{const a=i[mn];a&&(o=a)}if(!o){for(;i&&!i[Ur]&&i!==n;)ni(i)&&c4(i[tn],i),i=i[ur];null===i&&(i=n),ni(i)&&c4(i[tn],i),o=i&&i[Ur]}i=o}}(i)}}function c4(n,i){if(!(128&i[Hn])){i[Hn]&=-65,i[Hn]|=128,function H4(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let a=0;a<o.length;a+=2){const f=i[o[a]];if(!(f instanceof fe)){const g=o[a+1];if(Array.isArray(g))for(let E=0;E<g.length;E+=2){const x=f[g[E]],R=g[E+1];a1(4,x,R);try{R.call(x)}finally{a1(5,x,R)}}else{a1(4,f,g);try{g.call(f)}finally{a1(5,f,g)}}}}}(n,i),function Xa(n,i){const o=n.cleanup,a=i[i1];let f=-1;if(null!==o)for(let g=0;g<o.length-1;g+=2)if("string"==typeof o[g]){const E=o[g+3];E>=0?a[f=E]():a[f=-E].unsubscribe(),g+=2}else{const E=a[f=o[g+1]];o[g].call(E)}if(null!==a){for(let g=f+1;g<a.length;g++)(0,a[g])();i[i1]=null}}(n,i),1===i[tn].type&&i[En].destroy();const o=i[T1];if(null!==o&&di(i[ur])){o!==i[ur]&&n2(o,i);const a=i[s1];null!==a&&a.detachView(n)}!function Do(n){_s.delete(n[C1])}(i)}}function Nc(n,i,o){return function Ja(n,i,o){let a=i;for(;null!==a&&40&a.type;)a=(i=a).parent;if(null===a)return o[qi];{const{componentOffset:f}=a;if(f>-1){const{encapsulation:g}=n.data[a.directiveStart+f];if(g===pn.None||g===pn.Emulated)return null}return pi(a,o)}}(n,i.parent,o)}function U2(n,i,o,a,f){n.insertBefore(i,o,a,f)}function oa(n,i,o){n.appendChild(i,o)}function ec(n,i,o,a,f){null!==a?U2(n,i,o,a,f):oa(n,i,o)}function j2(n,i){return n.parentNode(i)}function Da(n,i,o){return r2(n,i,o)}let aa,Aa,Rc,ns,r2=function G1(n,i,o){return 40&n.type?pi(n,o):null};function m2(n,i,o,a){const f=Nc(n,a,i),g=i[En],x=Da(a.parent||i[Zr],a,i);if(null!=f)if(Array.isArray(o))for(let R=0;R<o.length;R++)ec(g,f,o[R],x,!1);else ec(g,f,o,x,!1);void 0!==aa&&aa(g,a,i,o,f)}function tc(n,i){if(null!==i){const o=i.type;if(3&o)return pi(i,n);if(4&o)return ts(-1,n[i.index]);if(8&o){const a=i.child;if(null!==a)return tc(n,a);{const f=n[i.index];return di(f)?ts(-1,f):Er(f)}}if(32&o)return H2(i,n)()||Er(n[i.index]);{const a=Zi(n,i);return null!==a?Array.isArray(a)?a[0]:tc(p2(n[Di]),a):tc(n,i.next)}}return null}function Zi(n,i){return null!==i?n[Di][Zr].projection[i.projection]:null}function ts(n,i){const o=mn+n+1;if(o<i.length){const a=i[o],f=a[tn].firstChild;if(null!==f)return tc(a,f)}return i[ct]}function nc(n,i,o,a,f,g,E){for(;null!=o;){const x=a[o.index],R=o.type;if(E&&0===i&&(x&&Rr(Er(x),a),o.flags|=2),32!=(32&o.flags))if(8&R)nc(n,i,o.child,a,f,g,!1),vo(i,n,f,x,g);else if(32&R){const $=H2(o,a);let X;for(;X=$();)vo(i,n,f,X,g);vo(i,n,f,x,g)}else 16&R?Lc(n,i,a,o,f,g):vo(i,n,f,x,g);o=E?o.projectionNext:o.next}}function rc(n,i,o,a,f,g){nc(o,a,n.firstChild,i,f,g,!1)}function Lc(n,i,o,a,f,g){const E=o[Di],R=E[Zr].projection[a.projection];if(Array.isArray(R))for(let $=0;$<R.length;$++)vo(i,n,f,R[$],g);else nc(n,i,R,E[ur],f,g,!0)}function Wo(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function ic(n,i,o){const{mergedAttrs:a,classes:f,styles:g}=o;null!==a&&Fn(n,i,a),null!==f&&Wo(n,i,f),null!==g&&function To(n,i,o){n.setAttribute(i,"style",o)}(n,i,g)}function N2(n){return function x2(){if(void 0===Aa&&(Aa=null,gn.trustedTypes))try{Aa=gn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Aa}()?.createHTML(n)||n}function zs(n){Rc=n}function sc(){if(void 0===ns&&(ns=null,gn.trustedTypes))try{ns=gn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ns}function xa(n){return sc()?.createHTML(n)||n}function s2(n){return sc()?.createScriptURL(n)||n}class W2{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Xt})`}}class ac extends W2{getTypeName(){return"HTML"}}class y6 extends W2{getTypeName(){return"Style"}}class w extends W2{getTypeName(){return"Script"}}class d extends W2{getTypeName(){return"URL"}}class v extends W2{getTypeName(){return"ResourceURL"}}function T(n){return n instanceof W2?n.changingThisBreaksApplicationSecurity:n}function G(n,i){const o=function J(n){return n instanceof W2&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${Xt})`)}return o===i}function Le(n){return new ac(n)}function lt(n){return new y6(n)}function Wt(n){return new w(n)}function cn(n){return new d(n)}function Kn(n){return new v(n)}class M1{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(N2(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class o2{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const o=this.inertDocument.createElement("template");return o.innerHTML=N2(i),o}}const F4=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Na(n){return(n=String(n)).match(F4)?n:"unsafe:"+n}function Xs(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function ua(...n){const i={};for(const o of n)for(const a in o)o.hasOwnProperty(a)&&(i[a]=!0);return i}const lc=Xs("area,br,col,hr,img,wbr"),u1=Xs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),uc=Xs("rp,rt"),ha=ua(lc,ua(u1,Xs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ua(uc,Xs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ua(uc,u1)),Pc=Xs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_6=ua(Pc,Xs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),S0=Xs("script,style,template");class Vl{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,a=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?a=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,a&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let f=this.checkClobberedElement(o,o.nextSibling);if(f){o=f;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!ha.hasOwnProperty(o))return this.sanitizedSomething=!0,!S0.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const a=i.attributes;for(let f=0;f<a.length;f++){const g=a.item(f),E=g.name,x=E.toLowerCase();if(!_6.hasOwnProperty(x)){this.sanitizedSomething=!0;continue}let R=g.value;Pc[x]&&(R=Na(R)),this.buf.push(" ",E,'="',C6(R),'"')}return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();ha.hasOwnProperty(o)&&!lc.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(C6(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const Hl=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,j4=/([^\#-~ |!])/g;function C6(n){return n.replace(/&/g,"&amp;").replace(Hl,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(j4,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $4;function w6(n,i){let o=null;try{$4=$4||function zn(n){const i=new o2(n);return function cc(){try{return!!(new window.DOMParser).parseFromString(N2(""),"text/html")}catch{return!1}}()?new M1(i):i}(n);let a=i?String(i):"";o=$4.getInertBodyElement(a);let f=5,g=a;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,a=g,g=o.innerHTML,o=$4.getInertBodyElement(a)}while(a!==g);return N2((new Vl).sanitizeChildren(u4(o)||o))}finally{if(o){const a=u4(o)||o;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function u4(n){return"content"in n&&function E6(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Z1=(()=>((Z1=Z1||{})[Z1.NONE=0]="NONE",Z1[Z1.HTML=1]="HTML",Z1[Z1.STYLE=2]="STYLE",Z1[Z1.SCRIPT=3]="SCRIPT",Z1[Z1.URL=4]="URL",Z1[Z1.RESOURCE_URL=5]="RESOURCE_URL",Z1))();function I6(n){const i=a2();return i?xa(i.sanitize(Z1.HTML,n)||""):G(n,"HTML")?xa(T(n)):w6(function la(){return void 0!==Rc?Rc:typeof document<"u"?document:void 0}(),ft(n))}function b6(n){const i=a2();return i?i.sanitize(Z1.URL,n)||"":G(n,"URL")?T(n):Na(ft(n))}function fa(n){const i=a2();if(i)return s2(i.sanitize(Z1.RESOURCE_URL,n)||"");if(G(n,"ResourceURL"))return s2(T(n));throw new Je(904,!1)}function M6(n,i,o){return function Ul(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?fa:b6}(i,o)(n)}function a2(){const n=it();return n&&n[ti]}const v2=new Qr("ENVIRONMENT_INITIALIZER"),S6=new Qr("INJECTOR",-1),h4=new Qr("INJECTOR_DEF_TYPES");class D6{get(i,o=pr){if(o===pr){const a=new Error(`NullInjectorError: No provider for ${Re(i)}!`);throw a.name="NullInjectorError",a}return o}}function D0(n){return{\u0275providers:n}}function T0(...n){return{\u0275providers:T6(0,n),\u0275fromNgModule:!0}}function T6(n,...i){const o=[],a=new Set;let f;return vs(i,g=>{const E=g;hc(E,o,[],a)&&(f||(f=[]),f.push(E))}),void 0!==f&&A6(f,o),o}function A6(n,i){for(let o=0;o<n.length;o++){const{providers:f}=n[o];W4(f,g=>{i.push(g)})}}function hc(n,i,o,a){if(!(n=Se(n)))return!1;let f=null,g=On(n);const E=!g&&tr(n);if(g||E){if(E&&!E.standalone)return!1;f=n}else{const R=n.ngModule;if(g=On(R),!g)return!1;f=R}const x=a.has(f);if(E){if(x)return!1;if(a.add(f),E.dependencies){const R="function"==typeof E.dependencies?E.dependencies():E.dependencies;for(const $ of R)hc($,i,o,a)}}else{if(!g)return!1;{if(null!=g.imports&&!x){let $;a.add(f);try{vs(g.imports,X=>{hc(X,i,o,a)&&($||($=[]),$.push(X))})}finally{}void 0!==$&&A6($,i)}if(!x){const $=ui(f)||(()=>new f);i.push({provide:f,useFactory:$,deps:Ot},{provide:h4,useValue:f,multi:!0},{provide:v2,useValue:()=>Ht(f),multi:!0})}const R=g.providers;null==R||x||W4(R,X=>{i.push(X)})}}return f!==n&&void 0!==n.providers}function W4(n,i){for(let o of n)Fe(o)&&(o=o.\u0275providers),Array.isArray(o)?W4(o,i):i(o)}const Bl=Ie({provide:String,useValue:Ie});function x6(n){return null!==n&&"object"==typeof n&&Bl in n}function za(n){return"function"==typeof n}const z6=new Qr("Set Injector scope."),G4={},R6={};let P6;function f4(){return void 0===P6&&(P6=new D6),P6}class da{}class A0 extends da{get destroyed(){return this._destroyed}constructor(i,o,a,f){super(),this.parent=o,this.source=a,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,b(i,E=>this.processProvider(E)),this.records.set(S6,h(void 0,this)),f.has("environment")&&this.records.set(da,h(void 0,this));const g=this.records.get(z6);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(h4.multi,Ot,_t.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=Or(this),a=An(void 0);try{return i()}finally{Or(o),An(a)}}get(i,o=pr,a=_t.Default){this.assertNotDestroyed(),a=le(a);const f=Or(this),g=An(void 0);try{if(!(a&_t.SkipSelf)){let x=this.records.get(i);if(void 0===x){const R=function m(n){return"function"==typeof n||"object"==typeof n&&n instanceof Qr}(i)&&rr(i);x=R&&this.injectableDefInScope(R)?h(d4(i),G4):null,this.records.set(i,x)}if(null!=x)return this.hydrate(i,x)}return(a&_t.Self?f4():this.parent).get(i,o=a&_t.Optional&&o===pr?null:o)}catch(E){if("NullInjectorError"===E.name){if((E[Mn]=E[Mn]||[]).unshift(Re(i)),f)throw E;return function ie(n,i,o,a){const f=n[Mn];throw i[mi]&&f.unshift(i[mi]),n.message=function ge(n,i,o,a=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==er?n.slice(2):n;let f=Re(i);if(Array.isArray(i))f=i.map(Re).join(" -> ");else if("object"==typeof i){let g=[];for(let E in i)if(i.hasOwnProperty(E)){let x=i[E];g.push(E+":"+("string"==typeof x?JSON.stringify(x):Re(x)))}f=`{${g.join(", ")}}`}return`${o}${a?"("+a+")":""}[${f}]: ${n.replace(ai,"\n  ")}`}("\n"+n.message,f,o,a),n[vr]=f,n[Mn]=null,n}(E,i,"R3InjectorError",this.source)}throw E}finally{An(g),Or(f)}}resolveInjectorInitializers(){const i=Or(this),o=An(void 0);try{const a=this.get(v2.multi,Ot,_t.Self);for(const f of a)f()}finally{Or(i),An(o)}}toString(){const i=[],o=this.records;for(const a of o.keys())i.push(Re(a));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Je(205,!1)}processProvider(i){let o=za(i=Se(i))?i:Se(i&&i.provide);const a=function Z4(n){return x6(n)?h(void 0,n.useValue):h(function K4(n,i,o){let a;if(za(n)){const f=Se(n);return ui(f)||d4(f)}if(x6(n))a=()=>Se(n.useValue);else if(function L6(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...pe(n.deps||[]));else if(function N6(n){return!(!n||!n.useExisting)}(n))a=()=>Ht(Se(n.useExisting));else{const f=Se(n&&(n.useClass||n.provide));if(!function l(n){return!!n.deps}(n))return ui(f)||d4(f);a=()=>new f(...pe(n.deps))}return a}(n),G4)}(i);if(za(i)||!0!==i.multi)this.records.get(o);else{let f=this.records.get(o);f||(f=h(void 0,G4,!0),f.factory=()=>pe(f.multi),this.records.set(o,f)),o=i,f.multi.push(i)}this.records.set(o,a)}hydrate(i,o){return o.value===G4&&(o.value=R6,o.value=o.factory()),"object"==typeof o.value&&o.value&&function u(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=Se(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function d4(n){const i=rr(n),o=null!==i?i.factory:ui(n);if(null!==o)return o;if(n instanceof Qr)throw new Je(204,!1);if(n instanceof Function)return function Ps(n){const i=n.length;if(i>0)throw lo(i,"?"),new Je(204,!1);const o=function kr(n){const i=n&&(n[cr]||n[gt]);return i?(function br(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),i):null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Je(204,!1)}function h(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function b(n,i){for(const o of n)Array.isArray(o)?b(o,i):o&&Fe(o)?b(o.\u0275providers,i):i(o)}class z{}class V{}class rt{resolveComponentFactory(i){throw function Q(n){const i=Error(`No component factory found for ${Re(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let ot=(()=>{class n{}return n.NULL=new rt,n})();function Mt(){return dn(Qi(),it())}function dn(n,i){return new xn(pi(n,i))}let xn=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Mt,n})();function oi(n){return n instanceof xn?n.nativeElement:n}class rs{}let z2=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function y2(){const n=it(),o=Ci(Qi().index,n);return(ni(o)?o:n)[En]}(),n})(),G2=(()=>{class n{}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:()=>null}),n})();class Ra{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Nu=new Ra("15.2.0"),x0={},$l="ngOriginalError";function Wl(n){return n[$l]}class fc{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Wl(i);for(;o&&Wl(o);)o=Wl(o);return o||null}}function Gl(n){return n.ownerDocument.defaultView}function zu(n){return n.ownerDocument}function Pa(n){return n instanceof Function?n():n}function k6(n,i,o){let a=n.length;for(;;){const f=n.indexOf(i,o);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const g=i.length;if(f+g===a||n.charCodeAt(f+g)<=32)return f}o=f+1}}const ku="ng-template";function Ou(n,i,o){let a=0;for(;a<n.length;){let f=n[a++];if(o&&"class"===f){if(f=n[a],-1!==k6(f.toLowerCase(),i,0))return!0}else if(1===f){for(;a<n.length&&"string"==typeof(f=n[a++]);)if(f.toLowerCase()===i)return!0;return!1}}return!1}function q4(n){return 4===n.type&&n.value!==ku}function N0(n,i,o){return i===(4!==n.type||o?n.value:ku)}function O6(n,i,o){let a=4;const f=n.attrs||[],g=function L0(n){for(let i=0;i<n.length;i++)if(Ei(n[i]))return i;return n.length}(f);let E=!1;for(let x=0;x<i.length;x++){const R=i[x];if("number"!=typeof R){if(!E)if(4&a){if(a=2|1&a,""!==R&&!N0(n,R,o)||""===R&&1===i.length){if(Z2(a))return!1;E=!0}}else{const $=8&a?R:i[++x];if(8&a&&null!==n.attrs){if(!Ou(n.attrs,$,o)){if(Z2(a))return!1;E=!0}continue}const ue=Vu(8&a?"class":R,f,q4(n),o);if(-1===ue){if(Z2(a))return!1;E=!0;continue}if(""!==$){let ze;ze=ue>g?"":f[ue+1].toLowerCase();const qe=8&a?ze:null;if(qe&&-1!==k6(qe,$,0)||2&a&&$!==ze){if(Z2(a))return!1;E=!0}}}}else{if(!E&&!Z2(a)&&!Z2(R))return!1;if(E&&Z2(R))continue;E=!1,a=R|1&a}}return Z2(a)||E}function Z2(n){return 0==(1&n)}function Vu(n,i,o,a){if(null===i)return-1;let f=0;if(a||!o){let g=!1;for(;f<i.length;){const E=i[f];if(E===n)return f;if(3===E||6===E)g=!0;else{if(1===E||2===E){let x=i[++f];for(;"string"==typeof x;)x=i[++f];continue}if(4===E)break;if(0===E){f+=4;continue}}f+=g?1:2}return-1}return function z0(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const a=n[o];if("number"==typeof a)return-1;if(a===i)return o;o++}return-1}(i,n)}function c2(n,i,o=!1){for(let a=0;a<i.length;a++)if(O6(n,i[a],o))return!0;return!1}function Ql(n,i){e:for(let o=0;o<i.length;o++){const a=i[o];if(n.length===a.length){for(let f=0;f<n.length;f++)if(n[f]!==a[f])continue e;return!0}}return!1}function dc(n,i){return n?":not("+i.trim()+")":i}function Y4(n){let i=n[0],o=1,a=2,f="",g=!1;for(;o<n.length;){let E=n[o];if("string"==typeof E)if(2&a){const x=n[++o];f+="["+E+(x.length>0?'="'+x+'"':"")+"]"}else 8&a?f+="."+E:4&a&&(f+=" "+E);else""!==f&&!Z2(E)&&(i+=dc(g,f),f=""),a=E,g=g||!Z2(a);o++}return""!==f&&(i+=dc(g,f)),i}const Ir={};function g4(n){Xl(hr(),it(),qr()+n,!1)}function Xl(n,i,o,a){if(!a)if(3==(3&i[Hn])){const g=n.preOrderCheckHooks;null!==g&&f1(i,g,o)}else{const g=n.preOrderHooks;null!==g&&Ro(i,g,0,o)}Zs(o)}function Jl(n,i=null,o=null,a){const f=Wu(n,i,o,a);return f.resolveInjectorInitializers(),f}function Wu(n,i=null,o=null,a,f=new Set){const g=[o||Ot,T0(n)];return a=a||("object"==typeof n?void 0:Re(n)),new A0(g,i||f4(),a||null,f)}let Hc=(()=>{class n{static create(o,a){if(Array.isArray(o))return Jl({name:""},a,o,"");{const f=o.name??"";return Jl({name:f},o.parent,o.providers,f)}}}return n.THROW_IF_NOT_FOUND=pr,n.NULL=new D6,n.\u0275prov=Ft({token:n,providedIn:"any",factory:()=>Ht(S6)}),n.__NG_ELEMENT_ID__=-1,n})();function _4(n,i=_t.Default){const o=it();return null===o?Ht(n,i):Ui(Qi(),o,Se(n),i)}function qu(){throw new Error("invalid")}function Qu(n,i){const o=n.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const g=o[a+1];if(-1!==g){const E=n.data[g];Ji(o[a]),E.contentQueries(2,i[g],g)}}}function e6(n,i,o,a,f,g,E,x,R,$,X){const ue=i.blueprint.slice();return ue[qi]=f,ue[Hn]=76|a,(null!==X||n&&1024&n[Hn])&&(ue[Hn]|=1024),Rn(ue),ue[ur]=ue[Si]=n,ue[Lr]=o,ue[y1]=E||n&&n[y1],ue[En]=x||n&&n[En],ue[ti]=R||n&&n[ti]||null,ue[Ri]=$||n&&n[Ri]||null,ue[Zr]=g,ue[C1]=function t4(){return k4++}(),ue[Ti]=X,ue[Di]=2==i.type?n[Di]:ue,ue}function mc(n,i,o,a,f){let g=n.data[i];if(null===g)g=function H0(n,i,o,a,f){const g=Ms(),E=Zo(),R=n.data[i]=function c3(n,i,o,a,f,g){return{type:o,index:a,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?g:g&&g.parent,o,i,a,f);return null===n.firstChild&&(n.firstChild=R),null!==g&&(E?null==g.child&&null!==R.parent&&(g.child=R):null===g.next&&(g.next=R)),R}(n,i,o,a,f),function qt(){return sn.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=o,g.value=a,g.attrs=f;const E=function z1(){const n=sn.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();g.injectorIndex=null===E?-1:E.injectorIndex}return Xi(g,!0),g}function t6(n,i,o,a){if(0===o)return-1;const f=i.length;for(let g=0;g<o;g++)i.push(a),n.blueprint.push(a),n.data.push(null);return f}function F0(n,i,o){Kr(i);try{const a=n.viewQuery;null!==a&&Q6(1,a,o);const f=n.template;null!==f&&B0(n,i,f,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Qu(n,i),n.staticViewQueries&&Q6(2,n.viewQuery,o);const g=n.components;null!==g&&function J4(n,i){for(let o=0;o<i.length;o++)r8(n,i[o])}(i,g)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{i[Hn]&=-5,Ss()}}function U0(n,i,o,a){const f=i[Hn];if(128!=(128&f)){Kr(i);try{Rn(i),function tt(n){return sn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&B0(n,i,o,2,a);const E=3==(3&f);if(E){const $=n.preOrderCheckHooks;null!==$&&f1(i,$,null)}else{const $=n.preOrderHooks;null!==$&&Ro(i,$,0,null),L(i,0)}if(function d3(n){for(let i=go(n);null!==i;i=xc(i)){if(!i[$e])continue;const o=i[In];for(let a=0;a<o.length;a++){const f=o[a];512&f[Hn]||ro(f[ur],1),f[Hn]|=512}}}(i),function n8(n){for(let i=go(n);null!==i;i=xc(i))for(let o=mn;o<i.length;o++){const a=i[o],f=a[tn];$i(a)&&U0(f,a,f.template,a[Lr])}}(i),null!==n.contentQueries&&Qu(n,i),E){const $=n.contentCheckHooks;null!==$&&f1(i,$)}else{const $=n.contentHooks;null!==$&&Ro(i,$,1),L(i,1)}!function Yu(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let a=0;a<o.length;a++){const f=o[a];if(f<0)Zs(~f);else{const g=f,E=o[++a],x=o[++a];Yn(E,g),x(2,i[g])}}}finally{Zs(-1)}}(n,i);const x=n.components;null!==x&&function X4(n,i){for(let o=0;o<i.length;o++)p3(n,i[o])}(i,x);const R=n.viewQuery;if(null!==R&&Q6(2,R,a),E){const $=n.viewCheckHooks;null!==$&&f1(i,$)}else{const $=n.viewHooks;null!==$&&Ro(i,$,2),L(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[Hn]&=-41,512&i[Hn]&&(i[Hn]&=-513,ro(i[ur],-1))}finally{Ss()}}}function B0(n,i,o,a,f){const g=qr(),E=2&a;try{Zs(-1),E&&i.length>Ee&&Xl(n,i,Ee,!1),a1(E?2:0,f),o(a,f)}finally{Zs(g),a1(E?3:1,f)}}function o3(n,i,o){if(Pi(i)){const f=i.directiveEnd;for(let g=i.directiveStart;g<f;g++){const E=n.data[g];E.contentQueries&&E.contentQueries(1,o[g],g)}}}function B6(n,i,o){Eo()&&(function e8(n,i,o,a){const f=o.directiveStart,g=o.directiveEnd;fr(o)&&function f3(n,i,o){const a=pi(i,n),f=a3(o),g=n[y1],E=n6(n,e6(n,f,null,o.onPush?32:16,a,i,g,g.createRenderer(a,o),null,null,null));n[i.index]=E}(i,o,n.data[f+o.componentOffset]),n.firstCreatePass||Po(o,i),Rr(a,i);const E=o.initialInputs;for(let x=f;x<g;x++){const R=n.data[x],$=fn(i,n,x,o);Rr($,i),null!==E&&K0(0,x-f,$,R,0,E),Br(R)&&(Ci(o.index,i)[Lr]=fn(i,n,x,o))}}(n,i,o,pi(o,i)),64==(64&o.flags)&&t8(n,i,o))}function j0(n,i,o=pi){const a=i.localNames;if(null!==a){let f=i.index+1;for(let g=0;g<a.length;g+=2){const E=a[g+1],x=-1===E?o(i,n):n[E];n[f++]=x}}}function a3(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=j6(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function j6(n,i,o,a,f,g,E,x,R,$){const X=Ee+a,ue=X+f,ze=function $0(n,i){const o=[];for(let a=0;a<i;a++)o.push(a<n?null:Ir);return o}(X,ue),qe="function"==typeof $?$():$;return ze[tn]={type:n,blueprint:ze,template:o,queries:null,viewQuery:x,declTNode:i,data:ze.slice().fill(null,X),bindingStartIndex:X,expandoStartIndex:ue,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:R,consts:qe,incompleteFirstPass:!1}}function W6(n,i,o,a){const f=Y0(i);null===o?f.push(a):(f.push(o),n.firstCreatePass&&v3(n).push(a,f.length-1))}function W0(n,i,o,a){for(let f in n)if(n.hasOwnProperty(f)){o=null===o?{}:o;const g=n[f];null===a?G0(o,i,f,g):a.hasOwnProperty(f)&&G0(o,i,a[f],g)}return o}function G0(n,i,o,a){n.hasOwnProperty(o)?n[o].push(i,a):n[o]=[i,a]}function _2(n,i,o,a,f,g,E,x){const R=pi(i,o);let X,$=i.inputs;!x&&null!=$&&(X=$[a])?(y3(n,o,X,a,f),fr(i)&&Ju(o,i.index)):3&i.type&&(a=function o5(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),f=null!=E?E(f,i.value||"",a):f,g.setProperty(R,a,f))}function Ju(n,i){const o=Ci(i,n);16&o[Hn]||(o[Hn]|=32)}function Z0(n,i,o,a){let f=!1;if(Eo()){const g=null===a?null:{"":-1},E=function l5(n,i){const o=n.directiveRegistry;let a=null,f=null;if(o)for(let g=0;g<o.length;g++){const E=o[g];if(c2(i,E.selectors,!1))if(a||(a=[]),Br(E))if(null!==E.findHostDirectiveDefs){const x=[];f=f||new Map,E.findHostDirectiveDefs(E,x,f),a.unshift(...x,E),u3(n,i,x.length)}else a.unshift(E),u3(n,i,0);else f=f||new Map,E.findHostDirectiveDefs?.(E,a,f),a.push(E)}return null===a?null:[a,f]}(n,o);let x,R;null===E?x=R=null:[x,R]=E,null!==x&&(f=!0,G6(n,i,o,x,g,R)),g&&function h3(n,i,o){if(i){const a=n.localNames=[];for(let f=0;f<i.length;f+=2){const g=o[i[f+1]];if(null==g)throw new Je(-301,!1);a.push(i[f],g)}}}(o,a,g)}return o.mergedAttrs=e1(o.mergedAttrs,o.attrs),f}function G6(n,i,o,a,f,g){for(let $=0;$<a.length;$++)gs(Po(o,i),n,a[$].type);!function h5(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,a.length);for(let $=0;$<a.length;$++){const X=a[$];X.providersResolver&&X.providersResolver(X)}let E=!1,x=!1,R=t6(n,i,a.length,null);for(let $=0;$<a.length;$++){const X=a[$];o.mergedAttrs=e1(o.mergedAttrs,X.hostAttrs),K6(n,o,i,R,X),u5(R,X,f),null!==X.contentQueries&&(o.flags|=4),(null!==X.hostBindings||null!==X.hostAttrs||0!==X.hostVars)&&(o.flags|=64);const ue=X.type.prototype;!E&&(ue.ngOnChanges||ue.ngOnInit||ue.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),E=!0),!x&&(ue.ngOnChanges||ue.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),x=!0),R++}!function Xu(n,i,o){const f=i.directiveEnd,g=n.data,E=i.attrs,x=[];let R=null,$=null;for(let X=i.directiveStart;X<f;X++){const ue=g[X],ze=o?o.get(ue):null,Dt=ze?ze.outputs:null;R=W0(ue.inputs,X,R,ze?ze.inputs:null),$=W0(ue.outputs,X,$,Dt);const en=null===R||null===E||q4(i)?null:Y6(R,X,E);x.push(en)}null!==R&&(R.hasOwnProperty("class")&&(i.flags|=8),R.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=x,i.inputs=R,i.outputs=$}(n,o,g)}function t8(n,i,o){const a=o.directiveStart,f=o.directiveEnd,g=o.index,E=function nr(){return sn.lFrame.currentDirectiveIndex}();try{Zs(g);for(let x=a;x<f;x++){const R=n.data[x],$=i[x];Tr(x),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&c5(R,$)}}finally{Zs(-1),Tr(E)}}function c5(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function u3(n,i,o){i.componentOffset=o,(n.components||(n.components=[])).push(i.index)}function u5(n,i,o){if(o){if(i.exportAs)for(let a=0;a<i.exportAs.length;a++)o[i.exportAs[a]]=n;Br(i)&&(o[""]=n)}}function K6(n,i,o,a,f){n.data[a]=f;const g=f.factory||(f.factory=ui(f.type)),E=new fe(g,Br(f),_4);n.blueprint[a]=E,o[a]=E,function Z6(n,i,o,a,f){const g=f.hostBindings;if(g){let E=n.hostBindingOpCodes;null===E&&(E=n.hostBindingOpCodes=[]);const x=~i.index;(function l3(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(E)!=x&&E.push(x),E.push(o,a,g)}}(n,i,a,t6(n,o,f.hostVars,Ir),f)}function l2(n,i,o,a,f,g){const E=pi(n,i);!function q6(n,i,o,a,f,g,E){if(null==g)n.removeAttribute(i,f,o);else{const x=null==E?ft(g):E(g,a||"",f);n.setAttribute(i,f,x,o)}}(i[En],E,g,n.value,o,a,f)}function K0(n,i,o,a,f,g){const E=g[i];if(null!==E){const x=a.setInput;for(let R=0;R<E.length;){const $=E[R++],X=E[R++],ue=E[R++];null!==x?a.setInput(o,ue,$,X):o[X]=ue}}}function Y6(n,i,o){let a=null,f=0;for(;f<o.length;){const g=o[f];if(0!==g)if(5!==g){if("number"==typeof g)break;if(n.hasOwnProperty(g)){null===a&&(a=[]);const E=n[g];for(let x=0;x<E.length;x+=2)if(E[x]===i){a.push(g,E[x+1],o[f+1]);break}}f+=2}else f+=2;else f+=4}return a}function q0(n,i,o,a){return[n,!0,!1,i,null,0,a,o,null,null]}function p3(n,i){const o=Ci(i,n);if($i(o)){const a=o[tn];48&o[Hn]?U0(a,o,a.template,o[Lr]):o[gi]>0&&pa(o)}}function pa(n){for(let a=go(n);null!==a;a=xc(a))for(let f=mn;f<a.length;f++){const g=a[f];if($i(g))if(512&g[Hn]){const E=g[tn];U0(E,g,E.template,g[Lr])}else g[gi]>0&&pa(g)}const o=n[tn].components;if(null!==o)for(let a=0;a<o.length;a++){const f=Ci(o[a],n);$i(f)&&f[gi]>0&&pa(f)}}function r8(n,i){const o=Ci(i,n),a=o[tn];(function f5(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(a,o),F0(a,o,o[Lr])}function n6(n,i){return n[_1]?n[K1][Ur]=i:n[_1]=i,n[K1]=i,i}function m3(n){for(;n;){n[Hn]|=32;const i=p2(n);if(Co(n)&&!i)return n;n=i}return null}function r6(n,i,o,a=!0){const f=i[y1];f.begin&&f.begin();try{U0(n,i,n.template,o)}catch(E){throw a&&Q0(i,E),E}finally{f.end&&f.end()}}function Q6(n,i,o){Ji(0),i(n,o)}function Y0(n){return n[i1]||(n[i1]=[])}function v3(n){return n.cleanup||(n.cleanup=[])}function Q0(n,i){const o=n[Ri],a=o?o.get(fc,null):null;a&&a.handleError(i)}function y3(n,i,o,a,f){for(let g=0;g<o.length;){const E=o[g++],x=o[g++],R=i[E],$=n.data[E];null!==$.setInput?$.setInput(R,f,a,x):R[x]=f}}function X6(n,i,o){let a=o?n.styles:null,f=o?n.classes:null,g=0;if(null!==i)for(let E=0;E<i.length;E++){const x=i[E];"number"==typeof x?g=x:1==g?f=ke(f,x):2==g&&(a=ke(a,x+": "+i[++E]+";"))}o?n.styles=a:n.stylesWithoutHost=a,o?n.classes=f:n.classesWithoutHost=f}function J6(n,i,o,a,f=!1){for(;null!==o;){const g=i[o.index];if(null!==g&&a.push(Er(g)),di(g))for(let x=mn;x<g.length;x++){const R=g[x],$=R[tn].firstChild;null!==$&&J6(R[tn],R,$,a)}const E=o.type;if(8&E)J6(n,i,o.child,a);else if(32&E){const x=H2(o,i);let R;for(;R=x();)a.push(R)}else if(16&E){const x=Zi(i,o);if(Array.isArray(x))a.push(...x);else{const R=p2(i[Di]);J6(R[tn],R,x,a,!0)}}o=f?o.projectionNext:o.next}return a}class e0{get rootNodes(){const i=this._lView,o=i[tn];return J6(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Lr]}set context(i){this._lView[Lr]=i}get destroyed(){return 128==(128&this._lView[Hn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[ur];if(di(i)){const o=i[Lt],a=o?o.indexOf(this):-1;a>-1&&(Sa(i,a),co(o,a))}this._attachedToViewContainer=!1}a4(this._lView[tn],this._lView)}onDestroy(i){W6(this._lView[tn],this._lView,null,i)}markForCheck(){m3(this._cdRefInjectingView||this._lView)}detach(){this._lView[Hn]&=-65}reattach(){this._lView[Hn]|=64}detectChanges(){r6(this._lView[tn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sa(n,i){rc(n,i,i[En],2,null,null)}(this._lView[tn],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Je(902,!1);this._appRef=i}}class _3 extends e0{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;r6(i[tn],i,i[Lr],!1)}checkNoChanges(){}get context(){return null}}class i8 extends ot{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=tr(i);return new t0(o,this.ngModule)}}function X0(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class C3{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,a){a=le(a);const f=this.injector.get(i,x0,a);return f!==x0||o===x0?f:this.parentInjector.get(i,o,a)}}class t0 extends V{get inputs(){return X0(this.componentDef.inputs)}get outputs(){return X0(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function Fu(n){return n.map(Y4).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,a,f){let g=(f=f||this.ngModule)instanceof da?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const E=g?new C3(i,g):i,x=E.get(rs,null);if(null===x)throw new Je(407,!1);const R=E.get(G2,null),$=x.createRenderer(null,this.componentDef),X=this.componentDef.selectors[0][0]||"div",ue=a?function $6(n,i,o){return n.selectRootElement(i,o===pn.ShadowDom)}($,a,this.componentDef.encapsulation):t2($,X,function d5(n){const i=n.toLowerCase();return"svg"===i?Cr:"math"===i?"math":null}(X)),ze=this.componentDef.onPush?288:272,qe=j6(0,null,null,1,0,null,null,null,null,null),Dt=e6(null,qe,null,ze,null,null,x,$,R,E,null);let en,wn;Kr(Dt);try{const Un=this.componentDef;let gr,Ut=null;Un.findHostDirectiveDefs?(gr=[],Ut=new Map,Un.findHostDirectiveDefs(Un,gr,Ut),gr.push(Un)):gr=[Un];const Pr=function E3(n,i){const o=n[tn],a=Ee;return n[a]=i,mc(o,a,2,"#host",null)}(Dt,ue),Os=function I3(n,i,o,a,f,g,E,x){const R=f[tn];!function b3(n,i,o,a){for(const f of n)i.mergedAttrs=e1(i.mergedAttrs,f.hostAttrs);null!==i.mergedAttrs&&(X6(i,i.mergedAttrs,!0),null!==o&&ic(a,o,i))}(a,n,i,E);const $=g.createRenderer(i,o),X=e6(f,a3(o),null,o.onPush?32:16,f[n.index],n,g,$,x||null,null,null);return R.firstCreatePass&&u3(R,n,a.length-1),n6(f,X),f[n.index]=X}(Pr,ue,Un,gr,Dt,x,$);wn=bs(qe,Ee),ue&&function Fc(n,i,o,a){if(a)Fn(n,o,["ng-version",Nu.full]);else{const{attrs:f,classes:g}=function m4(n){const i=[],o=[];let a=1,f=2;for(;a<n.length;){let g=n[a];if("string"==typeof g)2===f?""!==g&&i.push(g,n[++a]):8===f&&o.push(g);else{if(!Z2(f))break;f=g}a++}return{attrs:i,classes:o}}(i.selectors[0]);f&&Fn(n,o,f),g&&g.length>0&&Wo(n,o,g.join(" "))}}($,Un,ue,a),void 0!==o&&function M3(n,i,o){const a=n.projection=[];for(let f=0;f<i.length;f++){const g=o[f];a.push(null!=g?Array.from(g):null)}}(wn,this.ngContentSelectors,o),en=function i6(n,i,o,a,f,g){const E=Qi(),x=f[tn],R=pi(E,f);G6(x,f,E,o,null,a);for(let X=0;X<o.length;X++)Rr(fn(f,x,E.directiveStart+X,E),f);t8(x,f,E),R&&Rr(R,f);const $=fn(f,x,E.directiveStart+E.componentOffset,E);if(n[Lr]=f[Lr]=$,null!==g)for(const X of g)X($,i);return o3(x,E,n),$}(Os,Un,gr,Ut,Dt,[s6]),F0(qe,Dt,null)}finally{Ss()}return new w3(this.componentType,en,dn(wn,Dt),Dt,wn)}}class w3 extends z{constructor(i,o,a,f,g){super(),this.location=a,this._rootLView=f,this._tNode=g,this.instance=o,this.hostView=this.changeDetectorRef=new _3(f),this.componentType=i}setInput(i,o){const a=this._tNode.inputs;let f;if(null!==a&&(f=a[i])){const g=this._rootLView;y3(g[tn],g,f,i,o),Ju(g,this._tNode.index)}}get injector(){return new wt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function s6(){const n=Qi();ds(it()[tn],n)}let n0=null;function Uc(){if(!n0){const n=gn.Symbol;if(n&&n.iterator)n0=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const a=i[o];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(n0=a)}}}return n0}function r0(n){return!!L3(n)&&(Array.isArray(n)||!(n instanceof Map)&&Uc()in n)}function L3(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function _o(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function s0(n,i,o,a){const f=it();return _o(f,ht(),i)&&(hr(),l2(Wr(),f,n,i,o,a)),s0}function Bc(n,i,o,a){return _o(n,ht(),o)?i+ft(o)+a:Ir}function M4(n,i,o,a,f,g){const x=function I4(n,i,o,a){const f=_o(n,i,o);return _o(n,i+1,a)||f}(n,function Ae(){return sn.lFrame.bindingIndex}(),o,f);return st(2),x?i+ft(o)+a+ft(f)+g:Ir}function c8(n,i,o,a,f,g,E,x){const R=it(),$=hr(),X=n+Ee,ue=$.firstCreatePass?function R3(n,i,o,a,f,g,E,x,R){const $=i.consts,X=mc(i,n,4,E||null,Oi($,x));Z0(i,o,X,Oi($,R)),ds(i,X);const ue=X.tViews=j6(2,X,a,f,g,i.directiveRegistry,i.pipeRegistry,null,i.schemas,$);return null!==i.queries&&(i.queries.template(i,X),ue.queries=i.queries.embeddedTView(X)),X}(X,$,R,i,o,a,f,g,E):$.data[X];Xi(ue,!1);const ze=R[En].createComment("");m2($,R,ze,ue),Rr(ze,R),n6(R,R[X]=q0(ze,R,ze,ue)),jn(ue)&&B6($,R,ue),null!=E&&j0(R,ue,x)}function l8(n){return function L1(n,i){return n[i]}(function W(){return sn.lFrame.contextLView}(),Ee+n)}function k3(n,i,o){const a=it();return _o(a,ht(),i)&&_2(hr(),Wr(),a,n,i,a[En],o,!1),k3}function o0(n,i,o,a,f){const E=f?"class":"style";y3(n,o,i.inputs[E],E,a)}function u6(n,i,o,a){const f=it(),g=hr(),E=Ee+n,x=f[En],R=f[E]=t2(x,i,function qs(){return sn.lFrame.currentNamespace}()),$=g.firstCreatePass?function b5(n,i,o,a,f,g,E){const x=i.consts,$=mc(i,n,2,f,Oi(x,g));return Z0(i,o,$,Oi(x,E)),null!==$.attrs&&X6($,$.attrs,!1),null!==$.mergedAttrs&&X6($,$.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,$),$}(E,g,f,0,i,o,a):g.data[E];return Xi($,!0),ic(x,R,$),32!=(32&$.flags)&&m2(g,f,R,$),0===function F1(){return sn.lFrame.elementDepthCount}()&&Rr(R,f),function js(){sn.lFrame.elementDepthCount++}(),jn($)&&(B6(g,f,$),o3(g,$,f)),null!==a&&j0(f,$),u6}function ol(){let n=Qi();Zo()?Ws():(n=n.parent,Xi(n,!1));const i=n;!function io(){sn.lFrame.elementDepthCount--}();const o=hr();return o.firstCreatePass&&(ds(o,n),Pi(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function or(n){return 0!=(8&n.flags)}(i)&&o0(o,i,it(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function xr(n){return 0!=(16&n.flags)}(i)&&o0(o,i,it(),i.stylesWithoutHost,!1),ol}function a0(n,i,o,a){return u6(n,i,o,a),ol(),a0}function c0(n,i,o){const a=it(),f=hr(),g=n+Ee,E=f.firstCreatePass?function M5(n,i,o,a,f){const g=i.consts,E=Oi(g,a),x=mc(i,n,8,"ng-container",E);return null!==E&&X6(x,E,!0),Z0(i,o,x,Oi(g,f)),null!==i.queries&&i.queries.elementStart(i,x),x}(g,f,a,i,o):f.data[g];Xi(E,!0);const x=a[g]=a[En].createComment("");return m2(f,a,x,E),Rr(x,a),jn(E)&&(B6(f,a,E),o3(f,E,a)),null!=o&&j0(a,E),c0}function al(){let n=Qi();const i=hr();return Zo()?Ws():(n=n.parent,Xi(n,!1)),i.firstCreatePass&&(ds(i,n),Pi(n)&&i.queries.elementEnd(n)),al}function l0(n,i,o){return c0(n,i,o),al(),l0}function O3(){return it()}function V3(n){return!!n&&"function"==typeof n.then}function u8(n){return!!n&&"function"==typeof n.subscribe}const cl=u8;function H3(n,i,o,a){const f=it(),g=hr(),E=Qi();return function ul(n,i,o,a,f,g,E){const x=jn(a),$=n.firstCreatePass&&v3(n),X=i[Lr],ue=Y0(i);let ze=!0;if(3&a.type||E){const en=pi(a,i),wn=E?E(en):en,Un=ue.length,gr=E?Pr=>E(Er(Pr[a.index])):a.index;let Ut=null;if(!E&&x&&(Ut=function F3(n,i,o,a){const f=n.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const E=f[g];if(E===o&&f[g+1]===a){const x=i[i1],R=f[g+2];return x.length>R?x[R]:null}"string"==typeof E&&(g+=2)}return null}(n,i,f,a.index)),null!==Ut)(Ut.__ngLastListenerFn__||Ut).__ngNextListenerFn__=g,Ut.__ngLastListenerFn__=g,ze=!1;else{g=U3(a,i,X,g,!1);const Pr=o.listen(wn,f,g);ue.push(g,Pr),$&&$.push(f,gr,Un,Un+1)}}else g=U3(a,i,X,g,!1);const qe=a.outputs;let Dt;if(ze&&null!==qe&&(Dt=qe[f])){const en=Dt.length;if(en)for(let wn=0;wn<en;wn+=2){const Os=i[Dt[wn]][Dt[wn+1]].subscribe(g),No=ue.length;ue.push(g,Os),$&&$.push(f,a.index,No,-(No+1))}}}(g,f,f[En],E,n,i,a),H3}function h8(n,i,o,a){try{return a1(6,i,o),!1!==o(a)}catch(f){return Q0(n,f),!1}finally{a1(7,i,o)}}function U3(n,i,o,a,f){return function g(E){if(E===Function)return a;m3(n.componentOffset>-1?Ci(n.index,i):i);let R=h8(i,o,a,E),$=g.__ngNextListenerFn__;for(;$;)R=h8(i,o,$,E)&&R,$=$.__ngNextListenerFn__;return f&&!1===R&&(E.preventDefault(),E.returnValue=!1),R}}function B3(n=1){return function so(n){return(sn.lFrame.contextLView=function Ds(n,i){for(;n>0;)i=i[Si],n--;return i}(n,sn.lFrame.contextLView))[Lr]}(n)}function S5(n,i){let o=null;const a=function Hu(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(n);for(let f=0;f<i.length;f++){const g=i[f];if("*"!==g){if(null===a?c2(n,g,!0):Ql(a,g))return f}else o=f}return o}function hl(n){const i=it()[Di][Zr];if(!i.projection){const a=i.projection=lo(n?n.length:1,null),f=a.slice();let g=i.child;for(;null!==g;){const E=n?S5(g,n):0;null!==E&&(f[E]?f[E].projectionNext=g:a[E]=g,f[E]=g),g=g.next}}}function fl(n,i=0,o){const a=it(),f=hr(),g=mc(f,Ee+n,16,null,o||null);null===g.projection&&(g.projection=i),Ws(),32!=(32&g.flags)&&function ca(n,i,o){Lc(i[En],0,i,o,Nc(n,o,i),Da(o.parent||i[Zr],o,i))}(f,a,g)}function dl(n,i,o){return pl(n,"",i,"",o),dl}function pl(n,i,o,a,f){const g=it(),E=Bc(g,i,o,a);return E!==Ir&&_2(hr(),Wr(),g,n,E,g[En],f,!1),pl}function ml(n,i,o,a,f,g,E){const x=it(),R=M4(x,i,o,a,f,g);return R!==Ir&&_2(hr(),Wr(),x,n,R,x[En],E,!1),ml}function r1(n,i){return n<<17|i<<2}function V1(n){return n>>17&32767}function Z3(n){return 2|n}function Oa(n){return(131068&n)>>2}function gl(n,i){return-131069&n|i<<2}function vl(n){return 1|n}function d8(n,i,o,a,f){const g=n[o+1],E=null===i;let x=a?V1(g):Oa(g),R=!1;for(;0!==x&&(!1===R||E);){const X=n[x+1];T5(n[x],i)&&(R=!0,n[x+1]=a?vl(X):Z3(X)),x=a?V1(X):Oa(X)}R&&(n[o+1]=a?Z3(g):vl(g))}function T5(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&p1(n,i)>=0}const Js={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function p8(n){return n.substring(Js.key,Js.keyEnd)}function Q3(n,i){const o=Js.textEnd;return o===i?-1:(i=Js.keyEnd=function J3(n,i,o){for(;i<o&&n.charCodeAt(i)>32;)i++;return i}(n,Js.key=i,o),yc(n,i,o))}function yc(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function Gc(n,i,o){return ga(n,i,o,!1),Gc}function f0(n,i){return ga(n,i,null,!0),f0}function v8(n){Y2(n1,ma,n,!0)}function ma(n,i){for(let o=function Y3(n){return function _l(n){Js.key=0,Js.keyEnd=0,Js.value=0,Js.valueEnd=0,Js.textEnd=n.length}(n),Q3(n,yc(n,0,Js.textEnd))}(i);o>=0;o=Q3(i,o))n1(n,p8(i),!0)}function ga(n,i,o,a){const f=it(),g=hr(),E=st(2);g.firstUpdatePass&&_8(g,n,E,a),i!==Ir&&_o(f,E,i)&&ru(g,g.data[qr()],f,f[En],n,f[E+1]=function w8(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Re(T(n)))),n}(i,o),a,E)}function Y2(n,i,o,a){const f=hr(),g=st(2);f.firstUpdatePass&&_8(f,null,g,a);const E=it();if(o!==Ir&&_o(E,g,o)){const x=f.data[qr()];if(E8(x,a)&&!y8(f,g)){let R=a?x.classesWithoutHost:x.stylesWithoutHost;null!==R&&(o=ke(R,o||"")),o0(f,x,E,o,a)}else!function Cs(n,i,o,a,f,g,E,x){f===Ir&&(f=Ot);let R=0,$=0,X=0<f.length?f[0]:null,ue=0<g.length?g[0]:null;for(;null!==X||null!==ue;){const ze=R<f.length?f[R+1]:void 0,qe=$<g.length?g[$+1]:void 0;let en,Dt=null;X===ue?(R+=2,$+=2,ze!==qe&&(Dt=ue,en=qe)):null===ue||null!==X&&X<ue?(R+=2,Dt=X):($+=2,Dt=ue,en=qe),null!==Dt&&ru(n,i,o,a,Dt,en,E,x),X=R<f.length?f[R]:null,ue=$<g.length?g[$]:null}}(f,x,E,E[En],E[g+1],E[g+1]=function gh(n,i,o){if(null==o||""===o)return Ot;const a=[],f=T(o);if(Array.isArray(f))for(let g=0;g<f.length;g++)n(a,f[g],!0);else if("object"==typeof f)for(const g in f)f.hasOwnProperty(g)&&n(a,g,f[g]);else"string"==typeof f&&i(a,f);return a}(n,i,o),a,g)}}function y8(n,i){return i>=n.expandoStartIndex}function _8(n,i,o,a){const f=n.data;if(null===f[o+1]){const g=f[qr()],E=y8(n,o);E8(g,a)&&null===i&&!E&&(i=!1),i=function N5(n,i,o,a){const f=function ri(n){const i=sn.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let g=a?i.residualClasses:i.residualStyles;if(null===f)0===(a?i.classBindings:i.styleBindings)&&(o=Ki(o=nu(null,n,i,o,a),i.attrs,a),g=null);else{const E=i.directiveStylingLast;if(-1===E||n[E]!==f)if(o=nu(f,n,i,o,a),null===g){let R=function L5(n,i,o){const a=o?i.classBindings:i.styleBindings;if(0!==Oa(a))return n[V1(a)]}(n,i,a);void 0!==R&&Array.isArray(R)&&(R=nu(null,n,i,R[1],a),R=Ki(R,i.attrs,a),function tu(n,i,o,a){n[V1(o?i.classBindings:i.styleBindings)]=a}(n,i,a,R))}else g=function z5(n,i,o){let a;const f=i.directiveEnd;for(let g=1+i.directiveStylingLast;g<f;g++)a=Ki(a,n[g].hostAttrs,o);return Ki(a,i.attrs,o)}(n,i,a)}return void 0!==g&&(a?i.residualClasses=g:i.residualStyles=g),o}(f,g,i,a),function mh(n,i,o,a,f,g){let E=g?i.classBindings:i.styleBindings,x=V1(E),R=Oa(E);n[a]=o;let X,$=!1;if(Array.isArray(o)?(X=o[1],(null===X||p1(o,X)>0)&&($=!0)):X=o,f)if(0!==R){const ze=V1(n[x+1]);n[a+1]=r1(ze,x),0!==ze&&(n[ze+1]=gl(n[ze+1],a)),n[x+1]=function f8(n,i){return 131071&n|i<<17}(n[x+1],a)}else n[a+1]=r1(x,0),0!==x&&(n[x+1]=gl(n[x+1],a)),x=a;else n[a+1]=r1(R,0),0===x?x=a:n[R+1]=gl(n[R+1],a),R=a;$&&(n[a+1]=Z3(n[a+1])),d8(n,X,a,!0),d8(n,X,a,!1),function D5(n,i,o,a,f){const g=f?n.residualClasses:n.residualStyles;null!=g&&"string"==typeof i&&p1(g,i)>=0&&(o[a+1]=vl(o[a+1]))}(i,X,n,a,g),E=r1(x,R),g?i.classBindings=E:i.styleBindings=E}(f,g,i,o,E,a)}}function nu(n,i,o,a,f){let g=null;const E=o.directiveEnd;let x=o.directiveStylingLast;for(-1===x?x=o.directiveStart:x++;x<E&&(g=i[x],a=Ki(a,g.hostAttrs,f),g!==n);)x++;return null!==n&&(o.directiveStylingLast=x),a}function Ki(n,i,o){const a=o?1:2;let f=-1;if(null!==i)for(let g=0;g<i.length;g++){const E=i[g];"number"==typeof E?f=E:f===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),n1(n,E,!!o||i[++g]))}return void 0===n?null:n}function ru(n,i,o,a,f,g,E,x){if(!(3&i.type))return;const R=n.data,$=R[x+1],X=function K3(n){return 1==(1&n)}($)?C8(R,i,o,f,Oa($),E):void 0;wl(X)||(wl(g)||function ka(n){return 2==(2&n)}($)&&(g=C8(R,null,o,f,x,E)),function g2(n,i,o,a,f){if(i)f?n.addClass(o,a):n.removeClass(o,a);else{let g=-1===a.indexOf("-")?void 0:po.DashCase;null==f?n.removeStyle(o,a,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=po.Important),n.setStyle(o,a,f,g))}}(a,E,ji(qr(),o),f,g))}function C8(n,i,o,a,f,g){const E=null===i;let x;for(;f>0;){const R=n[f],$=Array.isArray(R),X=$?R[1]:R,ue=null===X;let ze=o[f+1];ze===Ir&&(ze=ue?Ot:void 0);let qe=ue?B1(ze,a):X===a?ze:void 0;if($&&!wl(qe)&&(qe=B1(R,a)),wl(qe)&&(x=qe,E))return x;const Dt=n[f+1];f=E?V1(Dt):Oa(Dt)}if(null!==i){let R=g?i.residualClasses:i.residualStyles;null!=R&&(x=B1(R,a))}return x}function wl(n){return void 0!==n}function E8(n,i){return 0!=(n.flags&(i?8:16))}function I8(n,i=""){const o=it(),a=hr(),f=n+Ee,g=a.firstCreatePass?mc(a,f,1,i,null):a.data[f],E=o[f]=function Qa(n,i){return n.createText(i)}(o[En],i);m2(a,o,E,g),Xi(g,!1)}function iu(n){return El("",n,""),iu}function El(n,i,o){const a=it(),f=Bc(a,n,i,o);return f!==Ir&&function gc(n,i,o){const a=ji(i,n);!function ra(n,i,o){n.setValue(i,o)}(n[En],a,o)}(a,qr(),f),El}function d0(n,i,o){Y2(n1,ma,Bc(it(),n,i,o),!0)}function A4(n,i,o){const a=it();return _o(a,ht(),i)&&_2(hr(),Wr(),a,n,i,a[En],o,!0),A4}const Fa=void 0;var fu=["en",[["a","p"],["AM","PM"],Fa],[["AM","PM"],Fa,Fa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fa,"{1} 'at' {0}",Fa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function L8(n){const o=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===a?1:5}];let Ua={};function N4(n){const i=function $5(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=j5(i);if(o)return o;const a=i.split("-")[0];if(o=j5(a),o)return o;if("en"===a)return fu;throw new Je(701,!1)}function L4(n){return N4(n)[Xn.PluralCase]}function j5(n){return n in Ua||(Ua[n]=gn.ng&&gn.ng.common&&gn.ng.common.locales&&gn.ng.common.locales[n]),Ua[n]}var Xn=(()=>((Xn=Xn||{})[Xn.LocaleId=0]="LocaleId",Xn[Xn.DayPeriodsFormat=1]="DayPeriodsFormat",Xn[Xn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Xn[Xn.DaysFormat=3]="DaysFormat",Xn[Xn.DaysStandalone=4]="DaysStandalone",Xn[Xn.MonthsFormat=5]="MonthsFormat",Xn[Xn.MonthsStandalone=6]="MonthsStandalone",Xn[Xn.Eras=7]="Eras",Xn[Xn.FirstDayOfWeek=8]="FirstDayOfWeek",Xn[Xn.WeekendRange=9]="WeekendRange",Xn[Xn.DateFormat=10]="DateFormat",Xn[Xn.TimeFormat=11]="TimeFormat",Xn[Xn.DateTimeFormat=12]="DateTimeFormat",Xn[Xn.NumberSymbols=13]="NumberSymbols",Xn[Xn.NumberFormats=14]="NumberFormats",Xn[Xn.CurrencyCode=15]="CurrencyCode",Xn[Xn.CurrencySymbol=16]="CurrencySymbol",Xn[Xn.CurrencyName=17]="CurrencyName",Xn[Xn.Currencies=18]="Currencies",Xn[Xn.Directionality=19]="Directionality",Xn[Xn.PluralCase=20]="PluralCase",Xn[Xn.ExtraData=21]="ExtraData",Xn))();const f6="en-US";let z8=f6;class I0{}class eh{}function df(n,i){return new th(n,i??null)}class th extends I0{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new i8(this);const a=ei(i);this._bootstrapComponents=Pa(a.bootstrap),this._r3Injector=Wu(i,o,[{provide:I0,useValue:this},{provide:ot,useValue:this.componentFactoryResolver}],Re(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class nh extends eh{constructor(i){super(),this.moduleType=i}create(i){return new th(this.moduleType,i)}}class zh extends I0{constructor(i,o,a){super(),this.componentFactoryResolver=new i8(this),this.instance=null;const f=new A0([...i,{provide:I0,useValue:this},{provide:ot,useValue:this.componentFactoryResolver}],o||f4(),a,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function rh(n,i,o=null){return new zh(n,i,o).injector}let r=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const a=T6(0,o.type),f=a.length>0?rh([a],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,f)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Ft({token:n,providedIn:"environment",factory:()=>new n(Ht(da))}),n})();function e(n){n.getStandaloneInjector=i=>i.get(r).getOrCreateStandaloneInjector(n)}function pf(n){return i=>{setTimeout(n,void 0,i)}}const m6=class h7 extends S.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,a){let f=i,g=o||(()=>null),E=a;if(i&&"object"==typeof i){const R=i;f=R.next?.bind(R),g=R.error?.bind(R),E=R.complete?.bind(R)}this.__isAsync&&(g=pf(g),f&&(f=pf(f)),E&&(E=pf(E)));const x=super.subscribe({next:f,error:g,complete:E});return i instanceof B.w0&&i.add(x),x}};function f7(){return this._results[Uc()]()}class mf{get changes(){return this._changes||(this._changes=new m6)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Uc(),a=mf.prototype;a[o]||(a[o]=f7)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const a=this;a.dirty=!1;const f=function b1(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function J1(n,i,o){if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let f=n[a],g=i[a];if(o&&(f=o(f),g=o(g)),g!==f)return!1}return!0}(a._results,f,o))&&(a._results=f,a.length=f.length,a.last=f[this.length-1],a.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let oh=(()=>{class n{}return n.__NG_ELEMENT_ID__=m7,n})();const d7=oh,p7=class extends d7{constructor(i,o,a){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=a}createEmbeddedView(i,o){const a=this._declarationTContainer.tViews,f=e6(this._declarationLView,a,i,16,null,a.declTNode,null,null,null,null,o||null);f[T1]=this._declarationLView[this._declarationTContainer.index];const E=this._declarationLView[s1];return null!==E&&(f[s1]=E.createEmbeddedView(a)),F0(a,f,i),new e0(f)}};function m7(){return Rh(Qi(),it())}function Rh(n,i){return 4&n.type?new p7(i,n,dn(n,i)):null}let Ph=(()=>{class n{}return n.__NG_ELEMENT_ID__=g7,n})();function g7(){return qf(Qi(),it())}const v7=Ph,Zf=class extends v7{constructor(i,o,a){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=a}get element(){return dn(this._hostTNode,this._hostLView)}get injector(){return new wt(this._hostTNode,this._hostLView)}get parentInjector(){const i=Ts(this._hostTNode,this._hostLView);if(xi(i)){const o=ms(i,this._hostLView),a=oo(i);return new wt(o[tn].data[a+8],o)}return new wt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=Kf(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-mn}createEmbeddedView(i,o,a){let f,g;"number"==typeof a?f=a:null!=a&&(f=a.index,g=a.injector);const E=i.createEmbeddedView(o||{},g);return this.insert(E,f),E}createComponent(i,o,a,f,g){const E=i&&!function f2(n){return"function"==typeof n}(i);let x;if(E)x=o;else{const ue=o||{};x=ue.index,a=ue.injector,f=ue.projectableNodes,g=ue.environmentInjector||ue.ngModuleRef}const R=E?i:new t0(tr(i)),$=a||this.parentInjector;if(!g&&null==R.ngModule){const ze=(E?$:this.parentInjector).get(da,null);ze&&(g=ze)}const X=R.create($,f,void 0,g);return this.insert(X.hostView,x),X}insert(i,o){const a=i._lView,f=a[tn];if(function Ai(n){return di(n[ur])}(a)){const X=this.indexOf(i);if(-1!==X)this.detach(X);else{const ue=a[ur],ze=new Zf(ue,ue[Zr],ue[ur]);ze.detach(ze.indexOf(i))}}const g=this._adjustIndex(o),E=this._lContainer;!function o4(n,i,o,a){const f=mn+a,g=o.length;a>0&&(o[f-1][Ur]=i),a<g-mn?(i[Ur]=o[f],Ni(o,mn+a,i)):(o.push(i),i[Ur]=null),i[ur]=o;const E=i[T1];null!==E&&o!==E&&function Ma(n,i){const o=n[In];i[Di]!==i[ur][ur][Di]&&(n[$e]=!0),null===o?n[In]=[i]:o.push(i)}(E,i);const x=i[s1];null!==x&&x.insertView(n),i[Hn]|=64}(f,a,E,g);const x=ts(g,E),R=a[En],$=j2(R,E[ct]);return null!==$&&function s4(n,i,o,a,f,g){a[qi]=f,a[Zr]=i,rc(n,a,o,1,f,g)}(f,E[Zr],R,a,$,x),i.attachToViewContainerRef(),Ni(gf(E),g,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=Kf(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),a=Sa(this._lContainer,o);a&&(co(gf(this._lContainer),o),a4(a[tn],a))}detach(i){const o=this._adjustIndex(i,-1),a=Sa(this._lContainer,o);return a&&null!=co(gf(this._lContainer),o)?new e0(a):null}_adjustIndex(i,o=0){return i??this.length+o}};function Kf(n){return n[Lt]}function gf(n){return n[Lt]||(n[Lt]=[])}function qf(n,i){let o;const a=i[n.index];if(di(a))o=a;else{let f;if(8&n.type)f=Er(a);else{const g=i[En];f=g.createComment("");const E=pi(n,i);U2(g,j2(g,E),f,function yo(n,i){return n.nextSibling(i)}(g,E),!1)}i[n.index]=o=q0(a,i,f,n),n6(i,o)}return new Zf(o,n,i)}class vf{constructor(i){this.queryList=i,this.matches=null}clone(){return new vf(this.queryList)}setDirty(){this.queryList.setDirty()}}class yf{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const a=null!==i.contentQueries?i.contentQueries[0]:o.length,f=[];for(let g=0;g<a;g++){const E=o.getByIndex(g);f.push(this.queries[E.indexInDeclarationView].clone())}return new yf(f)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==id(i,o).matches&&this.queries[o].setDirty()}}class Yf{constructor(i,o,a=null){this.predicate=i,this.flags=o,this.read=a}}class _f{constructor(i=[]){this.queries=i}elementStart(i,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let a=0;a<this.length;a++){const f=null!==o?o.length:0,g=this.getByIndex(a).embeddedTView(i,f);g&&(g.indexInDeclarationView=a,null!==o?o.push(g):o=[g])}return null!==o?new _f(o):null}template(i,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Cf{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new Cf(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=i.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let f=0;f<a.length;f++){const g=a[f];this.matchTNodeWithReadOption(i,o,y7(o,g)),this.matchTNodeWithReadOption(i,o,an(o,i,g,!1,!1))}else a===oh?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,an(o,i,a,!1,!1))}matchTNodeWithReadOption(i,o,a){if(null!==a){const f=this.metadata.read;if(null!==f)if(f===xn||f===Ph||f===oh&&4&o.type)this.addMatch(o.index,-2);else{const g=an(o,i,f,!1,!1);null!==g&&this.addMatch(o.index,g)}else this.addMatch(o.index,a)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function y7(n,i){const o=n.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===i)return o[a+1];return null}function C7(n,i,o,a){return-1===o?function _7(n,i){return 11&n.type?dn(n,i):4&n.type?Rh(n,i):null}(i,n):-2===o?function w7(n,i,o){return o===xn?dn(i,n):o===oh?Rh(i,n):o===Ph?qf(i,n):void 0}(n,i,a):fn(n,n[tn],o,i)}function Qf(n,i,o,a){const f=i[s1].queries[a];if(null===f.matches){const g=n.data,E=o.matches,x=[];for(let R=0;R<E.length;R+=2){const $=E[R];x.push($<0?null:C7(i,g[$],E[R+1],o.metadata.read))}f.matches=x}return f.matches}function wf(n,i,o,a){const f=n.queries.getByIndex(o),g=f.matches;if(null!==g){const E=Qf(n,i,f,o);for(let x=0;x<g.length;x+=2){const R=g[x];if(R>0)a.push(E[x/2]);else{const $=g[x+1],X=i[-R];for(let ue=mn;ue<X.length;ue++){const ze=X[ue];ze[T1]===ze[ur]&&wf(ze[tn],ze,$,a)}if(null!==X[In]){const ue=X[In];for(let ze=0;ze<ue.length;ze++){const qe=ue[ze];wf(qe[tn],qe,$,a)}}}}}return a}function Xf(n){const i=it(),o=hr(),a=Vi();Ji(a+1);const f=id(o,a);if(n.dirty&&function Bs(n){return 4==(4&n[Hn])}(i)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const g=f.crossesNgTemplate?wf(o,i,a,[]):Qf(o,i,f,a);n.reset(g,oi),n.notifyOnChanges()}return!0}return!1}function Jf(n,i,o){const a=hr();a.firstCreatePass&&(rd(a,new Yf(n,i,o),-1),2==(2&i)&&(a.staticViewQueries=!0)),nd(a,it(),i)}function ed(n,i,o,a){const f=hr();if(f.firstCreatePass){const g=Qi();rd(f,new Yf(i,o,a),g.index),function I7(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(f,n),2==(2&o)&&(f.staticContentQueries=!0)}nd(f,it(),o)}function td(){return function E7(n,i){return n[s1].queries[i].queryList}(it(),Vi())}function nd(n,i,o){const a=new mf(4==(4&o));W6(n,i,a,a.destroy),null===i[s1]&&(i[s1]=new yf),i[s1].queries.push(new vf(a))}function rd(n,i,o){null===n.queries&&(n.queries=new _f),n.queries.track(new Cf(i,o))}function id(n,i){return n.queries.getByIndex(i)}function Oh(...n){}const Id=new Qr("Application Initializer");let Vh=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Oh,this.reject=Oh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,f)=>{this.resolve=a,this.reject=f})}runInitializers(){if(this.initialized)return;const o=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(V3(g))o.push(g);else if(cl(g)){const E=new Promise((x,R)=>{g.subscribe({complete:x,error:R})});o.push(E)}}Promise.all(o).then(()=>{a()}).catch(f=>{this.reject(f)}),0===o.length&&a(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Ht(Id,8))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bd=new Qr("AppId",{providedIn:"root",factory:function Md(){return`${Sf()}${Sf()}${Sf()}`}});function Sf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Sd=new Qr("Platform Initializer"),$7=new Qr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Dd=new Qr("appBootstrapListener");let W7=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Hh=new Qr("LocaleId",{providedIn:"root",factory:()=>Ne(Hh,_t.Optional|_t.SkipSelf)||function G7(){return typeof $localize<"u"&&$localize.locale||f6}()}),Z7=new Qr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class K7{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let q7=(()=>{class n{compileModuleSync(o){return new nh(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const a=this.compileModuleSync(o),g=Pa(ei(o).declarations).reduce((E,x)=>{const R=tr(x);return R&&E.push(new t0(R)),E},[]);return new K7(a,g)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const X7=(()=>Promise.resolve(0))();function Df(n){typeof Zone>"u"?X7.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Yc{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new m6(!1),this.onMicrotaskEmpty=new m6(!1),this.onStable=new m6(!1),this.onError=new m6(!1),typeof Zone>"u")throw new Je(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!a&&o,f.shouldCoalesceRunChangeDetection=a,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function J7(){let n=gn.requestAnimationFrame,i=gn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function n9(n){const i=()=>{!function t9(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(gn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Af(n),n.isCheckStableRunning=!0,Tf(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Af(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,f,g,E,x)=>{try{return xd(n),o.invokeTask(f,g,E,x)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||n.shouldCoalesceRunChangeDetection)&&i(),Nd(n)}},onInvoke:(o,a,f,g,E,x,R)=>{try{return xd(n),o.invoke(f,g,E,x,R)}finally{n.shouldCoalesceRunChangeDetection&&i(),Nd(n)}},onHasTask:(o,a,f,g)=>{o.hasTask(f,g),a===f&&("microTask"==g.change?(n._hasPendingMicrotasks=g.microTask,Af(n),Tf(n)):"macroTask"==g.change&&(n.hasPendingMacrotasks=g.macroTask))},onHandleError:(o,a,f,g)=>(o.handleError(f,g),n.runOutsideAngular(()=>n.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yc.isInAngularZone())throw new Je(909,!1)}static assertNotInAngularZone(){if(Yc.isInAngularZone())throw new Je(909,!1)}run(i,o,a){return this._inner.run(i,o,a)}runTask(i,o,a,f){const g=this._inner,E=g.scheduleEventTask("NgZoneEvent: "+f,i,e9,Oh,Oh);try{return g.runTask(E,o,a)}finally{g.cancelTask(E)}}runGuarded(i,o,a){return this._inner.runGuarded(i,o,a)}runOutsideAngular(i){return this._outer.run(i)}}const e9={};function Tf(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Af(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function xd(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Nd(n){n._nesting--,Tf(n)}class r9{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new m6,this.onMicrotaskEmpty=new m6,this.onStable=new m6,this.onError=new m6}run(i,o,a){return i.apply(o,a)}runGuarded(i,o,a){return i.apply(o,a)}runOutsideAngular(i){return i()}runTask(i,o,a,f){return i.apply(o,a)}}const Ld=new Qr(""),zd=new Qr("");let xf,i9=(()=>{class n{constructor(o,a,f){this._ngZone=o,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,xf||(function s9(n){xf=n}(f),f.addToWindow(a)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yc.assertNotInAngularZone(),Df(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Df(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(o)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,a,f){let g=-1;a&&a>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==g),o(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:o,timeoutId:g,updateCb:f})}whenStable(o,a,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,a,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,a,f){return[]}}return n.\u0275fac=function(o){return new(o||n)(Ht(Yc),Ht(Rd),Ht(zd))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})(),Rd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,a){this._applications.set(o,a)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,a=!0){return xf?.findTestabilityInTree(this,o,a)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),kl=null;const Pd=new Qr("AllowMultipleToken"),Nf=new Qr("PlatformDestroyListeners"),b0=!1;class c9{constructor(i,o){this.name=i,this.token=o}}function Od(n,i,o=[]){const a=`Platform: ${i}`,f=new Qr(a);return(g=[])=>{let E=Lf();if(!E||E.injector.get(Pd,!1)){const x=[...o,...g,{provide:f,useValue:!0}];n?n(x):function l9(n){if(kl&&!kl.get(Pd,!1))throw new Je(400,!1);kl=n;const i=n.get(Hd);(function kd(n){const i=n.get(Sd,null);i&&i.forEach(o=>o())})(n)}(function Vd(n=[],i){return Hc.create({name:i,providers:[{provide:z6,useValue:"platform"},{provide:Nf,useValue:new Set([()=>kl=null])},...n]})}(x,a))}return function h9(n){const i=Lf();if(!i)throw new Je(401,!1);return i}()}}function Lf(){return kl?.get(Hd)??null}let Hd=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,a){const f=function Ud(n,i){let o;return o="noop"===n?new r9:("zone.js"===n?void 0:n)||new Yc(i),o}(a?.ngZone,function Fd(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),g=[{provide:Yc,useValue:f}];return f.run(()=>{const E=Hc.create({providers:g,parent:this.injector,name:o.moduleType.name}),x=o.create(E),R=x.injector.get(fc,null);if(!R)throw new Je(402,!1);return f.runOutsideAngular(()=>{const $=f.onError.subscribe({next:X=>{R.handleError(X)}});x.onDestroy(()=>{Uh(this._modules,x),$.unsubscribe()})}),function Bd(n,i,o){try{const a=o();return V3(a)?a.catch(f=>{throw i.runOutsideAngular(()=>n.handleError(f)),f}):a}catch(a){throw i.runOutsideAngular(()=>n.handleError(a)),a}}(R,f,()=>{const $=x.injector.get(Vh);return $.runInitializers(),$.donePromise.then(()=>(function du(n){St(n,"Expected localeId to be defined"),"string"==typeof n&&(z8=n.toLowerCase().replace(/_/g,"-"))}(x.injector.get(Hh,f6)||f6),this._moduleDoBootstrap(x),x))})})}bootstrapModule(o,a=[]){const f=jd({},a);return function o9(n,i,o){const a=new nh(o);return Promise.resolve(a)}(0,0,o).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(o){const a=o.injector.get(Fh);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(f=>a.bootstrap(f));else{if(!o.instance.ngDoBootstrap)throw new Je(-403,!1);o.instance.ngDoBootstrap(a)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Je(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const o=this._injector.get(Nf,null);o&&(o.forEach(a=>a()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Ht(Hc))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function jd(n,i){return Array.isArray(i)?i.reduce(jd,n):{...n,...i}}let Fh=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,a,f){this._zone=o,this._injector=a,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new K.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),E=new K.y(x=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Yc.assertNotInAngularZone(),Df(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const $=this._zone.onUnstable.subscribe(()=>{Yc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{R.unsubscribe(),$.unsubscribe()}});this.isStable=(0,Ce.T)(g,E.pipe((0,we.B)()))}bootstrap(o,a){const f=o instanceof V;if(!this._injector.get(Vh).done){!f&&Mr(o);throw new Je(405,b0)}let E;E=f?o:this._injector.get(ot).resolveComponentFactory(o),this.componentTypes.push(E.componentType);const x=function a9(n){return n.isBoundToModule}(E)?void 0:this._injector.get(I0),$=E.create(Hc.NULL,[],a||E.selector,x),X=$.location.nativeElement,ue=$.injector.get(Ld,null);return ue?.registerApplication(X),$.onDestroy(()=>{this.detachView($.hostView),Uh(this.components,$),ue?.unregisterApplication(X)}),this._loadComponent($),$}tick(){if(this._runningTick)throw new Je(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const a=o;this._views.push(a),a.attachToAppRef(this)}detachView(o){const a=o;Uh(this._views,a),a.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const a=this._injector.get(Dd,[]);a.push(...this._bootstrapListeners),a.forEach(f=>f(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Uh(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Je(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(Ht(Yc),Ht(da),Ht(fc))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Uh(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}function d9(){return!1}function p9(){}let m9=(()=>{class n{}return n.__NG_ELEMENT_ID__=g9,n})();function g9(n){return function v9(n,i,o){if(fr(n)&&!o){const a=Ci(n.index,i);return new e0(a,a)}return 47&n.type?new e0(i[Di],i):null}(Qi(),it(),16==(16&n))}class Kd{constructor(){}supports(i){return r0(i)}create(i){return new I9(i)}}const E9=(n,i)=>i;class I9{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||E9}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,a=this._removalsHead,f=0,g=null;for(;o||a;){const E=!a||o&&o.currentIndex<Yd(a,f,g)?o:a,x=Yd(E,f,g),R=E.currentIndex;if(E===a)f--,a=a._nextRemoved;else if(o=o._next,null==E.previousIndex)f++;else{g||(g=[]);const $=x-f,X=R-f;if($!=X){for(let ze=0;ze<$;ze++){const qe=ze<g.length?g[ze]:g[ze]=0,Dt=qe+ze;X<=Dt&&Dt<$&&(g[ze]=qe+1)}g[E.previousIndex]=X-$}}x!==R&&i(E,x,R)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!r0(i))throw new Je(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let f,g,E,o=this._itHead,a=!1;if(Array.isArray(i)){this.length=i.length;for(let x=0;x<this.length;x++)g=i[x],E=this._trackByFn(x,g),null!==o&&Object.is(o.trackById,E)?(a&&(o=this._verifyReinsertion(o,g,E,x)),Object.is(o.item,g)||this._addIdentityChange(o,g)):(o=this._mismatch(o,g,E,x),a=!0),o=o._next}else f=0,function E5(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Uc()]();let a;for(;!(a=o.next()).done;)i(a.value)}}(i,x=>{E=this._trackByFn(f,x),null!==o&&Object.is(o.trackById,E)?(a&&(o=this._verifyReinsertion(o,x,E,f)),Object.is(o.item,x)||this._addIdentityChange(o,x)):(o=this._mismatch(o,x,E,f),a=!0),o=o._next,f++}),this.length=f;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,a,f){let g;return null===i?g=this._itTail:(g=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,g,f)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(a,f))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,g,f)):i=this._addAfter(new b9(o,a),g,f),i}_verifyReinsertion(i,o,a,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==g?i=this._reinsertAfter(g,i._prev,f):i.currentIndex!=f&&(i.currentIndex=f,this._addToMoves(i,f)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const f=i._prevRemoved,g=i._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(i,o,a),this._addToMoves(i,a),i}_moveAfter(i,o,a){return this._unlink(i),this._insertAfter(i,o,a),this._addToMoves(i,a),i}_addAfter(i,o,a){return this._insertAfter(i,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,a){const f=null===o?this._itHead:o._next;return i._next=f,i._prev=o,null===f?this._itTail=i:f._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new qd),this._linkedRecords.put(i),i.currentIndex=a,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,a=i._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qd),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class b9{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class M9{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,i))return a;return null}remove(i){const o=i._prevDup,a=i._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class qd{constructor(){this.map=new Map}put(i){const o=i.trackById;let a=this.map.get(o);a||(a=new M9,this.map.set(o,a)),a.add(i)}get(i,o){const f=this.map.get(i);return f?f.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Yd(n,i,o){const a=n.previousIndex;if(null===a)return a;let f=0;return o&&a<o.length&&(f=o[a]),a+i+f}class Qd{constructor(){}supports(i){return i instanceof Map||L3(i)}create(){return new S9}}class S9{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||L3(i)))throw new Je(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(a,f)=>{if(o&&o.key===f)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const g=this._getOrCreateRecordForKey(f,a);o=this._insertBeforeOrAppend(o,g)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const a=i._prev;return o._next=i,o._prev=a,i._prev=o,a&&(a._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const f=this._records.get(i);this._maybeAddToChanges(f,o);const g=f._prev,E=f._next;return g&&(g._next=E),E&&(E._prev=g),f._next=null,f._prev=null,f}const a=new D9(i);return this._records.set(i,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(a=>o(i[a],a))}}class D9{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Xd(){return new Of([new Kd])}let Of=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(null!=a){const f=a.factories.slice();o=o.concat(f)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||Xd()),deps:[[n,new M,new O]]}}find(o){const a=this.factories.find(f=>f.supports(o));if(null!=a)return a;throw new Je(901,!1)}}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:Xd}),n})();function Jd(){return new Vf([new Qd])}let Vf=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(a){const f=a.factories.slice();o=o.concat(f)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||Jd()),deps:[[n,new M,new O]]}}find(o){const a=this.factories.find(f=>f.supports(o));if(a)return a;throw new Je(901,!1)}}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:Jd}),n})();const x9=Od(null,"core",[]);let N9=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Ht(Fh))},n.\u0275mod=wr({type:n}),n.\u0275inj=Tn({}),n})();function L9(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},1481:(rn,Ke,j)=>{j.d(Ke,{Dx:()=>gn,H7:()=>pn,b2:()=>vn,q6:()=>lr});var S=j(6895),B=j(4650);class K extends S.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ce extends K{static makeCurrent(){(0,S.HT)(new Ce)}onAndCancel(be,se,xe){return be.addEventListener(se,xe,!1),()=>{be.removeEventListener(se,xe,!1)}}dispatchEvent(be,se){be.dispatchEvent(se)}remove(be){be.parentNode&&be.parentNode.removeChild(be)}createElement(be,se){return(se=se||this.getDefaultDocument()).createElement(be)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(be){return be.nodeType===Node.ELEMENT_NODE}isShadowRoot(be){return be instanceof DocumentFragment}getGlobalEventTarget(be,se){return"window"===se?window:"document"===se?be:"body"===se?be.body:null}getBaseHref(be){const se=function Ie(){return we=we||document.querySelector("base"),we?we.getAttribute("href"):null}();return null==se?null:function Re(De){te=te||document.createElement("a"),te.setAttribute("href",De);const be=te.pathname;return"/"===be.charAt(0)?be:`/${be}`}(se)}resetBaseElement(){we=null}getUserAgent(){return window.navigator.userAgent}getCookie(be){return(0,S.Mx)(document.cookie,be)}}let te,we=null;const ke=new B.OlP("TRANSITION_ID"),me=[{provide:B.ip1,useFactory:function de(De,be,se){return()=>{se.get(B.CZH).donePromise.then(()=>{const xe=(0,S.q)(),Ct=be.querySelectorAll(`style[ng-transition="${De}"]`);for(let Jt=0;Jt<Ct.length;Jt++)xe.remove(Ct[Jt])})}},deps:[ke,S.K0,B.zs3],multi:!0}];let Tt=(()=>{class De{build(){return new XMLHttpRequest}}return De.\u0275fac=function(se){return new(se||De)},De.\u0275prov=B.Yz7({token:De,factory:De.\u0275fac}),De})();const Fe=new B.OlP("EventManagerPlugins");let Pt=(()=>{class De{constructor(se,xe){this._zone=xe,this._eventNameToPlugin=new Map,se.forEach(Ct=>Ct.manager=this),this._plugins=se.slice().reverse()}addEventListener(se,xe,Ct){return this._findPluginFor(xe).addEventListener(se,xe,Ct)}addGlobalEventListener(se,xe,Ct){return this._findPluginFor(xe).addGlobalEventListener(se,xe,Ct)}getZone(){return this._zone}_findPluginFor(se){const xe=this._eventNameToPlugin.get(se);if(xe)return xe;const Ct=this._plugins;for(let Jt=0;Jt<Ct.length;Jt++){const Vn=Ct[Jt];if(Vn.supports(se))return this._eventNameToPlugin.set(se,Vn),Vn}throw new Error(`No event manager plugin found for event ${se}`)}}return De.\u0275fac=function(se){return new(se||De)(B.LFG(Fe),B.LFG(B.R0b))},De.\u0275prov=B.Yz7({token:De,factory:De.\u0275fac}),De})();class Xt{constructor(be){this._doc=be}addGlobalEventListener(be,se,xe){const Ct=(0,S.q)().getGlobalEventTarget(this._doc,be);if(!Ct)throw new Error(`Unsupported event target ${Ct} for event ${se}`);return this.addEventListener(Ct,se,xe)}}let Je=(()=>{class De{constructor(){this.usageCount=new Map}addStyles(se){for(const xe of se)1===this.changeUsageCount(xe,1)&&this.onStyleAdded(xe)}removeStyles(se){for(const xe of se)0===this.changeUsageCount(xe,-1)&&this.onStyleRemoved(xe)}onStyleRemoved(se){}onStyleAdded(se){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(se,xe){const Ct=this.usageCount;let Jt=Ct.get(se)??0;return Jt+=xe,Jt>0?Ct.set(se,Jt):Ct.delete(se),Jt}ngOnDestroy(){for(const se of this.getAllStyles())this.onStyleRemoved(se);this.usageCount.clear()}}return De.\u0275fac=function(se){return new(se||De)},De.\u0275prov=B.Yz7({token:De,factory:De.\u0275fac}),De})(),ut=(()=>{class De extends Je{constructor(se){super(),this.doc=se,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(se){for(const xe of this.hostNodes)this.addStyleToHost(xe,se)}onStyleRemoved(se){const xe=this.styleRef;xe.get(se)?.forEach(Jt=>Jt.remove()),xe.delete(se)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(se){this.hostNodes.add(se);for(const xe of this.getAllStyles())this.addStyleToHost(se,xe)}removeHost(se){this.hostNodes.delete(se)}addStyleToHost(se,xe){const Ct=this.doc.createElement("style");Ct.textContent=xe,se.appendChild(Ct);const Jt=this.styleRef.get(xe);Jt?Jt.push(Ct):this.styleRef.set(xe,[Ct])}resetHostNodes(){const se=this.hostNodes;se.clear(),se.add(this.doc.head)}}return De.\u0275fac=function(se){return new(se||De)(B.LFG(S.K0))},De.\u0275prov=B.Yz7({token:De,factory:De.\u0275fac}),De})();const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Et=/%COMP%/g,H=new B.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function It(De,be){return be.flat(100).map(se=>se.replace(Et,De))}function Zt(De){return be=>{if("__ngUnwrap__"===be)return De;!1===De(be)&&(be.preventDefault(),be.returnValue=!1)}}let xt=(()=>{class De{constructor(se,xe,Ct,Jt){this.eventManager=se,this.sharedStylesHost=xe,this.appId=Ct,this.removeStylesOnCompDestory=Jt,this.rendererByCompId=new Map,this.defaultRenderer=new Ve(se)}createRenderer(se,xe){if(!se||!xe)return this.defaultRenderer;const Ct=this.getOrCreateRenderer(se,xe);return Ct instanceof St?Ct.applyToHost(se):Ct instanceof et&&Ct.applyStyles(),Ct}getOrCreateRenderer(se,xe){const Ct=this.rendererByCompId;let Jt=Ct.get(xe.id);if(!Jt){const Vn=this.eventManager,Dr=this.sharedStylesHost,Fr=this.removeStylesOnCompDestory;switch(xe.encapsulation){case B.ifc.Emulated:Jt=new St(Vn,Dr,xe,this.appId,Fr);break;case B.ifc.ShadowDom:return new at(Vn,Dr,se,xe);default:Jt=new et(Vn,Dr,xe,Fr)}Jt.onDestroy=()=>Ct.delete(xe.id),Ct.set(xe.id,Jt)}return Jt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return De.\u0275fac=function(se){return new(se||De)(B.LFG(Pt),B.LFG(ut),B.LFG(B.AFp),B.LFG(H))},De.\u0275prov=B.Yz7({token:De,factory:De.\u0275fac}),De})();class Ve{constructor(be){this.eventManager=be,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(be,se){return se?document.createElementNS(ft[se]||se,be):document.createElement(be)}createComment(be){return document.createComment(be)}createText(be){return document.createTextNode(be)}appendChild(be,se){(Ge(be)?be.content:be).appendChild(se)}insertBefore(be,se,xe){be&&(Ge(be)?be.content:be).insertBefore(se,xe)}removeChild(be,se){be&&be.removeChild(se)}selectRootElement(be,se){let xe="string"==typeof be?document.querySelector(be):be;if(!xe)throw new Error(`The selector "${be}" did not match any elements`);return se||(xe.textContent=""),xe}parentNode(be){return be.parentNode}nextSibling(be){return be.nextSibling}setAttribute(be,se,xe,Ct){if(Ct){se=Ct+":"+se;const Jt=ft[Ct];Jt?be.setAttributeNS(Jt,se,xe):be.setAttribute(se,xe)}else be.setAttribute(se,xe)}removeAttribute(be,se,xe){if(xe){const Ct=ft[xe];Ct?be.removeAttributeNS(Ct,se):be.removeAttribute(`${xe}:${se}`)}else be.removeAttribute(se)}addClass(be,se){be.classList.add(se)}removeClass(be,se){be.classList.remove(se)}setStyle(be,se,xe,Ct){Ct&(B.JOm.DashCase|B.JOm.Important)?be.style.setProperty(se,xe,Ct&B.JOm.Important?"important":""):be.style[se]=xe}removeStyle(be,se,xe){xe&B.JOm.DashCase?be.style.removeProperty(se):be.style[se]=""}setProperty(be,se,xe){be[se]=xe}setValue(be,se){be.nodeValue=se}listen(be,se,xe){return"string"==typeof be?this.eventManager.addGlobalEventListener(be,se,Zt(xe)):this.eventManager.addEventListener(be,se,Zt(xe))}}function Ge(De){return"TEMPLATE"===De.tagName&&void 0!==De.content}class at extends Ve{constructor(be,se,xe,Ct){super(be),this.sharedStylesHost=se,this.hostEl=xe,this.shadowRoot=xe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Jt=It(Ct.id,Ct.styles);for(const Vn of Jt){const Dr=document.createElement("style");Dr.textContent=Vn,this.shadowRoot.appendChild(Dr)}}nodeOrShadowRoot(be){return be===this.hostEl?this.shadowRoot:be}appendChild(be,se){return super.appendChild(this.nodeOrShadowRoot(be),se)}insertBefore(be,se,xe){return super.insertBefore(this.nodeOrShadowRoot(be),se,xe)}removeChild(be,se){return super.removeChild(this.nodeOrShadowRoot(be),se)}parentNode(be){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(be)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class et extends Ve{constructor(be,se,xe,Ct,Jt=xe.id){super(be),this.sharedStylesHost=se,this.removeStylesOnCompDestory=Ct,this.rendererUsageCount=0,this.styles=It(Jt,xe.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class St extends et{constructor(be,se,xe,Ct,Jt){const Vn=Ct+"-"+xe.id;super(be,se,xe,Jt,Vn),this.contentAttr=function Be(De){return"_ngcontent-%COMP%".replace(Et,De)}(Vn),this.hostAttr=function zt(De){return"_nghost-%COMP%".replace(Et,De)}(Vn)}applyToHost(be){this.applyStyles(),this.setAttribute(be,this.hostAttr,"")}createElement(be,se){const xe=super.createElement(be,se);return super.setAttribute(xe,this.contentAttr,""),xe}}let Nt=(()=>{class De extends Xt{constructor(se){super(se)}supports(se){return!0}addEventListener(se,xe,Ct){return se.addEventListener(xe,Ct,!1),()=>this.removeEventListener(se,xe,Ct)}removeEventListener(se,xe,Ct){return se.removeEventListener(xe,Ct)}}return De.\u0275fac=function(se){return new(se||De)(B.LFG(S.K0))},De.\u0275prov=B.Yz7({token:De,factory:De.\u0275fac}),De})();const _n=["alt","control","meta","shift"],kt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kt={alt:De=>De.altKey,control:De=>De.ctrlKey,meta:De=>De.metaKey,shift:De=>De.shiftKey};let Ft=(()=>{class De extends Xt{constructor(se){super(se)}supports(se){return null!=De.parseEventName(se)}addEventListener(se,xe,Ct){const Jt=De.parseEventName(xe),Vn=De.eventCallback(Jt.fullKey,Ct,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,S.q)().onAndCancel(se,Jt.domEventName,Vn))}static parseEventName(se){const xe=se.toLowerCase().split("."),Ct=xe.shift();if(0===xe.length||"keydown"!==Ct&&"keyup"!==Ct)return null;const Jt=De._normalizeKey(xe.pop());let Vn="",Dr=xe.indexOf("code");if(Dr>-1&&(xe.splice(Dr,1),Vn="code."),_n.forEach(ss=>{const wr=xe.indexOf(ss);wr>-1&&(xe.splice(wr,1),Vn+=ss+".")}),Vn+=Jt,0!=xe.length||0===Jt.length)return null;const Fr={};return Fr.domEventName=Ct,Fr.fullKey=Vn,Fr}static matchEventFullKeyCode(se,xe){let Ct=kt[se.key]||se.key,Jt="";return xe.indexOf("code.")>-1&&(Ct=se.code,Jt="code."),!(null==Ct||!Ct)&&(Ct=Ct.toLowerCase()," "===Ct?Ct="space":"."===Ct&&(Ct="dot"),_n.forEach(Vn=>{Vn!==Ct&&(0,Kt[Vn])(se)&&(Jt+=Vn+".")}),Jt+=Ct,Jt===xe)}static eventCallback(se,xe,Ct){return Jt=>{De.matchEventFullKeyCode(Jt,se)&&Ct.runGuarded(()=>xe(Jt))}}static _normalizeKey(se){return"esc"===se?"escape":se}}return De.\u0275fac=function(se){return new(se||De)(B.LFG(S.K0))},De.\u0275prov=B.Yz7({token:De,factory:De.\u0275fac}),De})();const lr=(0,B.eFA)(B._c5,"browser",[{provide:B.Lbi,useValue:S.bD},{provide:B.g9A,useValue:function kr(){Ce.makeCurrent()},multi:!0},{provide:S.K0,useFactory:function On(){return(0,B.RDi)(document),document},deps:[]}]),gt=new B.OlP(""),Jn=[{provide:B.rWj,useClass:class Se{addToWindow(be){B.dqk.getAngularTestability=(xe,Ct=!0)=>{const Jt=be.findTestabilityInTree(xe,Ct);if(null==Jt)throw new Error("Could not find testability for element.");return Jt},B.dqk.getAllAngularTestabilities=()=>be.getAllTestabilities(),B.dqk.getAllAngularRootElements=()=>be.getAllRootElements(),B.dqk.frameworkStabilizers||(B.dqk.frameworkStabilizers=[]),B.dqk.frameworkStabilizers.push(xe=>{const Ct=B.dqk.getAllAngularTestabilities();let Jt=Ct.length,Vn=!1;const Dr=function(Fr){Vn=Vn||Fr,Jt--,0==Jt&&xe(Vn)};Ct.forEach(function(Fr){Fr.whenStable(Dr)})})}findTestabilityInTree(be,se,xe){return null==se?null:be.getTestability(se)??(xe?(0,S.q)().isShadowRoot(se)?this.findTestabilityInTree(be,se.host,!0):this.findTestabilityInTree(be,se.parentElement,!0):null)}},deps:[]},{provide:B.lri,useClass:B.dDg,deps:[B.R0b,B.eoX,B.rWj]},{provide:B.dDg,useClass:B.dDg,deps:[B.R0b,B.eoX,B.rWj]}],_t=[{provide:B.zSh,useValue:"root"},{provide:B.qLn,useFactory:function br(){return new B.qLn},deps:[]},{provide:Fe,useClass:Nt,multi:!0,deps:[S.K0,B.R0b,B.Lbi]},{provide:Fe,useClass:Ft,multi:!0,deps:[S.K0]},{provide:xt,useClass:xt,deps:[Pt,ut,B.AFp,H]},{provide:B.FYo,useExisting:xt},{provide:Je,useExisting:ut},{provide:ut,useClass:ut,deps:[S.K0]},{provide:Pt,useClass:Pt,deps:[Fe,B.R0b]},{provide:S.JF,useClass:Tt,deps:[]},[]];let vn=(()=>{class De{constructor(se){}static withServerTransition(se){return{ngModule:De,providers:[{provide:B.AFp,useValue:se.appId},{provide:ke,useExisting:B.AFp},me]}}}return De.\u0275fac=function(se){return new(se||De)(B.LFG(gt,12))},De.\u0275mod=B.oAB({type:De}),De.\u0275inj=B.cJS({providers:[..._t,...Jn],imports:[S.ez,B.hGG]}),De})(),gn=(()=>{class De{constructor(se){this._doc=se}getTitle(){return this._doc.title}setTitle(se){this._doc.title=se||""}}return De.\u0275fac=function(se){return new(se||De)(B.LFG(S.K0))},De.\u0275prov=B.Yz7({token:De,factory:function(se){let xe=null;return xe=se?new se:function Gr(){return new gn((0,B.LFG)(S.K0))}(),xe},providedIn:"root"}),De})();typeof window<"u"&&window;let pn=(()=>{class De{}return De.\u0275fac=function(se){return new(se||De)},De.\u0275prov=B.Yz7({token:De,factory:function(se){let xe=null;return xe=se?new(se||De):B.LFG(Ot),xe},providedIn:"root"}),De})(),Ot=(()=>{class De extends pn{constructor(se){super(),this._doc=se}sanitize(se,xe){if(null==xe)return null;switch(se){case B.q3G.NONE:return xe;case B.q3G.HTML:return(0,B.qzn)(xe,"HTML")?(0,B.z3N)(xe):(0,B.EiD)(this._doc,String(xe)).toString();case B.q3G.STYLE:return(0,B.qzn)(xe,"Style")?(0,B.z3N)(xe):xe;case B.q3G.SCRIPT:if((0,B.qzn)(xe,"Script"))return(0,B.z3N)(xe);throw new Error("unsafe value used in a script context");case B.q3G.URL:return(0,B.qzn)(xe,"URL")?(0,B.z3N)(xe):(0,B.mCW)(String(xe));case B.q3G.RESOURCE_URL:if((0,B.qzn)(xe,"ResourceURL"))return(0,B.z3N)(xe);throw new Error(`unsafe value used in a resource URL context (see ${B.JZr})`);default:throw new Error(`Unexpected SecurityContext ${se} (see ${B.JZr})`)}}bypassSecurityTrustHtml(se){return(0,B.JVY)(se)}bypassSecurityTrustStyle(se){return(0,B.L6k)(se)}bypassSecurityTrustScript(se){return(0,B.eBb)(se)}bypassSecurityTrustUrl(se){return(0,B.LAX)(se)}bypassSecurityTrustResourceUrl(se){return(0,B.pB0)(se)}}return De.\u0275fac=function(se){return new(se||De)(B.LFG(S.K0))},De.\u0275prov=B.Yz7({token:De,factory:function(se){let xe=null;return xe=se?new se:function Dn(De){return new Ot(De.get(S.K0))}(B.LFG(B.zs3)),xe},providedIn:"root"}),De})()},6932:(rn,Ke,j)=>{j.d(Ke,{F0:()=>P1,rH:()=>Yo,Bz:()=>B1,lC:()=>ji});var S=j(4650),B=j(8996),K=j(9646),Ce=j(1135),we=j(6805),Ie=j(9751);const{isArray:te}=Array,{getPrototypeOf:Re,prototype:ke,keys:de}=Object;var Tt=j(4671),Fe=j(4004);const{isArray:Pt}=Array;var ut=j(7669),Et=j(5403),pt=j(9672);function nt(...I){const D=(0,ut.yG)(I),C=(0,ut.jO)(I),{args:N,keys:O}=function me(I){if(1===I.length){const D=I[0];if(te(D))return{args:D,keys:null};if(function Se(I){return I&&"object"==typeof I&&Re(I)===ke}(D)){const C=de(D);return{args:C.map(N=>D[N]),keys:C}}}return{args:I,keys:null}}(I);if(0===N.length)return(0,B.D)([],D);const _=new Ie.y(function yt(I,D,C=Tt.y){return N=>{bt(D,()=>{const{length:O}=I,_=new Array(O);let M=O,k=O;for(let q=0;q<O;q++)bt(D,()=>{const he=(0,B.D)(I[q],D);let _e=!1;he.subscribe((0,Et.x)(N,je=>{_[q]=je,_e||(_e=!0,k--),k||N.next(C(_.slice()))},()=>{--M||N.complete()}))},N)},N)}}(N,D,O?M=>function ft(I,D){return I.reduce((C,N,O)=>(C[N]=D[O],C),{})}(O,M):Tt.y));return C?_.pipe(function Je(I){return(0,Fe.U)(D=>function Xt(I,D){return Pt(D)?I(...D):I(D)}(I,D))}(C)):_}function bt(I,D,C){I?(0,pt.f)(C,I,D):D()}var dt=j(7272),H=j(8421);function Be(I){return new Ie.y(D=>{(0,H.Xf)(I()).subscribe(D)})}var zt=j(9635),It=j(576);function Zt(I,D){const C=(0,It.m)(I)?I:()=>I,N=O=>O.error(C());return new Ie.y(D?O=>D.schedule(N,0,O):N)}var xt=j(515),Ve=j(727),Qe=j(4482);function Ue(){return(0,Qe.e)((I,D)=>{let C=null;I._refCount++;const N=(0,Et.x)(D,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(C=null);const O=I._connection,_=C;C=null,O&&(!_||O===_)&&O.unsubscribe(),D.unsubscribe()});I.subscribe(N),N.closed||(C=I.connect())})}class Ge extends Ie.y{constructor(D,C){super(),this.source=D,this.subjectFactory=C,this._subject=null,this._refCount=0,this._connection=null,(0,Qe.A)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,D?.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new Ve.w0;const C=this.getSubject();D.add(this.source.subscribe((0,Et.x)(C,void 0,()=>{this._teardown(),C.complete()},N=>{this._teardown(),C.error(N)},()=>this._teardown()))),D.closed&&(this._connection=null,D=Ve.w0.EMPTY)}return D}refCount(){return Ue()(this)}}var at=j(7579),et=j(6895),St=j(3900),Nt=j(5698),_n=j(8675),kt=j(9300),Kt=j(5577),Ft=j(590),$t=j(4351),Tn=j(8505);function rr(I){return(0,Qe.e)((D,C)=>{let _,N=null,O=!1;N=D.subscribe((0,Et.x)(C,void 0,void 0,M=>{_=(0,H.Xf)(I(M,rr(I)(D))),N?(N.unsubscribe(),N=null,_.subscribe(C)):O=!0})),O&&(N.unsubscribe(),N=null,_.subscribe(C))})}var Gn=j(5026);function Nn(I){return I<=0?()=>xt.E:(0,Qe.e)((D,C)=>{let N=[];D.subscribe((0,Et.x)(C,O=>{N.push(O),I<N.length&&N.shift()},()=>{for(const O of N)C.next(O);C.complete()},void 0,()=>{N=null}))})}var kr=j(8068),br=j(6590);function On(I,D){const C=arguments.length>=2;return N=>N.pipe(I?(0,kt.h)((O,_)=>I(O,_,N)):Tt.y,Nn(1),C?(0,br.d)(D):(0,kr.T)(()=>new we.K))}function gt(I){return(0,Qe.e)((D,C)=>{try{D.subscribe(C)}finally{C.add(I)}})}var Jn=j(8189),_t=j(1481);const vn="primary",Jr=Symbol("RouteTitle");class An{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const C=this.params[D];return Array.isArray(C)?C[0]:C}return null}getAll(D){if(this.has(D)){const C=this.params[D];return Array.isArray(C)?C:[C]}return[]}get keys(){return Object.keys(this.params)}}function un(I){return new An(I)}function Gr(I,D,C){const N=C.path.split("/");if(N.length>I.length||"full"===C.pathMatch&&(D.hasChildren()||N.length<I.length))return null;const O={};for(let _=0;_<N.length;_++){const M=N[_],k=I[_];if(M.startsWith(":"))O[M.substring(1)]=k;else if(M!==k.path)return null}return{consumed:I.slice(0,N.length),posParams:O}}function hn(I,D){const C=I?Object.keys(I):void 0,N=D?Object.keys(D):void 0;if(!C||!N||C.length!=N.length)return!1;let O;for(let _=0;_<C.length;_++)if(O=C[_],!Gt(I[O],D[O]))return!1;return!0}function Gt(I,D){if(Array.isArray(I)&&Array.isArray(D)){if(I.length!==D.length)return!1;const C=[...I].sort(),N=[...D].sort();return C.every((O,_)=>N[_]===O)}return I===D}function ir(I){return Array.prototype.concat.apply([],I)}function pr(I){return I.length>0?I[I.length-1]:null}function Mn(I,D){for(const C in I)I.hasOwnProperty(C)&&D(I[C],C)}function vr(I){return(0,S.CqO)(I)?I:(0,S.QGY)(I)?(0,B.D)(Promise.resolve(I)):(0,K.of)(I)}const ai=!1,er={exact:function ci(I,D,C){if(!ge(I.segments,D.segments)||!le(I.segments,D.segments,C)||I.numberOfChildren!==D.numberOfChildren)return!1;for(const N in D.children)if(!I.children[N]||!ci(I.children[N],D.children[N],C))return!1;return!0},subset:mt},mi={exact:function Or(I,D){return hn(I,D)},subset:function Ht(I,D){return Object.keys(D).length<=Object.keys(I).length&&Object.keys(D).every(C=>Gt(I[C],D[C]))},ignored:()=>!0};function bn(I,D,C){return er[C.paths](I.root,D.root,C.matrixParams)&&mi[C.queryParams](I.queryParams,D.queryParams)&&!("exact"===C.fragment&&I.fragment!==D.fragment)}function mt(I,D,C){return Ne(I,D,D.segments,C)}function Ne(I,D,C,N){if(I.segments.length>C.length){const O=I.segments.slice(0,C.length);return!(!ge(O,C)||D.hasChildren()||!le(O,C,N))}if(I.segments.length===C.length){if(!ge(I.segments,C)||!le(I.segments,C,N))return!1;for(const O in D.children)if(!I.children[O]||!mt(I.children[O],D.children[O],N))return!1;return!0}{const O=C.slice(0,I.segments.length),_=C.slice(I.segments.length);return!!(ge(I.segments,O)&&le(I.segments,O,N)&&I.children[vn])&&Ne(I.children[vn],D,_,N)}}function le(I,D,C){return D.every((N,O)=>mi[C](I[O].parameters,N.parameters))}class pe{constructor(D=new Oe([],{}),C={},N=null){this.root=D,this.queryParams=C,this.fragment=N}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=un(this.queryParams)),this._queryParamMap}toString(){return yn.serialize(this)}}class Oe{constructor(D,C){this.segments=D,this.children=C,this.parent=null,Mn(C,(N,O)=>N.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pn(this)}}class ne{constructor(D,C){this.path=D,this.parameters=C}get parameterMap(){return this._parameterMap||(this._parameterMap=un(this.parameters)),this._parameterMap}toString(){return Ct(this)}}function ge(I,D){return I.length===D.length&&I.every((C,N)=>C.path===D[N].path)}let Te=(()=>{class I{}return I.\u0275fac=function(C){return new(C||I)},I.\u0275prov=S.Yz7({token:I,factory:function(){return new jt},providedIn:"root"}),I})();class jt{parse(D){const C=new H1(D);return new pe(C.parseRootSegment(),C.parseQueryParams(),C.parseFragment())}serialize(D){const C=`/${Dn(D.root,!0)}`,N=function Vn(I){const D=Object.keys(I).map(C=>{const N=I[C];return Array.isArray(N)?N.map(O=>`${$n(C)}=${$n(O)}`).join("&"):`${$n(C)}=${$n(N)}`}).filter(C=>!!C);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${C}${N}${"string"==typeof D.fragment?`#${function De(I){return encodeURI(I)}(D.fragment)}`:""}`}}const yn=new jt;function pn(I){return I.segments.map(D=>Ct(D)).join("/")}function Dn(I,D){if(!I.hasChildren())return pn(I);if(D){const C=I.children[vn]?Dn(I.children[vn],!1):"",N=[];return Mn(I.children,(O,_)=>{_!==vn&&N.push(`${_}:${Dn(O,!1)}`)}),N.length>0?`${C}(${N.join("//")})`:C}{const C=function He(I,D){let C=[];return Mn(I.children,(N,O)=>{O===vn&&(C=C.concat(D(N,O)))}),Mn(I.children,(N,O)=>{O!==vn&&(C=C.concat(D(N,O)))}),C}(I,(N,O)=>O===vn?[Dn(I.children[vn],!1)]:[`${O}:${Dn(N,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[vn]?`${pn(I)}/${C[0]}`:`${pn(I)}/(${C.join("//")})`}}function Ot(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $n(I){return Ot(I).replace(/%3B/gi,";")}function be(I){return Ot(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function se(I){return decodeURIComponent(I)}function xe(I){return se(I.replace(/\+/g,"%20"))}function Ct(I){return`${be(I.path)}${function Jt(I){return Object.keys(I).map(D=>`;${be(D)}=${be(I[D])}`).join("")}(I.parameters)}`}const Dr=/^[^\/()?;=#]+/;function Fr(I){const D=I.match(Dr);return D?D[0]:""}const ss=/^[^=?&#]+/,Vs=/^[^&#]+/;class H1{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oe([],{}):new Oe([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let C={};this.peekStartsWith("/(")&&(this.capture("/"),C=this.parseParens(!0));let N={};return this.peekStartsWith("(")&&(N=this.parseParens(!1)),(D.length>0||Object.keys(C).length>0)&&(N[vn]=new Oe(D,C)),N}parseSegment(){const D=Fr(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new S.vHH(4009,ai);return this.capture(D),new ne(se(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const C=Fr(this.remaining);if(!C)return;this.capture(C);let N="";if(this.consumeOptional("=")){const O=Fr(this.remaining);O&&(N=O,this.capture(N))}D[se(C)]=se(N)}parseQueryParam(D){const C=function wr(I){const D=I.match(ss);return D?D[0]:""}(this.remaining);if(!C)return;this.capture(C);let N="";if(this.consumeOptional("=")){const M=function os(I){const D=I.match(Vs);return D?D[0]:""}(this.remaining);M&&(N=M,this.capture(N))}const O=xe(C),_=xe(N);if(D.hasOwnProperty(O)){let M=D[O];Array.isArray(M)||(M=[M],D[O]=M),M.push(_)}else D[O]=_}parseParens(D){const C={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const N=Fr(this.remaining),O=this.remaining[N.length];if("/"!==O&&")"!==O&&";"!==O)throw new S.vHH(4010,ai);let _;N.indexOf(":")>-1?(_=N.slice(0,N.indexOf(":")),this.capture(_),this.capture(":")):D&&(_=vn);const M=this.parseChildren();C[_]=1===Object.keys(M).length?M[vn]:new Oe([],M),this.consumeOptional("//")}return C}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new S.vHH(4011,ai)}}function D1(I){return I.segments.length>0?new Oe([],{[vn]:I}):I}function tr(I){const D={};for(const N of Object.keys(I.children)){const _=tr(I.children[N]);(_.segments.length>0||_.hasChildren())&&(D[N]=_)}return function li(I){if(1===I.numberOfChildren&&I.children[vn]){const D=I.children[vn];return new Oe(I.segments.concat(D.segments),D.children)}return I}(new Oe(I.segments,D))}function Nr(I){return I instanceof pe}const Mr=!1;function Hn(I,D,C,N,O){if(0===C.length)return gi(D.root,D.root,D.root,N,O);const _=function Lr(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new i1(!0,0,I);let D=0,C=!1;const N=I.reduce((O,_,M)=>{if("object"==typeof _&&null!=_){if(_.outlets){const k={};return Mn(_.outlets,(q,he)=>{k[he]="string"==typeof q?q.split("/"):q}),[...O,{outlets:k}]}if(_.segmentPath)return[...O,_.segmentPath]}return"string"!=typeof _?[...O,_]:0===M?(_.split("/").forEach((k,q)=>{0==q&&"."===k||(0==q&&""===k?C=!0:".."===k?D++:""!=k&&O.push(k))}),O):[...O,_]},[]);return new i1(C,D,N)}(C);return _.toRoot()?gi(D.root,D.root,new Oe([],{}),N,O):function M(q){const he=function En(I,D,C,N){if(I.isAbsolute)return new Ri(D.root,!0,0);if(-1===N)return new Ri(C,C===D.root,0);return function ti(I,D,C){let N=I,O=D,_=C;for(;_>O;){if(_-=O,N=N.parent,!N)throw new S.vHH(4005,Mr&&"Invalid number of '../'");O=N.segments.length}return new Ri(N,!1,O-_)}(C,N+(ur(I.commands[0])?0:1),I.numberOfDoubleDots)}(_,D,I.snapshot?._urlSegment,q),_e=he.processChildren?Si(he.segmentGroup,he.index,_.commands):K1(he.segmentGroup,he.index,_.commands);return gi(D.root,he.segmentGroup,_e,N,O)}(I.snapshot?._lastPathIndex)}function ur(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function Ur(I){return"object"==typeof I&&null!=I&&I.outlets}function gi(I,D,C,N,O){let M,_={};N&&Mn(N,(q,he)=>{_[he]=Array.isArray(q)?q.map(_e=>`${_e}`):`${q}`}),M=I===D?C:Zr(I,D,C);const k=D1(tr(M));return new pe(k,_,O)}function Zr(I,D,C){const N={};return Mn(I.children,(O,_)=>{N[_]=O===D?C:Zr(O,D,C)}),new Oe(I.segments,N)}class i1{constructor(D,C,N){if(this.isAbsolute=D,this.numberOfDoubleDots=C,this.commands=N,D&&N.length>0&&ur(N[0]))throw new S.vHH(4003,Mr&&"Root segment cannot have matrix parameters");const O=N.find(Ur);if(O&&O!==pr(N))throw new S.vHH(4004,Mr&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ri{constructor(D,C,N){this.segmentGroup=D,this.processChildren=C,this.index=N}}function K1(I,D,C){if(I||(I=new Oe([],{})),0===I.segments.length&&I.hasChildren())return Si(I,D,C);const N=function Di(I,D,C){let N=0,O=D;const _={match:!1,pathIndex:0,commandIndex:0};for(;O<I.segments.length;){if(N>=C.length)return _;const M=I.segments[O],k=C[N];if(Ur(k))break;const q=`${k}`,he=N<C.length-1?C[N+1]:null;if(O>0&&void 0===q)break;if(q&&he&&"object"==typeof he&&void 0===he.outlets){if(!C1(q,he,M))return _;N+=2}else{if(!C1(q,{},M))return _;N++}O++}return{match:!0,pathIndex:O,commandIndex:N}}(I,D,C),O=C.slice(N.commandIndex);if(N.match&&N.pathIndex<I.segments.length){const _=new Oe(I.segments.slice(0,N.pathIndex),{});return _.children[vn]=new Oe(I.segments.slice(N.pathIndex),I.children),Si(_,0,O)}return N.match&&0===O.length?new Oe(I.segments,{}):N.match&&!I.hasChildren()?T1(I,D,C):N.match?Si(I,0,O):T1(I,D,C)}function Si(I,D,C){if(0===C.length)return new Oe(I.segments,{});{const N=function _1(I){return Ur(I[0])?I[0].outlets:{[vn]:I}}(C),O={};return!N[vn]&&I.children[vn]&&1===I.numberOfChildren&&0===I.children[vn].segments.length?Si(I.children[vn],D,C):(Mn(N,(_,M)=>{"string"==typeof _&&(_=[_]),null!==_&&(O[M]=K1(I.children[M],D,_))}),Mn(I.children,(_,M)=>{void 0===N[M]&&(O[M]=_)}),new Oe(I.segments,O))}}function T1(I,D,C){const N=I.segments.slice(0,D);let O=0;for(;O<C.length;){const _=C[O];if(Ur(_)){const q=as(_.outlets);return new Oe(N,q)}if(0===O&&ur(C[0])){N.push(new ne(I.segments[D].path,s1(C[0]))),O++;continue}const M=Ur(_)?_.outlets[vn]:`${_}`,k=O<C.length-1?C[O+1]:null;M&&k&&ur(k)?(N.push(new ne(M,s1(k))),O+=2):(N.push(new ne(M,{})),O++)}return new Oe(N,{})}function as(I){const D={};return Mn(I,(C,N)=>{"string"==typeof C&&(C=[C]),null!==C&&(D[N]=T1(new Oe([],{}),0,C))}),D}function s1(I){const D={};return Mn(I,(C,N)=>D[N]=`${C}`),D}function C1(I,D,C){return I==C.path&&hn(D,C.parameters)}const Ti="imperative";class Ee{constructor(D,C){this.id=D,this.url=C}}class Me extends Ee{constructor(D,C,N="imperative",O=null){super(D,C),this.type=0,this.navigationTrigger=N,this.restoredState=O}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pe extends Ee{constructor(D,C,N){super(D,C),this.urlAfterRedirects=N,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $e extends Ee{constructor(D,C,N,O){super(D,C),this.reason=N,this.code=O,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ct extends Ee{constructor(D,C,N,O){super(D,C),this.reason=N,this.code=O,this.type=16}}class Lt extends Ee{constructor(D,C,N,O){super(D,C),this.error=N,this.target=O,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class In extends Ee{constructor(D,C,N,O){super(D,C),this.urlAfterRedirects=N,this.state=O,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mn extends Ee{constructor(D,C,N,O){super(D,C),this.urlAfterRedirects=N,this.state=O,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _r extends Ee{constructor(D,C,N,O,_){super(D,C),this.urlAfterRedirects=N,this.state=O,this.shouldActivate=_,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ni extends Ee{constructor(D,C,N,O){super(D,C),this.urlAfterRedirects=N,this.state=O,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class di extends Ee{constructor(D,C,N,O){super(D,C),this.urlAfterRedirects=N,this.state=O,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pi{constructor(D){this.route=D,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class fr{constructor(D){this.route=D,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jn{constructor(D){this.snapshot=D,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Br{constructor(D){this.snapshot=D,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Co{constructor(D){this.snapshot=D,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ws{constructor(D){this.snapshot=D,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o1{constructor(D,C,N){this.routerEvent=D,this.position=C,this.anchor=N,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let eo=(()=>{class I{createUrlTree(C,N,O,_,M,k){return Hn(C||N.root,O,_,M,k)}}return I.\u0275fac=function(C){return new(C||I)},I.\u0275prov=S.Yz7({token:I,factory:I.\u0275fac}),I})(),Es=(()=>{class I{}return I.\u0275fac=function(C){return new(C||I)},I.\u0275prov=S.Yz7({token:I,factory:function(D){return eo.\u0275fac(D)},providedIn:"root"}),I})();class Is{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const C=this.pathFromRoot(D);return C.length>1?C[C.length-2]:null}children(D){const C=Fs(D,this._root);return C?C.children.map(N=>N.value):[]}firstChild(D){const C=Fs(D,this._root);return C&&C.children.length>0?C.children[0].value:null}siblings(D){const C=jr(D,this._root);return C.length<2?[]:C[C.length-2].children.map(O=>O.value).filter(O=>O!==D)}pathFromRoot(D){return jr(D,this._root).map(C=>C.value)}}function Fs(I,D){if(I===D.value)return D;for(const C of D.children){const N=Fs(I,C);if(N)return N}return null}function jr(I,D){if(I===D.value)return[D];for(const C of D.children){const N=jr(I,C);if(N.length)return N.unshift(D),N}return[]}class vi{constructor(D,C){this.value=D,this.children=C}toString(){return`TreeNode(${this.value})`}}function yi(I){const D={};return I&&I.children.forEach(C=>D[C.value.outlet]=C),D}class Lo extends Is{constructor(D,C){super(D),this.snapshot=C,ui(this,D)}toString(){return this.snapshot.toString()}}function Us(I,D){const C=function to(I,D){const M=new x1([],{},{},"",{},vn,D,null,I.root,-1,{});return new ls("",new vi(M,[]))}(I,D),N=new Ce.X([new ne("",{})]),O=new Ce.X({}),_=new Ce.X({}),M=new Ce.X({}),k=new Ce.X(""),q=new $r(N,O,M,k,_,vn,D,C.root);return q.snapshot=C.root,new Lo(new vi(q,[]),C)}class $r{constructor(D,C,N,O,_,M,k,q){this.url=D,this.params=C,this.queryParams=N,this.fragment=O,this.data=_,this.outlet=M,this.component=k,this.title=this.data?.pipe((0,Fe.U)(he=>he[Jr]))??(0,K.of)(void 0),this._futureSnapshot=q}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Fe.U)(D=>un(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Fe.U)(D=>un(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qn(I,D="emptyOnly"){const C=I.pathFromRoot;let N=0;if("always"!==D)for(N=C.length-1;N>=1;){const O=C[N],_=C[N-1];if(O.routeConfig&&""===O.routeConfig.path)N--;else{if(_.component)break;N--}}return function cs(I){return I.reduce((D,C)=>({params:{...D.params,...C.params},data:{...D.data,...C.data},resolve:{...C.data,...D.resolve,...C.routeConfig?.data,...C._resolvedData}}),{params:{},data:{},resolve:{}})}(C.slice(N))}class x1{get title(){return this.data?.[Jr]}constructor(D,C,N,O,_,M,k,q,he,_e,je){this.url=D,this.params=C,this.queryParams=N,this.fragment=O,this.data=_,this.outlet=M,this.component=k,this.routeConfig=q,this._urlSegment=he,this._lastPathIndex=_e,this._resolve=je}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=un(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=un(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(N=>N.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ls extends Is{constructor(D,C){super(C),this.url=D,ui(this,C)}toString(){return h1(this._root)}}function ui(I,D){D.value._routerState=I,D.children.forEach(C=>ui(I,C))}function h1(I){const D=I.children.length>0?` { ${I.children.map(h1).join(", ")} } `:"";return`${I.value}${D}`}function _i(I){if(I.snapshot){const D=I.snapshot,C=I._futureSnapshot;I.snapshot=C,hn(D.queryParams,C.queryParams)||I.queryParams.next(C.queryParams),D.fragment!==C.fragment&&I.fragment.next(C.fragment),hn(D.params,C.params)||I.params.next(C.params),function gn(I,D){if(I.length!==D.length)return!1;for(let C=0;C<I.length;++C)if(!hn(I[C],D[C]))return!1;return!0}(D.url,C.url)||I.url.next(C.url),hn(D.data,C.data)||I.data.next(C.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function us(I,D){const C=hn(I.params,D.params)&&function ie(I,D){return ge(I,D)&&I.every((C,N)=>hn(C.parameters,D[N].parameters))}(I.url,D.url);return C&&!(!I.parent!=!D.parent)&&(!I.parent||us(I.parent,D.parent))}function w1(I,D,C){if(C&&I.shouldReuseRoute(D.value,C.value.snapshot)){const N=C.value;N._futureSnapshot=D.value;const O=function N1(I,D,C){return D.children.map(N=>{for(const O of C.children)if(I.shouldReuseRoute(N.value,O.value.snapshot))return w1(I,N,O);return w1(I,N)})}(I,D,C);return new vi(N,O)}{if(I.shouldAttach(D.value)){const _=I.retrieve(D.value);if(null!==_){const M=_.route;return M.value._futureSnapshot=D.value,M.children=D.children.map(k=>w1(I,k)),M}}const N=function Y1(I){return new $r(new Ce.X(I.url),new Ce.X(I.params),new Ce.X(I.queryParams),new Ce.X(I.fragment),new Ce.X(I.data),I.outlet,I.component,I)}(D.value),O=D.children.map(_=>w1(I,_));return new vi(N,O)}}const wo="ngNavigationCancelingError";function hs(I,D){const{redirectTo:C,navigationBehaviorOptions:N}=Nr(D)?{redirectTo:D,navigationBehaviorOptions:void 0}:D,O=Q1(!1,0,D);return O.url=C,O.navigationBehaviorOptions=N,O}function Q1(I,D,C){const N=new Error("NavigationCancelingError: "+(I||""));return N[wo]=!0,N.cancellationCode=D,C&&(N.url=C),N}function a1(I){return Cr(I)&&Nr(I.url)}function Cr(I){return I&&I[wo]}class no{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Er,this.attachRef=null}}let Er=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(C,N){const O=this.getOrCreateContext(C);O.outlet=N,this.contexts.set(C,O)}onChildOutletDestroyed(C){const N=this.getContext(C);N&&(N.outlet=null,N.attachRef=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let N=this.getContext(C);return N||(N=new no,this.contexts.set(C,N)),N}getContext(C){return this.contexts.get(C)||null}}return I.\u0275fac=function(C){return new(C||I)},I.\u0275prov=S.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Yi=!1;let ji=(()=>{class I{constructor(){this.activated=null,this._activatedRoute=null,this.name=vn,this.activateEvents=new S.vpe,this.deactivateEvents=new S.vpe,this.attachEvents=new S.vpe,this.detachEvents=new S.vpe,this.parentContexts=(0,S.f3M)(Er),this.location=(0,S.f3M)(S.s_b),this.changeDetector=(0,S.f3M)(S.sBO),this.environmentInjector=(0,S.f3M)(S.lqb)}ngOnChanges(C){if(C.name){const{firstChange:N,previousValue:O}=C.name;if(N)return;this.isTrackedInParentContexts(O)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(O)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(C){return this.parentContexts.getContext(C)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const C=this.parentContexts.getContext(this.name);C?.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S.vHH(4012,Yi);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S.vHH(4012,Yi);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S.vHH(4012,Yi);this.location.detach();const C=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(C.instance),C}attach(C,N){this.activated=C,this._activatedRoute=N,this.location.insert(C.hostView),this.attachEvents.emit(C.instance)}deactivate(){if(this.activated){const C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,N){if(this.isActivated)throw new S.vHH(4013,Yi);this._activatedRoute=C;const O=this.location,M=C.snapshot.component,k=this.parentContexts.getOrCreateContext(this.name).children,q=new pi(C,k,O.injector);if(N&&function zr(I){return!!I.resolveComponentFactory}(N)){const he=N.resolveComponentFactory(M);this.activated=O.createComponent(he,O.length,q)}else this.activated=O.createComponent(M,{index:O.length,injector:q,environmentInjector:N??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(C){return new(C||I)},I.\u0275dir=S.lG2({type:I,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[S.TTD]}),I})();class pi{constructor(D,C,N){this.route=D,this.childContexts=C,this.parent=N}get(D,C){return D===$r?this.route:D===Er?this.childContexts:this.parent.get(D,C)}}let bs=(()=>{class I{}return I.\u0275fac=function(C){return new(C||I)},I.\u0275cmp=S.Xpm({type:I,selectors:[["ng-component"]],standalone:!0,features:[S.jDz],decls:1,vars:0,template:function(C,N){1&C&&S._UZ(0,"router-outlet")},dependencies:[ji],encapsulation:2}),I})();function L1(I,D){return I.providers&&!I._injector&&(I._injector=(0,S.MMx)(I.providers,D,`Route: ${I.path}`)),I._injector??D}function fs(I){const D=I.children&&I.children.map(fs),C=D?{...I,children:D}:{...I};return!C.component&&!C.loadComponent&&(D||C.loadChildren)&&C.outlet&&C.outlet!==vn&&(C.component=bs),C}function sr(I){return I.outlet||vn}function F1(I,D){const C=I.filter(N=>sr(N)===D);return C.push(...I.filter(N=>sr(N)!==D)),C}function js(I){if(!I)return null;if(I.routeConfig?._injector)return I.routeConfig._injector;for(let D=I.parent;D;D=D.parent){const C=D.routeConfig;if(C?._loadedInjector)return C._loadedInjector;if(C?._injector)return C._injector}return null}class Eo{constructor(D,C,N,O){this.routeReuseStrategy=D,this.futureState=C,this.currState=N,this.forwardEvent=O}activate(D){const C=this.futureState._root,N=this.currState?this.currState._root:null;this.deactivateChildRoutes(C,N,D),_i(this.futureState.root),this.activateChildRoutes(C,N,D)}deactivateChildRoutes(D,C,N){const O=yi(C);D.children.forEach(_=>{const M=_.value.outlet;this.deactivateRoutes(_,O[M],N),delete O[M]}),Mn(O,(_,M)=>{this.deactivateRouteAndItsChildren(_,N)})}deactivateRoutes(D,C,N){const O=D.value,_=C?C.value:null;if(O===_)if(O.component){const M=N.getContext(O.outlet);M&&this.deactivateChildRoutes(D,C,M.children)}else this.deactivateChildRoutes(D,C,N);else _&&this.deactivateRouteAndItsChildren(C,N)}deactivateRouteAndItsChildren(D,C){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,C):this.deactivateRouteAndOutlet(D,C)}detachAndStoreRouteSubtree(D,C){const N=C.getContext(D.value.outlet),O=N&&D.value.component?N.children:C,_=yi(D);for(const M of Object.keys(_))this.deactivateRouteAndItsChildren(_[M],O);if(N&&N.outlet){const M=N.outlet.detach(),k=N.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:M,route:D,contexts:k})}}deactivateRouteAndOutlet(D,C){const N=C.getContext(D.value.outlet),O=N&&D.value.component?N.children:C,_=yi(D);for(const M of Object.keys(_))this.deactivateRouteAndItsChildren(_[M],O);N&&N.outlet&&(N.outlet.deactivate(),N.children.onOutletDeactivated(),N.attachRef=null,N.resolver=null,N.route=null)}activateChildRoutes(D,C,N){const O=yi(C);D.children.forEach(_=>{this.activateRoutes(_,O[_.value.outlet],N),this.forwardEvent(new ws(_.value.snapshot))}),D.children.length&&this.forwardEvent(new Br(D.value.snapshot))}activateRoutes(D,C,N){const O=D.value,_=C?C.value:null;if(_i(O),O===_)if(O.component){const M=N.getOrCreateContext(O.outlet);this.activateChildRoutes(D,C,M.children)}else this.activateChildRoutes(D,C,N);else if(O.component){const M=N.getOrCreateContext(O.outlet);if(this.routeReuseStrategy.shouldAttach(O.snapshot)){const k=this.routeReuseStrategy.retrieve(O.snapshot);this.routeReuseStrategy.store(O.snapshot,null),M.children.onOutletReAttached(k.contexts),M.attachRef=k.componentRef,M.route=k.route.value,M.outlet&&M.outlet.attach(k.componentRef,k.route.value),_i(k.route.value),this.activateChildRoutes(D,null,M.children)}else{const k=js(O.snapshot),q=k?.get(S._Vd)??null;M.attachRef=null,M.route=O,M.resolver=q,M.injector=k,M.outlet&&M.outlet.activateWith(O,M.injector),this.activateChildRoutes(D,null,M.children)}}else this.activateChildRoutes(D,null,N)}}class $s{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class X1{constructor(D,C){this.component=D,this.route=C}}function it(I,D,C){const N=I._root;return U1(N,D?D._root:null,C,[N.value])}function Wi(I,D){const C=Symbol(),N=D.get(I,C);return N===C?"function"!=typeof I||(0,S.Z0I)(I)?D.get(I):I:N}function U1(I,D,C,N,O={canDeactivateChecks:[],canActivateChecks:[]}){const _=yi(D);return I.children.forEach(M=>{(function Qi(I,D,C,N,O={canDeactivateChecks:[],canActivateChecks:[]}){const _=I.value,M=D?D.value:null,k=C?C.getContext(I.value.outlet):null;if(M&&_.routeConfig===M.routeConfig){const q=function Ms(I,D,C){if("function"==typeof C)return C(I,D);switch(C){case"pathParamsChange":return!ge(I.url,D.url);case"pathParamsOrQueryParamsChange":return!ge(I.url,D.url)||!hn(I.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!us(I,D)||!hn(I.queryParams,D.queryParams);default:return!us(I,D)}}(M,_,_.routeConfig.runGuardsAndResolvers);q?O.canActivateChecks.push(new $s(N)):(_.data=M.data,_._resolvedData=M._resolvedData),U1(I,D,_.component?k?k.children:null:C,N,O),q&&k&&k.outlet&&k.outlet.isActivated&&O.canDeactivateChecks.push(new X1(k.outlet.component,M))}else M&&z1(D,k,O),O.canActivateChecks.push(new $s(N)),U1(I,null,_.component?k?k.children:null:C,N,O)})(M,_[M.value.outlet],C,N.concat([M.value]),O),delete _[M.value.outlet]}),Mn(_,(M,k)=>z1(M,C.getContext(k),O)),O}function z1(I,D,C){const N=yi(I),O=I.value;Mn(N,(_,M)=>{z1(_,O.component?D?D.children.getContext(M):null:D,C)}),C.canDeactivateChecks.push(new X1(O.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,O))}function Xi(I){return"function"==typeof I}function ht(I){return I instanceof we.K||"EmptyError"===I?.name}const st=Symbol("INITIAL_VALUE");function qt(){return(0,St.w)(I=>nt(I.map(D=>D.pipe((0,Nt.q)(1),(0,_n.O)(st)))).pipe((0,Fe.U)(D=>{for(const C of D)if(!0!==C){if(C===st)return st;if(!1===C||C instanceof pe)return C}return!0}),(0,kt.h)(D=>D!==st),(0,Nt.q)(1)))}function Kr(I){return(0,zt.z)((0,Tn.b)(D=>{if(Nr(D))throw hs(0,D)}),(0,Fe.U)(D=>!0===D))}const E1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gs(I,D,C,N,O){const _=c1(I,D,C);return _.matched?function Ar(I,D,C,N){const O=D.canMatch;if(!O||0===O.length)return(0,K.of)(!0);const _=O.map(M=>{const k=Wi(M,I);return vr(function ae(I){return I&&Xi(I.canMatch)}(k)?k.canMatch(D,C):I.runInContext(()=>k(D,C)))});return(0,K.of)(_).pipe(qt(),Kr())}(N=L1(D,N),D,C).pipe((0,Fe.U)(M=>!0===M?_:{...E1})):(0,K.of)(_)}function c1(I,D,C){if(""===D.path)return"full"===D.pathMatch&&(I.hasChildren()||C.length>0)?{...E1}:{matched:!0,consumedSegments:[],remainingSegments:C,parameters:{},positionalParamSegments:{}};const O=(D.matcher||Gr)(C,I,D);if(!O)return{...E1};const _={};Mn(O.posParams,(k,q)=>{_[q]=k.path});const M=O.consumed.length>0?{..._,...O.consumed[O.consumed.length-1].parameters}:_;return{matched:!0,consumedSegments:O.consumed,remainingSegments:C.slice(O.consumed.length),parameters:M,positionalParamSegments:O.posParams??{}}}function Ss(I,D,C,N){if(C.length>0&&function qr(I,D,C){return C.some(N=>Wr(I,D,N)&&sr(N)!==vn)}(I,C,N)){const _=new Oe(D,function Ds(I,D,C,N){const O={};O[vn]=N,N._sourceSegment=I,N._segmentIndexShift=D.length;for(const _ of C)if(""===_.path&&sr(_)!==vn){const M=new Oe([],{});M._sourceSegment=I,M._segmentIndexShift=D.length,O[sr(_)]=M}return O}(I,D,N,new Oe(C,I.children)));return _._sourceSegment=I,_._segmentIndexShift=D.length,{segmentGroup:_,slicedSegments:[]}}if(0===C.length&&function Zs(I,D,C){return C.some(N=>Wr(I,D,N))}(I,C,N)){const _=new Oe(I.segments,function so(I,D,C,N,O){const _={};for(const M of N)if(Wr(I,C,M)&&!O[sr(M)]){const k=new Oe([],{});k._sourceSegment=I,k._segmentIndexShift=D.length,_[sr(M)]=k}return{...O,..._}}(I,D,C,N,I.children));return _._sourceSegment=I,_._segmentIndexShift=D.length,{segmentGroup:_,slicedSegments:C}}const O=new Oe(I.segments,I.children);return O._sourceSegment=I,O._segmentIndexShift=D.length,{segmentGroup:O,slicedSegments:C}}function Wr(I,D,C){return(!(I.hasChildren()||D.length>0)||"full"!==C.pathMatch)&&""===C.path}function Hi(I,D,C,N){return!!(sr(I)===N||N!==vn&&Wr(D,C,I))&&("**"===I.path||c1(D,I,C).matched)}function Ko(I,D,C){return 0===D.length&&!I.children[C]}const Fi=!1;class Ks{constructor(D){this.segmentGroup=D||null}}class qs{constructor(D){this.urlTree=D}}function zo(I){return Zt(new Ks(I))}function ds(I){return Zt(new qs(I))}class U{constructor(D,C,N,O,_){this.injector=D,this.configLoader=C,this.urlSerializer=N,this.urlTree=O,this.config=_,this.allowRedirects=!0}apply(){const D=Ss(this.urlTree.root,[],[],this.config).segmentGroup,C=new Oe(D.segments,D.children);return this.expandSegmentGroup(this.injector,this.config,C,vn).pipe((0,Fe.U)(_=>this.createUrlTree(tr(_),this.urlTree.queryParams,this.urlTree.fragment))).pipe(rr(_=>{if(_ instanceof qs)return this.allowRedirects=!1,this.match(_.urlTree);throw _ instanceof Ks?this.noMatchError(_):_}))}match(D){return this.expandSegmentGroup(this.injector,this.config,D.root,vn).pipe((0,Fe.U)(O=>this.createUrlTree(tr(O),D.queryParams,D.fragment))).pipe(rr(O=>{throw O instanceof Ks?this.noMatchError(O):O}))}noMatchError(D){return new S.vHH(4002,Fi)}createUrlTree(D,C,N){const O=D1(D);return new pe(O,C,N)}expandSegmentGroup(D,C,N,O){return 0===N.segments.length&&N.hasChildren()?this.expandChildren(D,C,N).pipe((0,Fe.U)(_=>new Oe([],_))):this.expandSegment(D,N,C,N.segments,O,!0)}expandChildren(D,C,N){const O=[];for(const _ of Object.keys(N.children))"primary"===_?O.unshift(_):O.push(_);return(0,B.D)(O).pipe((0,$t.b)(_=>{const M=N.children[_],k=F1(C,_);return this.expandSegmentGroup(D,k,M,_).pipe((0,Fe.U)(q=>({segment:q,outlet:_})))}),(0,Gn.R)((_,M)=>(_[M.outlet]=M.segment,_),{}),On())}expandSegment(D,C,N,O,_,M){return(0,B.D)(N).pipe((0,$t.b)(k=>this.expandSegmentAgainstRoute(D,C,N,k,O,_,M).pipe(rr(he=>{if(he instanceof Ks)return(0,K.of)(null);throw he}))),(0,Ft.P)(k=>!!k),rr((k,q)=>{if(ht(k))return Ko(C,O,_)?(0,K.of)(new Oe([],{})):zo(C);throw k}))}expandSegmentAgainstRoute(D,C,N,O,_,M,k){return Hi(O,C,_,M)?void 0===O.redirectTo?this.matchSegmentAgainstRoute(D,C,O,_,M):k&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,C,N,O,_,M):zo(C):zo(C)}expandSegmentAgainstRouteUsingRedirect(D,C,N,O,_,M){return"**"===O.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,N,O,M):this.expandRegularSegmentAgainstRouteUsingRedirect(D,C,N,O,_,M)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,C,N,O){const _=this.applyRedirectCommands([],N.redirectTo,{});return N.redirectTo.startsWith("/")?ds(_):this.lineralizeSegments(N,_).pipe((0,Kt.z)(M=>{const k=new Oe(M,{});return this.expandSegment(D,k,C,M,O,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,C,N,O,_,M){const{matched:k,consumedSegments:q,remainingSegments:he,positionalParamSegments:_e}=c1(C,O,_);if(!k)return zo(C);const je=this.applyRedirectCommands(q,O.redirectTo,_e);return O.redirectTo.startsWith("/")?ds(je):this.lineralizeSegments(O,je).pipe((0,Kt.z)(Qt=>this.expandSegment(D,C,N,Qt.concat(he),M,!1)))}matchSegmentAgainstRoute(D,C,N,O,_){return"**"===N.path?(D=L1(N,D),N.loadChildren?(N._loadedRoutes?(0,K.of)({routes:N._loadedRoutes,injector:N._loadedInjector}):this.configLoader.loadChildren(D,N)).pipe((0,Fe.U)(k=>(N._loadedRoutes=k.routes,N._loadedInjector=k.injector,new Oe(O,{})))):(0,K.of)(new Oe(O,{}))):Gs(C,N,O,D).pipe((0,St.w)(({matched:M,consumedSegments:k,remainingSegments:q})=>M?this.getChildConfig(D=N._injector??D,N,O).pipe((0,Kt.z)(_e=>{const je=_e.injector??D,Qt=_e.routes,{segmentGroup:on,slicedSegments:Bt}=Ss(C,k,q,Qt),kn=new Oe(on.segments,on.children);if(0===Bt.length&&kn.hasChildren())return this.expandChildren(je,Qt,kn).pipe((0,Fe.U)(Ns=>new Oe(k,Ns)));if(0===Qt.length&&0===Bt.length)return(0,K.of)(new Oe(k,{}));const Sn=sr(N)===_;return this.expandSegment(je,kn,Qt,Bt,Sn?vn:_,!0).pipe((0,Fe.U)(hi=>new Oe(k.concat(hi.segments),hi.children)))})):zo(C)))}getChildConfig(D,C,N){return C.children?(0,K.of)({routes:C.children,injector:D}):C.loadChildren?void 0!==C._loadedRoutes?(0,K.of)({routes:C._loadedRoutes,injector:C._loadedInjector}):function Gi(I,D,C,N){const O=D.canLoad;if(void 0===O||0===O.length)return(0,K.of)(!0);const _=O.map(M=>{const k=Wi(M,I);return vr(function Ws(I){return I&&Xi(I.canLoad)}(k)?k.canLoad(D,C):I.runInContext(()=>k(D,C)))});return(0,K.of)(_).pipe(qt(),Kr())}(D,C,N).pipe((0,Kt.z)(O=>O?this.configLoader.loadChildren(D,C).pipe((0,Tn.b)(_=>{C._loadedRoutes=_.routes,C._loadedInjector=_.injector})):function Ro(I){return Zt(Q1(Fi,3))}())):(0,K.of)({routes:[],injector:D})}lineralizeSegments(D,C){let N=[],O=C.root;for(;;){if(N=N.concat(O.segments),0===O.numberOfChildren)return(0,K.of)(N);if(O.numberOfChildren>1||!O.children[vn])return D.redirectTo,Zt(new S.vHH(4e3,Fi));O=O.children[vn]}}applyRedirectCommands(D,C,N){return this.applyRedirectCreateUrlTree(C,this.urlSerializer.parse(C),D,N)}applyRedirectCreateUrlTree(D,C,N,O){const _=this.createSegmentGroup(D,C.root,N,O);return new pe(_,this.createQueryParams(C.queryParams,this.urlTree.queryParams),C.fragment)}createQueryParams(D,C){const N={};return Mn(D,(O,_)=>{if("string"==typeof O&&O.startsWith(":")){const k=O.substring(1);N[_]=C[k]}else N[_]=O}),N}createSegmentGroup(D,C,N,O){const _=this.createSegments(D,C.segments,N,O);let M={};return Mn(C.children,(k,q)=>{M[q]=this.createSegmentGroup(D,k,N,O)}),new Oe(_,M)}createSegments(D,C,N,O){return C.map(_=>_.path.startsWith(":")?this.findPosParam(D,_,O):this.findOrReturn(_,N))}findPosParam(D,C,N){const O=N[C.path.substring(1)];if(!O)throw new S.vHH(4001,Fi);return O}findOrReturn(D,C){let N=0;for(const O of C){if(O.path===D.path)return C.splice(N),O;N++}return D}}class fe{}class ln{constructor(D,C,N,O,_,M,k){this.injector=D,this.rootComponentType=C,this.config=N,this.urlTree=O,this.url=_,this.paramsInheritanceStrategy=M,this.urlSerializer=k}recognize(){const D=Ss(this.urlTree.root,[],[],this.config.filter(C=>void 0===C.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,D,vn).pipe((0,Fe.U)(C=>{if(null===C)return null;const N=new x1([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},vn,this.rootComponentType,null,this.urlTree.root,-1,{}),O=new vi(N,C),_=new ls(this.url,O);return this.inheritParamsAndData(_._root),_}))}inheritParamsAndData(D){const C=D.value,N=qn(C,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data),D.children.forEach(O=>this.inheritParamsAndData(O))}processSegmentGroup(D,C,N,O){return 0===N.segments.length&&N.hasChildren()?this.processChildren(D,C,N):this.processSegment(D,C,N,N.segments,O)}processChildren(D,C,N){return(0,B.D)(Object.keys(N.children)).pipe((0,$t.b)(O=>{const _=N.children[O],M=F1(C,O);return this.processSegmentGroup(D,M,_,O)}),(0,Gn.R)((O,_)=>O&&_?(O.push(..._),O):null),function cr(I,D=!1){return(0,Qe.e)((C,N)=>{let O=0;C.subscribe((0,Et.x)(N,_=>{const M=I(_,O++);(M||D)&&N.next(_),!M&&N.complete()}))})}(O=>null!==O),(0,br.d)(null),On(),(0,Fe.U)(O=>{if(null===O)return null;const _=Zn(O);return function dr(I){I.sort((D,C)=>D.value.outlet===vn?-1:C.value.outlet===vn?1:D.value.outlet.localeCompare(C.value.outlet))}(_),_}))}processSegment(D,C,N,O,_){return(0,B.D)(C).pipe((0,$t.b)(M=>this.processSegmentAgainstRoute(M._injector??D,M,N,O,_)),(0,Ft.P)(M=>!!M),rr(M=>{if(ht(M))return Ko(N,O,_)?(0,K.of)([]):(0,K.of)(null);throw M}))}processSegmentAgainstRoute(D,C,N,O,_){if(C.redirectTo||!Hi(C,N,O,_))return(0,K.of)(null);let M;if("**"===C.path){const k=O.length>0?pr(O).parameters:{},q=Ei(N)+O.length,he=new x1(O,k,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,e1(C),sr(C),C.component??C._loadedComponent??null,C,Fn(N),q,R1(C));M=(0,K.of)({snapshot:he,consumedSegments:[],remainingSegments:[]})}else M=Gs(N,C,O,D).pipe((0,Fe.U)(({matched:k,consumedSegments:q,remainingSegments:he,parameters:_e})=>{if(!k)return null;const je=Ei(N)+q.length;return{snapshot:new x1(q,_e,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,e1(C),sr(C),C.component??C._loadedComponent??null,C,Fn(N),je,R1(C)),consumedSegments:q,remainingSegments:he}}));return M.pipe((0,St.w)(k=>{if(null===k)return(0,K.of)(null);const{snapshot:q,consumedSegments:he,remainingSegments:_e}=k;D=C._injector??D;const je=C._loadedInjector??D,Qt=function or(I){return I.children?I.children:I.loadChildren?I._loadedRoutes:[]}(C),{segmentGroup:on,slicedSegments:Bt}=Ss(N,he,_e,Qt.filter(Sn=>void 0===Sn.redirectTo));if(0===Bt.length&&on.hasChildren())return this.processChildren(je,Qt,on).pipe((0,Fe.U)(Sn=>null===Sn?null:[new vi(q,Sn)]));if(0===Qt.length&&0===Bt.length)return(0,K.of)([new vi(q,[])]);const kn=sr(C)===_;return this.processSegment(je,Qt,on,Bt,kn?vn:_).pipe((0,Fe.U)(Sn=>null===Sn?null:[new vi(q,Sn)]))}))}}function xr(I){const D=I.value.routeConfig;return D&&""===D.path&&void 0===D.redirectTo}function Zn(I){const D=[],C=new Set;for(const N of I){if(!xr(N)){D.push(N);continue}const O=D.find(_=>N.value.routeConfig===_.value.routeConfig);void 0!==O?(O.children.push(...N.children),C.add(O)):D.push(N)}for(const N of C){const O=Zn(N.children);D.push(new vi(N.value,O))}return D.filter(N=>!C.has(N))}function Fn(I){let D=I;for(;D._sourceSegment;)D=D._sourceSegment;return D}function Ei(I){let D=I,C=D._segmentIndexShift??0;for(;D._sourceSegment;)D=D._sourceSegment,C+=D._segmentIndexShift??0;return C-1}function e1(I){return I.data||{}}function R1(I){return I.resolve||{}}function Mo(I){return"string"==typeof I.title||null===I.title}function qo(I){return(0,St.w)(D=>{const C=I(D);return C?(0,B.D)(C).pipe((0,Fe.U)(()=>D)):(0,K.of)(D)})}const d1=new S.OlP("ROUTES");let Ys=(()=>{class I{constructor(C,N){this.injector=C,this.compiler=N,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(C){if(this.componentLoaders.get(C))return this.componentLoaders.get(C);if(C._loadedComponent)return(0,K.of)(C._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(C);const N=vr(C.loadComponent()).pipe((0,Fe.U)(ao),(0,Tn.b)(_=>{this.onLoadEndListener&&this.onLoadEndListener(C),C._loadedComponent=_}),gt(()=>{this.componentLoaders.delete(C)})),O=new Ge(N,()=>new at.x).pipe(Ue());return this.componentLoaders.set(C,O),O}loadChildren(C,N){if(this.childrenLoaders.get(N))return this.childrenLoaders.get(N);if(N._loadedRoutes)return(0,K.of)({routes:N._loadedRoutes,injector:N._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(N);const _=this.loadModuleFactoryOrRoutes(N.loadChildren).pipe((0,Fe.U)(k=>{this.onLoadEndListener&&this.onLoadEndListener(N);let q,he,_e=!1;Array.isArray(k)?he=k:(q=k.create(C).injector,he=ir(q.get(d1,[],S.XFs.Self|S.XFs.Optional)));return{routes:he.map(fs),injector:q}}),gt(()=>{this.childrenLoaders.delete(N)})),M=new Ge(_,()=>new at.x).pipe(Ue());return this.childrenLoaders.set(N,M),M}loadModuleFactoryOrRoutes(C){return vr(C()).pipe((0,Fe.U)(ao),(0,Kt.z)(O=>O instanceof S.YKP||Array.isArray(O)?(0,K.of)(O):(0,B.D)(this.compiler.compileModuleAsync(O))))}}return I.\u0275fac=function(C){return new(C||I)(S.LFG(S.zs3),S.LFG(S.Sil))},I.\u0275prov=S.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ao(I){return function Po(I){return I&&"object"==typeof I&&"default"in I}(I)?I.default:I}let Ts=(()=>{class I{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new at.x,this.configLoader=(0,S.f3M)(Ys),this.environmentInjector=(0,S.f3M)(S.lqb),this.urlSerializer=(0,S.f3M)(Te),this.rootContexts=(0,S.f3M)(Er),this.navigationId=0,this.afterPreactivation=()=>(0,K.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=O=>this.events.next(new fr(O)),this.configLoader.onLoadStartListener=O=>this.events.next(new Pi(O))}complete(){this.transitions?.complete()}handleNavigationRequest(C){const N=++this.navigationId;this.transitions?.next({...this.transitions.value,...C,id:N})}setupNavigations(C){return this.transitions=new Ce.X({id:0,targetPageId:0,currentUrlTree:C.currentUrlTree,currentRawUrl:C.currentUrlTree,extractedUrl:C.urlHandlingStrategy.extract(C.currentUrlTree),urlAfterRedirects:C.urlHandlingStrategy.extract(C.currentUrlTree),rawUrl:C.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ti,restoredState:null,currentSnapshot:C.routerState.snapshot,targetSnapshot:null,currentRouterState:C.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,kt.h)(N=>0!==N.id),(0,Fe.U)(N=>({...N,extractedUrl:C.urlHandlingStrategy.extract(N.rawUrl)})),(0,St.w)(N=>{let O=!1,_=!1;return(0,K.of)(N).pipe((0,Tn.b)(M=>{this.currentNavigation={id:M.id,initialUrl:M.rawUrl,extractedUrl:M.extractedUrl,trigger:M.source,extras:M.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,St.w)(M=>{const k=C.browserUrlTree.toString(),q=!C.navigated||M.extractedUrl.toString()!==k||k!==C.currentUrlTree.toString();if(!q&&"reload"!==(M.extras.onSameUrlNavigation??C.onSameUrlNavigation)){const _e="";return this.events.next(new ct(M.id,C.serializeUrl(N.rawUrl),_e,0)),C.rawUrlTree=M.rawUrl,M.resolve(null),xt.E}if(C.urlHandlingStrategy.shouldProcessUrl(M.rawUrl))return gs(M.source)&&(C.browserUrlTree=M.extractedUrl),(0,K.of)(M).pipe((0,St.w)(_e=>{const je=this.transitions?.getValue();return this.events.next(new Me(_e.id,this.urlSerializer.serialize(_e.extractedUrl),_e.source,_e.restoredState)),je!==this.transitions?.getValue()?xt.E:Promise.resolve(_e)}),function P(I,D,C,N){return(0,St.w)(O=>function L(I,D,C,N,O){return new U(I,D,C,N,O).apply()}(I,D,C,O.extractedUrl,N).pipe((0,Fe.U)(_=>({...O,urlAfterRedirects:_}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,C.config),(0,Tn.b)(_e=>{this.currentNavigation={...this.currentNavigation,finalUrl:_e.urlAfterRedirects},N.urlAfterRedirects=_e.urlAfterRedirects}),function xi(I,D,C,N,O){return(0,Kt.z)(_=>function vt(I,D,C,N,O,_,M="emptyOnly"){return new ln(I,D,C,N,O,M,_).recognize().pipe((0,St.w)(k=>null===k?function We(I){return new Ie.y(D=>D.error(I))}(new fe):(0,K.of)(k)))}(I,D,C,_.urlAfterRedirects,N.serialize(_.urlAfterRedirects),N,O).pipe((0,Fe.U)(M=>({..._,targetSnapshot:M}))))}(this.environmentInjector,this.rootComponentType,C.config,this.urlSerializer,C.paramsInheritanceStrategy),(0,Tn.b)(_e=>{if(N.targetSnapshot=_e.targetSnapshot,"eager"===C.urlUpdateStrategy){if(!_e.extras.skipLocationChange){const Qt=C.urlHandlingStrategy.merge(_e.urlAfterRedirects,_e.rawUrl);C.setBrowserUrl(Qt,_e)}C.browserUrlTree=_e.urlAfterRedirects}const je=new In(_e.id,this.urlSerializer.serialize(_e.extractedUrl),this.urlSerializer.serialize(_e.urlAfterRedirects),_e.targetSnapshot);this.events.next(je)}));if(q&&C.urlHandlingStrategy.shouldProcessUrl(C.rawUrlTree)){const{id:_e,extractedUrl:je,source:Qt,restoredState:on,extras:Bt}=M,kn=new Me(_e,this.urlSerializer.serialize(je),Qt,on);this.events.next(kn);const Sn=Us(je,this.rootComponentType).snapshot;return N={...M,targetSnapshot:Sn,urlAfterRedirects:je,extras:{...Bt,skipLocationChange:!1,replaceUrl:!1}},(0,K.of)(N)}{const _e="";return this.events.next(new ct(M.id,C.serializeUrl(N.extractedUrl),_e,1)),C.rawUrlTree=M.rawUrl,M.resolve(null),xt.E}}),(0,Tn.b)(M=>{const k=new mn(M.id,this.urlSerializer.serialize(M.extractedUrl),this.urlSerializer.serialize(M.urlAfterRedirects),M.targetSnapshot);this.events.next(k)}),(0,Fe.U)(M=>N={...M,guards:it(M.targetSnapshot,M.currentSnapshot,this.rootContexts)}),function Pn(I,D){return(0,Kt.z)(C=>{const{targetSnapshot:N,currentSnapshot:O,guards:{canActivateChecks:_,canDeactivateChecks:M}}=C;return 0===M.length&&0===_.length?(0,K.of)({...C,guardsResult:!0}):function Yn(I,D,C,N){return(0,B.D)(I).pipe((0,Kt.z)(O=>function wi(I,D,C,N,O){const _=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!_||0===_.length)return(0,K.of)(!0);const M=_.map(k=>{const q=js(D)??O,he=Wi(k,q);return vr(function oe(I){return I&&Xi(I.canDeactivate)}(he)?he.canDeactivate(I,D,C,N):q.runInContext(()=>he(I,D,C,N))).pipe((0,Ft.P)())});return(0,K.of)(M).pipe(qt())}(O.component,O.route,C,D,N)),(0,Ft.P)(O=>!0!==O,!0))}(M,N,O,I).pipe((0,Kt.z)(k=>k&&function Zo(I){return"boolean"==typeof I}(k)?function nr(I,D,C,N){return(0,B.D)(D).pipe((0,$t.b)(O=>(0,dt.z)(function ri(I,D){return null!==I&&D&&D(new jn(I)),(0,K.of)(!0)}(O.route.parent,N),function Tr(I,D){return null!==I&&D&&D(new Co(I)),(0,K.of)(!0)}(O.route,N),function Ji(I,D,C){const N=D[D.length-1],_=D.slice(0,D.length-1).reverse().map(M=>function hr(I){const D=I.routeConfig?I.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:I,guards:D}:null}(M)).filter(M=>null!==M).map(M=>Be(()=>{const k=M.guards.map(q=>{const he=js(M.node)??C,_e=Wi(q,he);return vr(function ee(I){return I&&Xi(I.canActivateChild)}(_e)?_e.canActivateChild(N,I):he.runInContext(()=>_e(N,I))).pipe((0,Ft.P)())});return(0,K.of)(k).pipe(qt())}));return(0,K.of)(_).pipe(qt())}(I,O.path,C),function Vi(I,D,C){const N=D.routeConfig?D.routeConfig.canActivate:null;if(!N||0===N.length)return(0,K.of)(!0);const O=N.map(_=>Be(()=>{const M=js(D)??C,k=Wi(_,M);return vr(function W(I){return I&&Xi(I.canActivate)}(k)?k.canActivate(D,I):M.runInContext(()=>k(D,I))).pipe((0,Ft.P)())}));return(0,K.of)(O).pipe(qt())}(I,O.route,C))),(0,Ft.P)(O=>!0!==O,!0))}(N,_,I,D):(0,K.of)(k)),(0,Fe.U)(k=>({...C,guardsResult:k})))})}(this.environmentInjector,M=>this.events.next(M)),(0,Tn.b)(M=>{if(N.guardsResult=M.guardsResult,Nr(M.guardsResult))throw hs(0,M.guardsResult);const k=new _r(M.id,this.urlSerializer.serialize(M.extractedUrl),this.urlSerializer.serialize(M.urlAfterRedirects),M.targetSnapshot,!!M.guardsResult);this.events.next(k)}),(0,kt.h)(M=>!!M.guardsResult||(C.restoreHistory(M),this.cancelNavigationTransition(M,"",3),!1)),qo(M=>{if(M.guards.canActivateChecks.length)return(0,K.of)(M).pipe((0,Tn.b)(k=>{const q=new ni(k.id,this.urlSerializer.serialize(k.extractedUrl),this.urlSerializer.serialize(k.urlAfterRedirects),k.targetSnapshot);this.events.next(q)}),(0,St.w)(k=>{let q=!1;return(0,K.of)(k).pipe(function oo(I,D){return(0,Kt.z)(C=>{const{targetSnapshot:N,guards:{canActivateChecks:O}}=C;if(!O.length)return(0,K.of)(C);let _=0;return(0,B.D)(O).pipe((0,$t.b)(M=>function Io(I,D,C,N){const O=I.routeConfig,_=I._resolve;return void 0!==O?.title&&!Mo(O)&&(_[Jr]=O.title),function ms(I,D,C,N){const O=function bo(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}(I);if(0===O.length)return(0,K.of)({});const _={};return(0,B.D)(O).pipe((0,Kt.z)(M=>function w2(I,D,C,N){const O=js(D)??N,_=Wi(I,O);return vr(_.resolve?_.resolve(D,C):O.runInContext(()=>_(D,C)))}(I[M],D,C,N).pipe((0,Ft.P)(),(0,Tn.b)(k=>{_[M]=k}))),Nn(1),function lr(I){return(0,Fe.U)(()=>I)}(_),rr(M=>ht(M)?xt.E:Zt(M)))}(_,I,D,N).pipe((0,Fe.U)(M=>(I._resolvedData=M,I.data=qn(I,C).resolve,O&&Mo(O)&&(I.data[Jr]=O.title),null)))}(M.route,N,I,D)),(0,Tn.b)(()=>_++),Nn(1),(0,Kt.z)(M=>_===O.length?(0,K.of)(C):xt.E))})}(C.paramsInheritanceStrategy,this.environmentInjector),(0,Tn.b)({next:()=>q=!0,complete:()=>{q||(C.restoreHistory(k),this.cancelNavigationTransition(k,"",2))}}))}),(0,Tn.b)(k=>{const q=new di(k.id,this.urlSerializer.serialize(k.extractedUrl),this.urlSerializer.serialize(k.urlAfterRedirects),k.targetSnapshot);this.events.next(q)}))}),qo(M=>{const k=q=>{const he=[];q.routeConfig?.loadComponent&&!q.routeConfig._loadedComponent&&he.push(this.configLoader.loadComponent(q.routeConfig).pipe((0,Tn.b)(_e=>{q.component=_e}),(0,Fe.U)(()=>{})));for(const _e of q.children)he.push(...k(_e));return he};return nt(k(M.targetSnapshot.root)).pipe((0,br.d)(),(0,Nt.q)(1))}),qo(()=>this.afterPreactivation()),(0,Fe.U)(M=>{const k=function ki(I,D,C){const N=w1(I,D._root,C?C._root:void 0);return new Lo(N,D)}(C.routeReuseStrategy,M.targetSnapshot,M.currentRouterState);return N={...M,targetRouterState:k}}),(0,Tn.b)(M=>{C.currentUrlTree=M.urlAfterRedirects,C.rawUrlTree=C.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl),C.routerState=M.targetRouterState,"deferred"===C.urlUpdateStrategy&&(M.extras.skipLocationChange||C.setBrowserUrl(C.rawUrlTree,M),C.browserUrlTree=M.urlAfterRedirects)}),((I,D,C)=>(0,Fe.U)(N=>(new Eo(D,N.targetRouterState,N.currentRouterState,C).activate(I),N)))(this.rootContexts,C.routeReuseStrategy,M=>this.events.next(M)),(0,Tn.b)({next:M=>{O=!0,this.lastSuccessfulNavigation=this.currentNavigation,C.navigated=!0,this.events.next(new Pe(M.id,this.urlSerializer.serialize(M.extractedUrl),this.urlSerializer.serialize(C.currentUrlTree))),C.titleStrategy?.updateTitle(M.targetRouterState.snapshot),M.resolve(!0)},complete:()=>{O=!0}}),gt(()=>{O||_||this.cancelNavigationTransition(N,"",1),this.currentNavigation?.id===N.id&&(this.currentNavigation=null)}),rr(M=>{if(_=!0,Cr(M)){a1(M)||(C.navigated=!0,C.restoreHistory(N,!0));const k=new $e(N.id,this.urlSerializer.serialize(N.extractedUrl),M.message,M.cancellationCode);if(this.events.next(k),a1(M)){const q=C.urlHandlingStrategy.merge(M.url,C.rawUrlTree),he={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===C.urlUpdateStrategy||gs(N.source)};C.scheduleNavigation(q,Ti,null,he,{resolve:N.resolve,reject:N.reject,promise:N.promise})}else N.resolve(!1)}else{C.restoreHistory(N,!0);const k=new Lt(N.id,this.urlSerializer.serialize(N.extractedUrl),M,N.targetSnapshot??void 0);this.events.next(k);try{N.resolve(C.errorHandler(M))}catch(q){N.reject(q)}}return xt.E}))}))}cancelNavigationTransition(C,N,O){const _=new $e(C.id,this.urlSerializer.serialize(C.extractedUrl),N,O);this.events.next(_),C.resolve(!1)}}return I.\u0275fac=function(C){return new(C||I)},I.\u0275prov=S.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function gs(I){return I!==Ti}let u2=(()=>{class I{buildTitle(C){let N,O=C.root;for(;void 0!==O;)N=this.getResolvedTitleForRoute(O)??N,O=O.children.find(_=>_.outlet===vn);return N}getResolvedTitleForRoute(C){return C.data[Jr]}}return I.\u0275fac=function(C){return new(C||I)},I.\u0275prov=S.Yz7({token:I,factory:function(){return(0,S.f3M)(ko)},providedIn:"root"}),I})(),ko=(()=>{class I extends u2{constructor(C){super(),this.title=C}updateTitle(C){const N=this.buildTitle(C);void 0!==N&&this.title.setTitle(N)}}return I.\u0275fac=function(C){return new(C||I)(S.LFG(_t.Dx))},I.\u0275prov=S.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})(),Rt=(()=>{class I{}return I.\u0275fac=function(C){return new(C||I)},I.\u0275prov=S.Yz7({token:I,factory:function(){return(0,S.f3M)(I1)},providedIn:"root"}),I})();class Ui{shouldDetach(D){return!1}store(D,C){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,C){return D.routeConfig===C.routeConfig}}let I1=(()=>{class I extends Ui{}return I.\u0275fac=function(){let D;return function(N){return(D||(D=S.n5z(I)))(N||I)}}(),I.\u0275prov=S.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const an=new S.OlP("",{providedIn:"root",factory:()=>({})});let fn=(()=>{class I{}return I.\u0275fac=function(C){return new(C||I)},I.\u0275prov=S.Yz7({token:I,factory:function(){return(0,S.f3M)(Q2)},providedIn:"root"}),I})(),Q2=(()=>{class I{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,N){return C}}return I.\u0275fac=function(C){return new(C||I)},I.\u0275prov=S.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ye(I){throw I}function wt(I,D,C){return D.parse("/")}const t1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},k2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let P1=(()=>{class I{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,S.f3M)(S.c2e),this.isNgZoneEnabled=!1,this.options=(0,S.f3M)(an,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Ye,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||wt,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,S.f3M)(fn),this.routeReuseStrategy=(0,S.f3M)(Rt),this.urlCreationStrategy=(0,S.f3M)(Es),this.titleStrategy=(0,S.f3M)(u2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ir((0,S.f3M)(d1,{optional:!0})??[]),this.navigationTransitions=(0,S.f3M)(Ts),this.urlSerializer=(0,S.f3M)(Te),this.location=(0,S.f3M)(et.Ye),this.isNgZoneEnabled=(0,S.f3M)(S.R0b)instanceof S.R0b&&S.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new pe,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Us(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(C=>{this.lastSuccessfulId=C.id,this.currentPageId=C.targetPageId},C=>{this.console.warn(`Unhandled Navigation Error: ${C}`)})}resetRootComponentType(C){this.routerState.root.component=C,this.navigationTransitions.rootComponentType=C}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const C=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ti,C)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(C=>{const N="popstate"===C.type?"popstate":"hashchange";"popstate"===N&&setTimeout(()=>{this.navigateToSyncWithBrowser(C.url,N,C.state)},0)}))}navigateToSyncWithBrowser(C,N,O){const _={replaceUrl:!0},M=O?.navigationId?O:null;if(O){const q={...O};delete q.navigationId,delete q.\u0275routerPageId,0!==Object.keys(q).length&&(_.state=q)}const k=this.parseUrl(C);this.scheduleNavigation(k,N,M,_)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(C){this.config=C.map(fs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(C,N={}){const{relativeTo:O,queryParams:_,fragment:M,queryParamsHandling:k,preserveFragment:q}=N,he=q?this.currentUrlTree.fragment:M;let _e=null;switch(k){case"merge":_e={...this.currentUrlTree.queryParams,..._};break;case"preserve":_e=this.currentUrlTree.queryParams;break;default:_e=_||null}return null!==_e&&(_e=this.removeEmptyProps(_e)),this.urlCreationStrategy.createUrlTree(O,this.routerState,this.currentUrlTree,C,_e,he??null)}navigateByUrl(C,N={skipLocationChange:!1}){const O=Nr(C)?C:this.parseUrl(C),_=this.urlHandlingStrategy.merge(O,this.rawUrlTree);return this.scheduleNavigation(_,Ti,null,N)}navigate(C,N={skipLocationChange:!1}){return function X2(I){for(let D=0;D<I.length;D++){const C=I[D];if(null==C)throw new S.vHH(4008,false)}}(C),this.navigateByUrl(this.createUrlTree(C,N),N)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){let N;try{N=this.urlSerializer.parse(C)}catch(O){N=this.malformedUriErrorHandler(O,this.urlSerializer,C)}return N}isActive(C,N){let O;if(O=!0===N?{...t1}:!1===N?{...k2}:N,Nr(C))return bn(this.currentUrlTree,C,O);const _=this.parseUrl(C);return bn(this.currentUrlTree,_,O)}removeEmptyProps(C){return Object.keys(C).reduce((N,O)=>{const _=C[O];return null!=_&&(N[O]=_),N},{})}scheduleNavigation(C,N,O,_,M){if(this.disposed)return Promise.resolve(!1);let k,q,he,_e;return M?(k=M.resolve,q=M.reject,he=M.promise):he=new Promise((je,Qt)=>{k=je,q=Qt}),_e="computed"===this.canceledNavigationResolution?O&&O.\u0275routerPageId?O.\u0275routerPageId:_.replaceUrl||_.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:_e,source:N,restoredState:O,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:C,extras:_,resolve:k,reject:q,promise:he,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),he.catch(je=>Promise.reject(je))}setBrowserUrl(C,N){const O=this.urlSerializer.serialize(C),_={...N.extras.state,...this.generateNgRouterState(N.id,N.targetPageId)};this.location.isCurrentPathEqualTo(O)||N.extras.replaceUrl?this.location.replaceState(O,"",_):this.location.go(O,"",_)}restoreHistory(C,N=!1){if("computed"===this.canceledNavigationResolution){const O=this.currentPageId-C.targetPageId;"popstate"!==C.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===O?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===O&&(this.resetState(C),this.browserUrlTree=C.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(O)}else"replace"===this.canceledNavigationResolution&&(N&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){this.routerState=C.currentRouterState,this.currentUrlTree=C.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,C.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(C,N){return"computed"===this.canceledNavigationResolution?{navigationId:C,\u0275routerPageId:N}:{navigationId:C}}}return I.\u0275fac=function(C){return new(C||I)},I.\u0275prov=S.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})(),Yo=(()=>{class I{constructor(C,N,O,_,M,k){this.router=C,this.route=N,this.tabIndexAttribute=O,this.renderer=_,this.el=M,this.locationStrategy=k,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new at.x;const q=M.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===q||"area"===q,this.isAnchorElement?this.subscription=C.events.subscribe(he=>{he instanceof Pe&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(C){this._preserveFragment=(0,S.D6c)(C)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(C){this._skipLocationChange=(0,S.D6c)(C)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(C){this._replaceUrl=(0,S.D6c)(C)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(C){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",C)}ngOnChanges(C){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(C){null!=C?(this.commands=Array.isArray(C)?C:[C],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(C,N,O,_,M){return!!(null===this.urlTree||this.isAnchorElement&&(0!==C||N||O||_||M||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const C=null===this.href?null:(0,S.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",C)}applyAttributeValue(C,N){const O=this.renderer,_=this.el.nativeElement;null!==N?O.setAttribute(_,C,N):O.removeAttribute(_,C)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(C){return new(C||I)(S.Y36(P1),S.Y36($r),S.$8M("tabindex"),S.Y36(S.Qsj),S.Y36(S.SBq),S.Y36(et.S$))},I.\u0275dir=S.lG2({type:I,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(C,N){1&C&&S.NdJ("click",function(_){return N.onClick(_.button,_.ctrlKey,_.shiftKey,_.altKey,_.metaKey)}),2&C&&S.uIk("target",N.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[S.TTD]}),I})();class Qo{}let wa=(()=>{class I{constructor(C,N,O,_,M){this.router=C,this.injector=O,this.preloadingStrategy=_,this.loader=M}setUpPreloading(){this.subscription=this.router.events.pipe((0,kt.h)(C=>C instanceof Pe),(0,$t.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(C,N){const O=[];for(const _ of N){_.providers&&!_._injector&&(_._injector=(0,S.MMx)(_.providers,C,`Route: ${_.path}`));const M=_._injector??C,k=_._loadedInjector??M;_.loadChildren&&!_._loadedRoutes&&void 0===_.canLoad||_.loadComponent&&!_._loadedComponent?O.push(this.preloadConfig(M,_)):(_.children||_._loadedRoutes)&&O.push(this.processRoutes(k,_.children??_._loadedRoutes))}return(0,B.D)(O).pipe((0,Jn.J)())}preloadConfig(C,N){return this.preloadingStrategy.preload(N,()=>{let O;O=N.loadChildren&&void 0===N.canLoad?this.loader.loadChildren(C,N):(0,K.of)(null);const _=O.pipe((0,Kt.z)(M=>null===M?(0,K.of)(void 0):(N._loadedRoutes=M.routes,N._loadedInjector=M.injector,this.processRoutes(M.injector??C,M.routes))));if(N.loadComponent&&!N._loadedComponent){const M=this.loader.loadComponent(N);return(0,B.D)([_,M]).pipe((0,Jn.J)())}return _})}}return I.\u0275fac=function(C){return new(C||I)(S.LFG(P1),S.LFG(S.Sil),S.LFG(S.lqb),S.LFG(Qo),S.LFG(Ys))},I.\u0275prov=S.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Ho=new S.OlP("");let Qn=(()=>{class I{constructor(C,N,O,_,M={}){this.urlSerializer=C,this.transitions=N,this.viewportScroller=O,this.zone=_,this.options=M,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},M.scrollPositionRestoration=M.scrollPositionRestoration||"disabled",M.anchorScrolling=M.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(C=>{C instanceof Me?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=C.navigationTrigger,this.restoredId=C.restoredState?C.restoredState.navigationId:0):C instanceof Pe&&(this.lastId=C.id,this.scheduleScrollEvent(C,this.urlSerializer.parse(C.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(C=>{C instanceof o1&&(C.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(C.position):C.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(C.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(C,N){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new o1(C,"popstate"===this.lastSource?this.store[this.restoredId]:null,N))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return I.\u0275fac=function(C){S.$Z()},I.\u0275prov=S.Yz7({token:I,factory:I.\u0275fac}),I})();var l1=(()=>((l1=l1||{})[l1.COMPLETE=0]="COMPLETE",l1[l1.FAILED=1]="FAILED",l1[l1.REDIRECTING=2]="REDIRECTING",l1))();const Vr=!1;function ar(I,D){return{\u0275kind:I,\u0275providers:D}}const b2=new S.OlP("",{providedIn:"root",factory:()=>!1});function Xo(){const I=(0,S.f3M)(S.zs3);return D=>{const C=I.get(S.z2F);if(D!==C.components[0])return;const N=I.get(P1),O=I.get(As);1===I.get(si)&&N.initialNavigation(),I.get(b1,null,S.XFs.Optional)?.setUpPreloading(),I.get(Ho,null,S.XFs.Optional)?.init(),N.resetRootComponentType(C.componentTypes[0]),O.closed||(O.next(),O.unsubscribe())}}const As=new S.OlP(Vr?"bootstrap done indicator":"",{factory:()=>new at.x}),si=new S.OlP(Vr?"initial navigation":"",{providedIn:"root",factory:()=>1});function J1(){let I=[];return I=Vr?[{provide:S.Xts,multi:!0,useFactory:()=>{const D=(0,S.f3M)(P1);return()=>D.events.subscribe(C=>{console.group?.(`Router Event: ${C.constructor.name}`),console.log(function q1(I){if(!("type"in I))return`Unknown Router Event: ${I.constructor.name}`;switch(I.type){case 14:return`ActivationEnd(path: '${I.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${I.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${I.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${I.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${I.id}, url: '${I.url}', urlAfterRedirects: '${I.urlAfterRedirects}', state: ${I.state}, shouldActivate: ${I.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${I.id}, url: '${I.url}', urlAfterRedirects: '${I.urlAfterRedirects}', state: ${I.state})`;case 2:return`NavigationCancel(id: ${I.id}, url: '${I.url}')`;case 16:return`NavigationSkipped(id: ${I.id}, url: '${I.url}')`;case 1:return`NavigationEnd(id: ${I.id}, url: '${I.url}', urlAfterRedirects: '${I.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${I.id}, url: '${I.url}', error: ${I.error})`;case 0:return`NavigationStart(id: ${I.id}, url: '${I.url}')`;case 6:return`ResolveEnd(id: ${I.id}, url: '${I.url}', urlAfterRedirects: '${I.urlAfterRedirects}', state: ${I.state})`;case 5:return`ResolveStart(id: ${I.id}, url: '${I.url}', urlAfterRedirects: '${I.urlAfterRedirects}', state: ${I.state})`;case 10:return`RouteConfigLoadEnd(path: ${I.route.path})`;case 9:return`RouteConfigLoadStart(path: ${I.route.path})`;case 4:return`RoutesRecognized(id: ${I.id}, url: '${I.url}', urlAfterRedirects: '${I.urlAfterRedirects}', state: ${I.state})`;case 15:return`Scroll(anchor: '${I.anchor}', position: '${I.position?`${I.position[0]}, ${I.position[1]}`:null}')`}}(C)),console.log(C),console.groupEnd?.()})}}]:[],ar(1,I)}const b1=new S.OlP(Vr?"router preloader":"");function vs(I){return ar(0,[{provide:b1,useExisting:wa},{provide:Qo,useExisting:I}])}const uo=!1,S2=new S.OlP(uo?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Xe=[et.Ye,{provide:Te,useClass:jt},P1,Er,{provide:$r,useFactory:function Fo(I){return I.routerState.root},deps:[P1]},Ys,uo?{provide:b2,useValue:!0}:[]];function n1(){return new S.PXZ("Router",P1)}let B1=(()=>{class I{constructor(C){}static forRoot(C,N){return{ngModule:I,providers:[Xe,uo&&N?.enableTracing?J1().\u0275providers:[],{provide:d1,multi:!0,useValue:C},{provide:S2,useFactory:Ea,deps:[[P1,new S.FiY,new S.tp0]]},{provide:an,useValue:N||{}},N?.useHash?{provide:et.S$,useClass:et.Do}:{provide:et.S$,useClass:et.b0},{provide:Ho,useFactory:()=>{const I=(0,S.f3M)(et.EM),D=(0,S.f3M)(S.R0b),C=(0,S.f3M)(an),N=(0,S.f3M)(Ts),O=(0,S.f3M)(Te);return C.scrollOffset&&I.setOffset(C.scrollOffset),new Qn(O,N,I,D,C)}},N?.preloadingStrategy?vs(N.preloadingStrategy).\u0275providers:[],{provide:S.PXZ,multi:!0,useFactory:n1},N?.initialNavigation?j1(N):[],[{provide:Bo,useFactory:Xo},{provide:S.tb,multi:!0,useExisting:Bo}]]}}static forChild(C){return{ngModule:I,providers:[{provide:d1,multi:!0,useValue:C}]}}}return I.\u0275fac=function(C){return new(C||I)(S.LFG(S2,8))},I.\u0275mod=S.oAB({type:I}),I.\u0275inj=S.cJS({imports:[bs]}),I})();function Ea(I){if(uo&&I)throw new S.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function j1(I){return["disabled"===I.initialNavigation?ar(3,[{provide:S.ip1,multi:!0,useFactory:()=>{const D=(0,S.f3M)(P1);return()=>{D.setUpLocationChangeListener()}}},{provide:si,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?ar(2,[{provide:si,useValue:0},{provide:S.ip1,multi:!0,deps:[S.zs3],useFactory:D=>{const C=D.get(et.V_,Promise.resolve());return()=>C.then(()=>new Promise(N=>{const O=D.get(P1),_=D.get(As);(function Qr(I,D){I.events.pipe((0,kt.h)(C=>C instanceof Pe||C instanceof $e||C instanceof Lt||C instanceof ct),(0,Fe.U)(C=>C instanceof Pe||C instanceof ct?l1.COMPLETE:C instanceof $e&&(0===C.code||1===C.code)?l1.REDIRECTING:l1.FAILED),(0,kt.h)(C=>C!==l1.REDIRECTING),(0,Nt.q)(1)).subscribe(()=>{D()})})(O,()=>{N(!0)}),D.get(Ts).afterPreactivation=()=>(N(!0),_.closed?(0,K.of)(void 0):_),O.initialNavigation()}))}}]).\u0275providers:[]]}const Bo=new S.OlP(uo?"Router Initializer":"")},3942:(rn,Ke,j)=>{j.d(Ke,{Z:()=>Pt});var S=j(2090),B=j(4859),K=j(9681),Ce=j(1877);class we{constructor(Je,ut){this._delegate=Je,this.firebase=ut,(0,K._addComponent)(Je,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=Je.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Je){this._delegate.automaticDataCollectionEnabled=Je}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Je=>{this._delegate.checkDestroyed(),Je()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,K.deleteApp)(this._delegate)))}_getService(Je,ut=K._DEFAULT_ENTRY_NAME){var ft;this._delegate.checkDestroyed();const Et=this._delegate.container.getProvider(Je);return!Et.isInitialized()&&"EXPLICIT"===(null===(ft=Et.getComponent())||void 0===ft?void 0:ft.instantiationMode)&&Et.initialize(),Et.getImmediate({identifier:ut})}_removeServiceInstance(Je,ut=K._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Je).clearInstance(ut)}_addComponent(Je){(0,K._addComponent)(this._delegate,Je)}_addOrOverwriteComponent(Je){(0,K._addOrOverwriteComponent)(this._delegate,Je)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const te=new S.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),de=function ke(){const Xt=function Re(Xt){const Je={},ut={__esModule:!0,initializeApp:function pt(dt,H={}){const Be=K.initializeApp(dt,H);if((0,S.r3)(Je,Be.name))return Je[Be.name];const zt=new Xt(Be,ut);return Je[Be.name]=zt,zt},app:Et,registerVersion:K.registerVersion,setLogLevel:K.setLogLevel,onLog:K.onLog,apps:null,SDK_VERSION:K.SDK_VERSION,INTERNAL:{registerComponent:function yt(dt){const H=dt.name,Be=H.replace("-compat","");if(K._registerComponent(dt)&&"PUBLIC"===dt.type){const zt=(It=Et())=>{if("function"!=typeof It[Be])throw te.create("invalid-app-argument",{appName:H});return It[Be]()};void 0!==dt.serviceProps&&(0,S.ZB)(zt,dt.serviceProps),ut[Be]=zt,Xt.prototype[Be]=function(...It){return this._getService.bind(this,H).apply(this,dt.multipleInstances?It:[])}}return"PUBLIC"===dt.type?ut[Be]:null},removeApp:function ft(dt){delete Je[dt]},useAsService:function bt(dt,H){return"serverAuth"===H?null:H},modularAPIs:K}};function Et(dt){if(!(0,S.r3)(Je,dt=dt||K._DEFAULT_ENTRY_NAME))throw te.create("no-app",{appName:dt});return Je[dt]}return ut.default=ut,Object.defineProperty(ut,"apps",{get:function nt(){return Object.keys(Je).map(dt=>Je[dt])}}),Et.App=Xt,ut}(we);return Xt.INTERNAL=Object.assign(Object.assign({},Xt.INTERNAL),{createFirebaseNamespace:ke,extendNamespace:function Je(ut){(0,S.ZB)(Xt,ut)},createSubscribe:S.ne,ErrorFactory:S.LL,deepExtend:S.ZB}),Xt}(),me=new Ce.Yd("@firebase/app-compat");if((0,S.jU)()&&void 0!==self.firebase){me.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Xt=self.firebase.SDK_VERSION;Xt&&Xt.indexOf("LITE")>=0&&me.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pt=de;!function Fe(Xt){(0,K.registerVersion)("@firebase/app-compat","0.2.3",Xt)}()},9681:(rn,Ke,j)=>{j.r(Ke),j.d(Ke,{FirebaseError:()=>Ce.ZR,SDK_VERSION:()=>kr,_DEFAULT_ENTRY_NAME:()=>at,_addComponent:()=>_n,_addOrOverwriteComponent:()=>kt,_apps:()=>St,_clearComponents:()=>Tn,_components:()=>Nt,_getProvider:()=>Ft,_registerComponent:()=>Kt,_removeServiceInstance:()=>$t,deleteApp:()=>lr,getApp:()=>On,getApps:()=>cr,initializeApp:()=>br,onLog:()=>_t,registerVersion:()=>Jn,setLogLevel:()=>vn});var S=j(5861),B=j(4859),K=j(1877),Ce=j(2090),we=j(8766);class Ie{constructor(mt){this.container=mt}getPlatformInfoString(){return this.container.getProviders().map(Ne=>{if(function te(Ht){return"VERSION"===Ht.getComponent()?.type}(Ne)){const le=Ne.getImmediate();return`${le.library}/${le.version}`}return null}).filter(Ne=>Ne).join(" ")}}const Re="@firebase/app",de=new K.Yd("@firebase/app"),at="[DEFAULT]",et={[Re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},St=new Map,Nt=new Map;function _n(Ht,mt){try{Ht.container.addComponent(mt)}catch(Ne){de.debug(`Component ${mt.name} failed to register with FirebaseApp ${Ht.name}`,Ne)}}function kt(Ht,mt){Ht.container.addOrOverwriteComponent(mt)}function Kt(Ht){const mt=Ht.name;if(Nt.has(mt))return de.debug(`There were multiple attempts to register component ${mt}.`),!1;Nt.set(mt,Ht);for(const Ne of St.values())_n(Ne,Ht);return!0}function Ft(Ht,mt){const Ne=Ht.container.getProvider("heartbeat").getImmediate({optional:!0});return Ne&&Ne.triggerHeartbeat(),Ht.container.getProvider(mt)}function $t(Ht,mt,Ne=at){Ft(Ht,mt).clearInstance(Ne)}function Tn(){Nt.clear()}const Gn=new Ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Nn{constructor(mt,Ne,le){this._isDeleted=!1,this._options=Object.assign({},mt),this._config=Object.assign({},Ne),this._name=Ne.name,this._automaticDataCollectionEnabled=Ne.automaticDataCollectionEnabled,this._container=le,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(mt){this.checkDestroyed(),this._automaticDataCollectionEnabled=mt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(mt){this._isDeleted=mt}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}const kr="9.17.1";function br(Ht,mt={}){let Ne=Ht;"object"!=typeof mt&&(mt={name:mt});const le=Object.assign({name:at,automaticDataCollectionEnabled:!1},mt),pe=le.name;if("string"!=typeof pe||!pe)throw Gn.create("bad-app-name",{appName:String(pe)});if(Ne||(Ne=(0,Ce.aH)()),!Ne)throw Gn.create("no-options");const Oe=St.get(pe);if(Oe){if((0,Ce.vZ)(Ne,Oe.options)&&(0,Ce.vZ)(le,Oe.config))return Oe;throw Gn.create("duplicate-app",{appName:pe})}const ne=new B.H0(pe);for(const ge of Nt.values())ne.addComponent(ge);const ie=new Nn(Ne,le,ne);return St.set(pe,ie),ie}function On(Ht=at){const mt=St.get(Ht);if(!mt&&Ht===at)return br();if(!mt)throw Gn.create("no-app",{appName:Ht});return mt}function cr(){return Array.from(St.values())}function lr(Ht){return gt.apply(this,arguments)}function gt(){return(gt=(0,S.Z)(function*(Ht){const mt=Ht.name;St.has(mt)&&(St.delete(mt),yield Promise.all(Ht.container.getProviders().map(Ne=>Ne.delete())),Ht.isDeleted=!0)})).apply(this,arguments)}function Jn(Ht,mt,Ne){var le;let pe=null!==(le=et[Ht])&&void 0!==le?le:Ht;Ne&&(pe+=`-${Ne}`);const Oe=pe.match(/\s|\//),ne=mt.match(/\s|\//);if(Oe||ne){const ie=[`Unable to register library "${pe}" with version "${mt}":`];return Oe&&ie.push(`library name "${pe}" contains illegal characters (whitespace or "/")`),Oe&&ne&&ie.push("and"),ne&&ie.push(`version name "${mt}" contains illegal characters (whitespace or "/")`),void de.warn(ie.join(" "))}Kt(new B.wA(`${pe}-version`,()=>({library:pe,version:mt}),"VERSION"))}function _t(Ht,mt){if(null!==Ht&&"function"!=typeof Ht)throw Gn.create("invalid-log-argument");(0,K.Am)(Ht,mt)}function vn(Ht){(0,K.Ub)(Ht)}const Jr="firebase-heartbeat-database",An=1,un="firebase-heartbeat-store";let Gr=null;function gn(){return Gr||(Gr=(0,we.X3)(Jr,An,{upgrade:(Ht,mt)=>{0===mt&&Ht.createObjectStore(un)}}).catch(Ht=>{throw Gn.create("idb-open",{originalErrorMessage:Ht.message})})),Gr}function Gt(){return(Gt=(0,S.Z)(function*(Ht){try{return(yield gn()).transaction(un).objectStore(un).get(Bn(Ht))}catch(mt){if(mt instanceof Ce.ZR)de.warn(mt.message);else{const Ne=Gn.create("idb-get",{originalErrorMessage:mt?.message});de.warn(Ne.message)}}})).apply(this,arguments)}function ir(Ht,mt){return pr.apply(this,arguments)}function pr(){return(pr=(0,S.Z)(function*(Ht,mt){try{const le=(yield gn()).transaction(un,"readwrite");return yield le.objectStore(un).put(mt,Bn(Ht)),le.done}catch(Ne){if(Ne instanceof Ce.ZR)de.warn(Ne.message);else{const le=Gn.create("idb-set",{originalErrorMessage:Ne?.message});de.warn(le.message)}}})).apply(this,arguments)}function Bn(Ht){return`${Ht.name}!${Ht.options.appId}`}class ai{constructor(mt){this.container=mt,this._heartbeatsCache=null;const Ne=this.container.getProvider("app").getImmediate();this._storage=new bn(Ne),this._heartbeatsCachePromise=this._storage.read().then(le=>(this._heartbeatsCache=le,le))}triggerHeartbeat(){var mt=this;return(0,S.Z)(function*(){const le=mt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),pe=er();if(null===mt._heartbeatsCache&&(mt._heartbeatsCache=yield mt._heartbeatsCachePromise),mt._heartbeatsCache.lastSentHeartbeatDate!==pe&&!mt._heartbeatsCache.heartbeats.some(Oe=>Oe.date===pe))return mt._heartbeatsCache.heartbeats.push({date:pe,agent:le}),mt._heartbeatsCache.heartbeats=mt._heartbeatsCache.heartbeats.filter(Oe=>{const ne=new Date(Oe.date).valueOf();return Date.now()-ne<=2592e6}),mt._storage.overwrite(mt._heartbeatsCache)})()}getHeartbeatsHeader(){var mt=this;return(0,S.Z)(function*(){if(null===mt._heartbeatsCache&&(yield mt._heartbeatsCachePromise),null===mt._heartbeatsCache||0===mt._heartbeatsCache.heartbeats.length)return"";const Ne=er(),{heartbeatsToSend:le,unsentEntries:pe}=function mi(Ht,mt=1024){const Ne=[];let le=Ht.slice();for(const pe of Ht){const Oe=Ne.find(ne=>ne.agent===pe.agent);if(Oe){if(Oe.dates.push(pe.date),Or(Ne)>mt){Oe.dates.pop();break}}else if(Ne.push({agent:pe.agent,dates:[pe.date]}),Or(Ne)>mt){Ne.pop();break}le=le.slice(1)}return{heartbeatsToSend:Ne,unsentEntries:le}}(mt._heartbeatsCache.heartbeats),Oe=(0,Ce.L)(JSON.stringify({version:2,heartbeats:le}));return mt._heartbeatsCache.lastSentHeartbeatDate=Ne,pe.length>0?(mt._heartbeatsCache.heartbeats=pe,yield mt._storage.overwrite(mt._heartbeatsCache)):(mt._heartbeatsCache.heartbeats=[],mt._storage.overwrite(mt._heartbeatsCache)),Oe})()}}function er(){return(new Date).toISOString().substring(0,10)}class bn{constructor(mt){this.app=mt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,S.Z)(function*(){return!!(0,Ce.hl)()&&(0,Ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var mt=this;return(0,S.Z)(function*(){return(yield mt._canUseIndexedDBPromise)&&(yield function hn(Ht){return Gt.apply(this,arguments)}(mt.app))||{heartbeats:[]}})()}overwrite(mt){var Ne=this;return(0,S.Z)(function*(){var le;if(yield Ne._canUseIndexedDBPromise){const Oe=yield Ne.read();return ir(Ne.app,{lastSentHeartbeatDate:null!==(le=mt.lastSentHeartbeatDate)&&void 0!==le?le:Oe.lastSentHeartbeatDate,heartbeats:mt.heartbeats})}})()}add(mt){var Ne=this;return(0,S.Z)(function*(){var le;if(yield Ne._canUseIndexedDBPromise){const Oe=yield Ne.read();return ir(Ne.app,{lastSentHeartbeatDate:null!==(le=mt.lastSentHeartbeatDate)&&void 0!==le?le:Oe.lastSentHeartbeatDate,heartbeats:[...Oe.heartbeats,...mt.heartbeats]})}})()}}function Or(Ht){return(0,Ce.L)(JSON.stringify({version:2,heartbeats:Ht})).length}!function ci(Ht){Kt(new B.wA("platform-logger",mt=>new Ie(mt),"PRIVATE")),Kt(new B.wA("heartbeat",mt=>new ai(mt),"PRIVATE")),Jn(Re,"0.9.3",Ht),Jn(Re,"0.9.3","esm2017"),Jn("fire-js","")}("")},4859:(rn,Ke,j)=>{j.d(Ke,{H0:()=>Re,wA:()=>K,zt:()=>we});var S=j(5861),B=j(2090);class K{constructor(de,me,Se){this.name=de,this.instanceFactory=me,this.type=Se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(de){return this.instantiationMode=de,this}setMultipleInstances(de){return this.multipleInstances=de,this}setServiceProps(de){return this.serviceProps=de,this}setInstanceCreatedCallback(de){return this.onInstanceCreated=de,this}}const Ce="[DEFAULT]";class we{constructor(de,me){this.name=de,this.container=me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(de){const me=this.normalizeInstanceIdentifier(de);if(!this.instancesDeferred.has(me)){const Se=new B.BH;if(this.instancesDeferred.set(me,Se),this.isInitialized(me)||this.shouldAutoInitialize())try{const Tt=this.getOrInitializeService({instanceIdentifier:me});Tt&&Se.resolve(Tt)}catch{}}return this.instancesDeferred.get(me).promise}getImmediate(de){var me;const Se=this.normalizeInstanceIdentifier(de?.identifier),Tt=null!==(me=de?.optional)&&void 0!==me&&me;if(!this.isInitialized(Se)&&!this.shouldAutoInitialize()){if(Tt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Se})}catch(Fe){if(Tt)return null;throw Fe}}getComponent(){return this.component}setComponent(de){if(de.name!==this.name)throw Error(`Mismatching Component ${de.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=de,this.shouldAutoInitialize()){if(function te(ke){return"EAGER"===ke.instantiationMode}(de))try{this.getOrInitializeService({instanceIdentifier:Ce})}catch{}for(const[me,Se]of this.instancesDeferred.entries()){const Tt=this.normalizeInstanceIdentifier(me);try{const Fe=this.getOrInitializeService({instanceIdentifier:Tt});Se.resolve(Fe)}catch{}}}}clearInstance(de=Ce){this.instancesDeferred.delete(de),this.instancesOptions.delete(de),this.instances.delete(de)}delete(){var de=this;return(0,S.Z)(function*(){const me=Array.from(de.instances.values());yield Promise.all([...me.filter(Se=>"INTERNAL"in Se).map(Se=>Se.INTERNAL.delete()),...me.filter(Se=>"_delete"in Se).map(Se=>Se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(de=Ce){return this.instances.has(de)}getOptions(de=Ce){return this.instancesOptions.get(de)||{}}initialize(de={}){const{options:me={}}=de,Se=this.normalizeInstanceIdentifier(de.instanceIdentifier);if(this.isInitialized(Se))throw Error(`${this.name}(${Se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Tt=this.getOrInitializeService({instanceIdentifier:Se,options:me});for(const[Fe,Pt]of this.instancesDeferred.entries())Se===this.normalizeInstanceIdentifier(Fe)&&Pt.resolve(Tt);return Tt}onInit(de,me){var Se;const Tt=this.normalizeInstanceIdentifier(me),Fe=null!==(Se=this.onInitCallbacks.get(Tt))&&void 0!==Se?Se:new Set;Fe.add(de),this.onInitCallbacks.set(Tt,Fe);const Pt=this.instances.get(Tt);return Pt&&de(Pt,Tt),()=>{Fe.delete(de)}}invokeOnInitCallbacks(de,me){const Se=this.onInitCallbacks.get(me);if(Se)for(const Tt of Se)try{Tt(de,me)}catch{}}getOrInitializeService({instanceIdentifier:de,options:me={}}){let Se=this.instances.get(de);if(!Se&&this.component&&(Se=this.component.instanceFactory(this.container,{instanceIdentifier:(ke=de,ke===Ce?void 0:ke),options:me}),this.instances.set(de,Se),this.instancesOptions.set(de,me),this.invokeOnInitCallbacks(Se,de),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,de,Se)}catch{}var ke;return Se||null}normalizeInstanceIdentifier(de=Ce){return this.component?this.component.multipleInstances?de:Ce:de}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Re{constructor(de){this.name=de,this.providers=new Map}addComponent(de){const me=this.getProvider(de.name);if(me.isComponentSet())throw new Error(`Component ${de.name} has already been registered with ${this.name}`);me.setComponent(de)}addOrOverwriteComponent(de){this.getProvider(de.name).isComponentSet()&&this.providers.delete(de.name),this.addComponent(de)}getProvider(de){if(this.providers.has(de))return this.providers.get(de);const me=new we(de,this);return this.providers.set(de,me),me}getProviders(){return Array.from(this.providers.values())}}},1877:(rn,Ke,j)=>{j.d(Ke,{Am:()=>ke,Ub:()=>Re,Yd:()=>te,in:()=>B});const S=[];var B=(()=>{return(de=B||(B={}))[de.DEBUG=0]="DEBUG",de[de.VERBOSE=1]="VERBOSE",de[de.INFO=2]="INFO",de[de.WARN=3]="WARN",de[de.ERROR=4]="ERROR",de[de.SILENT=5]="SILENT",B;var de})();const K={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},Ce=B.INFO,we={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},Ie=(de,me,...Se)=>{if(me<de.logLevel)return;const Tt=(new Date).toISOString(),Fe=we[me];if(!Fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${me})`);console[Fe](`[${Tt}]  ${de.name}:`,...Se)};class te{constructor(me){this.name=me,this._logLevel=Ce,this._logHandler=Ie,this._userLogHandler=null,S.push(this)}get logLevel(){return this._logLevel}set logLevel(me){if(!(me in B))throw new TypeError(`Invalid value "${me}" assigned to \`logLevel\``);this._logLevel=me}setLogLevel(me){this._logLevel="string"==typeof me?K[me]:me}get logHandler(){return this._logHandler}set logHandler(me){if("function"!=typeof me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=me}get userLogHandler(){return this._userLogHandler}set userLogHandler(me){this._userLogHandler=me}debug(...me){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...me),this._logHandler(this,B.DEBUG,...me)}log(...me){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...me),this._logHandler(this,B.VERBOSE,...me)}info(...me){this._userLogHandler&&this._userLogHandler(this,B.INFO,...me),this._logHandler(this,B.INFO,...me)}warn(...me){this._userLogHandler&&this._userLogHandler(this,B.WARN,...me),this._logHandler(this,B.WARN,...me)}error(...me){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...me),this._logHandler(this,B.ERROR,...me)}}function Re(de){S.forEach(me=>{me.setLogLevel(de)})}function ke(de,me){for(const Se of S){let Tt=null;me&&me.level&&(Tt=K[me.level]),Se.userLogHandler=null===de?null:(Fe,Pt,...Xt)=>{const Je=Xt.map(ut=>{if(null==ut)return null;if("string"==typeof ut)return ut;if("number"==typeof ut||"boolean"==typeof ut)return ut.toString();if(ut instanceof Error)return ut.message;try{return JSON.stringify(ut)}catch{return null}}).filter(ut=>ut).join(" ");Pt>=(Tt??Fe.logLevel)&&de({level:B[Pt].toLowerCase(),message:Je,args:Xt,type:Fe.name})}}}},3868:(rn,Ke,j)=>{j.d(Ke,{BN:()=>U1,uH:()=>Ws});var S=j(4650);function B(W){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(W)}function Ce(W,ee){for(var oe=0;oe<ee.length;oe++){var ae=ee[oe];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(W,ae.key,ae)}}function Ie(W,ee,oe){return ee in W?Object.defineProperty(W,ee,{value:oe,enumerable:!0,configurable:!0,writable:!0}):W[ee]=oe,W}function te(W){for(var ee=1;ee<arguments.length;ee++){var oe=null!=arguments[ee]?arguments[ee]:{},ae=Object.keys(oe);"function"==typeof Object.getOwnPropertySymbols&&(ae=ae.concat(Object.getOwnPropertySymbols(oe).filter(function(Ae){return Object.getOwnPropertyDescriptor(oe,Ae).enumerable}))),ae.forEach(function(Ae){Ie(W,Ae,oe[Ae])})}return W}function Re(W,ee){return function me(W){if(Array.isArray(W))return W}(W)||function Tt(W,ee){var oe=[],ae=!0,Ae=!1,tt=void 0;try{for(var st,ht=W[Symbol.iterator]();!(ae=(st=ht.next()).done)&&(oe.push(st.value),!ee||oe.length!==ee);ae=!0);}catch(qt){Ae=!0,tt=qt}finally{try{!ae&&null!=ht.return&&ht.return()}finally{if(Ae)throw tt}}return oe}(W,ee)||function Pt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Je={},ut={};try{typeof window<"u"&&(Je=window),typeof document<"u"&&(ut=document),typeof MutationObserver<"u"&&MutationObserver,typeof performance<"u"&&performance}catch{}var nt=(Je.navigator||{}).userAgent,yt=void 0===nt?"":nt,bt=Je,dt=ut,It=!!dt.documentElement&&!!dt.head&&"function"==typeof dt.addEventListener&&"function"==typeof dt.createElement,xt=(~yt.indexOf("MSIE")||yt.indexOf("Trident/"),"___FONT_AWESOME___"),Qe="fa",Ue="svg-inline--fa",Ge="data-fa-i2svg",kr=[1,2,3,4,5,6,7,8,9,10],br=kr.concat([11,12,13,14,15,16,17,18,19,20]),cr={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},gt=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",cr.GROUP,cr.SWAP_OPACITY,cr.PRIMARY,cr.SECONDARY].concat(kr.map(function(W){return"".concat(W,"x")})).concat(br.map(function(W){return"w-".concat(W)})),bt.FontAwesomeConfig||{});dt&&"function"==typeof dt.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(W){var ee=Re(W,2),ae=ee[1],Ae=function _t(W){return""===W||"false"!==W&&("true"===W||W)}(function Jn(W){var ee=dt.querySelector("script["+W+"]");if(ee)return ee.getAttribute(W)}(ee[0]));null!=Ae&&(gt[ae]=Ae)});var An=te({},{familyPrefix:Qe,replacementClass:Ue,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},gt);An.autoReplaceSvg||(An.observeMutations=!1);var un=te({},An);bt.FontAwesomeConfig=un;var Gr=bt||{};Gr[xt]||(Gr[xt]={}),Gr[xt].styles||(Gr[xt].styles={}),Gr[xt].hooks||(Gr[xt].hooks={}),Gr[xt].shims||(Gr[xt].shims=[]);var gn=Gr[xt],hn=[];It&&((dt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(dt.readyState)||dt.addEventListener("DOMContentLoaded",function W(){dt.removeEventListener("DOMContentLoaded",W),hn.map(function(ee){return ee()})}));var ci,Bn="pending",Mn="settled",vr="fulfilled",ai="rejected",er=function(){},mi=typeof global<"u"&&typeof global.process<"u"&&"function"==typeof global.process.emit,bn=typeof setImmediate>"u"?setTimeout:setImmediate,Or=[];function Ht(){for(var W=0;W<Or.length;W++)Or[W][0](Or[W][1]);Or=[],ci=!1}function mt(W,ee){Or.push([W,ee]),ci||(ci=!0,bn(Ht,0))}function le(W){var ee=W.owner,oe=ee._state,ae=ee._data,Ae=W[oe],tt=W.then;if("function"==typeof Ae){oe=vr;try{ae=Ae(ae)}catch(ht){ie(tt,ht)}}pe(tt,ae)||(oe===vr&&Oe(tt,ae),oe===ai&&ie(tt,ae))}function pe(W,ee){var oe;try{if(W===ee)throw new TypeError("A promises callback cannot return that same promise.");if(ee&&("function"==typeof ee||"object"===B(ee))){var ae=ee.then;if("function"==typeof ae)return ae.call(ee,function(Ae){oe||(oe=!0,ee===Ae?ne(W,Ae):Oe(W,Ae))},function(Ae){oe||(oe=!0,ie(W,Ae))}),!0}}catch(Ae){return oe||ie(W,Ae),!0}return!1}function Oe(W,ee){(W===ee||!pe(W,ee))&&ne(W,ee)}function ne(W,ee){W._state===Bn&&(W._state=Mn,W._data=ee,mt(He,W))}function ie(W,ee){W._state===Bn&&(W._state=Mn,W._data=ee,mt(Te,W))}function ge(W){W._then=W._then.forEach(le)}function He(W){W._state=vr,ge(W)}function Te(W){W._state=ai,ge(W),!W._handled&&mi&&global.process.emit("unhandledRejection",W._data,W)}function jt(W){global.process.emit("rejectionHandled",W)}function yn(W){if("function"!=typeof W)throw new TypeError("Promise resolver "+W+" is not a function");if(!(this instanceof yn))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function Ne(W,ee){function ae(Ae){ie(ee,Ae)}try{W(function oe(Ae){Oe(ee,Ae)},ae)}catch(Ae){ae(Ae)}}(W,this)}yn.prototype={constructor:yn,_state:Bn,_then:null,_data:void 0,_handled:!1,then:function(ee,oe){var ae={owner:this,then:new this.constructor(er),fulfilled:ee,rejected:oe};return(oe||ee)&&!this._handled&&(this._handled=!0,this._state===ai&&mi&&mt(jt,this)),this._state===vr||this._state===ai?mt(le,ae):this._then.push(ae),ae.then},catch:function(ee){return this.then(null,ee)}},yn.all=function(W){if(!Array.isArray(W))throw new TypeError("You must pass an array to Promise.all().");return new yn(function(ee,oe){var ae=[],Ae=0;function tt(qt){return Ae++,function(Pn){ae[qt]=Pn,--Ae||ee(ae)}}for(var st,ht=0;ht<W.length;ht++)(st=W[ht])&&"function"==typeof st.then?st.then(tt(ht),oe):ae[ht]=st;Ae||ee(ae)})},yn.race=function(W){if(!Array.isArray(W))throw new TypeError("You must pass an array to Promise.race().");return new yn(function(ee,oe){for(var Ae,ae=0;ae<W.length;ae++)(Ae=W[ae])&&"function"==typeof Ae.then?Ae.then(ee,oe):ee(Ae)})},yn.resolve=function(W){return W&&"object"===B(W)&&W.constructor===yn?W:new yn(function(ee){ee(W)})},yn.reject=function(W){return new yn(function(ee,oe){oe(W)})};var Ot={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};var be="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function se(){for(var W=12,ee="";W-- >0;)ee+=be[62*Math.random()|0];return ee}function Vn(W){return"".concat(W).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Fr(W){return Object.keys(W||{}).reduce(function(ee,oe){return ee+"".concat(oe,": ").concat(W[oe],";")},"")}function ss(W){return W.size!==Ot.size||W.x!==Ot.x||W.y!==Ot.y||W.rotate!==Ot.rotate||W.flipX||W.flipY}function wr(W){var ee=W.transform,ae=W.iconWidth,Ae={transform:"translate(".concat(W.containerWidth/2," 256)")},tt="translate(".concat(32*ee.x,", ").concat(32*ee.y,") "),ht="scale(".concat(ee.size/16*(ee.flipX?-1:1),", ").concat(ee.size/16*(ee.flipY?-1:1),") "),st="rotate(".concat(ee.rotate," 0 0)");return{outer:Ae,inner:{transform:"".concat(tt," ").concat(ht," ").concat(st)},path:{transform:"translate(".concat(ae/2*-1," -256)")}}}var os={x:0,y:0,width:"100%",height:"100%"};function H1(W){return W.attributes&&(W.attributes.fill||!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(W.attributes.fill="black"),W}function D1(W){return"g"===W.tag?W.children:[W]}var Ri=function(ee,oe,ae,Ae){var qt,Pn,Yn,tt=Object.keys(ee),ht=tt.length,st=void 0!==Ae?function(ee,oe){return function(ae,Ae,tt,ht){return ee.call(oe,ae,Ae,tt,ht)}}(oe,Ae):oe;for(void 0===ae?(qt=1,Yn=ee[tt[0]]):(qt=0,Yn=ae);qt<ht;qt++)Yn=st(Yn,ee[Pn=tt[qt]],Pn,ee);return Yn};function En(W,ee){var ae=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,Ae=void 0!==ae&&ae,tt=Object.keys(ee).reduce(function(ht,st){var qt=ee[st];return qt.icon?ht[qt.iconName]=qt.icon:ht[st]=qt,ht},{});"function"!=typeof gn.hooks.addPack||Ae?gn.styles[W]=te({},gn.styles[W]||{},tt):gn.hooks.addPack(W,tt),"fas"===W&&En("fa",ee)}var ti=gn.styles,_1=gn.shims,T1=function(){var ee=function(Ae){return Ri(ti,function(tt,ht,st){return tt[st]=Ri(ht,Ae,{}),tt},{})};ee(function(ae,Ae,tt){return Ae[3]&&(ae[Ae[3]]=tt),ae}),ee(function(ae,Ae,tt){var ht=Ae[2];return ae[tt]=tt,ht.forEach(function(st){ae[st]=tt}),ae});var oe="far"in ti;Ri(_1,function(ae,Ae){var ht=Ae[1];return"far"===ht&&!oe&&(ht="fas"),ae[Ae[0]]={prefix:ht,iconName:Ae[2]},ae},{})};function Pe(W,ee,oe){if(W&&W[ee]&&W[ee][oe])return{prefix:ee,iconName:oe,icon:W[ee][oe]}}function $e(W){var ee=W.tag,oe=W.attributes,ae=void 0===oe?{}:oe,Ae=W.children,tt=void 0===Ae?[]:Ae;return"string"==typeof W?Vn(W):"<".concat(ee," ").concat(function Dr(W){return Object.keys(W||{}).reduce(function(ee,oe){return ee+"".concat(oe,'="').concat(Vn(W[oe]),'" ')},"").trim()}(ae),">").concat(tt.map($e).join(""),"</").concat(ee,">")}T1();function jr(W){this.name="MissingIcon",this.message=W||"Icon unavailable",this.stack=(new Error).stack}(jr.prototype=Object.create(Error.prototype)).constructor=jr;var vi={fill:"currentColor"},yi={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},Us=(te({},vi,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),te({},yi,{attributeName:"opacity"}));function ls(W){var ee=W[0],oe=W[1],tt=Re(W.slice(4),1)[0];return{found:!0,width:ee,height:oe,icon:Array.isArray(tt)?{tag:"g",attributes:{class:"".concat(un.familyPrefix,"-").concat(cr.GROUP)},children:[{tag:"path",attributes:{class:"".concat(un.familyPrefix,"-").concat(cr.SECONDARY),fill:"currentColor",d:tt[0]}},{tag:"path",attributes:{class:"".concat(un.familyPrefix,"-").concat(cr.PRIMARY),fill:"currentColor",d:tt[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:tt}}}}te({},vi,{cx:"256",cy:"364",r:"28"}),te({},yi,{attributeName:"r",values:"28;14;28;28;14;28;"}),te({},Us,{values:"1;0;1;1;0;1;"}),te({},vi,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),te({},Us,{values:"1;0;0;0;0;1;"}),te({},vi,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),te({},Us,{values:"0;0;1;1;0;0;"});var a1='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';function Er(){un.autoAddCss&&!L1&&(function De(W){if(W&&It){var ee=dt.createElement("style");ee.setAttribute("type","text/css"),ee.innerHTML=W;for(var oe=dt.head.childNodes,ae=null,Ae=oe.length-1;Ae>-1;Ae--){var tt=oe[Ae],ht=(tt.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(ht)>-1&&(ae=tt)}return dt.head.insertBefore(ee,ae),W}}(function Cr(){var W=Qe,ee=Ue,oe=un.familyPrefix,ae=un.replacementClass,Ae=a1;if(oe!==W||ae!==ee){var tt=new RegExp("\\.".concat(W,"\\-"),"g"),ht=new RegExp("\\--".concat(W,"\\-"),"g"),st=new RegExp("\\.".concat(ee),"g");Ae=Ae.replace(tt,".".concat(oe,"-")).replace(ht,"--".concat(oe,"-")).replace(st,".".concat(ae))}return Ae}()),L1=!0)}function ji(W){var ee=W.prefix,oe=void 0===ee?"fa":ee,ae=W.iconName;if(ae)return Pe(zr.definitions,oe,ae)||Pe(gn.styles,oe,ae)}var zr=new(function(){function W(){(function K(W,ee){if(!(W instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,W),this.definitions={}}return function we(W,ee,oe){ee&&Ce(W.prototype,ee),oe&&Ce(W,oe)}(W,[{key:"add",value:function(){for(var oe=this,ae=arguments.length,Ae=new Array(ae),tt=0;tt<ae;tt++)Ae[tt]=arguments[tt];var ht=Ae.reduce(this._pullDefinitions,{});Object.keys(ht).forEach(function(st){oe.definitions[st]=te({},oe.definitions[st]||{},ht[st]),En(st,ht[st]),T1()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(oe,ae){var Ae=ae.prefix&&ae.iconName&&ae.icon?{0:ae}:ae;return Object.keys(Ae).map(function(tt){var ht=Ae[tt],st=ht.prefix,qt=ht.iconName,Pn=ht.icon;oe[st]||(oe[st]={}),oe[st][qt]=Pn}),oe}}]),W}()),L1=!1,Bs_transform=function(ee){return function(ee){var oe={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return ee?ee.toLowerCase().split(" ").reduce(function(ae,Ae){var tt=Ae.toLowerCase().split("-"),ht=tt[0],st=tt.slice(1).join("-");if(ht&&"h"===st)return ae.flipX=!0,ae;if(ht&&"v"===st)return ae.flipY=!0,ae;if(st=parseFloat(st),isNaN(st))return ae;switch(ht){case"grow":ae.size=ae.size+st;break;case"shrink":ae.size=ae.size-st;break;case"left":ae.x=ae.x-st;break;case"right":ae.x=ae.x+st;break;case"up":ae.y=ae.y-st;break;case"down":ae.y=ae.y+st;break;case"rotate":ae.rotate=ae.rotate+st}return ae},oe):oe}(ee)},$i=function pi(W){return function(ee){var oe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ae=(ee||{}).icon?ee:ji(ee||{}),Ae=oe.mask;return Ae&&(Ae=(Ae||{}).icon?Ae:ji(Ae||{})),W(ae,te({},oe,{mask:Ae}))}}(function(W){var ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},oe=ee.transform,ae=void 0===oe?Ot:oe,Ae=ee.symbol,tt=void 0!==Ae&&Ae,ht=ee.mask,st=void 0===ht?null:ht,qt=ee.maskId,Pn=void 0===qt?null:qt,Yn=ee.title,nr=void 0===Yn?null:Yn,Tr=ee.titleId,ri=void 0===Tr?null:Tr,Vi=ee.classes,Ji=void 0===Vi?[]:Vi,wi=ee.attributes,Gi=void 0===wi?{}:wi,Kr=ee.styles,Ar=void 0===Kr?{}:Kr;if(W){var E1=W.prefix,Gs=W.iconName,c1=W.icon;return function Yi(W,ee){return Object.defineProperty(W,"abstract",{get:ee}),Object.defineProperty(W,"html",{get:function(){return W.abstract.map(function(ae){return $e(ae)})}}),Object.defineProperty(W,"node",{get:function(){if(It){var ae=dt.createElement("div");return ae.innerHTML=W.html,ae.children}}}),W}(te({type:"icon"},W),function(){return Er(),un.autoA11y&&(nr?Gi["aria-labelledby"]="".concat(un.replacementClass,"-title-").concat(ri||se()):(Gi["aria-hidden"]="true",Gi.focusable="false")),function ei(W){var ee=W.icons,oe=ee.main,ae=ee.mask,Ae=W.prefix,tt=W.iconName,ht=W.transform,st=W.symbol,qt=W.title,Pn=W.maskId,Yn=W.titleId,nr=W.extra,Tr=W.watchable,ri=void 0!==Tr&&Tr,Vi=ae.found?ae:oe,Ji=Vi.width,wi=Vi.height,Gi="fak"===Ae,Kr=Gi?"":"fa-w-".concat(Math.ceil(Ji/wi*16)),Ar=[un.replacementClass,tt?"".concat(un.familyPrefix,"-").concat(tt):"",Kr].filter(function(qr){return-1===nr.classes.indexOf(qr)}).filter(function(qr){return""!==qr||!!qr}).concat(nr.classes).join(" "),E1={children:[],attributes:te({},nr.attributes,{"data-prefix":Ae,"data-icon":tt,class:Ar,role:nr.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Ji," ").concat(wi)})},Gs=Gi&&!~nr.classes.indexOf("fa-fw")?{width:"".concat(Ji/wi*16*.0625,"em")}:{};ri&&(E1.attributes[Ge]=""),qt&&E1.children.push({tag:"title",attributes:{id:E1.attributes["aria-labelledby"]||"title-".concat(Yn||se())},children:[qt]});var c1=te({},E1,{prefix:Ae,iconName:tt,main:oe,mask:ae,maskId:Pn,transform:ht,symbol:st,styles:te({},Gs,nr.styles)}),Ss=ae.found&&oe.found?function tr(W){var ee=W.children,oe=W.attributes,ae=W.main,Ae=W.mask,tt=W.maskId,qt=ae.icon,Yn=Ae.icon,nr=wr({transform:W.transform,containerWidth:Ae.width,iconWidth:ae.width}),Tr={tag:"rect",attributes:te({},os,{fill:"white"})},ri=qt.children?{children:qt.children.map(H1)}:{},Vi={tag:"g",attributes:te({},nr.inner),children:[H1(te({tag:qt.tag,attributes:te({},qt.attributes,nr.path)},ri))]},Ji={tag:"g",attributes:te({},nr.outer),children:[Vi]},wi="mask-".concat(tt||se()),Gi="clip-".concat(tt||se()),Kr={tag:"mask",attributes:te({},os,{id:wi,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[Tr,Ji]},Ar={tag:"defs",children:[{tag:"clipPath",attributes:{id:Gi},children:D1(Yn)},Kr]};return ee.push(Ar,{tag:"rect",attributes:te({fill:"currentColor","clip-path":"url(#".concat(Gi,")"),mask:"url(#".concat(wi,")")},os)}),{children:ee,attributes:oe}}(c1):function li(W){var ee=W.children,oe=W.attributes,ae=W.main,Ae=W.transform,ht=Fr(W.styles);if(ht.length>0&&(oe.style=ht),ss(Ae)){var st=wr({transform:Ae,containerWidth:ae.width,iconWidth:ae.width});ee.push({tag:"g",attributes:te({},st.outer),children:[{tag:"g",attributes:te({},st.inner),children:[{tag:ae.icon.tag,children:ae.icon.children,attributes:te({},ae.icon.attributes,st.path)}]}]})}else ee.push(ae.icon);return{children:ee,attributes:oe}}(c1),Ds=Ss.attributes;return c1.children=Ss.children,c1.attributes=Ds,st?function Mr(W){var oe=W.iconName,ae=W.children,tt=W.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:te({},W.attributes,{id:!0===tt?"".concat(W.prefix,"-").concat(un.familyPrefix,"-").concat(oe):tt}),children:ae}]}]}(c1):function Nr(W){var ee=W.children,oe=W.main,ae=W.mask,Ae=W.attributes,tt=W.styles,ht=W.transform;if(ss(ht)&&oe.found&&!ae.found){var Pn={x:oe.width/oe.height/2,y:.5};Ae.style=Fr(te({},tt,{"transform-origin":"".concat(Pn.x+ht.x/16,"em ").concat(Pn.y+ht.y/16,"em")}))}return[{tag:"svg",attributes:Ae,children:ee}]}(c1)}({icons:{main:ls(c1),mask:st?ls(st.icon):{found:!1,width:null,height:null,icon:{}}},prefix:E1,iconName:Gs,transform:te({},Ot,ae),symbol:tt,title:nr,maskId:Pn,titleId:ri,extra:{attributes:Gi,styles:Ar,classes:Ji}})})}}),fs=j(1481);const sr=["*"],io=W=>{const ee={"fa-spin":W.spin,"fa-pulse":W.pulse,"fa-fw":W.fixedWidth,"fa-border":W.border,"fa-inverse":W.inverse,"fa-layers-counter":W.counter,"fa-flip-horizontal":"horizontal"===W.flip||"both"===W.flip,"fa-flip-vertical":"vertical"===W.flip||"both"===W.flip,[`fa-${W.size}`]:null!==W.size,[`fa-rotate-${W.rotate}`]:null!==W.rotate,[`fa-pull-${W.pull}`]:null!==W.pull,[`fa-stack-${W.stackItemSize}`]:null!=W.stackItemSize};return Object.keys(ee).map(oe=>ee[oe]?oe:null).filter(oe=>oe)};let X1=(()=>{class W{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return W.\u0275fac=function(oe){return new(oe||W)},W.\u0275prov=S.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"}),W})(),it=(()=>{class W{constructor(){this.definitions={}}addIcons(...oe){for(const ae of oe){ae.prefix in this.definitions||(this.definitions[ae.prefix]={}),this.definitions[ae.prefix][ae.iconName]=ae;for(const Ae of ae.icon[2])"string"==typeof Ae&&(this.definitions[ae.prefix][Ae]=ae)}}addIconPacks(...oe){for(const ae of oe){const Ae=Object.keys(ae).map(tt=>ae[tt]);this.addIcons(...Ae)}}getIconDefinition(oe,ae){return oe in this.definitions&&ae in this.definitions[oe]?this.definitions[oe][ae]:null}}return W.\u0275fac=function(oe){return new(oe||W)},W.\u0275prov=S.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"}),W})(),hr=(()=>{class W{constructor(){this.stackItemSize="1x"}ngOnChanges(oe){if("size"in oe)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return W.\u0275fac=function(oe){return new(oe||W)},W.\u0275dir=S.lG2({type:W,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[S.TTD]}),W})(),Wi=(()=>{class W{constructor(oe,ae){this.renderer=oe,this.elementRef=ae}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(oe){"size"in oe&&(null!=oe.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${oe.size.currentValue}`),null!=oe.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${oe.size.previousValue}`))}}return W.\u0275fac=function(oe){return new(oe||W)(S.Y36(S.Qsj),S.Y36(S.SBq))},W.\u0275cmp=S.Xpm({type:W,selectors:[["fa-stack"]],inputs:{size:"size"},features:[S.TTD],ngContentSelectors:sr,decls:1,vars:0,template:function(oe,ae){1&oe&&(S.F$t(),S.Hsn(0))},encapsulation:2}),W})(),U1=(()=>{class W{constructor(oe,ae,Ae,tt,ht){this.sanitizer=oe,this.config=ae,this.iconLibrary=Ae,this.stackItem=tt,this.classes=[],null!=ht&&null==tt&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(oe){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let ae=null;if(ae=null==this.icon?this.config.fallbackIcon:this.icon,oe){const Ae=this.findIconDefinition(ae);if(null!=Ae){const tt=this.buildParams();this.renderIcon(Ae,tt)}}}render(){this.ngOnChanges({})}findIconDefinition(oe){const ae=((W,ee)=>(W=>void 0!==W.prefix&&void 0!==W.iconName)(W)?W:Array.isArray(W)&&2===W.length?{prefix:W[0],iconName:W[1]}:"string"==typeof W?{prefix:ee,iconName:W}:void 0)(oe,this.config.defaultPrefix);return"icon"in ae?ae:this.iconLibrary.getIconDefinition(ae.prefix,ae.iconName)??((W=>{throw new Error(`Could not find icon with iconName=${W.iconName} and prefix=${W.prefix} in the icon library.`)})(ae),null)}buildParams(){const oe={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},ae="string"==typeof this.transform?Bs_transform(this.transform):this.transform;return{title:this.title,transform:ae,classes:[...io(oe),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(oe,ae){const Ae=$i(oe,ae);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(Ae.html.join("\n"))}}return W.\u0275fac=function(oe){return new(oe||W)(S.Y36(fs.H7),S.Y36(X1),S.Y36(it),S.Y36(hr,8),S.Y36(Wi,8))},W.\u0275cmp=S.Xpm({type:W,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(oe,ae){2&oe&&(S.Ikx("innerHTML",ae.renderedIconHTML,S.oJD),S.uIk("title",ae.title))},inputs:{icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[S.TTD],decls:0,vars:0,template:function(oe,ae){},encapsulation:2}),W})(),Ws=(()=>{class W{}return W.\u0275fac=function(oe){return new(oe||W)},W.\u0275mod=S.oAB({type:W}),W.\u0275inj=S.cJS({}),W})()},259:(rn,Ke,j)=>{j.d(Ke,{C6:()=>S.getApps,Mq:()=>S.getApp});var S=j(9681);(0,S.registerVersion)("firebase","9.17.1","app")},9260:(rn,Ke,j)=>{j.d(Ke,{Z:()=>S.Z});var S=j(3942);S.Z.registerVersion("firebase","9.17.1","app-compat")},407:(rn,Ke,j)=>{j.r(Ke);var S=j(5861),B=j(3942),K=j(2090),Ce=j(9681),we=j(1877),Ie=j(655),te=j(4859);const ke={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Se_EMAIL_SIGNIN="EMAIL_SIGNIN",Se_PASSWORD_RESET="PASSWORD_RESET",Se_RECOVER_EMAIL="RECOVER_EMAIL",Se_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",Se_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",Se_VERIFY_EMAIL="VERIFY_EMAIL";const Pt=function Tt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Xt=function Fe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Je=new K.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ft=new we.Yd("@firebase/auth");function Et(w,...d){ft.logLevel<=we.in.ERROR&&ft.error(`Auth (${Ce.SDK_VERSION}): ${w}`,...d)}function pt(w,...d){throw dt(w,...d)}function nt(w,...d){return dt(w,...d)}function yt(w,d,v){const T=Object.assign(Object.assign({},Xt()),{[d]:v});return new K.LL("auth","Firebase",T).create(d,{appName:w.name})}function bt(w,d,v){if(!(d instanceof v))throw v.name!==d.constructor.name&&pt(w,"argument-error"),yt(w,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dt(w,...d){if("string"!=typeof w){const v=d[0],T=[...d.slice(1)];return T[0]&&(T[0].appName=w.name),w._errorFactory.create(v,...T)}return Je.create(w,...d)}function H(w,d,...v){if(!w)throw dt(d,...v)}function Be(w){const d="INTERNAL ASSERTION FAILED: "+w;throw Et(d),new Error(d)}function zt(w,d){w||Be(d)}const It=new Map;function Zt(w){zt(w instanceof Function,"Expected a class definition");let d=It.get(w);return d?(zt(d instanceof w,"Instance stored in cache mismatched with class"),d):(d=new w,It.set(w,d),d)}function Qe(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Ue(){return"http:"===Ge()||"https:"===Ge()}function Ge(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class St{constructor(d,v){this.shortDelay=d,this.longDelay=v,zt(v>d,"Short delay should be less than long delay!"),this.isMobile=(0,K.uI)()||(0,K.b$)()}get(){return function at(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ue()||(0,K.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Nt(w,d){zt(w.emulator,"Emulator should always be set here");const{url:v}=w.emulator;return d?`${v}${d.startsWith("/")?d.slice(1):d}`:v}class _n{static initialize(d,v,T){this.fetchImpl=d,v&&(this.headersImpl=v),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Be("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Be("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Be("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Kt=new St(3e4,6e4);function Ft(w,d){return w.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:w.tenantId}):d}function $t(w,d,v,T){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,S.Z)(function*(w,d,v,T,G={}){return rr(w,G,(0,S.Z)(function*(){let J={},Le={};T&&("GET"===d?Le=T:J={body:JSON.stringify(T)});const lt=(0,K.xO)(Object.assign({key:w.config.apiKey},Le)).slice(1),Wt=yield w._getAdditionalHeaders();return Wt["Content-Type"]="application/json",w.languageCode&&(Wt["X-Firebase-Locale"]=w.languageCode),_n.fetch()(br(w,w.config.apiHost,v,lt),Object.assign({method:d,headers:Wt,referrerPolicy:"no-referrer"},J))}))})).apply(this,arguments)}function rr(w,d,v){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,S.Z)(function*(w,d,v){w._canInitEmulator=!1;const T=Object.assign(Object.assign({},kt),d);try{const G=new On(w),J=yield Promise.race([v(),G.promise]);G.clearNetworkTimeout();const Le=yield J.json();if("needConfirmation"in Le)throw cr(w,"account-exists-with-different-credential",Le);if(J.ok&&!("errorMessage"in Le))return Le;{const lt=J.ok?Le.errorMessage:Le.error.message,[Wt,cn]=lt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Wt)throw cr(w,"credential-already-in-use",Le);if("EMAIL_EXISTS"===Wt)throw cr(w,"email-already-in-use",Le);if("USER_DISABLED"===Wt)throw cr(w,"user-disabled",Le);const Kn=T[Wt]||Wt.toLowerCase().replace(/[_\s]+/g,"-");if(cn)throw yt(w,Kn,cn);pt(w,Kn)}}catch(G){if(G instanceof K.ZR)throw G;pt(w,"network-request-failed")}})).apply(this,arguments)}function Nn(w,d,v,T){return kr.apply(this,arguments)}function kr(){return(kr=(0,S.Z)(function*(w,d,v,T,G={}){const J=yield $t(w,d,v,T,G);return"mfaPendingCredential"in J&&pt(w,"multi-factor-auth-required",{_serverResponse:J}),J})).apply(this,arguments)}function br(w,d,v,T){const G=`${d}${v}?${T}`;return w.config.emulator?Nt(w.config,G):`${w.config.apiScheme}://${G}`}class On{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((v,T)=>{this.timer=setTimeout(()=>T(nt(this.auth,"network-request-failed")),Kt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cr(w,d,v){const T={appName:w.name};v.email&&(T.email=v.email),v.phoneNumber&&(T.phoneNumber=v.phoneNumber);const G=nt(w,d,T);return G.customData._tokenResponse=v,G}function gt(){return(gt=(0,S.Z)(function*(w,d){return $t(w,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function _t(){return(_t=(0,S.Z)(function*(w,d){return $t(w,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Jr(){return(Jr=(0,S.Z)(function*(w,d){return $t(w,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function An(w){if(w)try{const d=new Date(Number(w));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function gn(){return(gn=(0,S.Z)(function*(w,d=!1){const v=(0,K.m9)(w),T=yield v.getIdToken(d),G=Gt(T);H(G&&G.exp&&G.auth_time&&G.iat,v.auth,"internal-error");const J="object"==typeof G.firebase?G.firebase:void 0,Le=J?.sign_in_provider;return{claims:G,token:T,authTime:An(hn(G.auth_time)),issuedAtTime:An(hn(G.iat)),expirationTime:An(hn(G.exp)),signInProvider:Le||null,signInSecondFactor:J?.sign_in_second_factor||null}})).apply(this,arguments)}function hn(w){return 1e3*Number(w)}function Gt(w){const[d,v,T]=w.split(".");if(void 0===d||void 0===v||void 0===T)return Et("JWT malformed, contained fewer than 3 sections"),null;try{const G=(0,K.tV)(v);return G?JSON.parse(G):(Et("Failed to decode base64 JWT payload"),null)}catch(G){return Et("Caught error parsing JWT payload as JSON",G?.toString()),null}}function pr(w,d){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,S.Z)(function*(w,d,v=!1){if(v)return d;try{return yield d}catch(T){throw T instanceof K.ZR&&function Mn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(T)&&w.auth.currentUser===w&&(yield w.auth.signOut()),T}})).apply(this,arguments)}class vr{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var v;if(d){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const G=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,G)}}schedule(d=!1){var v=this;if(!this.isRunning)return;const T=this.getInterval(d);this.timerId=setTimeout((0,S.Z)(function*(){yield v.iteration()}),T)}iteration(){var d=this;return(0,S.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&d.schedule(!0))}d.schedule()})()}}class ai{constructor(d,v){this.createdAt=d,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=An(this.lastLoginAt),this.creationTime=An(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function er(w){return mi.apply(this,arguments)}function mi(){return mi=(0,S.Z)(function*(w){var d;const v=w.auth,T=yield w.getIdToken(),G=yield pr(w,function vn(w,d){return Jr.apply(this,arguments)}(v,{idToken:T}));H(G?.users.length,v,"internal-error");const J=G.users[0];w._notifyReloadListener(J);const Le=null!==(d=J.providerUserInfo)&&void 0!==d&&d.length?function Ht(w){return w.map(d=>{var{providerId:v}=d,T=(0,Ie._T)(d,["providerId"]);return{providerId:v,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}(J.providerUserInfo):[],lt=function ci(w,d){return[...w.filter(T=>!d.some(G=>G.providerId===T.providerId)),...d]}(w.providerData,Le),Kn=!!w.isAnonymous&&!(w.email&&J.passwordHash||lt?.length),zn={uid:J.localId,displayName:J.displayName||null,photoURL:J.photoUrl||null,email:J.email||null,emailVerified:J.emailVerified||!1,phoneNumber:J.phoneNumber||null,tenantId:J.tenantId||null,providerData:lt,metadata:new ai(J.createdAt,J.lastLoginAt),isAnonymous:Kn};Object.assign(w,zn)}),mi.apply(this,arguments)}function Or(){return(Or=(0,S.Z)(function*(w){const d=(0,K.m9)(w);yield er(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Ne(){return(Ne=(0,S.Z)(function*(w,d){const v=yield rr(w,{},(0,S.Z)(function*(){const T=(0,K.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:G,apiKey:J}=w.config,Le=br(w,G,"/v1/token",`key=${J}`),lt=yield w._getAdditionalHeaders();return lt["Content-Type"]="application/x-www-form-urlencoded",_n.fetch()(Le,{method:"POST",headers:lt,body:T})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class le{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){H(d.idToken,"internal-error"),H(typeof d.idToken<"u","internal-error"),H(typeof d.refreshToken<"u","internal-error");const v="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function ir(w){const d=Gt(w);return H(d,"internal-error"),H(typeof d.exp<"u","internal-error"),H(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,v)}getToken(d,v=!1){var T=this;return(0,S.Z)(function*(){return H(!T.accessToken||T.refreshToken,d,"user-token-expired"),v||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(d,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,v){var T=this;return(0,S.Z)(function*(){const{accessToken:G,refreshToken:J,expiresIn:Le}=yield function mt(w,d){return Ne.apply(this,arguments)}(d,v);T.updateTokensAndExpiration(G,J,Number(Le))})()}updateTokensAndExpiration(d,v,T){this.refreshToken=v||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(d,v){const{refreshToken:T,accessToken:G,expirationTime:J}=v,Le=new le;return T&&(H("string"==typeof T,"internal-error",{appName:d}),Le.refreshToken=T),G&&(H("string"==typeof G,"internal-error",{appName:d}),Le.accessToken=G),J&&(H("number"==typeof J,"internal-error",{appName:d}),Le.expirationTime=J),Le}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new le,this.toJSON())}_performRefresh(){return Be("not implemented")}}function pe(w,d){H("string"==typeof w||typeof w>"u","internal-error",{appName:d})}class Oe{constructor(d){var{uid:v,auth:T,stsTokenManager:G}=d,J=(0,Ie._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=T,this.stsTokenManager=G,this.accessToken=G.accessToken,this.displayName=J.displayName||null,this.email=J.email||null,this.emailVerified=J.emailVerified||!1,this.phoneNumber=J.phoneNumber||null,this.photoURL=J.photoURL||null,this.isAnonymous=J.isAnonymous||!1,this.tenantId=J.tenantId||null,this.providerData=J.providerData?[...J.providerData]:[],this.metadata=new ai(J.createdAt||void 0,J.lastLoginAt||void 0)}getIdToken(d){var v=this;return(0,S.Z)(function*(){const T=yield pr(v,v.stsTokenManager.getToken(v.auth,d));return H(T,v.auth,"internal-error"),v.accessToken!==T&&(v.accessToken=T,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),T})()}getIdTokenResult(d){return function Gr(w){return gn.apply(this,arguments)}(this,d)}reload(){return function bn(w){return Or.apply(this,arguments)}(this)}_assign(d){this!==d&&(H(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(v=>Object.assign({},v)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new Oe(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,v=!1){var T=this;return(0,S.Z)(function*(){let G=!1;d.idToken&&d.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(d),G=!0),v&&(yield er(T)),yield T.auth._persistUserIfCurrent(T),G&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var d=this;return(0,S.Z)(function*(){const v=yield d.getIdToken();return yield pr(d,function lr(w,d){return gt.apply(this,arguments)}(d.auth,{idToken:v})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,v){var T,G,J,Le,lt,Wt,cn,Kn;const zn=null!==(T=v.displayName)&&void 0!==T?T:void 0,M1=null!==(G=v.email)&&void 0!==G?G:void 0,o2=null!==(J=v.phoneNumber)&&void 0!==J?J:void 0,cc=null!==(Le=v.photoURL)&&void 0!==Le?Le:void 0,F4=null!==(lt=v.tenantId)&&void 0!==lt?lt:void 0,Na=null!==(Wt=v._redirectEventId)&&void 0!==Wt?Wt:void 0,Xs=null!==(cn=v.createdAt)&&void 0!==cn?cn:void 0,ua=null!==(Kn=v.lastLoginAt)&&void 0!==Kn?Kn:void 0,{uid:lc,emailVerified:u1,isAnonymous:uc,providerData:U4,stsTokenManager:La}=v;H(lc&&La,d,"internal-error");const L2=le.fromJSON(this.name,La);H("string"==typeof lc,d,"internal-error"),pe(zn,d.name),pe(M1,d.name),H("boolean"==typeof u1,d,"internal-error"),H("boolean"==typeof uc,d,"internal-error"),pe(o2,d.name),pe(cc,d.name),pe(F4,d.name),pe(Na,d.name),pe(Xs,d.name),pe(ua,d.name);const ha=new Oe({uid:lc,auth:d,email:M1,emailVerified:u1,displayName:zn,isAnonymous:uc,photoURL:cc,phoneNumber:o2,tenantId:F4,stsTokenManager:L2,createdAt:Xs,lastLoginAt:ua});return U4&&Array.isArray(U4)&&(ha.providerData=U4.map(Pc=>Object.assign({},Pc))),Na&&(ha._redirectEventId=Na),ha}static _fromIdTokenResponse(d,v,T=!1){return(0,S.Z)(function*(){const G=new le;G.updateFromServerResponse(v);const J=new Oe({uid:v.localId,auth:d,stsTokenManager:G,isAnonymous:T});return yield er(J),J})()}}const ie=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,S.Z)(function*(){return!0})()}_set(v,T){var G=this;return(0,S.Z)(function*(){G.storage[v]=T})()}_get(v){var T=this;return(0,S.Z)(function*(){const G=T.storage[v];return void 0===G?null:G})()}_remove(v){var T=this;return(0,S.Z)(function*(){delete T.storage[v]})()}_addListener(v,T){}_removeListener(v,T){}}return w.type="NONE",w})();function ge(w,d,v){return`firebase:${w}:${d}:${v}`}class He{constructor(d,v,T){this.persistence=d,this.auth=v,this.userKey=T;const{config:G,name:J}=this.auth;this.fullUserKey=ge(this.userKey,G.apiKey,J),this.fullPersistenceKey=ge("persistence",G.apiKey,J),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,S.Z)(function*(){const v=yield d.persistence._get(d.fullUserKey);return v?Oe._fromJSON(d.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var v=this;return(0,S.Z)(function*(){if(v.persistence===d)return;const T=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=d,T?v.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,v,T="authUser"){return(0,S.Z)(function*(){if(!v.length)return new He(Zt(ie),d,T);const G=(yield Promise.all(v.map(function(){var cn=(0,S.Z)(function*(Kn){if(yield Kn._isAvailable())return Kn});return function(Kn){return cn.apply(this,arguments)}}()))).filter(cn=>cn);let J=G[0]||Zt(ie);const Le=ge(T,d.config.apiKey,d.name);let lt=null;for(const cn of v)try{const Kn=yield cn._get(Le);if(Kn){const zn=Oe._fromJSON(d,Kn);cn!==J&&(lt=zn),J=cn;break}}catch{}const Wt=G.filter(cn=>cn._shouldAllowMigration);return J._shouldAllowMigration&&Wt.length?(J=Wt[0],lt&&(yield J._set(Le,lt.toJSON())),yield Promise.all(v.map(function(){var cn=(0,S.Z)(function*(Kn){if(Kn!==J)try{yield Kn._remove(Le)}catch{}});return function(Kn){return cn.apply(this,arguments)}}())),new He(J,d,T)):new He(J,d,T)})()}}function Te(w){const d=w.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Dn(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(jt(d))return"Firefox";if(d.includes("silk/"))return"Silk";if($n(d))return"Blackberry";if(De(d))return"Webos";if(yn(d))return"Safari";if((d.includes("chrome/")||pn(d))&&!d.includes("edge/"))return"Chrome";if(Ot(d))return"Android";{const T=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function jt(w=(0,K.z$)()){return/firefox\//i.test(w)}function yn(w=(0,K.z$)()){const d=w.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function pn(w=(0,K.z$)()){return/crios\//i.test(w)}function Dn(w=(0,K.z$)()){return/iemobile/i.test(w)}function Ot(w=(0,K.z$)()){return/android/i.test(w)}function $n(w=(0,K.z$)()){return/blackberry/i.test(w)}function De(w=(0,K.z$)()){return/webos/i.test(w)}function be(w=(0,K.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Jt(w=(0,K.z$)()){return be(w)||Ot(w)||De(w)||$n(w)||/windows phone/i.test(w)||Dn(w)}function Dr(w,d=[]){let v;switch(w){case"Browser":v=Te((0,K.z$)());break;case"Worker":v=`${Te((0,K.z$)())}-${w}`;break;default:v=w}const T=d.length?d.join(","):"FirebaseCore-web";return`${v}/JsCore/${Ce.SDK_VERSION}/${T}`}class Fr{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,v){const T=J=>new Promise((Le,lt)=>{try{Le(d(J))}catch(Wt){lt(Wt)}});T.onAbort=v,this.queue.push(T);const G=this.queue.length-1;return()=>{this.queue[G]=()=>Promise.resolve()}}runMiddleware(d){var v=this;return(0,S.Z)(function*(){if(v.auth.currentUser===d)return;const T=[];try{for(const G of v.queue)yield G(d),G.onAbort&&T.push(G.onAbort)}catch(G){T.reverse();for(const J of T)try{J()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:G?.message})}})()}}class ss{constructor(d,v,T){this.app=d,this.heartbeatServiceProvider=v,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vs(this),this.idTokenSubscription=new Vs(this),this.beforeStateQueue=new Fr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Je,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(d,v){var T=this;return v&&(this._popupRedirectResolver=Zt(v)),this._initializationPromise=this.queue((0,S.Z)(function*(){var G,J;if(!T._deleted&&(T.persistenceManager=yield He.create(T,d),!T._deleted)){if(null!==(G=T._popupRedirectResolver)&&void 0!==G&&G._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(v),T.lastNotifiedUid=(null===(J=T.currentUser)||void 0===J?void 0:J.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,S.Z)(function*(){if(d._deleted)return;const v=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||v){if(d.currentUser&&v&&d.currentUser.uid===v.uid)return d._currentUser._assign(v),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(v,!0)}})()}initializeCurrentUser(d){var v=this;return(0,S.Z)(function*(){var T;const G=yield v.assertedPersistence.getCurrentUser();let J=G,Le=!1;if(d&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const lt=null===(T=v.redirectUser)||void 0===T?void 0:T._redirectEventId,Wt=J?._redirectEventId,cn=yield v.tryRedirectSignIn(d);(!lt||lt===Wt)&&cn?.user&&(J=cn.user,Le=!0)}if(!J)return v.directlySetCurrentUser(null);if(!J._redirectEventId){if(Le)try{yield v.beforeStateQueue.runMiddleware(J)}catch(lt){J=G,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(lt))}return J?v.reloadAndSetCurrentUserOrClear(J):v.directlySetCurrentUser(null)}return H(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===J._redirectEventId?v.directlySetCurrentUser(J):v.reloadAndSetCurrentUserOrClear(J)})()}tryRedirectSignIn(d){var v=this;return(0,S.Z)(function*(){let T=null;try{T=yield v._popupRedirectResolver._completeRedirectFn(v,d,!0)}catch{yield v._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(d){var v=this;return(0,S.Z)(function*(){try{yield er(d)}catch(T){if("auth/network-request-failed"!==T?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function et(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var d=this;return(0,S.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var v=this;return(0,S.Z)(function*(){const T=d?(0,K.m9)(d):null;return T&&H(T.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(T&&T._clone(v))})()}_updateCurrentUser(d,v=!1){var T=this;return(0,S.Z)(function*(){if(!T._deleted)return d&&H(T.tenantId===d.tenantId,T,"tenant-id-mismatch"),v||(yield T.beforeStateQueue.runMiddleware(d)),T.queue((0,S.Z)(function*(){yield T.directlySetCurrentUser(d),T.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,S.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var v=this;return this.queue((0,S.Z)(function*(){yield v.assertedPersistence.setPersistence(Zt(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new K.LL("auth","Firebase",d())}onAuthStateChanged(d,v,T){return this.registerStateListener(this.authStateSubscription,d,v,T)}beforeAuthStateChanged(d,v){return this.beforeStateQueue.pushCallback(d,v)}onIdTokenChanged(d,v,T){return this.registerStateListener(this.idTokenSubscription,d,v,T)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,v){var T=this;return(0,S.Z)(function*(){const G=yield T.getOrInitRedirectPersistenceManager(v);return null===d?G.removeCurrentUser():G.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var v=this;return(0,S.Z)(function*(){if(!v.redirectPersistenceManager){const T=d&&Zt(d)||v._popupRedirectResolver;H(T,v,"argument-error"),v.redirectPersistenceManager=yield He.create(v,[Zt(T._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(d){var v=this;return(0,S.Z)(function*(){var T,G;return v._isInitialized&&(yield v.queue((0,S.Z)(function*(){}))),(null===(T=v._currentUser)||void 0===T?void 0:T._redirectEventId)===d?v._currentUser:(null===(G=v.redirectUser)||void 0===G?void 0:G._redirectEventId)===d?v.redirectUser:null})()}_persistUserIfCurrent(d){var v=this;return(0,S.Z)(function*(){if(d===v.currentUser)return v.queue((0,S.Z)(function*(){return v.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(v=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,v,T,G){if(this._deleted)return()=>{};const J="function"==typeof v?v:v.next.bind(v),Le=this._isInitialized?Promise.resolve():this._initializationPromise;return H(Le,this,"internal-error"),Le.then(()=>J(this.currentUser)),"function"==typeof v?d.addObserver(v,T,G):d.addObserver(v)}directlySetCurrentUser(d){var v=this;return(0,S.Z)(function*(){v.currentUser&&v.currentUser!==d&&v._currentUser._stopProactiveRefresh(),d&&v.isProactiveRefreshEnabled&&d._startProactiveRefresh(),v.currentUser=d,d?yield v.assertedPersistence.setCurrentUser(d):yield v.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Dr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,S.Z)(function*(){var v;const T={"X-Client-Version":d.clientVersion};d.app.options.appId&&(T["X-Firebase-gmpid"]=d.app.options.appId);const G=yield null===(v=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return G&&(T["X-Firebase-Client"]=G),T})()}}function wr(w){return(0,K.m9)(w)}class Vs{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,K.ne)(v=>this.observer=v)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function H1(w){const d=w.indexOf(":");return d<0?"":w.substr(0,d+1)}function tr(w){if(!w)return null;const d=Number(w);return isNaN(d)?null:d}class Nr{constructor(d,v){this.providerId=d,this.signInMethod=v}toJSON(){return Be("not implemented")}_getIdTokenResponse(d){return Be("not implemented")}_linkToIdToken(d,v){return Be("not implemented")}_getReauthenticationResolver(d){return Be("not implemented")}}function Mr(w,d){return ei.apply(this,arguments)}function ei(){return(ei=(0,S.Z)(function*(w,d){return $t(w,"POST","/v1/accounts:resetPassword",Ft(w,d))})).apply(this,arguments)}function qi(w,d){return tn.apply(this,arguments)}function tn(){return(tn=(0,S.Z)(function*(w,d){return $t(w,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ur(){return(ur=(0,S.Z)(function*(w,d){return $t(w,"POST","/v1/accounts:update",Ft(w,d))})).apply(this,arguments)}function gi(){return(gi=(0,S.Z)(function*(w,d){return Nn(w,"POST","/v1/accounts:signInWithPassword",Ft(w,d))})).apply(this,arguments)}function Zr(w,d){return i1.apply(this,arguments)}function i1(){return(i1=(0,S.Z)(function*(w,d){return $t(w,"POST","/v1/accounts:sendOobCode",Ft(w,d))})).apply(this,arguments)}function Ri(){return(Ri=(0,S.Z)(function*(w,d){return Zr(w,d)})).apply(this,arguments)}function En(){return(En=(0,S.Z)(function*(w,d){return Zr(w,d)})).apply(this,arguments)}function _1(){return(_1=(0,S.Z)(function*(w,d){return Zr(w,d)})).apply(this,arguments)}function Si(){return(Si=(0,S.Z)(function*(w,d){return Zr(w,d)})).apply(this,arguments)}function T1(){return(T1=(0,S.Z)(function*(w,d){return Nn(w,"POST","/v1/accounts:signInWithEmailLink",Ft(w,d))})).apply(this,arguments)}function s1(){return(s1=(0,S.Z)(function*(w,d){return Nn(w,"POST","/v1/accounts:signInWithEmailLink",Ft(w,d))})).apply(this,arguments)}class C1 extends Nr{constructor(d,v,T,G=null){super("password",T),this._email=d,this._password=v,this._tenantId=G}static _fromEmailAndPassword(d,v){return new C1(d,v,"password")}static _fromEmailAndCode(d,v,T=null){return new C1(d,v,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const v="string"==typeof d?JSON.parse(d):d;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(d){var v=this;return(0,S.Z)(function*(){switch(v.signInMethod){case"password":return function Ur(w,d){return gi.apply(this,arguments)}(d,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Di(w,d){return T1.apply(this,arguments)}(d,{email:v._email,oobCode:v._password});default:pt(d,"internal-error")}})()}_linkToIdToken(d,v){var T=this;return(0,S.Z)(function*(){switch(T.signInMethod){case"password":return qi(d,{idToken:v,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function as(w,d){return s1.apply(this,arguments)}(d,{idToken:v,email:T._email,oobCode:T._password});default:pt(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Ti(w,d){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,S.Z)(function*(w,d){return Nn(w,"POST","/v1/accounts:signInWithIdp",Ft(w,d))})).apply(this,arguments)}class Pe extends Nr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const v=new Pe(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(v.idToken=d.idToken),d.accessToken&&(v.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(v.nonce=d.nonce),d.pendingToken&&(v.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(v.accessToken=d.oauthToken,v.secret=d.oauthTokenSecret):pt("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const v="string"==typeof d?JSON.parse(d):d,{providerId:T,signInMethod:G}=v,J=(0,Ie._T)(v,["providerId","signInMethod"]);if(!T||!G)return null;const Le=new Pe(T,G);return Le.idToken=J.idToken||void 0,Le.accessToken=J.accessToken||void 0,Le.secret=J.secret,Le.nonce=J.nonce,Le.pendingToken=J.pendingToken||null,Le}_getIdTokenResponse(d){return Ti(d,this.buildRequest())}_linkToIdToken(d,v){const T=this.buildRequest();return T.idToken=v,Ti(d,T)}_getReauthenticationResolver(d){const v=this.buildRequest();return v.autoCreate=!1,Ti(d,v)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),d.postBody=(0,K.xO)(v)}return d}}function ct(){return(ct=(0,S.Z)(function*(w,d){return $t(w,"POST","/v1/accounts:sendVerificationCode",Ft(w,d))})).apply(this,arguments)}function In(){return(In=(0,S.Z)(function*(w,d){return Nn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ft(w,d))})).apply(this,arguments)}function _r(){return(_r=(0,S.Z)(function*(w,d){const v=yield Nn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ft(w,d));if(v.temporaryProof)throw cr(w,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const ni={USER_NOT_FOUND:"user-not-found"};function Pi(){return(Pi=(0,S.Z)(function*(w,d){return Nn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ft(w,Object.assign(Object.assign({},d),{operation:"REAUTH"})),ni)})).apply(this,arguments)}class fr extends Nr{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,v){return new fr({verificationId:d,verificationCode:v})}static _fromTokenResponse(d,v){return new fr({phoneNumber:d,temporaryProof:v})}_getIdTokenResponse(d){return function Lt(w,d){return In.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,v){return function mn(w,d){return _r.apply(this,arguments)}(d,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function di(w,d){return Pi.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:v,verificationId:T,verificationCode:G}=this.params;return d&&v?{temporaryProof:d,phoneNumber:v}:{sessionInfo:T,code:G}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:v,verificationCode:T,phoneNumber:G,temporaryProof:J}=d;return T||v||G||J?new fr({verificationId:v,verificationCode:T,phoneNumber:G,temporaryProof:J}):null}}class Co{constructor(d){var v,T,G,J,Le,lt;const Wt=(0,K.zd)((0,K.pd)(d)),cn=null!==(v=Wt.apiKey)&&void 0!==v?v:null,Kn=null!==(T=Wt.oobCode)&&void 0!==T?T:null,zn=function jn(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(G=Wt.mode)&&void 0!==G?G:null);H(cn&&Kn&&zn,"argument-error"),this.apiKey=cn,this.operation=zn,this.code=Kn,this.continueUrl=null!==(J=Wt.continueUrl)&&void 0!==J?J:null,this.languageCode=null!==(Le=Wt.languageCode)&&void 0!==Le?Le:null,this.tenantId=null!==(lt=Wt.tenantId)&&void 0!==lt?lt:null}static parseLink(d){const v=function Br(w){const d=(0,K.zd)((0,K.pd)(w)).link,v=d?(0,K.zd)((0,K.pd)(d)).deep_link_id:null,T=(0,K.zd)((0,K.pd)(w)).deep_link_id;return(T?(0,K.zd)((0,K.pd)(T)).link:null)||T||v||d||w}(d);try{return new Co(v)}catch{return null}}}let o1=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(v,T){return C1._fromEmailAndPassword(v,T)}static credentialWithLink(v,T){const G=Co.parseLink(T);return H(G,"argument-error"),C1._fromEmailAndCode(v,G.code,G.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class q1{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class A1 extends q1{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class eo extends A1{static credentialFromJSON(d){const v="string"==typeof d?JSON.parse(d):d;return H("providerId"in v&&"signInMethod"in v,"argument-error"),Pe._fromParams(v)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return H(d.idToken||d.accessToken,"argument-error"),Pe._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return eo.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return eo.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:v,oauthAccessToken:T,oauthTokenSecret:G,pendingToken:J,nonce:Le,providerId:lt}=d;if(!T&&!G&&!v&&!J||!lt)return null;try{return new eo(lt)._credential({idToken:v,accessToken:T,nonce:Le,pendingToken:J})}catch{return null}}}let Hs=(()=>{class w extends A1{constructor(){super("facebook.com")}static credential(v){return Pe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return w.credential(v.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Es=(()=>{class w extends A1{constructor(){super("google.com"),this.addScope("profile")}static credential(v,T){return Pe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:T})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:T,oauthAccessToken:G}=v;if(!T&&!G)return null;try{return w.credential(T,G)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Is=(()=>{class w extends A1{constructor(){super("github.com")}static credential(v){return Pe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return w.credential(v.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class jr extends Nr{constructor(d,v){super(d,d),this.pendingToken=v}_getIdTokenResponse(d){return Ti(d,this.buildRequest())}_linkToIdToken(d,v){const T=this.buildRequest();return T.idToken=v,Ti(d,T)}_getReauthenticationResolver(d){const v=this.buildRequest();return v.autoCreate=!1,Ti(d,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const v="string"==typeof d?JSON.parse(d):d,{providerId:T,signInMethod:G,pendingToken:J}=v;return T&&G&&J&&T===G?new jr(T,J):null}static _create(d,v){return new jr(d,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class yi extends q1{constructor(d){H(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return yi.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return yi.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const v=jr.fromJSON(d);return H(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:v,providerId:T}=d;if(!v||!T)return null;try{return jr._create(T,v)}catch{return null}}}let Lo=(()=>{class w extends A1{constructor(){super("twitter.com")}static credential(v,T){return Pe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:T})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:T,oauthTokenSecret:G}=v;if(!T||!G)return null;try{return w.credential(T,G)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Us(w,d){return to.apply(this,arguments)}function to(){return(to=(0,S.Z)(function*(w,d){return Nn(w,"POST","/v1/accounts:signUp",Ft(w,d))})).apply(this,arguments)}class $r{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,v,T,G=!1){return(0,S.Z)(function*(){const J=yield Oe._fromIdTokenResponse(d,T,G),Le=qn(T);return new $r({user:J,providerId:Le,_tokenResponse:T,operationType:v})})()}static _forOperation(d,v,T){return(0,S.Z)(function*(){yield d._updateTokensIfNecessary(T,!0);const G=qn(T);return new $r({user:d,providerId:G,_tokenResponse:T,operationType:v})})()}}function qn(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function x1(){return(x1=(0,S.Z)(function*(w){var d;const v=wr(w);if(yield v._initializationPromise,null!==(d=v.currentUser)&&void 0!==d&&d.isAnonymous)return new $r({user:v.currentUser,providerId:null,operationType:"signIn"});const T=yield Us(v,{returnSecureToken:!0}),G=yield $r._fromIdTokenResponse(v,"signIn",T,!0);return yield v._updateCurrentUser(G.user),G})).apply(this,arguments)}class ls extends K.ZR{constructor(d,v,T,G){var J;super(v.code,v.message),this.operationType=T,this.user=G,Object.setPrototypeOf(this,ls.prototype),this.customData={appName:d.name,tenantId:null!==(J=d.tenantId)&&void 0!==J?J:void 0,_serverResponse:v.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(d,v,T,G){return new ls(d,v,T,G)}}function ui(w,d,v,T){return("reauthenticate"===d?v._getReauthenticationResolver(w):v._getIdTokenResponse(w)).catch(J=>{throw"auth/multi-factor-auth-required"===J.code?ls._fromErrorAndOperation(w,J,d,T):J})}function h1(w){return new Set(w.map(({providerId:d})=>d).filter(d=>!!d))}function us(){return us=(0,S.Z)(function*(w,d){const v=(0,K.m9)(w);yield N1(!0,v,d);const{providerUserInfo:T}=yield function Jn(w,d){return _t.apply(this,arguments)}(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[d]}),G=h1(T||[]);return v.providerData=v.providerData.filter(J=>G.has(J.providerId)),G.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v}),us.apply(this,arguments)}function ki(w,d){return w1.apply(this,arguments)}function w1(){return(w1=(0,S.Z)(function*(w,d,v=!1){const T=yield pr(w,d._linkToIdToken(w.auth,yield w.getIdToken()),v);return $r._forOperation(w,"link",T)})).apply(this,arguments)}function N1(w,d,v){return Y1.apply(this,arguments)}function Y1(){return(Y1=(0,S.Z)(function*(w,d,v){yield er(d);const G=!1===w?"provider-already-linked":"no-such-provider";H(h1(d.providerData).has(v)===w,d.auth,G)})).apply(this,arguments)}function wo(w,d){return hs.apply(this,arguments)}function hs(){return(hs=(0,S.Z)(function*(w,d,v=!1){const{auth:T}=w,G="reauthenticate";try{const J=yield pr(w,ui(T,G,d,w),v);H(J.idToken,T,"internal-error");const Le=Gt(J.idToken);H(Le,T,"internal-error");const{sub:lt}=Le;return H(w.uid===lt,T,"user-mismatch"),$r._forOperation(w,G,J)}catch(J){throw"auth/user-not-found"===J?.code&&pt(T,"user-mismatch"),J}})).apply(this,arguments)}function Q1(w,d){return a1.apply(this,arguments)}function a1(){return(a1=(0,S.Z)(function*(w,d,v=!1){const T="signIn",G=yield ui(w,T,d),J=yield $r._fromIdTokenResponse(w,T,G);return v||(yield w._updateCurrentUser(J.user)),J})).apply(this,arguments)}function Cr(w,d){return no.apply(this,arguments)}function no(){return(no=(0,S.Z)(function*(w,d){return Q1(wr(w),d)})).apply(this,arguments)}function Er(w,d){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,S.Z)(function*(w,d){const v=(0,K.m9)(w);return yield N1(!1,v,d.providerId),ki(v,d)})).apply(this,arguments)}function ji(w,d){return pi.apply(this,arguments)}function pi(){return(pi=(0,S.Z)(function*(w,d){return wo((0,K.m9)(w),d)})).apply(this,arguments)}function bs(){return(bs=(0,S.Z)(function*(w,d){return Nn(w,"POST","/v1/accounts:signInWithCustomToken",Ft(w,d))})).apply(this,arguments)}function Ci(){return Ci=(0,S.Z)(function*(w,d){const v=wr(w),T=yield function zr(w,d){return bs.apply(this,arguments)}(v,{token:d,returnSecureToken:!0}),G=yield $r._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(G.user),G}),Ci.apply(this,arguments)}class Bs{constructor(d,v){this.factorId=d,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(d,v){return"phoneInfo"in v?$i._fromServerResponse(d,v):pt(d,"internal-error")}}class $i extends Bs{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,v){return new $i(v)}}function Ai(w,d,v){var T;H((null===(T=v.url)||void 0===T?void 0:T.length)>0,w,"invalid-continue-uri"),H(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),d.continueUrl=v.url,d.dynamicLinkDomain=v.dynamicLinkDomain,d.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(H(v.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),d.iOSBundleId=v.iOS.bundleId),v.android&&(H(v.android.packageName.length>0,w,"missing-android-pkg-name"),d.androidInstallApp=v.android.installApp,d.androidMinimumVersionCode=v.android.minimumVersion,d.androidPackageName=v.android.packageName)}function Rn(){return Rn=(0,S.Z)(function*(w,d,v){const T=(0,K.m9)(w),G={requestType:"PASSWORD_RESET",email:d};v&&Ai(T,G,v),yield function y1(w,d){return En.apply(this,arguments)}(T,G)}),Rn.apply(this,arguments)}function sn(){return(sn=(0,S.Z)(function*(w,d,v){yield Mr((0,K.m9)(w),{oobCode:d,newPassword:v})})).apply(this,arguments)}function sr(){return sr=(0,S.Z)(function*(w,d){yield function Hn(w,d){return ur.apply(this,arguments)}((0,K.m9)(w),{oobCode:d})}),sr.apply(this,arguments)}function F1(w,d){return js.apply(this,arguments)}function js(){return(js=(0,S.Z)(function*(w,d){const v=(0,K.m9)(w),T=yield Mr(v,{oobCode:d}),G=T.requestType;switch(H(G,v,"internal-error"),G){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(T.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(T.mfaInfo,v,"internal-error");default:H(T.email,v,"internal-error")}let J=null;return T.mfaInfo&&(J=Bs._fromServerResponse(wr(v),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:J},operation:G}})).apply(this,arguments)}function Eo(){return(Eo=(0,S.Z)(function*(w,d){const{data:v}=yield F1((0,K.m9)(w),d);return v.email})).apply(this,arguments)}function X1(){return(X1=(0,S.Z)(function*(w,d,v){const T=wr(w),G=yield Us(T,{returnSecureToken:!0,email:d,password:v}),J=yield $r._fromIdTokenResponse(T,"signIn",G);return yield T._updateCurrentUser(J.user),J})).apply(this,arguments)}function Wi(){return Wi=(0,S.Z)(function*(w,d,v){const T=(0,K.m9)(w),G={requestType:"EMAIL_SIGNIN",email:d};H(v.handleCodeInApp,T,"argument-error"),v&&Ai(T,G,v),yield function ti(w,d){return _1.apply(this,arguments)}(T,G)}),Wi.apply(this,arguments)}function Ms(){return(Ms=(0,S.Z)(function*(w,d,v){const T=(0,K.m9)(w),G=o1.credentialWithLink(d,v||Qe());return H(G._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),Cr(T,G)})).apply(this,arguments)}function Xi(){return(Xi=(0,S.Z)(function*(w,d){return $t(w,"POST","/v1/accounts:createAuthUri",Ft(w,d))})).apply(this,arguments)}function Ws(){return Ws=(0,S.Z)(function*(w,d){const T={identifier:d,continueUri:Ue()?Qe():"http://localhost"},{signinMethods:G}=yield function z1(w,d){return Xi.apply(this,arguments)}((0,K.m9)(w),T);return G||[]}),Ws.apply(this,arguments)}function ee(){return ee=(0,S.Z)(function*(w,d){const v=(0,K.m9)(w),G={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};d&&Ai(v.auth,G,d);const{email:J}=yield function Lr(w,d){return Ri.apply(this,arguments)}(v.auth,G);J!==w.email&&(yield w.reload())}),ee.apply(this,arguments)}function ae(){return ae=(0,S.Z)(function*(w,d,v){const T=(0,K.m9)(w),J={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:d};v&&Ai(T.auth,J,v);const{email:Le}=yield function K1(w,d){return Si.apply(this,arguments)}(T.auth,J);Le!==w.email&&(yield w.reload())}),ae.apply(this,arguments)}function tt(){return(tt=(0,S.Z)(function*(w,d){return $t(w,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function st(){return st=(0,S.Z)(function*(w,{displayName:d,photoURL:v}){if(void 0===d&&void 0===v)return;const T=(0,K.m9)(w),J={idToken:yield T.getIdToken(),displayName:d,photoUrl:v,returnSecureToken:!0},Le=yield pr(T,function Ae(w,d){return tt.apply(this,arguments)}(T.auth,J));T.displayName=Le.displayName||null,T.photoURL=Le.photoUrl||null;const lt=T.providerData.find(({providerId:Wt})=>"password"===Wt);lt&&(lt.displayName=T.displayName,lt.photoURL=T.photoURL),yield T._updateTokensIfNecessary(Le)}),st.apply(this,arguments)}function Yn(w,d,v){return nr.apply(this,arguments)}function nr(){return(nr=(0,S.Z)(function*(w,d,v){const{auth:T}=w,J={idToken:yield w.getIdToken(),returnSecureToken:!0};d&&(J.email=d),v&&(J.password=v);const Le=yield pr(w,qi(T,J));yield w._updateTokensIfNecessary(Le,!0)})).apply(this,arguments)}class ri{constructor(d,v,T={}){this.isNewUser=d,this.providerId=v,this.profile=T}}class Vi extends ri{constructor(d,v,T,G){super(d,v,T),this.username=G}}class Ji extends ri{constructor(d,v){super(d,"facebook.com",v)}}class wi extends Vi{constructor(d,v){super(d,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class Gi extends ri{constructor(d,v){super(d,"google.com",v)}}class Kr extends Vi{constructor(d,v,T){super(d,"twitter.com",v,T)}}function Ar(w){const{user:d,_tokenResponse:v}=w;return d.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function Tr(w){var d,v;if(!w)return null;const{providerId:T}=w,G=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},J=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!T&&w?.idToken){const Le=null===(v=null===(d=Gt(w.idToken))||void 0===d?void 0:d.firebase)||void 0===v?void 0:v.sign_in_provider;if(Le)return new ri(J,"anonymous"!==Le&&"custom"!==Le?Le:null)}if(!T)return null;switch(T){case"facebook.com":return new Ji(J,G);case"github.com":return new wi(J,G);case"google.com":return new Gi(J,G);case"twitter.com":return new Kr(J,G,w.screenName||null);case"custom":case"anonymous":return new ri(J,null);default:return new ri(J,T,G)}}(v)}class Hi{constructor(d,v,T){this.type=d,this.credential=v,this.auth=T}static _fromIdtoken(d,v){return new Hi("enroll",d,v)}static _fromMfaPendingCredential(d){return new Hi("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var v,T;if(d?.multiFactorSession){if(null!==(v=d.multiFactorSession)&&void 0!==v&&v.pendingCredential)return Hi._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(T=d.multiFactorSession)&&void 0!==T&&T.idToken)return Hi._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Ko{constructor(d,v,T){this.session=d,this.hints=v,this.signInResolver=T}static _fromError(d,v){const T=wr(d),G=v.customData._serverResponse,J=(G.mfaInfo||[]).map(lt=>Bs._fromServerResponse(T,lt));H(G.mfaPendingCredential,T,"internal-error");const Le=Hi._fromMfaPendingCredential(G.mfaPendingCredential);return new Ko(Le,J,function(){var lt=(0,S.Z)(function*(Wt){const cn=yield Wt._process(T,Le);delete G.mfaInfo,delete G.mfaPendingCredential;const Kn=Object.assign(Object.assign({},G),{idToken:cn.idToken,refreshToken:cn.refreshToken});switch(v.operationType){case"signIn":const zn=yield $r._fromIdTokenResponse(T,v.operationType,Kn);return yield T._updateCurrentUser(zn.user),zn;case"reauthenticate":return H(v.user,T,"internal-error"),$r._forOperation(v.user,v.operationType,Kn);default:pt(T,"internal-error")}});return function(Wt){return lt.apply(this,arguments)}}())}resolveSignIn(d){var v=this;return(0,S.Z)(function*(){return v.signInResolver(d)})()}}class ds{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(T=>Bs._fromServerResponse(d.auth,T)))})}static _fromUser(d){return new ds(d)}getSession(){var d=this;return(0,S.Z)(function*(){return Hi._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,v){var T=this;return(0,S.Z)(function*(){const G=d,J=yield T.getSession(),Le=yield pr(T.user,G._process(T.user.auth,J,v));return yield T.user._updateTokensIfNecessary(Le),T.user.reload()})()}unenroll(d){var v=this;return(0,S.Z)(function*(){const T="string"==typeof d?d:d.uid,G=yield v.user.getIdToken();try{const J=yield pr(v.user,function zo(w,d){return $t(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Ft(w,d))}(v.user.auth,{idToken:G,mfaEnrollmentId:T}));v.enrolledFactors=v.enrolledFactors.filter(({uid:Le})=>Le!==T),yield v.user._updateTokensIfNecessary(J),yield v.user.reload()}catch(J){throw J}})()}}const f1=new WeakMap,L="__sak";class U{constructor(d,v){this.storageRetriever=d,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(L,"1"),this.storage.removeItem(L),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,v){return this.storage.setItem(d,JSON.stringify(v)),Promise.resolve()}_get(d){const v=this.storage.getItem(d);return Promise.resolve(v?JSON.parse(v):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const vt=(()=>{class w extends U{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,T)=>this.onStorageEvent(v,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function P(){const w=(0,K.z$)();return yn(w)||be(w)}()&&function Vn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Jt(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const T of Object.keys(this.listeners)){const G=this.storage.getItem(T),J=this.localCache[T];G!==J&&v(T,J,G)}}onStorageEvent(v,T=!1){if(!v.key)return void this.forAllChangedKeys((lt,Wt,cn)=>{this.notifyListeners(lt,cn)});const G=v.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const lt=this.storage.getItem(G);if(v.newValue!==lt)null!==v.newValue?this.storage.setItem(G,v.newValue):this.storage.removeItem(G);else if(this.localCache[G]===v.newValue&&!T)return}const J=()=>{const lt=this.storage.getItem(G);!T&&this.localCache[G]===lt||this.notifyListeners(G,lt)},Le=this.storage.getItem(G);!function Ct(){return(0,K.w1)()&&10===document.documentMode}()||Le===v.newValue||v.newValue===v.oldValue?J():setTimeout(J,10)}notifyListeners(v,T){this.localCache[v]=T;const G=this.listeners[v];if(G)for(const J of Array.from(G))J(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,T,G)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:T,newValue:G}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(T)}_removeListener(v,T){this.listeners[v]&&(this.listeners[v].delete(T),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,T){var G=()=>super._set,J=this;return(0,S.Z)(function*(){yield G().call(J,v,T),J.localCache[v]=JSON.stringify(T)})()}_get(v){var T=()=>super._get,G=this;return(0,S.Z)(function*(){const J=yield T().call(G,v);return G.localCache[v]=JSON.stringify(J),J})()}_remove(v){var T=()=>super._remove,G=this;return(0,S.Z)(function*(){yield T().call(G,v),delete G.localCache[v]})()}}return w.type="LOCAL",w})(),dr=(()=>{class w extends U{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,T){}_removeListener(v,T){}}return w.type="SESSION",w})();let xr=(()=>{class w{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const T=this.receivers.find(J=>J.isListeningto(v));if(T)return T;const G=new w(v);return this.receivers.push(G),G}isListeningto(v){return this.eventTarget===v}handleEvent(v){var T=this;return(0,S.Z)(function*(){const G=v,{eventId:J,eventType:Le,data:lt}=G.data,Wt=T.handlersMap[Le];if(!Wt?.size)return;G.ports[0].postMessage({status:"ack",eventId:J,eventType:Le});const cn=Array.from(Wt).map(function(){var zn=(0,S.Z)(function*(M1){return M1(G.origin,lt)});return function(M1){return zn.apply(this,arguments)}}()),Kn=yield function or(w){return Promise.all(w.map(function(){var d=(0,S.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(T){return{fulfilled:!1,reason:T}}});return function(v){return d.apply(this,arguments)}}()))}(cn);G.ports[0].postMessage({status:"done",eventId:J,eventType:Le,response:Kn})})()}_subscribe(v,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(T)}_unsubscribe(v,T){this.handlersMap[v]&&T&&this.handlersMap[v].delete(T),(!T||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Zn(w="",d=10){let v="";for(let T=0;T<d;T++)v+=Math.floor(10*Math.random());return w+v}class Yr{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,v,T=50){var G=this;return(0,S.Z)(function*(){const J=typeof MessageChannel<"u"?new MessageChannel:null;if(!J)throw new Error("connection_unavailable");let Le,lt;return new Promise((Wt,cn)=>{const Kn=Zn("",20);J.port1.start();const zn=setTimeout(()=>{cn(new Error("unsupported_event"))},T);lt={messageChannel:J,onMessage(M1){const o2=M1;if(o2.data.eventId===Kn)switch(o2.data.status){case"ack":clearTimeout(zn),Le=setTimeout(()=>{cn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Le),Wt(o2.data.response);break;default:clearTimeout(zn),clearTimeout(Le),cn(new Error("invalid_response"))}}},G.handlers.add(lt),J.port1.addEventListener("message",lt.onMessage),G.target.postMessage({eventType:d,eventId:Kn,data:v},[J.port2])}).finally(()=>{lt&&G.removeMessageHandler(lt)})})()}}function Fn(){return window}function ps(){return typeof Fn().WorkerGlobalScope<"u"&&"function"==typeof Fn().importScripts}function R1(){return(R1=(0,S.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Io="firebaseLocalStorageDb",ms=1,bo="firebaseLocalStorage",w2="fbase_key";class Mo{constructor(d){this.request=d}toPromise(){return new Promise((d,v)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function qo(w,d){return w.transaction([bo],d?"readwrite":"readonly").objectStore(bo)}function E2(){const w=indexedDB.open(Io,ms);return new Promise((d,v)=>{w.addEventListener("error",()=>{v(w.error)}),w.addEventListener("upgradeneeded",()=>{const T=w.result;try{T.createObjectStore(bo,{keyPath:w2})}catch(G){v(G)}}),w.addEventListener("success",(0,S.Z)(function*(){const T=w.result;T.objectStoreNames.contains(bo)?d(T):(T.close(),yield function P2(){const w=indexedDB.deleteDatabase(Io);return new Mo(w).toPromise()}(),d(yield E2()))}))})}function d1(w,d,v){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,S.Z)(function*(w,d,v){const T=qo(w,!0).put({[w2]:d,value:v});return new Mo(T).toPromise()})).apply(this,arguments)}function ao(){return(ao=(0,S.Z)(function*(w,d){const v=qo(w,!1).get(d),T=yield new Mo(v).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function ii(w,d){const v=qo(w,!0).delete(d);return new Mo(v).toPromise()}const ko=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,S.Z)(function*(){return v.db||(v.db=yield E2()),v.db})()}_withRetries(v){var T=this;return(0,S.Z)(function*(){let G=0;for(;;)try{const J=yield T._openDb();return yield v(J)}catch(J){if(G++>3)throw J;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,S.Z)(function*(){return ps()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,S.Z)(function*(){v.receiver=xr._getInstance(function oo(){return ps()?self:null}()),v.receiver._subscribe("keyChanged",function(){var T=(0,S.Z)(function*(G,J){return{keyProcessed:(yield v._poll()).includes(J.key)}});return function(G,J){return T.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var T=(0,S.Z)(function*(G,J){return["keyChanged"]});return function(G,J){return T.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,S.Z)(function*(){var T,G;if(v.activeServiceWorker=yield function e1(){return R1.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Yr(v.activeServiceWorker);const J=yield v.sender._send("ping",{},800);J&&null!==(T=J[0])&&void 0!==T&&T.fulfilled&&null!==(G=J[0])&&void 0!==G&&G.value.includes("keyChanged")&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var T=this;return(0,S.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function xi(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:v},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,S.Z)(function*(){try{if(!indexedDB)return!1;const v=yield E2();return yield d1(v,L,"1"),yield ii(v,L),!0}catch{}return!1})()}_withPendingWrite(v){var T=this;return(0,S.Z)(function*(){T.pendingWrites++;try{yield v()}finally{T.pendingWrites--}})()}_set(v,T){var G=this;return(0,S.Z)(function*(){return G._withPendingWrite((0,S.Z)(function*(){return yield G._withRetries(J=>d1(J,v,T)),G.localCache[v]=T,G.notifyServiceWorker(v)}))})()}_get(v){var T=this;return(0,S.Z)(function*(){const G=yield T._withRetries(J=>function Po(w,d){return ao.apply(this,arguments)}(J,v));return T.localCache[v]=G,G})()}_remove(v){var T=this;return(0,S.Z)(function*(){return T._withPendingWrite((0,S.Z)(function*(){return yield T._withRetries(G=>ii(G,v)),delete T.localCache[v],T.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,S.Z)(function*(){const T=yield v._withRetries(Le=>{const lt=qo(Le,!1).getAll();return new Mo(lt).toPromise()});if(!T)return[];if(0!==v.pendingWrites)return[];const G=[],J=new Set;for(const{fbase_key:Le,value:lt}of T)J.add(Le),JSON.stringify(v.localCache[Le])!==JSON.stringify(lt)&&(v.notifyListeners(Le,lt),G.push(Le));for(const Le of Object.keys(v.localCache))v.localCache[Le]&&!J.has(Le)&&(v.notifyListeners(Le,null),G.push(Le));return G})()}notifyListeners(v,T){this.localCache[v]=T;const G=this.listeners[v];if(G)for(const J of Array.from(G))J(T)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,S.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(T)}_removeListener(v,T){this.listeners[v]&&(this.listeners[v].delete(T),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Oo(){return(Oo=(0,S.Z)(function*(w){return(yield $t(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function fn(w){return new Promise((d,v)=>{const T=document.createElement("script");T.setAttribute("src",w),T.onload=d,T.onerror=G=>{const J=nt("internal-error");J.customData=G,v(J)},T.type="text/javascript",T.charset="UTF-8",function an(){var w,d;return null!==(d=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==d?d:document}().appendChild(T)})}function Q2(w){return`__${w}${Math.floor(1e6*Math.random())}`}const wt=1e12;class t1{constructor(d){this.auth=d,this.counter=wt,this._widgets=new Map}render(d,v){const T=this.counter;return this._widgets.set(T,new k2(d,this.auth.name,v||{})),this.counter++,T}reset(d){var v;const T=d||wt;null===(v=this._widgets.get(T))||void 0===v||v.delete(),this._widgets.delete(T)}getResponse(d){var v;return(null===(v=this._widgets.get(d||wt))||void 0===v?void 0:v.getResponse())||""}execute(d){var v=this;return(0,S.Z)(function*(){var T;return null===(T=v._widgets.get(d||wt))||void 0===T||T.execute(),""})()}}class k2{constructor(d,v,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const G="string"==typeof d?document.getElementById(d):d;H(G,"argument-error",{appName:v}),this.container=G,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function P1(w){const d=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<w;T++)d.push(v.charAt(Math.floor(Math.random()*v.length)));return d.join("")}(50);const{callback:d,"expired-callback":v}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const X2=Q2("rcb"),Yo=new St(3e4,6e4);class Vo{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Fn().grecaptcha)||void 0===d||!d.render)}load(d,v=""){return H(function Qo(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(v),d,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(Fn().grecaptcha):new Promise((T,G)=>{const J=Fn().setTimeout(()=>{G(nt(d,"network-request-failed"))},Yo.get());Fn()[X2]=()=>{Fn().clearTimeout(J),delete Fn()[X2];const lt=Fn().grecaptcha;if(!lt)return void G(nt(d,"internal-error"));const Wt=lt.render;lt.render=(cn,Kn)=>{const zn=Wt(cn,Kn);return this.counter++,zn},this.hostLanguage=v,T(lt)},fn(`https://www.google.com/recaptcha/api.js??${(0,K.xO)({onload:X2,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(J),G(nt(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var v;return!(null===(v=Fn().grecaptcha)||void 0===v||!v.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class I2{load(d){return(0,S.Z)(function*(){return new t1(d)})()}clearedOneInstance(){}}const wc="recaptcha",wa={theme:"light",type:"image"};class Ho{constructor(d,v=Object.assign({},wa),T){this.parameters=v,this.type=wc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wr(T),this.isInvisible="invisible"===this.parameters.size,H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const G="string"==typeof d?document.getElementById(d):d;H(G,this.auth,"argument-error"),this.container=G,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new I2:new Vo,this.validateStartingState()}verify(){var d=this;return(0,S.Z)(function*(){d.assertNotDestroyed();const v=yield d.render(),T=d.getAssertedRecaptcha();return T.getResponse(v)||new Promise(J=>{const Le=lt=>{lt&&(d.tokenChangeListeners.delete(Le),J(lt))};d.tokenChangeListeners.add(Le),d.isInvisible&&T.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return v=>{if(this.tokenChangeListeners.forEach(T=>T(v)),"function"==typeof d)d(v);else if("string"==typeof d){const T=Fn()[d];"function"==typeof T&&T(v)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,S.Z)(function*(){if(yield d.init(),!d.widgetId){let v=d.container;if(!d.isInvisible){const T=document.createElement("div");v.appendChild(T),v=T}d.widgetId=d.getAssertedRecaptcha().render(v,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,S.Z)(function*(){H(Ue()&&!ps(),d.auth,"internal-error"),yield function Qn(){let w=null;return new Promise(d=>{"complete"!==document.readyState?(w=()=>d(),window.addEventListener("load",w)):d()}).catch(d=>{throw w&&window.removeEventListener("load",w),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const v=yield function I1(w){return Oo.apply(this,arguments)}(d.auth);H(v,d.auth,"internal-error"),d.parameters.sitekey=v})()}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class l1{constructor(d,v){this.verificationId=d,this.onConfirmation=v}confirm(d){const v=fr._fromVerification(this.verificationId,d);return this.onConfirmation(v)}}function Vr(){return(Vr=(0,S.Z)(function*(w,d,v){const T=wr(w),G=yield Ii(T,d,(0,K.m9)(v));return new l1(G,J=>Cr(T,J))})).apply(this,arguments)}function Fo(){return(Fo=(0,S.Z)(function*(w,d,v){const T=(0,K.m9)(w);yield N1(!1,T,"phone");const G=yield Ii(T.auth,d,(0,K.m9)(v));return new l1(G,J=>Er(T,J))})).apply(this,arguments)}function b2(){return(b2=(0,S.Z)(function*(w,d,v){const T=(0,K.m9)(w),G=yield Ii(T.auth,d,(0,K.m9)(v));return new l1(G,J=>ji(T,J))})).apply(this,arguments)}function Ii(w,d,v){return nn.apply(this,arguments)}function nn(){return nn=(0,S.Z)(function*(w,d,v){var T;const G=yield v.verify();try{let J;if(H("string"==typeof G,w,"argument-error"),H(v.type===wc,w,"argument-error"),J="string"==typeof d?{phoneNumber:d}:d,"session"in J){const Le=J.session;if("phoneNumber"in J)return H("enroll"===Le.type,w,"internal-error"),(yield function Ks(w,d){return $t(w,"POST","/v2/accounts/mfaEnrollment:start",Ft(w,d))}(w,{idToken:Le.credential,phoneEnrollmentInfo:{phoneNumber:J.phoneNumber,recaptchaToken:G}})).phoneSessionInfo.sessionInfo;{H("signin"===Le.type,w,"internal-error");const lt=(null===(T=J.multiFactorHint)||void 0===T?void 0:T.uid)||J.multiFactorUid;return H(lt,w,"missing-multi-factor-info"),(yield function Rt(w,d){return $t(w,"POST","/v2/accounts/mfaSignIn:start",Ft(w,d))}(w,{mfaPendingCredential:Le.credential,mfaEnrollmentId:lt,phoneSignInInfo:{recaptchaToken:G}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Le}=yield function $e(w,d){return ct.apply(this,arguments)}(w,{phoneNumber:J.phoneNumber,recaptchaToken:G});return Le}}finally{v._reset()}}),nn.apply(this,arguments)}function Xo(){return(Xo=(0,S.Z)(function*(w,d){yield ki((0,K.m9)(w),d)})).apply(this,arguments)}let As=(()=>{class w{constructor(v){this.providerId=w.PROVIDER_ID,this.auth=wr(v)}verifyPhoneNumber(v,T){return Ii(this.auth,v,(0,K.m9)(T))}static credential(v,T){return fr._fromVerification(v,T)}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:T,temporaryProof:G}=v;return T&&G?fr._fromTokenResponse(T,G):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function si(w,d){return d?Zt(d):(H(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Uo extends Nr{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Ti(d,this._buildIdpRequest())}_linkToIdToken(d,v){return Ti(d,this._buildIdpRequest(v))}_getReauthenticationResolver(d){return Ti(d,this._buildIdpRequest())}_buildIdpRequest(d){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(v.idToken=d),v}}function f2(w){return Q1(w.auth,new Uo(w),w.bypassAuthState)}function J1(w){const{auth:d,user:v}=w;return H(v,d,"internal-error"),wo(v,new Uo(w),w.bypassAuthState)}function b1(w){return vs.apply(this,arguments)}function vs(){return(vs=(0,S.Z)(function*(w){const{auth:d,user:v}=w;return H(v,d,"internal-error"),ki(v,new Uo(w),w.bypassAuthState)})).apply(this,arguments)}class Ni{constructor(d,v,T,G,J=!1){this.auth=d,this.resolver=T,this.user=G,this.bypassAuthState=J,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var d=this;return new Promise(function(){var v=(0,S.Z)(function*(T,G){d.pendingPromise={resolve:T,reject:G};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(J){d.reject(J)}});return function(T,G){return v.apply(this,arguments)}}())}onAuthEvent(d){var v=this;return(0,S.Z)(function*(){const{urlResponse:T,sessionId:G,postBody:J,tenantId:Le,error:lt,type:Wt}=d;if(lt)return void v.reject(lt);const cn={auth:v.auth,requestUri:T,sessionId:G,tenantId:Le||void 0,postBody:J||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(Wt)(cn))}catch(Kn){v.reject(Kn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return f2;case"linkViaPopup":case"linkViaRedirect":return b1;case"reauthViaPopup":case"reauthViaRedirect":return J1;default:pt(this.auth,"internal-error")}}resolve(d){zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const co=new St(2e3,1e4);function uo(){return(uo=(0,S.Z)(function*(w,d,v){const T=wr(w);bt(w,d,q1);const G=si(T,v);return new B1(T,"signInViaPopup",d,G).executeNotNull()})).apply(this,arguments)}function S2(){return(S2=(0,S.Z)(function*(w,d,v){const T=(0,K.m9)(w);bt(T.auth,d,q1);const G=si(T.auth,v);return new B1(T.auth,"reauthViaPopup",d,G,T).executeNotNull()})).apply(this,arguments)}function n1(){return(n1=(0,S.Z)(function*(w,d,v){const T=(0,K.m9)(w);bt(T.auth,d,q1);const G=si(T.auth,v);return new B1(T.auth,"linkViaPopup",d,G,T).executeNotNull()})).apply(this,arguments)}let B1=(()=>{class w extends Ni{constructor(v,T,G,J,Le){super(v,T,J,Le),this.provider=G,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var v=this;return(0,S.Z)(function*(){const T=yield v.execute();return H(T,v.auth,"internal-error"),T})()}onExecution(){var v=this;return(0,S.Z)(function*(){zt(1===v.filter.length,"Popup operations only handle one event");const T=Zn();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],T),v.authWindow.associatedEvent=T,v.resolver._originValidation(v.auth).catch(G=>{v.reject(G)}),v.resolver._isIframeWebStorageSupported(v.auth,G=>{G||v.reject(nt(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(nt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const v=()=>{var T,G;this.pollId=null!==(G=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==G&&G.closed?window.setTimeout(()=>{this.pollId=null,this.reject(nt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,co.get())};v()}}return w.currentPopupAction=null,w})();const p1="pendingRedirect",ys=new Map;class So extends Ni{constructor(d,v,T=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,T),this.eventId=null}execute(){var d=()=>super.execute,v=this;return(0,S.Z)(function*(){let T=ys.get(v.auth._key());if(!T){try{const J=(yield function Ea(w,d){return j1.apply(this,arguments)}(v.resolver,v.auth))?yield d().call(v):null;T=()=>Promise.resolve(J)}catch(G){T=()=>Promise.reject(G)}ys.set(v.auth._key(),T)}return v.bypassAuthState||ys.set(v.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(d){var v=()=>super.onAuthEvent,T=this;return(0,S.Z)(function*(){if("signInViaRedirect"===d.type)return v().call(T,d);if("unknown"!==d.type){if(d.eventId){const G=yield T.auth._redirectUserForId(d.eventId);if(G)return T.user=G,v().call(T,d);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,S.Z)(function*(){})()}cleanUp(){}}function j1(){return(j1=(0,S.Z)(function*(w,d){const v=C(d),T=D(w);if(!(yield T._isAvailable()))return!1;const G="true"===(yield T._get(v));return yield T._remove(v),G})).apply(this,arguments)}function Bo(w,d){return xs.apply(this,arguments)}function xs(){return(xs=(0,S.Z)(function*(w,d){return D(w)._set(C(d),"true")})).apply(this,arguments)}function I(w,d){ys.set(w._key(),d)}function D(w){return Zt(w._redirectPersistence)}function C(w){return ge(p1,w.config.apiKey,w.name)}function N(w,d,v){return function O(w,d,v){return _.apply(this,arguments)}(w,d,v)}function _(){return(_=(0,S.Z)(function*(w,d,v){const T=wr(w);bt(w,d,q1),yield T._initializationPromise;const G=si(T,v);return yield Bo(G,T),G._openRedirect(T,d,"signInViaRedirect")})).apply(this,arguments)}function M(w,d,v){return function k(w,d,v){return q.apply(this,arguments)}(w,d,v)}function q(){return(q=(0,S.Z)(function*(w,d,v){const T=(0,K.m9)(w);bt(T.auth,d,q1),yield T.auth._initializationPromise;const G=si(T.auth,v);yield Bo(G,T.auth);const J=yield Sn(T);return G._openRedirect(T.auth,d,"reauthViaRedirect",J)})).apply(this,arguments)}function he(w,d,v){return function _e(w,d,v){return je.apply(this,arguments)}(w,d,v)}function je(){return(je=(0,S.Z)(function*(w,d,v){const T=(0,K.m9)(w);bt(T.auth,d,q1),yield T.auth._initializationPromise;const G=si(T.auth,v);yield N1(!1,T,d.providerId),yield Bo(G,T.auth);const J=yield Sn(T);return G._openRedirect(T.auth,d,"linkViaRedirect",J)})).apply(this,arguments)}function on(){return(on=(0,S.Z)(function*(w,d){return yield wr(w)._initializationPromise,Bt(w,d,!1)})).apply(this,arguments)}function Bt(w,d){return kn.apply(this,arguments)}function kn(){return(kn=(0,S.Z)(function*(w,d,v=!1){const T=wr(w),G=si(T,d),Le=yield new So(T,G,v).execute();return Le&&!v&&(delete Le.user._redirectEventId,yield T._persistUserIfCurrent(Le.user),yield T._setRedirectUser(null,d)),Le})).apply(this,arguments)}function Sn(w){return $1.apply(this,arguments)}function $1(){return($1=(0,S.Z)(function*(w){const d=Zn(`${w.uid}:::`);return w._redirectEventId=d,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),d})).apply(this,arguments)}class Ns{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let v=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(d,T)&&(v=!0,this.sendToConsumer(d,T),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function m1(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ho(w);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=d,v=!0)),v}sendToConsumer(d,v){var T;if(d.error&&!ho(d)){const G=(null===(T=d.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";v.onError(nt(this.auth,G))}else v.onAuthEvent(d)}isEventForConsumer(d,v){const T=null===v.eventId||!!d.eventId&&d.eventId===v.eventId;return v.filter.includes(d.type)&&T}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(D2(d))}saveEventToCache(d){this.cachedEventUids.add(D2(d)),this.lastProcessedEventTime=Date.now()}}function D2(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(d=>d).join("-")}function ho({type:w,error:d}){return"unknown"===w&&"auth/no-auth-event"===d?.code}function Ls(w){return es.apply(this,arguments)}function es(){return(es=(0,S.Z)(function*(w,d={}){return $t(w,"GET","/v1/projects",d)})).apply(this,arguments)}const Ba=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O2=/^https?/;function fo(){return(fo=(0,S.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:d}=yield Ls(w);for(const v of d)try{if(Ia(v))return}catch{}pt(w,"unauthorized-domain")})).apply(this,arguments)}function Ia(w){const d=Qe(),{protocol:v,hostname:T}=new URL(d);if(w.startsWith("chrome-extension://")){const Le=new URL(w);return""===Le.hostname&&""===T?"chrome-extension:"===v&&w.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===v&&Le.hostname===T}if(!O2.test(v))return!1;if(Ba.test(w))return T===w;const G=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+G+"|"+G+")$","i").test(T)}const ja=new St(3e4,6e4);function Xc(){const w=Fn().___jsl;if(w?.H)for(const d of Object.keys(w.H))if(w.H[d].r=w.H[d].r||[],w.H[d].L=w.H[d].L||[],w.H[d].r=[...w.H[d].L],w.CP)for(let v=0;v<w.CP.length;v++)w.CP[v]=null}let d2=null;const Wa=new St(5e3,15e3),Ga="__/auth/iframe",M0="emulator/auth/iframe",g6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},v6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function T2(w){const d=w.config;H(d.authDomain,w,"auth-domain-config-required");const v=d.emulator?Nt(d,M0):`https://${w.config.authDomain}/${Ga}`,T={apiKey:d.apiKey,appName:w.name,v:Ce.SDK_VERSION},G=v6.get(w.config.apiHost);G&&(T.eid=G);const J=w._getFrameworks();return J.length&&(T.fw=J.join(",")),`${v}?${(0,K.xO)(T).slice(1)}`}function Za(){return Za=(0,S.Z)(function*(w){const d=yield function Ec(w){return d2=d2||function $a(w){return new Promise((d,v)=>{var T,G,J;function Le(){Xc(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Xc(),v(nt(w,"network-request-failed"))},timeout:ja.get()})}if(null!==(G=null===(T=Fn().gapi)||void 0===T?void 0:T.iframes)&&void 0!==G&&G.Iframe)d(gapi.iframes.getContext());else{if(null===(J=Fn().gapi)||void 0===J||!J.load){const lt=Q2("iframefcb");return Fn()[lt]=()=>{gapi.load?Le():v(nt(w,"network-request-failed"))},fn(`https://apis.google.com/js/api.js?onload=${lt}`).catch(Wt=>v(Wt))}Le()}}).catch(d=>{throw d2=null,d})}(w),d2}(w),v=Fn().gapi;return H(v,w,"internal-error"),d.open({where:document.body,url:T2(w),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g6,dontclear:!0},T=>new Promise(function(){var G=(0,S.Z)(function*(J,Le){yield T.restyle({setHideOnLeave:!1});const lt=nt(w,"network-request-failed"),Wt=Fn().setTimeout(()=>{Le(lt)},Wa.get());function cn(){Fn().clearTimeout(Wt),J(T)}T.ping(cn).then(cn,()=>{Le(lt)})});return function(J,Le){return G.apply(this,arguments)}}()))}),Za.apply(this,arguments)}const Jc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yr=500,Sr=600,Jo="_blank",bc="http://localhost";class po{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ba="__/auth/handler",e4="emulator/auth/handler";function _s(w,d,v,T,G,J){H(w.config.authDomain,w,"auth-domain-config-required"),H(w.config.apiKey,w,"invalid-api-key");const Le={apiKey:w.config.apiKey,appName:w.name,authType:v,redirectUrl:T,v:Ce.SDK_VERSION,eventId:G};if(d instanceof q1){d.setDefaultLanguage(w.languageCode),Le.providerId=d.providerId||"",(0,K.xb)(d.getCustomParameters())||(Le.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Wt,cn]of Object.entries(J||{}))Le[Wt]=cn}if(d instanceof A1){const Wt=d.getScopes().filter(cn=>""!==cn);Wt.length>0&&(Le.scopes=Wt.join(","))}w.tenantId&&(Le.tid=w.tenantId);const lt=Le;for(const Wt of Object.keys(lt))void 0===lt[Wt]&&delete lt[Wt];return`${function k4({config:w}){return w.emulator?Nt(w,e4):`https://${w.authDomain}/${ba}`}(w)}?${(0,K.xO)(lt).slice(1)}`}const t4="webStorageSupport",Ka=class Sc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dr,this._completeRedirectFn=Bt,this._overrideRedirectResult=I}_openPopup(d,v,T,G){var J=this;return(0,S.Z)(function*(){var Le;zt(null===(Le=J.eventManagers[d._key()])||void 0===Le?void 0:Le.manager,"_initialize() not called before _openPopup()");const lt=_s(d,v,T,Qe(),G);return function Mc(w,d,v,T=yr,G=Sr){const J=Math.max((window.screen.availHeight-G)/2,0).toString(),Le=Math.max((window.screen.availWidth-T)/2,0).toString();let lt="";const Wt=Object.assign(Object.assign({},Jc),{width:T.toString(),height:G.toString(),top:J,left:Le}),cn=(0,K.z$)().toLowerCase();v&&(lt=pn(cn)?Jo:v),jt(cn)&&(d=d||bc,Wt.scrollbars="yes");const Kn=Object.entries(Wt).reduce((M1,[o2,cc])=>`${M1}${o2}=${cc},`,"");if(function xe(w=(0,K.z$)()){var d;return be(w)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(cn)&&"_self"!==lt)return function ta(w,d){const v=document.createElement("a");v.href=w,v.target=d;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(T)}(d||"",lt),new po(null);const zn=window.open(d||"",lt,Kn);H(zn,w,"popup-blocked");try{zn.focus()}catch{}return new po(zn)}(d,lt,Zn())})()}_openRedirect(d,v,T,G){var J=this;return(0,S.Z)(function*(){return yield J._originValidation(d),function Ei(w){Fn().location.href=w}(_s(d,v,T,Qe(),G)),new Promise(()=>{})})()}_initialize(d){const v=d._key();if(this.eventManagers[v]){const{manager:G,promise:J}=this.eventManagers[v];return G?Promise.resolve(G):(zt(J,"If manager is not set, promise should be"),J)}const T=this.initAndGetManager(d);return this.eventManagers[v]={promise:T},T.catch(()=>{delete this.eventManagers[v]}),T}initAndGetManager(d){var v=this;return(0,S.Z)(function*(){const T=yield function Ic(w){return Za.apply(this,arguments)}(d),G=new Ns(d);return T.register("authEvent",J=>(H(J?.authEvent,d,"invalid-auth-event"),{status:G.onEvent(J.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[d._key()]={manager:G},v.iframes[d._key()]=T,G})()}_isIframeWebStorageSupported(d,v){this.iframes[d._key()].send(t4,{type:t4},G=>{var J;const Le=null===(J=G?.[0])||void 0===J?void 0:J[t4];void 0!==Le&&v(!!Le),pt(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const v=d._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function ea(w){return fo.apply(this,arguments)}(d)),this.originValidationPromises[v]}get _shouldInitProactively(){return Jt()||yn()||be()}};class Do{constructor(d){this.factorId=d}_process(d,v,T){switch(v.type){case"enroll":return this._finalizeEnroll(d,v.credential,T);case"signin":return this._finalizeSignIn(d,v.credential);default:return Be("unexpected MultiFactorSessionType")}}}class qa extends Do{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new qa(d)}_finalizeEnroll(d,v,T){return function qs(w,d){return $t(w,"POST","/v2/accounts/mfaEnrollment:finalize",Ft(w,d))}(d,{idToken:v,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,v){return function Ui(w,d){return $t(w,"POST","/v2/accounts/mfaSignIn:finalize",Ft(w,d))}(d,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let mo=(()=>{class w{constructor(){}static assertion(v){return qa._fromCredential(v)}}return w.FACTOR_ID="phone",w})();var Ya="@firebase/auth";class n4{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var v=this;return(0,S.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const v=this.auth.onIdTokenChanged(T=>{d(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,v),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const v=this.internalListeners.get(d);v&&(this.internalListeners.delete(d),v(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Li(){return window}(0,K.Pz)("authIdTokenMaxAge"),function A2(w){(0,Ce._registerComponent)(new te.wA("auth",(d,{options:v})=>{const T=d.getProvider("app").getImmediate(),G=d.getProvider("heartbeat"),{apiKey:J,authDomain:Le}=T.options;return((lt,Wt)=>{H(J&&!J.includes(":"),"invalid-api-key",{appName:lt.name}),H(!Le?.includes(":"),"argument-error",{appName:lt.name});const cn={apiKey:J,authDomain:Le,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dr(w)},Kn=new ss(lt,Wt,cn);return function Ve(w,d){const v=d?.persistence||[],T=(Array.isArray(v)?v:[v]).map(Zt);d?.errorMap&&w._updateErrorMap(d.errorMap),w._initializeWithPersistence(T,d?.popupRedirectResolver)}(Kn,v),Kn})(T,G)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,v,T)=>{d.getProvider("auth-internal").initialize()})),(0,Ce._registerComponent)(new te.wA("auth-internal",d=>{const v=wr(d.getProvider("auth").getImmediate());return new n4(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ce.registerVersion)(Ya,"0.21.3",function Rr(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,Ce.registerVersion)(Ya,"0.21.3","esm2017")}("Browser");const O4=2e3;function r4(){return r4=(0,S.Z)(function*(w,d,v){var T;const{BuildInfo:G}=Li();zt(d.sessionId,"AuthEvent did not contain a session ID");const J=yield function Ac(w){return go.apply(this,arguments)}(d.sessionId),Le={};return be()?Le.ibi=G.packageName:Ot()?Le.apn=G.packageName:pt(w,"operation-not-supported-in-this-environment"),G.displayName&&(Le.appDisplayName=G.displayName),Le.sessionId=J,_s(w,v,d.type,void 0,null!==(T=d.eventId)&&void 0!==T?T:void 0,Le)}),r4.apply(this,arguments)}function e2(){return(e2=(0,S.Z)(function*(w){const{BuildInfo:d}=Li(),v={};be()?v.iosBundleId=d.packageName:Ot()?v.androidPackageName=d.packageName:pt(w,"operation-not-supported-in-this-environment"),yield Ls(w,v)})).apply(this,arguments)}function p2(){return(p2=(0,S.Z)(function*(w,d,v){const{cordova:T}=Li();let G=()=>{};try{yield new Promise((J,Le)=>{let lt=null;function Wt(){var zn;J();const M1=null===(zn=T.plugins.browsertab)||void 0===zn?void 0:zn.close;"function"==typeof M1&&M1(),"function"==typeof v?.close&&v.close()}function cn(){lt||(lt=window.setTimeout(()=>{Le(nt(w,"redirect-cancelled-by-user"))},O4))}function Kn(){"visible"===document?.visibilityState&&cn()}d.addPassiveListener(Wt),document.addEventListener("resume",cn,!1),Ot()&&document.addEventListener("visibilitychange",Kn,!1),G=()=>{d.removePassiveListener(Wt),document.removeEventListener("resume",cn,!1),document.removeEventListener("visibilitychange",Kn,!1),lt&&window.clearTimeout(lt)}})}finally{G()}})).apply(this,arguments)}function go(){return(go=(0,S.Z)(function*(w){const d=function xc(w){if(zt(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(w);const d=new ArrayBuffer(w.length),v=new Uint8Array(d);for(let T=0;T<w.length;T++)v[T]=w.charCodeAt(T);return v}(w),v=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(v)).map(G=>G.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const jo=20;class vo extends Ns{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(d)),super.onEvent(d)}initialized(){var d=this;return(0,S.Z)(function*(){yield d.initPromise})()}}function ia(w){return t2.apply(this,arguments)}function t2(){return(t2=(0,S.Z)(function*(w){const d=yield sa()._get(F2(w));return d&&(yield sa()._remove(F2(w))),d})).apply(this,arguments)}function s4(){const w=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<jo;v++){const T=Math.floor(Math.random()*d.length);w.push(d.charAt(T))}return w.join("")}function sa(){return Zt(vt)}function F2(w){return ge("authEvent",w.config.apiKey,w.name)}function n2(w){if(!w?.includes("?"))return{};const[d,...v]=w.split("?");return(0,K.zd)(v.join("?"))}const c4=class a4{constructor(){this._redirectPersistence=dr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Bt,this._overrideRedirectResult=I}_initialize(d){var v=this;return(0,S.Z)(function*(){const T=d._key();let G=v.eventManagers.get(T);return G||(G=new vo(d),v.eventManagers.set(T,G),v.attachCallbackListeners(d,G)),G})()}_openPopup(d){pt(d,"operation-not-supported-in-this-environment")}_openRedirect(d,v,T,G){var J=this;return(0,S.Z)(function*(){!function V4(w){var d,v,T,G,J,Le,lt,Wt,cn,Kn;const zn=Li();H("function"==typeof(null===(d=zn?.universalLinks)||void 0===d?void 0:d.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),H(typeof(null===(v=zn?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),H("function"==typeof(null===(J=null===(G=null===(T=zn?.cordova)||void 0===T?void 0:T.plugins)||void 0===G?void 0:G.browsertab)||void 0===J?void 0:J.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(Wt=null===(lt=null===(Le=zn?.cordova)||void 0===Le?void 0:Le.plugins)||void 0===lt?void 0:lt.browsertab)||void 0===Wt?void 0:Wt.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(Kn=null===(cn=zn?.cordova)||void 0===cn?void 0:cn.InAppBrowser)||void 0===Kn?void 0:Kn.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const Le=yield J._initialize(d);yield Le.initialized(),Le.resetRedirect(),function Qc(){ys.clear()}(),yield J._originValidation(d);const lt=function Qa(w,d,v=null){return{type:d,eventId:v,urlResponse:null,sessionId:s4(),postBody:null,tenantId:w.tenantId,error:nt(w,"no-auth-event")}}(d,T,G);yield function ra(w,d){return sa()._set(F2(w),d)}(d,lt);const Wt=yield function bi(w,d,v){return r4.apply(this,arguments)}(d,lt,v),cn=yield function H2(w){const{cordova:d}=Li();return new Promise(v=>{d.plugins.browsertab.isAvailable(T=>{let G=null;T?d.plugins.browsertab.openUrl(w):G=d.InAppBrowser.open(w,function se(w=(0,K.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),v(G)})})}(Wt);return function Tc(w,d,v){return p2.apply(this,arguments)}(d,Le,cn)})()}_isIframeWebStorageSupported(d,v){throw new Error("Method not implemented.")}_originValidation(d){const v=d._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function i4(w){return e2.apply(this,arguments)}(d)),this.originValidationPromises[v]}attachCallbackListeners(d,v){const{universalLinks:T,handleOpenURL:G,BuildInfo:J}=Li(),Le=setTimeout((0,S.Z)(function*(){yield ia(d),v.onEvent(Xa())}),500),lt=function(){var Kn=(0,S.Z)(function*(zn){clearTimeout(Le);const M1=yield ia(d);let o2=null;M1&&zn?.url&&(o2=function k1(w,d){var v,T;const G=function Ma(w){const d=n2(w),v=d.link?decodeURIComponent(d.link):void 0,T=n2(v).link,G=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return n2(G).link||G||T||v||w}(d);if(G.includes("/__/auth/callback")){const J=n2(G),Le=J.firebaseError?function o4(w){try{return JSON.parse(w)}catch{return null}}(decodeURIComponent(J.firebaseError)):null,lt=null===(T=null===(v=Le?.code)||void 0===v?void 0:v.split("auth/"))||void 0===T?void 0:T[1],Wt=lt?nt(lt):null;return Wt?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:Wt,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:G,postBody:null}}return null}(M1,zn.url)),v.onEvent(o2||Xa())});return function(M1){return Kn.apply(this,arguments)}}();typeof T<"u"&&"function"==typeof T.subscribe&&T.subscribe(null,lt);const Wt=G,cn=`${J.packageName.toLowerCase()}://`;Li().handleOpenURL=function(){var Kn=(0,S.Z)(function*(zn){if(zn.toLowerCase().startsWith(cn)&&lt({url:zn}),"function"==typeof Wt)try{Wt(zn)}catch(M1){console.error(M1)}});return function(zn){return Kn.apply(this,arguments)}}()}};function Xa(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:nt("no-auth-event")}}const U2=1e3;function oa(){var w;return(null===(w=self?.location)||void 0===w?void 0:w.protocol)||null}function B2(w=(0,K.z$)()){return!("file:"!==oa()&&"ionic:"!==oa()&&"capacitor:"!==oa()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function G1(){try{const w=self.localStorage,d=Zn();if(w)return w.setItem(d,"1"),w.removeItem(d),!function Da(w=(0,K.z$)()){return function j2(){return(0,K.w1)()&&11===document?.documentMode}()||function yo(w=(0,K.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,K.hl)()}catch{return r2()&&(0,K.hl)()}return!1}function r2(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function aa(){return(function ec(){return"http:"===oa()||"https:"===oa()}()||(0,K.ru)()||B2())&&!function W1(){return(0,K.b$)()||(0,K.UG)()}()&&G1()&&!r2()}function $2(){return B2()&&typeof document<"u"}function tc(){return(tc=(0,S.Z)(function*(){return!!$2()&&new Promise(w=>{const d=setTimeout(()=>{w(!1)},U2);document.addEventListener("deviceready",()=>{clearTimeout(d),w(!0)})})})).apply(this,arguments)}const ts={LOCAL:"local",NONE:"none",SESSION:"session"},$o=H,nc="persistence";function ca(w){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,S.Z)(function*(w){yield w._initializationPromise;const d=g2(),v=ge(nc,w.config.apiKey,w.name);d&&d.setItem(v,w._getPersistence())})).apply(this,arguments)}function g2(){var w;try{return(null===(w=function Zi(){return typeof window<"u"?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch{return null}}const To=H;class Wo{constructor(){this.browserResolver=Zt(Ka),this.cordovaResolver=Zt(c4),this.underlyingResolver=null,this._redirectPersistence=dr,this._completeRedirectFn=Bt,this._overrideRedirectResult=I}_initialize(d){var v=this;return(0,S.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,v,T,G){var J=this;return(0,S.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openPopup(d,v,T,G)})()}_openRedirect(d,v,T,G){var J=this;return(0,S.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openRedirect(d,v,T,G)})()}_isIframeWebStorageSupported(d,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,v)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return $2()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return To(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,S.Z)(function*(){if(d.underlyingResolver)return;const v=yield function m2(){return tc.apply(this,arguments)}();d.underlyingResolver=v?d.cordovaResolver:d.browserResolver})()}}function ic(w){return w.unwrap()}function x2(w){return l4(w)}function l4(w){const{_tokenResponse:d}=w instanceof K.ZR?w.customData:w;if(!d)return null;if(!(w instanceof K.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return As.credentialFromResult(w);const v=d.providerId;if(!v||v===ke.PASSWORD)return null;let T;switch(v){case ke.GOOGLE:T=Es;break;case ke.FACEBOOK:T=Hs;break;case ke.GITHUB:T=Is;break;case ke.TWITTER:T=Lo;break;default:const{oauthIdToken:G,oauthAccessToken:J,oauthTokenSecret:Le,pendingToken:lt,nonce:Wt}=d;return J||Le||G||lt?lt?v.startsWith("saml.")?jr._create(v,lt):Pe._fromParams({providerId:v,signInMethod:v,pendingToken:lt,idToken:G,accessToken:J}):new eo(v).credential({idToken:G,accessToken:J,rawNonce:Wt}):null}return w instanceof K.ZR?T.credentialFromError(w):T.credentialFromResult(w)}function mr(w,d){return d.catch(v=>{throw v instanceof K.ZR&&function N2(w,d){var v;const T=null===(v=d.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new Rc(w,function Fi(w,d){var v;const T=(0,K.m9)(w),G=d;return H(d.customData.operationType,T,"argument-error"),H(null===(v=G.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,T,"argument-error"),Ko._fromError(T,G)}(w,d));else if(T){const G=l4(d),J=d;G&&(J.credential=G,J.tenantId=T.tenantId||void 0,J.email=T.email||void 0,J.phoneNumber=T.phoneNumber||void 0)}}(w,v),v}).then(v=>{const G=v.user;return{operationType:v.operationType,credential:x2(v),additionalUserInfo:Ar(v),user:zs.getOrCreate(G)}})}function Hr(w,d){return zc.apply(this,arguments)}function zc(){return(zc=(0,S.Z)(function*(w,d){const v=yield d;return{verificationId:v.verificationId,confirm:T=>mr(w,v.confirm(T))}})).apply(this,arguments)}class Rc{constructor(d,v){this.resolver=v,this.auth=function Aa(w){return w.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return mr(ic(this.auth),this.resolver.resolveSignIn(d))}}class zs{constructor(d){this._delegate=d,this.multiFactor=function Ro(w){const d=(0,K.m9)(w);return f1.has(d)||f1.set(d,ds._fromUser(d)),f1.get(d)}(d)}static getOrCreate(d){return zs.USER_MAP.has(d)||zs.USER_MAP.set(d,new zs(d)),zs.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var v=this;return(0,S.Z)(function*(){return mr(v.auth,Er(v._delegate,d))})()}linkWithPhoneNumber(d,v){var T=this;return(0,S.Z)(function*(){return Hr(T.auth,function Ln(w,d,v){return Fo.apply(this,arguments)}(T._delegate,d,v))})()}linkWithPopup(d){var v=this;return(0,S.Z)(function*(){return mr(v.auth,function Xe(w,d,v){return n1.apply(this,arguments)}(v._delegate,d,Wo))})()}linkWithRedirect(d){var v=this;return(0,S.Z)(function*(){return yield ca(wr(v.auth)),he(v._delegate,d,Wo)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var v=this;return(0,S.Z)(function*(){return mr(v.auth,ji(v._delegate,d))})()}reauthenticateWithPhoneNumber(d,v){return Hr(this.auth,function ar(w,d,v){return b2.apply(this,arguments)}(this._delegate,d,v))}reauthenticateWithPopup(d){return mr(this.auth,function M2(w,d,v){return S2.apply(this,arguments)}(this._delegate,d,Wo))}reauthenticateWithRedirect(d){var v=this;return(0,S.Z)(function*(){return yield ca(wr(v.auth)),M(v._delegate,d,Wo)})()}sendEmailVerification(d){return function W(w,d){return ee.apply(this,arguments)}(this._delegate,d)}unlink(d){var v=this;return(0,S.Z)(function*(){return yield function _i(w,d){return us.apply(this,arguments)}(v._delegate,d),v})()}updateEmail(d){return function qt(w,d){return Yn((0,K.m9)(w),d,null)}(this._delegate,d)}updatePassword(d){return function Pn(w,d){return Yn((0,K.m9)(w),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function h2(w,d){return Xo.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function ht(w,d){return st.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,v){return function oe(w,d,v){return ae.apply(this,arguments)}(this._delegate,d,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}zs.USER_MAP=new WeakMap;const la=H;let ns=(()=>{class w{constructor(v,T){if(this.app=v,T.isInitialized())return this._delegate=T.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:G}=v.options;la(G,"invalid-api-key",{appName:v.name}),la(G,"invalid-api-key",{appName:v.name});const J=typeof window<"u"?Wo:void 0;this._delegate=T.initialize({options:{persistence:xa(G,v.name),popupRedirectResolver:J}}),this._delegate._updateErrorMap(Pt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?zs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,T){!function os(w,d,v){const T=wr(w);H(T._canInitEmulator,T,"emulator-config-failed"),H(/^https?:\/\//.test(d),T,"invalid-emulator-scheme");const G=!!v?.disableWarnings,J=H1(d),{host:Le,port:lt}=function D1(w){const d=H1(w),v=/(\/\/)?([^?#/]+)/.exec(w.substr(d.length));if(!v)return{host:"",port:null};const T=v[2].split("@").pop()||"",G=/^(\[[^\]]+\])(:|$)/.exec(T);if(G){const J=G[1];return{host:J,port:tr(T.substr(J.length+1))}}{const[J,Le]=T.split(":");return{host:J,port:tr(Le)}}}(d);T.config.emulator={url:`${J}//${Le}${null===lt?"":`:${lt}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:Le,port:lt,protocol:J.replace(":",""),options:Object.freeze({disableWarnings:G})}),G||function li(){function w(){const d=document.createElement("p"),v=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}(this._delegate,v,T)}applyActionCode(v){return function fs(w,d){return sr.apply(this,arguments)}(this._delegate,v)}checkActionCode(v){return F1(this._delegate,v)}confirmPasswordReset(v,T){return function ro(w,d,v){return sn.apply(this,arguments)}(this._delegate,v,T)}createUserWithEmailAndPassword(v,T){var G=this;return(0,S.Z)(function*(){return mr(G._delegate,function $s(w,d,v){return X1.apply(this,arguments)}(G._delegate,v,T))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return function Zo(w,d){return Ws.apply(this,arguments)}(this._delegate,v)}isSignInWithEmailLink(v){return function U1(w,d){return"EMAIL_SIGNIN"===Co.parseLink(d)?.operation}(0,v)}getRedirectResult(){var v=this;return(0,S.Z)(function*(){la(aa(),v._delegate,"operation-not-supported-in-this-environment");const T=yield function Qt(w,d){return on.apply(this,arguments)}(v._delegate,Wo);return T?mr(v._delegate,Promise.resolve(T)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function H4(w,d){wr(w)._logFramework(d)}(this._delegate,v)}onAuthStateChanged(v,T,G){const{next:J,error:Le,complete:lt}=sc(v,T,G);return this._delegate.onAuthStateChanged(J,Le,lt)}onIdTokenChanged(v,T,G){const{next:J,error:Le,complete:lt}=sc(v,T,G);return this._delegate.onIdTokenChanged(J,Le,lt)}sendSignInLinkToEmail(v,T){return function hr(w,d,v){return Wi.apply(this,arguments)}(this._delegate,v,T)}sendPasswordResetEmail(v,T){return function Oi(w,d,v){return Rn.apply(this,arguments)}(this._delegate,v,T||void 0)}setPersistence(v){var T=this;return(0,S.Z)(function*(){let G;switch(function rc(w,d){$o(Object.values(ts).includes(d),w,"invalid-persistence-type"),(0,K.b$)()?$o(d!==ts.SESSION,w,"unsupported-persistence-type"):(0,K.UG)()?$o(d===ts.NONE,w,"unsupported-persistence-type"):r2()?$o(d===ts.NONE||d===ts.LOCAL&&(0,K.hl)(),w,"unsupported-persistence-type"):$o(d===ts.NONE||G1(),w,"unsupported-persistence-type")}(T._delegate,v),v){case ts.SESSION:G=dr;break;case ts.LOCAL:G=(yield Zt(ko)._isAvailable())?ko:vt;break;case ts.NONE:G=ie;break;default:return pt("argument-error",{appName:T._delegate.name})}return T._delegate.setPersistence(G)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return mr(this._delegate,function cs(w){return x1.apply(this,arguments)}(this._delegate))}signInWithCredential(v){return mr(this._delegate,Cr(this._delegate,v))}signInWithCustomToken(v){return mr(this._delegate,function L1(w,d){return Ci.apply(this,arguments)}(this._delegate,v))}signInWithEmailAndPassword(v,T){return mr(this._delegate,function it(w,d,v){return Cr((0,K.m9)(w),o1.credential(d,v))}(this._delegate,v,T))}signInWithEmailLink(v,T){return mr(this._delegate,function Qi(w,d,v){return Ms.apply(this,arguments)}(this._delegate,v,T))}signInWithPhoneNumber(v,T){return Hr(this._delegate,function Qr(w,d,v){return Vr.apply(this,arguments)}(this._delegate,v,T))}signInWithPopup(v){var T=this;return(0,S.Z)(function*(){return la(aa(),T._delegate,"operation-not-supported-in-this-environment"),mr(T._delegate,function lo(w,d,v){return uo.apply(this,arguments)}(T._delegate,v,Wo))})()}signInWithRedirect(v){var T=this;return(0,S.Z)(function*(){return la(aa(),T._delegate,"operation-not-supported-in-this-environment"),yield ca(T._delegate),N(T._delegate,v,Wo)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return function io(w,d){return Eo.apply(this,arguments)}(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=ts,w})();function sc(w,d,v){let T=w;"function"!=typeof w&&({next:T,error:d,complete:v}=w);const G=T;return{next:Le=>G(Le&&zs.getOrCreate(Le)),error:d,complete:v}}function xa(w,d){const v=function Ta(w,d){const v=g2();if(!v)return[];const T=ge(nc,w,d);switch(v.getItem(T)){case ts.NONE:return[ie];case ts.LOCAL:return[ko,dr];case ts.SESSION:return[dr];default:return[]}}(w,d);if(typeof self<"u"&&!v.includes(ko)&&v.push(ko),typeof window<"u")for(const T of[vt,dr])v.includes(T)||v.push(T);return v.includes(ie)||v.push(ie),v}class oc{constructor(){this.providerId="phone",this._delegate=new As(ic(B.Z.auth()))}static credential(d,v){return As.credential(d,v)}verifyPhoneNumber(d,v){return this._delegate.verifyPhoneNumber(d,v)}unwrap(){return this._delegate}}oc.PHONE_SIGN_IN_METHOD=As.PHONE_SIGN_IN_METHOD,oc.PROVIDER_ID=As.PROVIDER_ID;const s2=H;class W2{constructor(d,v,T=B.Z.app()){var G;s2(null===(G=T.options)||void 0===G?void 0:G.apiKey,"invalid-api-key",{appName:T.name}),this._delegate=new Ho(d,v,T.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function y6(w){w.INTERNAL.registerComponent(new te.wA("auth-compat",d=>{const v=d.getProvider("app-compat").getImmediate(),T=d.getProvider("auth");return new ns(v,T)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Se_EMAIL_SIGNIN,PASSWORD_RESET:Se_PASSWORD_RESET,RECOVER_EMAIL:Se_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Se_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Se_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Se_VERIFY_EMAIL}},EmailAuthProvider:o1,FacebookAuthProvider:Hs,GithubAuthProvider:Is,GoogleAuthProvider:Es,OAuthProvider:eo,SAMLAuthProvider:yi,PhoneAuthProvider:oc,PhoneMultiFactorGenerator:mo,RecaptchaVerifier:W2,TwitterAuthProvider:Lo,Auth:ns,AuthCredential:Nr,Error:K.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.3.3")}(B.Z)},8766:(rn,Ke,j)=>{j.d(Ke,{Lj:()=>pt,X3:()=>Et});var S=j(5861);const B=(H,Be)=>Be.some(zt=>H instanceof zt);let K,Ce;const te=new WeakMap,Re=new WeakMap,ke=new WeakMap,de=new WeakMap,me=new WeakMap;let Fe={get(H,Be,zt){if(H instanceof IDBTransaction){if("done"===Be)return Re.get(H);if("objectStoreNames"===Be)return H.objectStoreNames||ke.get(H);if("store"===Be)return zt.objectStoreNames[1]?void 0:zt.objectStore(zt.objectStoreNames[0])}return ut(H[Be])},set:(H,Be,zt)=>(H[Be]=zt,!0),has:(H,Be)=>H instanceof IDBTransaction&&("done"===Be||"store"===Be)||Be in H};function Je(H){return"function"==typeof H?function Xt(H){return H!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ie(){return Ce||(Ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(H)?function(...Be){return H.apply(ft(this),Be),ut(te.get(this))}:function(...Be){return ut(H.apply(ft(this),Be))}:function(Be,...zt){const It=H.call(ft(this),Be,...zt);return ke.set(It,Be.sort?Be.sort():[Be]),ut(It)}}(H):(H instanceof IDBTransaction&&function Tt(H){if(Re.has(H))return;const Be=new Promise((zt,It)=>{const Zt=()=>{H.removeEventListener("complete",xt),H.removeEventListener("error",Ve),H.removeEventListener("abort",Ve)},xt=()=>{zt(),Zt()},Ve=()=>{It(H.error||new DOMException("AbortError","AbortError")),Zt()};H.addEventListener("complete",xt),H.addEventListener("error",Ve),H.addEventListener("abort",Ve)});Re.set(H,Be)}(H),B(H,function we(){return K||(K=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(H,Fe):H)}function ut(H){if(H instanceof IDBRequest)return function Se(H){const Be=new Promise((zt,It)=>{const Zt=()=>{H.removeEventListener("success",xt),H.removeEventListener("error",Ve)},xt=()=>{zt(ut(H.result)),Zt()},Ve=()=>{It(H.error),Zt()};H.addEventListener("success",xt),H.addEventListener("error",Ve)});return Be.then(zt=>{zt instanceof IDBCursor&&te.set(zt,H)}).catch(()=>{}),me.set(Be,H),Be}(H);if(de.has(H))return de.get(H);const Be=Je(H);return Be!==H&&(de.set(H,Be),me.set(Be,H)),Be}const ft=H=>me.get(H);function Et(H,Be,{blocked:zt,upgrade:It,blocking:Zt,terminated:xt}={}){const Ve=indexedDB.open(H,Be),Qe=ut(Ve);return It&&Ve.addEventListener("upgradeneeded",Ue=>{It(ut(Ve.result),Ue.oldVersion,Ue.newVersion,ut(Ve.transaction))}),zt&&Ve.addEventListener("blocked",()=>zt()),Qe.then(Ue=>{xt&&Ue.addEventListener("close",()=>xt()),Zt&&Ue.addEventListener("versionchange",()=>Zt())}).catch(()=>{}),Qe}function pt(H,{blocked:Be}={}){const zt=indexedDB.deleteDatabase(H);return Be&&zt.addEventListener("blocked",()=>Be()),ut(zt).then(()=>{})}const nt=["get","getKey","getAll","getAllKeys","count"],yt=["put","add","delete","clear"],bt=new Map;function dt(H,Be){if(!(H instanceof IDBDatabase)||Be in H||"string"!=typeof Be)return;if(bt.get(Be))return bt.get(Be);const zt=Be.replace(/FromIndex$/,""),It=Be!==zt,Zt=yt.includes(zt);if(!(zt in(It?IDBIndex:IDBObjectStore).prototype)||!Zt&&!nt.includes(zt))return;const xt=function(){var Ve=(0,S.Z)(function*(Qe,...Ue){const Ge=this.transaction(Qe,Zt?"readwrite":"readonly");let at=Ge.store;return It&&(at=at.index(Ue.shift())),(yield Promise.all([at[zt](...Ue),Zt&&Ge.done]))[0]});return function(Ue){return Ve.apply(this,arguments)}}();return bt.set(Be,xt),xt}!function Pt(H){Fe=H(Fe)}(H=>({...H,get:(Be,zt,It)=>dt(Be,zt)||H.get(Be,zt,It),has:(Be,zt)=>!!dt(Be,zt)||H.has(Be,zt)}))},5861:(rn,Ke,j)=>{function S(K,Ce,we,Ie,te,Re,ke){try{var de=K[Re](ke),me=de.value}catch(Se){return void we(Se)}de.done?Ce(me):Promise.resolve(me).then(Ie,te)}function B(K){return function(){var Ce=this,we=arguments;return new Promise(function(Ie,te){var Re=K.apply(Ce,we);function ke(me){S(Re,Ie,te,ke,de,"next",me)}function de(me){S(Re,Ie,te,ke,de,"throw",me)}ke(void 0)})}}j.d(Ke,{Z:()=>B})},1180:(rn,Ke,j)=>{function S(we){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ie){return typeof Ie}:function(Ie){return Ie&&"function"==typeof Symbol&&Ie.constructor===Symbol&&Ie!==Symbol.prototype?"symbol":typeof Ie})(we)}function Ce(we,Ie,te){return(Ie=function K(we){var Ie=function B(we,Ie){if("object"!==S(we)||null===we)return we;var te=we[Symbol.toPrimitive];if(void 0!==te){var Re=te.call(we,Ie||"default");if("object"!==S(Re))return Re;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===Ie?String:Number)(we)}(we,"string");return"symbol"===S(Ie)?Ie:String(Ie)}(Ie))in we?Object.defineProperty(we,Ie,{value:te,enumerable:!0,configurable:!0,writable:!0}):we[Ie]=te,we}j.d(Ke,{Z:()=>Ce})}},rn=>{rn(rn.s=3023)}]);